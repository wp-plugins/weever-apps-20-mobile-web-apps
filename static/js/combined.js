jQuery(document).ready(function(){jQuery('input[name="switch-x"]').click(function(){if(this.id=="on"){app_enabled=1}else{app_enabled=0}jQuery("#status-loading").show();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ajaxToggleAppStatus",nonce:jQuery("input#nonce").val(),app_enabled:app_enabled},success:function(b){console.log("OK");var a=app_enabled?"online":"offline";a="<b>"+a+"</b>";jQuery("#appStatus").html(a);jQuery("#status-loading").fadeOut()},error:function(a,b){alert(b)}})});jQuery('input[name="switch-tablet"]').click(function(){console.log("Switch tablet.");if(this.id=="on"){tablets_enabled=1}else{tablets_enabled=0}console.log(tablets_enabled);jQuery("#switch-tablet-loading").show();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ajaxToggleTabletStatus",nonce:jQuery("input#nonce").val(),tablets_enabled:tablets_enabled},success:function(b){console.log("Tablet status saved");var a=tablets_enabled?"yes":"no";jQuery("#switch-tablet-loading").fadeOut()},error:function(a,b){alert(b)}})});jQuery("#refresh_preview").on("click",function(){console.log("Refresh Clicked.");wx.refreshAppPreview()});jQuery("#refresh_preview").click(function(){console.log("Refresh Clicked.");wx.refreshAppPreview()})});window.Modernizr=function(ah,ag,af){function F(b){Y.cssText=b}function E(d,c){return F(V.join(d+";")+(c||""))}function S(d,c){return typeof d===c}function Q(d,c){return !!~(""+d).indexOf(c)}function O(g,c,j){for(var i in g){var h=c[g[i]];if(h!==af){return j===!1?g[i]:S(h,"function")?h.bind(j||c):h}}return !1}var ae="2.6.2",ad={},ac=!0,ab=ag.documentElement,aa="modernizr",Z=ag.createElement(aa),Y=Z.style,X,W={}.toString,V=" -webkit- -moz- -o- -ms- ".split(" "),U={svg:"http://www.w3.org/2000/svg"},T={},R={},P={},N=[],M=N.slice,K,J=function(v,u,t,s){var r,q,p,o,h=ag.createElement("div"),g=ag.body,b=g||ag.createElement("body");if(parseInt(t,10)){while(t--){p=ag.createElement("div"),p.id=s?s[t]:aa+(t+1),h.appendChild(p)}}return r=["&#173;",'<style id="s',aa,'">',v,"</style>"].join(""),h.id=aa,(g?h:b).innerHTML+=r,b.appendChild(h),g||(b.style.background="",b.style.overflow="hidden",o=ab.style.overflow,ab.style.overflow="hidden",ab.appendChild(b)),q=u(h,v),g?h.parentNode.removeChild(h):(b.parentNode.removeChild(b),ab.style.overflow=o),!!q},I=function(a){var f=ah.matchMedia||ah.msMatchMedia;if(f){return f(a).matches}var e;return J("@media "+a+" { #"+aa+" { position: absolute; } }",function(c){e=(ah.getComputedStyle?getComputedStyle(c,null):c.currentStyle)["position"]=="absolute"}),e},H={}.hasOwnProperty,G;!S(H,"undefined")&&!S(H.call,"undefined")?G=function(d,c){return H.call(d,c)}:G=function(d,c){return c in d&&S(d.constructor.prototype[c],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var h=this;if(typeof h!="function"){throw new TypeError}var g=M.call(arguments,1),f=function(){if(this instanceof f){var b=function(){};b.prototype=h.prototype;var d=new b,c=h.apply(d,g.concat(M.call(arguments)));return Object(c)===c?c:d}return h.apply(a,g.concat(M.call(arguments)))};return f}),T.touch=function(){var a;return"ontouchstart" in ah||ah.DocumentTouch&&ag instanceof DocumentTouch?a=!0:J(["@media (",V.join("touch-enabled),("),aa,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(b){a=b.offsetTop===9}),a},T.svg=function(){return !!ag.createElementNS&&!!ag.createElementNS(U.svg,"svg").createSVGRect},T.inlinesvg=function(){var b=ag.createElement("div");return b.innerHTML="<svg/>",(b.firstChild&&b.firstChild.namespaceURI)==U.svg},T.svgclippaths=function(){return !!ag.createElementNS&&/SVGClipPath/.test(W.call(ag.createElementNS(U.svg,"clipPath")))};for(var L in T){G(T,L)&&(K=L.toLowerCase(),ad[K]=T[L](),N.push((ad[K]?"":"no-")+K))}return ad.addTest=function(e,c){if(typeof e=="object"){for(var f in e){G(e,f)&&ad.addTest(f,e[f])}}else{e=e.toLowerCase();if(ad[e]!==af){return ad}c=typeof c=="function"?c():c,typeof ac!="undefined"&&ac&&(ab.className+=" "+(c?"":"no-")+e),ad[e]=c}return ad},F(""),Z=X=null,function(an,am){function z(f,e){var h=f.createElement("p"),g=f.getElementsByTagName("head")[0]||f.documentElement;return h.innerHTML="x<style>"+e+"</style>",g.insertBefore(h.lastChild,g.firstChild)}function y(){var b=s.elements;return typeof b=="string"?b.split(" "):b}function x(d){var c=B[d[D]];return c||(c={},C++,d[D]=C,B[C]=c),c}function w(b,h,e){h||(h=am);if(A){return h.createElement(b)}e||(e=x(h));var d;return e.cache[b]?d=e.cache[b].cloneNode():aj.test(b)?d=(e.cache[b]=e.createElem(b)).cloneNode():d=e.createElem(b),d.canHaveChildren&&!ak.test(b)?e.frag.appendChild(d):d}function v(b,l){b||(b=am);if(A){return b.createDocumentFragment()}l=l||x(b);var k=l.frag.cloneNode(),j=0,i=y(),h=i.length;for(;j<h;j++){k.createElement(i[j])}return k}function u(d,c){c.cache||(c.cache={},c.createElem=d.createElement,c.createFrag=d.createDocumentFragment,c.frag=c.createFrag()),d.createElement=function(a){return s.shivMethods?w(a,d,c):c.createElem(a)},d.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+y().join().replace(/\w+/g,function(b){return c.createElem(b),c.frag.createElement(b),'c("'+b+'")'})+");return n}")(s,c.frag)}function t(b){b||(b=am);var d=x(b);return s.shivCSS&&!ai&&!d.hasCSS&&(d.hasCSS=!!z(b,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),A||u(b,d),b}var al=an.html5||{},ak=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,aj=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,ai,D="_html5shiv",C=0,B={},A;(function(){try{var b=am.createElement("a");b.innerHTML="<xyz></xyz>",ai="hidden" in b,A=b.childNodes.length==1||function(){am.createElement("a");var c=am.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()}catch(d){ai=!0,A=!0}})();var s={elements:al.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:al.shivCSS!==!1,supportsUnknownElements:A,shivMethods:al.shivMethods!==!1,type:"default",shivDocument:t,createElement:w,createDocumentFragment:v};an.html5=s,t(am)}(this,ag),ad._version=ae,ad._prefixes=V,ad.mq=I,ad.testStyles=J,ab.className=ab.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(ac?" js "+N.join(" "):""),ad}(this,this.document),function(ad,ac,ab){function aa(b){return"[object Function]"==P.call(b)}function Z(b){return"string"==typeof b}function Y(){}function X(b){return !b||"loaded"==b||"complete"==b||"uninitialized"==b}function W(){var b=O.shift();M=1,b?b.t?R(function(){("c"==b.t?L.injectCss:L.injectJs)(b.s,0,b.a,b.x,b.e,1)},0):(b(),W()):M=0}function V(x,w,v,t,s,q,p){function n(a){if(!g&&X(h.readyState)&&(y.r=g=1,!M&&W(),h.onload=h.onreadystatechange=null,a)){"img"!=x&&R(function(){I.removeChild(h)},50);for(var c in D[w]){D[w].hasOwnProperty(c)&&D[w][c].onload()}}}var p=p||L.errorTimeout,h=ac.createElement(x),g=0,b=0,y={t:v,s:w,e:s,a:q,x:p};1===D[w]&&(b=1,D[w]=[]),"object"==x?h.data=w:(h.src=w,h.type=x),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){n.call(this,b)},O.splice(t,0,y),"img"!=x&&(b||2===D[w]?(I.insertBefore(h,J?null:Q),R(n,p)):D[w].push(h))}function U(g,e,j,i,h){return M=0,e=e||"j",Z(g)?V("c"==e?G:H,g,e,this.i++,j,i,h):(O.splice(this.i++,0,g),1==O.length&&W()),this}function T(){var b=L;return b.loader={load:U,i:0},b}var S=ac.documentElement,R=ad.setTimeout,Q=ac.getElementsByTagName("script")[0],P={}.toString,O=[],M=0,K="MozAppearance" in S.style,J=K&&!!ac.createRange().compareNode,I=J?S:Q.parentNode,S=ad.opera&&"[object Opera]"==P.call(ad.opera),S=!!ac.attachEvent&&!S,H=K?"object":S?"script":"img",G=S?"script":H,F=Array.isArray||function(b){return"[object Array]"==P.call(b)},E=[],D={},C={timeout:function(d,c){return c.length&&(d.timeout=c[0]),d}},N,L;L=function(e){function c(i){var i=i.split("!"),h=E.length,r=i.pop(),q=i.length,r={url:r,origUrl:r,prefixes:i},p,l,j;for(l=0;l<q;l++){j=i[l].split("="),(p=C[j.shift()])&&(r=p(r,j))}for(l=0;l<h;l++){r=E[l](r)}return r}function o(b,t,s,r,q){var p=c(b),l=p.autoCallback;p.url.split(".").pop().split("?").shift(),p.bypass||(t&&(t=aa(t)?t:t[b]||t[r]||t[b.split("/").pop().split("?")[0]]),p.instead?p.instead(b,t,s,r,q):(D[p.url]?p.noexec=!0:D[p.url]=1,s.load(p.url,p.forceCSS||!p.forceJS&&"css"==p.url.split(".").pop().split("?").shift()?"c":ab,p.noexec,p.attrs,p.timeout),(aa(t)||aa(l))&&s.load(function(){T(),t&&t(p.origUrl,q,r),l&&l(p.origUrl,q,r),D[p.url]=2})))}function n(x,w){function v(b,h){if(b){if(Z(b)){h||(s=function(){var i=[].slice.call(arguments);r.apply(this,i),q()}),o(b,s,w,0,u)}else{if(Object(b)===b){for(g in p=function(){var a=0,i;for(i in b){b.hasOwnProperty(i)&&a++}return a}(),b){b.hasOwnProperty(g)&&(!h&&!--p&&(aa(s)?s=function(){var i=[].slice.call(arguments);r.apply(this,i),q()}:s[g]=function(i){return function(){var a=[].slice.call(arguments);i&&i.apply(this,a),q()}}(r[g])),o(b[g],s,w,g,u))}}}}else{!h&&q()}}var u=!!x.test,t=x.load||x.both,s=x.callback||Y,r=s,q=x.complete||Y,p,g;v(u?x.yep:x.nope,!!t),t&&v(t)}var k,f,d=this.yepnope.loader;if(Z(e)){o(e,0,d,0)}else{if(F(e)){for(k=0;k<e.length;k++){f=e[k],Z(f)?o(f,0,d,0):F(f)?L(f):Object(f)===f&&n(f,d)}}else{Object(e)===e&&n(e,d)}}},L.addPrefix=function(d,c){C[d]=c},L.addFilter=function(b){E.push(b)},L.errorTimeout=10000,null==ac.readyState&&ac.addEventListener&&(ac.readyState="loading",ac.addEventListener("DOMContentLoaded",N=function(){ac.removeEventListener("DOMContentLoaded",N,0),ac.readyState="complete"},0)),ad.yepnope=T(),ad.yepnope.executeStack=W,ad.yepnope.injectJs=function(s,r,q,p,n,h){var g=ac.createElement("script"),f,b,p=p||L.errorTimeout;g.src=s;for(b in q){g.setAttribute(b,q[b])}r=h?W:r||Y,g.onreadystatechange=g.onload=function(){!f&&X(g.readyState)&&(f=1,r(),g.onload=g.onreadystatechange=null)},R(function(){f||(f=1,r(1))},p),n?g.onload():Q.parentNode.insertBefore(g,Q)},ad.yepnope.injectCss=function(b,o,n,l,k,h){var l=ac.createElement("link"),f,o=h?W:o||Y;l.href=b,l.rel="stylesheet",l.type="text/css";for(f in n){l.setAttribute(f,n[f])}k||(Q.parentNode.insertBefore(l,Q),R(o,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("ie8compat",function(){return !window.addEventListener&&document.documentMode&&document.documentMode===7});var jscolor={dir:wx.pluginUrl+"static/js/jscolor/",bindClass:"color",binding:false,preloading:true,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=a!==false?a:"jscolor/"}return jscolor.dir},detectDir:function(){var c=location.href;var d=document.getElementsByTagName("base");for(var a=0;a<d.length;a+=1){if(d[a].href){c=d[a].href}}var d=document.getElementsByTagName("script");for(var a=0;a<d.length;a+=1){if(d[a].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(d[a].src)){var f=new jscolor.URI(d[a].src);var b=f.toAbsolute(c);b.path=b.path.replace(/[^\/]+$/,"");b.query=null;b.fragment=null;return b.toString()}}return false},bind:function(){var d=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i");var f=document.getElementsByTagName("input");for(var c=0;c<f.length;c+=1){var b;if(!f[c].color&&f[c].className&&(b=f[c].className.match(d))){var g={};if(b[3]){try{g=(new Function("return ("+b[3]+")"))()}catch(a){}}f[c].color=new jscolor.color(f[c],g)}}},preload:function(){for(var a in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(a)){jscolor.loadImage(a)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=true},loadImage:function(a){if(!jscolor.imgLoaded[a]){jscolor.imgLoaded[a]=new Image();jscolor.imgLoaded[a].src=jscolor.getDir()+a}},fetchElement:function(a){return typeof a==="string"?document.getElementById(a):a},addEvent:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}},fireEvent:function(a,c){if(!a){return}if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent(c,true,true);a.dispatchEvent(b)}else{if(document.createEventObject){var b=document.createEventObject();a.fireEvent("on"+c,b)}else{if(a["on"+c]){a["on"+c]()}}}},getElementPos:function(c){var d=c,b=c;var a=0,f=0;if(d.offsetParent){do{a+=d.offsetLeft;f+=d.offsetTop}while(d=d.offsetParent)}while((b=b.parentNode)&&b.nodeName.toUpperCase()!=="BODY"){a-=b.scrollLeft;f-=b.scrollTop}return[a,f]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(b){var a=0,c=0;if(!b){b=window.event}if(typeof b.offsetX==="number"){a=b.offsetX;c=b.offsetY}else{if(typeof b.layerX==="number"){a=b.layerX;c=b.layerY}}return{x:a,y:c}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}}}},URI:function(a){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(d){var c=d.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=c[3]?c[2]:null;this.authority=c[5]?c[6]:null;this.path=c[7];this.query=c[9]?c[10]:null;this.fragment=c[12]?c[13]:null;return this};this.toString=function(){var c="";if(this.scheme!==null){c=c+this.scheme+":"}if(this.authority!==null){c=c+"//"+this.authority}if(this.path!==null){c=c+this.path}if(this.query!==null){c=c+"?"+this.query}if(this.fragment!==null){c=c+"#"+this.fragment}return c};this.toAbsolute=function(e){var e=new jscolor.URI(e);var d=this;var c=new jscolor.URI;if(e.scheme===null){return false}if(d.scheme!==null&&d.scheme.toLowerCase()===e.scheme.toLowerCase()){d.scheme=null}if(d.scheme!==null){c.scheme=d.scheme;c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.authority!==null){c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.path===""){c.path=e.path;if(d.query!==null){c.query=d.query}else{c.query=e.query}}else{if(d.path.substr(0,1)==="/"){c.path=b(d.path)}else{if(e.authority!==null&&e.path===""){c.path="/"+d.path}else{c.path=e.path.replace(/[^\/]+$/,"")+d.path}c.path=b(c.path)}c.query=d.query}c.authority=e.authority}c.scheme=e.scheme}c.fragment=d.fragment;return c};function b(e){var c="";while(e){if(e.substr(0,3)==="../"||e.substr(0,2)==="./"){e=e.replace(/^\.+/,"").substr(1)}else{if(e.substr(0,3)==="/./"||e==="/."){e="/"+e.substr(3)}else{if(e.substr(0,4)==="/../"||e==="/.."){e="/"+e.substr(4);c=c.replace(/\/?[^\/]*$/,"")}else{if(e==="."||e===".."){e=""}else{var d=e.match(/^\/?[^\/]*/)[0];e=e.substr(d.length);c=c+d}}}}}return c}if(a){this.parse(a)}},color:function(D,d){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=D;this.styleElement=D;this.onImmediateChange=null;this.onClose=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=10000;for(var t in d){if(d.hasOwnProperty(t)){this[t]=d[t]}}this.hidePicker=function(){if(v()){g()}};this.showPicker=function(){if(!v()){var M=jscolor.getElementPos(D);var J=jscolor.getElementSize(D);var G=jscolor.getViewPos();var O=jscolor.getViewSize();var p=u(this);var N,L,K;switch(this.pickerPosition.toLowerCase()){case"left":N=1;L=0;K=-1;break;case"right":N=1;L=0;K=1;break;case"top":N=0;L=1;K=-1;break;default:N=0;L=1;K=1;break}var I=(J[L]+p[L])/2;if(!this.pickerSmartPosition){var H=[M[N],M[L]+J[L]-I+I*K]}else{var H=[-G[N]+M[N]+p[N]>O[N]?(-G[N]+M[N]+J[N]/2>O[N]/2&&M[N]+J[N]-p[N]>=0?M[N]+J[N]-p[N]:M[N]):M[N],-G[L]+M[L]+J[L]+p[L]-I+I*K>O[L]?(-G[L]+M[L]+J[L]/2>O[L]/2&&M[L]+J[L]-I-I*K>=0?M[L]+J[L]-I-I*K:M[L]+J[L]-I+I*K):(M[L]+J[L]-I+I*K>=0?M[L]+J[L]-I+I*K:M[L]+J[L]-I-I*K)]}k(H[N],H[L])}};this.importColor=function(){if(!a){this.exportColor()}else{if(!this.adjust){if(!this.fromString(a.value,z)){F.style.backgroundImage=F.jscStyle.backgroundImage;F.style.backgroundColor=F.jscStyle.backgroundColor;F.style.color=F.jscStyle.color;this.exportColor(z|E)}}else{if(!this.required&&/^\s*$/.test(a.value)){a.value="";F.style.backgroundImage=F.jscStyle.backgroundImage;F.style.backgroundColor=F.jscStyle.backgroundColor;F.style.color=F.jscStyle.color;this.exportColor(z|E)}else{if(this.fromString(a.value)){}else{this.exportColor()}}}}};this.exportColor=function(p){if(!(p&z)&&a){var G=this.toString();if(this.caps){G=G.toUpperCase()}if(this.hash){G="#"+G}a.value=G}if(!(p&E)&&F){F.style.backgroundImage="none";F.style.backgroundColor="#"+this.toString();F.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000"}if(!(p&w)&&v()){s()}if(!(p&e)&&v()){C()}};this.fromHSV=function(I,H,G,p){if(I!==null){I=Math.max(0,this.minH,Math.min(6,this.maxH,I))}if(H!==null){H=Math.max(0,this.minS,Math.min(1,this.maxS,H))}if(G!==null){G=Math.max(0,this.minV,Math.min(1,this.maxV,G))}this.rgb=h(I===null?this.hsv[0]:(this.hsv[0]=I),H===null?this.hsv[1]:(this.hsv[1]=H),G===null?this.hsv[2]:(this.hsv[2]=G));this.exportColor(p)};this.fromRGB=function(K,J,p,G){if(K!==null){K=Math.max(0,Math.min(1,K))}if(J!==null){J=Math.max(0,Math.min(1,J))}if(p!==null){p=Math.max(0,Math.min(1,p))}var I=A(K===null?this.rgb[0]:K,J===null?this.rgb[1]:J,p===null?this.rgb[2]:p);if(I[0]!==null){this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,I[0]))}if(I[2]!==0){this.hsv[1]=I[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,I[1]))}this.hsv[2]=I[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,I[2]));var H=h(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=H[0];this.rgb[1]=H[1];this.rgb[2]=H[2];this.exportColor(G)};this.fromString=function(H,G){var p=H.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!p){return false}else{if(p[1].length===6){this.fromRGB(parseInt(p[1].substr(0,2),16)/255,parseInt(p[1].substr(2,2),16)/255,parseInt(p[1].substr(4,2),16)/255,G)}else{this.fromRGB(parseInt(p[1].charAt(0)+p[1].charAt(0),16)/255,parseInt(p[1].charAt(1)+p[1].charAt(1),16)/255,parseInt(p[1].charAt(2)+p[1].charAt(2),16)/255,G)}return true}};this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1))};function A(K,J,G){var L=Math.min(Math.min(K,J),G);var H=Math.max(Math.max(K,J),G);var p=H-L;if(p===0){return[null,0,H]}var I=K===L?3+(G-J)/p:(J===L?5+(K-G)/p:1+(J-K)/p);return[I===6?0:I,p/H,H]}function h(J,I,G){if(J===null){return[G,G,G]}var H=Math.floor(J);var K=H%2?J-H:1-(J-H);var p=G*(1-I);var L=G*(1-I*K);switch(H){case 6:case 0:return[G,L,p];case 1:return[L,G,p];case 2:return[p,G,L];case 3:return[p,L,G];case 4:return[L,p,G];case 5:return[G,p,L]}}function g(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB);x()}function k(N,M){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(l.pickerCloseText)};for(var K=0,L=4;K<jscolor.images.sld[1];K+=L){var J=document.createElement("div");J.style.height=L+"px";J.style.fontSize="1px";J.style.lineHeight="0";jscolor.picker.sld.appendChild(J)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var G=jscolor.picker;G.box.onmouseup=G.box.onmouseout=function(){D.focus()};G.box.onmousedown=function(){o=true};G.box.onmousemove=function(p){if(c||q){c&&y(p);q&&i(p);if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}f()}};if("ontouchstart" in window){G.box.addEventListener("touchmove",function(Q){var p={offsetX:Q.touches[0].pageX-j.X,offsetY:Q.touches[0].pageY-j.Y};if(c||q){c&&y(p);q&&i(p);f()}Q.stopPropagation();Q.preventDefault()},false)}G.padM.onmouseup=G.padM.onmouseout=function(){if(c){c=false;jscolor.fireEvent(a,"change")}};G.padM.onmousedown=function(p){switch(b){case 0:if(l.hsv[2]===0){l.fromHSV(null,null,1)}break;case 1:if(l.hsv[1]===0){l.fromHSV(null,1,null)}break}q=false;c=true;y(p);f()};if("ontouchstart" in window){G.padM.addEventListener("touchstart",function(p){j={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-j.X,offsetY:p.touches[0].pageY-j.Y})})}G.sldM.onmouseup=G.sldM.onmouseout=function(){if(q){q=false;jscolor.fireEvent(a,"change")}};G.sldM.onmousedown=function(p){c=false;q=true;i(p);f()};if("ontouchstart" in window){G.sldM.addEventListener("touchstart",function(p){j={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-j.X,offsetY:p.touches[0].pageY-j.Y})})}var P=u(l);G.box.style.width=P[0]+"px";G.box.style.height=P[1]+"px";G.boxB.style.position="absolute";G.boxB.style.clear="both";G.boxB.style.left=N+"px";G.boxB.style.top=M+"px";G.boxB.style.zIndex=l.pickerZIndex;G.boxB.style.border=l.pickerBorder+"px solid";G.boxB.style.borderColor=l.pickerBorderColor;G.boxB.style.background=l.pickerFaceColor;G.pad.style.width=jscolor.images.pad[0]+"px";G.pad.style.height=jscolor.images.pad[1]+"px";G.padB.style.position="absolute";G.padB.style.left=l.pickerFace+"px";G.padB.style.top=l.pickerFace+"px";G.padB.style.border=l.pickerInset+"px solid";G.padB.style.borderColor=l.pickerInsetColor;G.padM.style.position="absolute";G.padM.style.left="0";G.padM.style.top="0";G.padM.style.width=l.pickerFace+2*l.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";G.padM.style.height=G.box.style.height;G.padM.style.cursor="crosshair";G.sld.style.overflow="hidden";G.sld.style.width=jscolor.images.sld[0]+"px";G.sld.style.height=jscolor.images.sld[1]+"px";G.sldB.style.display=l.slider?"block":"none";G.sldB.style.position="absolute";G.sldB.style.right=l.pickerFace+"px";G.sldB.style.top=l.pickerFace+"px";G.sldB.style.border=l.pickerInset+"px solid";G.sldB.style.borderColor=l.pickerInsetColor;G.sldM.style.display=l.slider?"block":"none";G.sldM.style.position="absolute";G.sldM.style.right="0";G.sldM.style.top="0";G.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+l.pickerFace+2*l.pickerInset+"px";G.sldM.style.height=G.box.style.height;try{G.sldM.style.cursor="pointer"}catch(I){G.sldM.style.cursor="hand"}function O(){var p=l.pickerInsetColor.split(/\s+/);var Q=p.length<2?p[0]:p[1]+" "+p[0]+" "+p[0]+" "+p[1];G.btn.style.borderColor=Q}G.btn.style.display=l.pickerClosable?"block":"none";G.btn.style.position="absolute";G.btn.style.left=l.pickerFace+"px";G.btn.style.bottom=l.pickerFace+"px";G.btn.style.padding="0 15px";G.btn.style.height="18px";G.btn.style.border=l.pickerInset+"px solid";O();G.btn.style.color=l.pickerButtonColor;G.btn.style.font="12px sans-serif";G.btn.style.textAlign="center";try{G.btn.style.cursor="pointer"}catch(I){G.btn.style.cursor="hand"}G.btn.onmousedown=function(){l.hidePicker()};G.btnS.style.lineHeight=G.btn.style.height;switch(b){case 0:var H="hs.png";break;case 1:var H="hv.png";break}G.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";G.padM.style.backgroundRepeat="no-repeat";G.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";G.sldM.style.backgroundRepeat="no-repeat";G.pad.style.backgroundImage="url('"+jscolor.getDir()+H+"')";G.pad.style.backgroundRepeat="no-repeat";G.pad.style.backgroundPosition="0 0";s();C();jscolor.picker.owner=l;document.getElementsByTagName("body")[0].appendChild(G.boxB)}function u(G){var p=[2*G.pickerInset+2*G.pickerFace+jscolor.images.pad[0]+(G.slider?2*G.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),G.pickerClosable?4*G.pickerInset+3*G.pickerFace+jscolor.images.pad[1]+G.pickerButtonHeight:2*G.pickerInset+2*G.pickerFace+jscolor.images.pad[1]];return p}function s(){switch(b){case 0:var I=1;break;case 1:var I=2;break}var M=Math.round((l.hsv[0]/6)*(jscolor.images.pad[0]-1));var L=Math.round((1-l.hsv[I])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(l.pickerFace+l.pickerInset+M-Math.floor(jscolor.images.cross[0]/2))+"px "+(l.pickerFace+l.pickerInset+L-Math.floor(jscolor.images.cross[1]/2))+"px";var p=jscolor.picker.sld.childNodes;switch(b){case 0:var K=h(l.hsv[0],l.hsv[1],1);for(var G=0;G<p.length;G+=1){p[G].style.backgroundColor="rgb("+(K[0]*(1-G/p.length)*100)+"%,"+(K[1]*(1-G/p.length)*100)+"%,"+(K[2]*(1-G/p.length)*100)+"%)"}break;case 1:var K,N,J=[l.hsv[2],0,0];var G=Math.floor(l.hsv[0]);var H=G%2?l.hsv[0]-G:1-(l.hsv[0]-G);switch(G){case 6:case 0:K=[0,1,2];break;case 1:K=[1,0,2];break;case 2:K=[2,0,1];break;case 3:K=[2,1,0];break;case 4:K=[1,2,0];break;case 5:K=[0,2,1];break}for(var G=0;G<p.length;G+=1){N=1-1/(p.length-1)*G;J[1]=J[0]*(1-N*H);J[2]=J[0]*(1-N);p[G].style.backgroundColor="rgb("+(J[K[0]]*100)+"%,"+(J[K[1]]*100)+"%,"+(J[K[2]]*100)+"%)"}break}}function C(){switch(b){case 0:var p=2;break;case 1:var p=1;break}var G=Math.round((1-l.hsv[p])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(l.pickerFace+l.pickerInset+G-Math.floor(jscolor.images.arrow[1]/2))+"px"}function v(){return jscolor.picker&&jscolor.picker.owner===l}function r(){if(a===D){l.importColor()}if(l.pickerOnfocus){l.hidePicker()}}function n(){if(a!==D){l.importColor()}}function y(H){var G=jscolor.getRelMousePos(H);var p=G.x-l.pickerFace-l.pickerInset;var I=G.y-l.pickerFace-l.pickerInset;switch(b){case 0:l.fromHSV(p*(6/(jscolor.images.pad[0]-1)),1-I/(jscolor.images.pad[1]-1),null,e);break;case 1:l.fromHSV(p*(6/(jscolor.images.pad[0]-1)),null,1-I/(jscolor.images.pad[1]-1),e);break}}function i(G){var p=jscolor.getRelMousePos(G);var H=p.y-l.pickerFace-l.pickerInset;switch(b){case 0:l.fromHSV(null,null,1-H/(jscolor.images.sld[1]-1),w);break;case 1:l.fromHSV(null,1-H/(jscolor.images.sld[1]-1),null,w);break}}function f(){if(l.onImmediateChange){var p;if(typeof l.onImmediateChange==="string"){p=new Function(l.onImmediateChange)}else{p=l.onImmediateChange}p.call(l)}}function x(){if(l.onClose){var p;if(typeof l.onClose==="string"){p=new Function(l.onClose)}else{p=l.onClose}p.call(l)}}var l=this;var b=this.pickerMode.toLowerCase()==="hvs"?1:0;var o=false;var a=jscolor.fetchElement(this.valueElement),F=jscolor.fetchElement(this.styleElement);var c=false,q=false,j={};var z=1<<0,E=1<<1,w=1<<2,e=1<<3;jscolor.addEvent(D,"focus",function(){if(l.pickerOnfocus){l.showPicker()}});jscolor.addEvent(D,"blur",function(){if(!o){window.setTimeout(function(){o||r();o=false},0)}else{o=false}});if(a){var B=function(){l.fromString(a.value,z);f()};jscolor.addEvent(a,"keyup",B);jscolor.addEvent(a,"input",B);jscolor.addEvent(a,"blur",n);a.setAttribute("autocomplete","off")}if(F){F.jscStyle={backgroundImage:F.style.backgroundImage,backgroundColor:F.style.backgroundColor,color:F.style.color}}switch(b){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();var libFuncName=null;if(typeof jQuery==="undefined"&&typeof Zepto==="undefined"&&typeof $==="function"){libFuncName=$}else{if(typeof jQuery==="function"){libFuncName=jQuery}else{if(typeof Zepto==="function"){libFuncName=Zepto}else{throw new TypeError()}}}(function(d,c,a,e){d("head").append('<meta class="foundation-mq-small">');d("head").append('<meta class="foundation-mq-medium">');d("head").append('<meta class="foundation-mq-large">');c.matchMedia=c.matchMedia||(function(j,k){var h,f=j.documentElement,g=f.firstElementChild||f.firstChild,i=j.createElement("body"),l=j.createElement("div");l.id="mq-test-1";l.style.cssText="position:absolute;top:-100em";i.style.background="none";i.appendChild(l);return function(n){l.innerHTML='&shy;<style media="'+n+'"> #mq-test-1 { width: 42px; }</style>';f.insertBefore(i,g);h=l.offsetWidth===42;f.removeChild(i);return{matches:h,media:n}}}(a));if(!Array.prototype.filter){Array.prototype.filter=function(g){if(this==null){throw new TypeError()}var l=Object(this),f=l.length>>>0;if(typeof g!=="function"){return}var k=[],j=arguments[1];for(var h=0;h<f;h++){if(h in l){var n=l[h];if(g&&g.call(j,n,h,l)){k.push(n)}}}return k}}if(!Function.prototype.bind){Function.prototype.bind=function(f){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var j=Array.prototype.slice.call(arguments,1),i=this,g=function(){},h=function(){return i.apply(this instanceof g&&f?this:f,j.concat(Array.prototype.slice.call(arguments)))};g.prototype=this.prototype;h.prototype=new g();return h}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(h){if(this==null){throw new TypeError()}var i=Object(this);var f=i.length>>>0;if(f===0){return -1}var j=0;if(arguments.length>1){j=Number(arguments[1]);if(j!=j){j=0}else{if(j!=0&&j!=Infinity&&j!=-Infinity){j=(j>0||-1)*Math.floor(Math.abs(j))}}}if(j>=f){return -1}var g=j>=0?j:Math.max(f-Math.abs(j),0);for(;g<f;g++){if(g in i&&i[g]===h){return g}}return -1}}d.fn.stop=d.fn.stop||function(){return this};function b(f){if(typeof f==="string"||f instanceof String){f=f.replace(/^['"]+|(;\s?})+|['"]$/g,"")}return f}c.Foundation={name:"Foundation",version:"4.3.2",cache:{},media_queries:{small:b(d(".foundation-mq-small").css("font-family")),medium:b(d(".foundation-mq-medium").css("font-family")),large:b(d(".foundation-mq-large").css("font-family"))},stylesheet:d("<style></style>").appendTo("head")[0].sheet,init:function(q,n,f,r,g,j){var k,o=[q,f,r,g],l=[],j=j||false;if(j){this.nc=j}this.rtl=/rtl/i.test(d("html").attr("dir"));this.scope=q||this.scope;if(n&&typeof n==="string"&&!/reflow/i.test(n)){if(/off/i.test(n)){return this.off()}k=n.split(" ");if(k.length>0){for(var h=k.length-1;h>=0;h--){l.push(this.init_lib(k[h],o))}}}else{if(/reflow/i.test(n)){o[1]="reflow"}for(var p in this.libs){l.push(this.init_lib(p,o))}}if(typeof n==="function"){o.unshift(n)}return this.response_obj(l,o)},response_obj:function(g,h){for(var j=0,f=h.length;j<f;j++){if(typeof h[j]==="function"){return h[j]({errors:g.filter(function(i){if(typeof i==="string"){return i}})})}}return g},init_lib:function(g,f){return this.trap(function(){if(this.libs.hasOwnProperty(g)){this.patch(this.libs[g]);return this.libs[g].init.apply(this.libs[g],f)}else{return function(){}}}.bind(this),g)},trap:function(f,h){if(!this.nc){try{return f()}catch(g){return this.error({name:h,message:"could not be initialized",more:g.name+" "+g.message})}}return f()},patch:function(f){this.fix_outer(f);f.scope=this.scope;f.rtl=this.rtl},inherit:function(j,g){var f=g.split(" ");for(var h=f.length-1;h>=0;h--){if(this.lib_methods.hasOwnProperty(f[h])){this.libs[j.name][f[h]]=this.lib_methods[f[h]]}}},random_str:function(h){var g="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");if(!h){h=Math.floor(Math.random()*g.length)}var j="";for(var f=0;f<h;f++){j+=g[Math.floor(Math.random()*g.length)]}return j},libs:{},lib_methods:{set_data:function(f,g){var h=[this.name,+new Date(),Foundation.random_str(5)].join("-");Foundation.cache[h]=g;f.attr("data-"+this.name+"-id",h);return g},get_data:function(f){return Foundation.cache[f.attr("data-"+this.name+"-id")]},remove_data:function(f){if(f){delete Foundation.cache[f.attr("data-"+this.name+"-id")];f.attr("data-"+this.name+"-id","")}else{d("[data-"+this.name+"-id]").each(function(){delete Foundation.cache[d(this).attr("data-"+this.name+"-id")];d(this).attr("data-"+this.name+"-id","")})}},throttle:function(f,g){var h=null;return function(){var j=this,i=arguments;clearTimeout(h);h=setTimeout(function(){f.apply(j,i)},g)}},data_options:function(k){var l={},j,n,i=(k.attr("data-options")||":").split(";"),h=i.length;function g(p){return !isNaN(p-0)&&p!==null&&p!==""&&p!==false&&p!==true}function f(o){if(typeof o==="string"){return d.trim(o)}return o}for(j=h-1;j>=0;j--){n=i[j].split(":");if(/true/i.test(n[1])){n[1]=true}if(/false/i.test(n[1])){n[1]=false}if(g(n[1])){n[1]=parseInt(n[1],10)}if(n.length===2&&n[0].length>0){l[f(n[0])]=f(n[1])}}return l},delay:function(f,g){return setTimeout(f,g)},scrollTo:function(g,j,h){if(h<0){return}var i=j-d(c).scrollTop();var f=i/h*10;this.scrollToTimerCache=setTimeout(function(){if(!isNaN(parseInt(f,10))){c.scrollTo(0,d(c).scrollTop()+f);this.scrollTo(g,j,h-10)}}.bind(this),10)},scrollLeft:function(f){if(!f.length){return}return("scrollLeft" in f[0])?f[0].scrollLeft:f[0].pageXOffset},empty:function(g){if(g.length&&g.length>0){return false}if(g.length&&g.length===0){return true}for(var f in g){if(hasOwnProperty.call(g,f)){return false}}return true},addCustomRule:function(h,g){if(g===e){Foundation.stylesheet.insertRule(h,Foundation.stylesheet.cssRules.length)}else{var f=Foundation.media_queries[g];if(f!==e){Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[g]+"{ "+h+" }")}}}},fix_outer:function(f){f.outerHeight=function(h,g){if(typeof Zepto==="function"){return h.height()}if(typeof g!=="undefined"){return h.outerHeight(g)}return h.outerHeight()};f.outerWidth=function(h,g){if(typeof Zepto==="function"){return h.width()}if(typeof g!=="undefined"){return h.outerWidth(g)}return h.outerWidth()}},error:function(f){return f.name+" "+f.message+"; "+f.more},off:function(){d(this.scope).off(".fndtn");d(c).off(".fndtn");return true},zj:d};d.fn.foundation=function(){var f=Array.prototype.slice.call(arguments,0);return this.each(function(){Foundation.init.apply(Foundation,[this].concat(f));return this})}}(libFuncName,this,this.document));(function(c,b,a,d){Foundation.libs.abide={name:"abide",version:"4.3.3",settings:{live_validate:true,focus_on_invalid:true,timeout:1000,patterns:{alpha:/[a-zA-Z]+/,alpha_numeric:/[a-zA-Z0-9]+/,integer:/-?\d+/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,password:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/,time:/(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,month_day_year:/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/}},timer:null,init:function(f,g,e){if(typeof g==="object"){c.extend(true,this.settings,g)}if(typeof g!=="string"){if(!this.settings.init){this.events()}}else{return this[g].call(this,e)}},events:function(){var f=this,e=c("form[data-abide]",this.scope).attr("novalidate","novalidate");e.on("submit validate",function(h){var g=/ajax/i.test(c(this).attr("data-abide"));return f.validate(c(this).find("input, textarea, select").get(),h,g)});this.settings.init=true;if(!this.settings.live_validate){return}e.find("input, textarea, select").on("blur change",function(g){f.validate([this],g)}).on("keydown",function(g){clearTimeout(f.timer);f.timer=setTimeout(function(){f.validate([this],g)}.bind(this),f.settings.timeout)})},validate:function(l,o,f){var k=this.parse_patterns(l),j=k.length,n=c(l[0]).closest("form"),g=/submit/.test(o.type);for(var h=0;h<j;h++){if(!k[h]&&(g||f)){if(this.settings.focus_on_invalid){l[h].focus()}n.trigger("invalid");c(l[h]).closest("form").attr("data-invalid","");return false}}if(g||f){n.trigger("valid")}n.removeAttr("data-invalid");if(f){return false}return true},parse_patterns:function(g){var h=g.length,e=[];for(var f=h-1;f>=0;f--){e.push(this.pattern(g[f]))}return this.check_validation_and_apply_styles(e)},pattern:function(f){var e=f.getAttribute("type"),h=typeof f.getAttribute("required")==="string";if(this.settings.patterns.hasOwnProperty(e)){return[f,this.settings.patterns[e],h]}var g=f.getAttribute("pattern")||"";if(this.settings.patterns.hasOwnProperty(g)&&g.length>0){return[f,this.settings.patterns[g],h]}else{if(g.length>0){return[f,new RegExp(g),h]}}g=/.*/;return[f,g,h]},check_validation_and_apply_styles:function(g){var j=g.length,f=[];for(var h=j-1;h>=0;h--){var e=g[h][0],l=g[h][2],n=e.value,o=e.type==="radio",k=(l)?(e.value.length>0):true;if(o&&l){f.push(this.valid_radio(e,l))}else{if(g[h][1].test(n)&&k||!l&&e.value.length<1){c(e).removeAttr("data-invalid").parent().removeClass("error");f.push(true)}else{c(e).attr("data-invalid","").parent().addClass("error");f.push(false)}}}return f},valid_radio:function(g,l){var e=g.getAttribute("name"),k=a.getElementsByName(e),j=k.length,h=false;for(var f=0;f<j;f++){if(k[f].checked){h=true}}for(var f=0;f<j;f++){if(h){c(k[f]).removeAttr("data-invalid").parent().removeClass("error")}else{c(k[f]).attr("data-invalid","").parent().addClass("error")}}return h}}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.alerts={name:"alerts",version:"4.3.2",settings:{animation:"fadeOut",speed:300,callback:function(){}},init:function(f,g,e){this.scope=f||this.scope;Foundation.inherit(this,"data_options");if(typeof g==="object"){c.extend(true,this.settings,g)}if(typeof g!=="string"){if(!this.settings.init){this.events()}return this.settings.init}else{return this[g].call(this,e)}},events:function(){var e=this;c(this.scope).on("click.fndtn.alerts","[data-alert] a.close",function(h){var f=c(this).closest("[data-alert]"),g=c.extend({},e.settings,e.data_options(f));h.preventDefault();f[g.animation](g.speed,function(){c(this).remove();g.callback()})});this.settings.init=true},off:function(){c(this.scope).off(".fndtn.alerts")},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.clearing={name:"clearing",version:"4.3.3",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="//:0"><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",init:false,locked:false},init:function(g,h,f){var e=this;Foundation.inherit(this,"set_data get_data remove_data throttle data_options");if(typeof h==="object"){f=c.extend(true,this.settings,h)}if(typeof h!=="string"){c(this.scope).find("ul[data-clearing]").each(function(){var k=c(this),j=j||{},i=k.find("li"),l=e.get_data(k);if(!l&&i.length>0){j.$parent=k.parent();e.set_data(k,c.extend({},e.settings,j,e.data_options(k)));e.assemble(k.find("li"));if(!e.settings.init){e.events().swipe_events()}}});return this.settings.init}else{return this[h].call(this,f)}},events:function(){var e=this;c(this.scope).on("click.fndtn.clearing","ul[data-clearing] li",function(k,j,i){var j=j||c(this),i=i||j,g=j.next("li"),f=e.get_data(j.parent()),h=c(k.target);k.preventDefault();if(!f){e.init()}if(i.hasClass("visible")&&j[0]===i[0]&&g.length>0&&e.is_open(j)){i=g;h=i.find("img")}e.open(h,j,i);e.update_paddles(i)}).on("click.fndtn.clearing",".clearing-main-next",function(f){this.nav(f,"next")}.bind(this)).on("click.fndtn.clearing",".clearing-main-prev",function(f){this.nav(f,"prev")}.bind(this)).on("click.fndtn.clearing",this.settings.close_selectors,function(f){Foundation.libs.clearing.close(f,this)}).on("keydown.fndtn.clearing",function(f){this.keydown(f)}.bind(this));c(b).on("resize.fndtn.clearing",function(){this.resize()}.bind(this));this.settings.init=true;return this},swipe_events:function(){var e=this;c(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(g){if(!g.touches){g=g.originalEvent}var f={start_page_x:g.touches[0].pageX,start_page_y:g.touches[0].pageY,start_time:(new Date()).getTime(),delta_x:0,is_scrolling:d};c(this).data("swipe-transition",f);g.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(h){if(!h.touches){h=h.originalEvent}if(h.touches.length>1||h.scale&&h.scale!==1){return}var f=c(this).data("swipe-transition");if(typeof f==="undefined"){f={}}f.delta_x=h.touches[0].pageX-f.start_page_x;if(typeof f.is_scrolling==="undefined"){f.is_scrolling=!!(f.is_scrolling||Math.abs(f.delta_x)<Math.abs(h.touches[0].pageY-f.start_page_y))}if(!f.is_scrolling&&!f.active){h.preventDefault();var g=(f.delta_x<0)?"next":"prev";f.active=true;e.nav(h,g)}}).on("touchend.fndtn.clearing",".visible-img",function(f){c(this).data("swipe-transition",{});f.stopPropagation()})},assemble:function(k){var g=k.parent();g.after('<div id="foundationClearingHolder"></div>');var f=c("#foundationClearingHolder"),h=this.get_data(g),e=g.detach(),i={grid:'<div class="carousel">'+this.outerHTML(e[0])+"</div>",viewing:h.templates.viewing},j='<div class="clearing-assembled"><div>'+i.viewing+i.grid+"</div></div>";return f.after(j).remove()},open:function(h,k,j){var f=j.closest(".clearing-assembled"),e=f.find("div").first(),g=e.find(".visible-img"),i=g.find("img").not(h);if(!this.locked()){g.trigger("open.fndtn.clearing",h.attr("id"));i.attr("src",this.load(h)).css("visibility","hidden");this.loaded(i,function(){i.css("visibility","visible");f.addClass("clearing-blackout");e.addClass("clearing-container");g.show();this.fix_height(j).caption(g.find(".clearing-caption"),h).center(i).shift(k,j,function(){j.siblings().removeClass("visible");j.addClass("visible")});g.trigger("opened.fndtn.clearing")}.bind(this))}},close:function(j,i){j.preventDefault();var g=(function(e){if(/blackout/.test(e.selector)){return e}else{return e.closest(".clearing-blackout")}}(c(i))),f,h;if(i===j.target&&g){f=g.find("div").first();h=f.find(".visible-img");h.trigger("close.fndtn.clearing");this.settings.prev_index=0;g.find("ul[data-clearing]").attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout");f.removeClass("clearing-container");h.hide();h.trigger("closed.fndtn.clearing")}return false},is_open:function(e){return e.parent().prop("style").length>0},keydown:function(g){var f=c(".clearing-blackout").find("ul[data-clearing]");if(g.which===39){this.go(f,"next")}if(g.which===37){this.go(f,"prev")}if(g.which===27){c("a.clearing-close").trigger("click")}},nav:function(h,g){var f=c(".clearing-blackout").find("ul[data-clearing]");h.preventDefault();this.go(f,g)},resize:function(){var e=c(".clearing-blackout .visible-img").find("img");if(e.length){this.center(e);e.trigger("resized.fndtn.clearing")}},fix_height:function(g){var f=g.parent().children(),e=this;f.each(function(){var h=c(this),i=h.find("img");if(h.height()>e.outerHeight(i)){h.addClass("fix-height")}}).closest("ul").width(f.length*100+"%");return this},update_paddles:function(f){var e=f.closest(".carousel").siblings(".visible-img");if(f.next().length>0){e.find(".clearing-main-next").removeClass("disabled")}else{e.find(".clearing-main-next").addClass("disabled")}if(f.prev().length>0){e.find(".clearing-main-prev").removeClass("disabled")}else{e.find(".clearing-main-prev").addClass("disabled")}},center:function(e){if(!this.rtl){e.css({marginLeft:-(this.outerWidth(e)/2),marginTop:-(this.outerHeight(e)/2)})}else{e.css({marginRight:-(this.outerWidth(e)/2),marginTop:-(this.outerHeight(e)/2)})}return this},load:function(f){if(f[0].nodeName==="A"){var e=f.attr("href")}else{var e=f.parent().attr("href")}this.preload(f);if(e){return e}return f.attr("src")},preload:function(e){this.img(e.closest("li").next()).img(e.closest("li").prev())},loaded:function(g,h){function e(){h()}function f(){this.one("load",e);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var j=this.attr("src"),i=j.match(/\?/)?"&":"?";i+="random="+(new Date()).getTime();this.attr("src",j+i)}}if(!g.attr("src")){e();return}if(g[0].complete||g[0].readyState===4){e()}else{f.call(g)}},img:function(e){if(e.length){var f=new Image(),g=e.find("a");if(g.length){f.src=g.attr("href")}else{f.src=e.find("img").attr("src")}}return this},caption:function(e,g){var f=g.data("caption");if(f){e.html(f).show()}else{e.text("").hide()}return this},go:function(e,h){var g=e.find(".visible"),f=g[h]();if(f.length){f.find("img").trigger("click",[g,f]).trigger("change.fndtn.clearing")}},shift:function(h,i,n){var j=i.parent(),g=this.settings.prev_index||i.index(),k=this.direction(j,h,i),f=parseInt(j.css("left"),10),e=this.outerWidth(i),l;if(i.index()!==g&&!/skip/.test(k)){if(/left/.test(k)){this.lock();j.animate({left:f+e},300,this.unlock())}else{if(/right/.test(k)){this.lock();j.animate({left:f-e},300,this.unlock())}}}else{if(/skip/.test(k)){l=i.index()-this.settings.up_count;this.lock();if(l>0){j.animate({left:-(l*e)},300,this.unlock())}else{j.animate({left:0},300,this.unlock())}}}n()},direction:function(h,j,i){var g=h.find("li"),f=this.outerWidth(g)+(this.outerWidth(g)/4),k=Math.floor(this.outerWidth(c(".clearing-container"))/f)-1,l=g.index(i),e;this.settings.up_count=k;if(this.adjacent(this.settings.prev_index,l)){if((l>k)&&l>this.settings.prev_index){e="right"}else{if((l>k-1)&&l<=this.settings.prev_index){e="left"}else{e=false}}}else{e="skip"}this.settings.prev_index=l;return e},adjacent:function(g,f){for(var e=f+1;e>=f-1;e--){if(e===g){return true}}return false},lock:function(){this.settings.locked=true},unlock:function(){this.settings.locked=false},locked:function(){return this.settings.locked},outerHTML:function(e){return e.outerHTML||new XMLSerializer().serializeToString(e)},off:function(){c(this.scope).off(".fndtn.clearing");c(b).off(".fndtn.clearing");this.remove_data();this.settings.init=false},reflow:function(){this.init()}}}(Foundation.zj,this,this.document));
/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 *
 * Modified to work with Zepto.js by ZURB
 */
(function(f,b,g){var a=/\+/g;function e(h){return h}function c(h){return decodeURIComponent(h.replace(a," "))}var d=f.cookie=function(q,p,v){if(p!==g){v=f.extend({},d.defaults,v);if(p===null){v.expires=-1}if(typeof v.expires==="number"){var r=v.expires,u=v.expires=new Date();u.setDate(u.getDate()+r)}p=d.json?JSON.stringify(p):String(p);return(b.cookie=[encodeURIComponent(q),"=",d.raw?p:encodeURIComponent(p),v.expires?"; expires="+v.expires.toUTCString():"",v.path?"; path="+v.path:"",v.domain?"; domain="+v.domain:"",v.secure?"; secure":""].join(""))}var h=d.raw?e:c;var s=b.cookie.split("; ");for(var o=0,k=s.length;o<k;o++){var n=s[o].split("=");if(h(n.shift())===q){var j=h(n.join("="));return d.json?JSON.parse(j):j}}return null};d.defaults={};f.removeCookie=function(i,h){if(f.cookie(i)!==null){f.cookie(i,null,h);return true}return false}})(Foundation.zj,document);(function(c,b,a,d){Foundation.libs.dropdown={name:"dropdown",version:"4.3.2",settings:{activeClass:"open",is_hover:false,opened:function(){},closed:function(){}},init:function(f,g,e){this.scope=f||this.scope;Foundation.inherit(this,"throttle scrollLeft data_options");if(typeof g==="object"){c.extend(true,this.settings,g)}if(typeof g!=="string"){if(!this.settings.init){this.events()}return this.settings.init}else{return this[g].call(this,e)}},events:function(){var e=this;c(this.scope).on("click.fndtn.dropdown","[data-dropdown]",function(g){var f=c.extend({},e.settings,e.data_options(c(this)));g.preventDefault();if(!f.is_hover){e.toggle(c(this))}}).on("mouseenter","[data-dropdown]",function(g){var f=c.extend({},e.settings,e.data_options(c(this)));if(f.is_hover){e.toggle(c(this))}}).on("mouseleave","[data-dropdown-content]",function(h){var g=c('[data-dropdown="'+c(this).attr("id")+'"]'),f=c.extend({},e.settings,e.data_options(g));if(f.is_hover){e.close.call(e,c(this))}}).on("opened.fndtn.dropdown","[data-dropdown-content]",this.settings.opened).on("closed.fndtn.dropdown","[data-dropdown-content]",this.settings.closed);c(a).on("click.fndtn.dropdown",function(g){var f=c(g.target).closest("[data-dropdown-content]");if(c(g.target).data("dropdown")||c(g.target).parent().data("dropdown")){return}if(!(c(g.target).data("revealId"))&&(f.length>0&&(c(g.target).is("[data-dropdown-content]")||c.contains(f.first()[0],g.target)))){g.stopPropagation();return}e.close.call(e,c("[data-dropdown-content]"))});c(b).on("resize.fndtn.dropdown",e.throttle(function(){e.resize.call(e)},50)).trigger("resize");this.settings.init=true},close:function(f){var e=this;f.each(function(){if(c(this).hasClass(e.settings.activeClass)){c(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(e.settings.activeClass);c(this).trigger("closed")}})},open:function(f,e){this.css(f.addClass(this.settings.activeClass),e);f.trigger("opened")},toggle:function(e){var f=c("#"+e.data("dropdown"));if(f.length===0){return}this.close.call(this,c("[data-dropdown-content]").not(f));if(f.hasClass(this.settings.activeClass)){this.close.call(this,f)}else{this.close.call(this,c("[data-dropdown-content]"));this.open.call(this,f,e)}},resize:function(){var f=c("[data-dropdown-content].open"),e=c("[data-dropdown='"+f.attr("id")+"']");if(f.length&&e.length){this.css(f,e)}},css:function(i,h){var f=i.offsetParent();var e=h.offset();e.top-=f.offset().top;e.left-=f.offset().left;if(this.small()){i.css({position:"absolute",width:"95%","max-width":"none",top:e.top+this.outerHeight(h)});i.css(Foundation.rtl?"right":"left","2.5%")}else{if(!Foundation.rtl&&c(b).width()>this.outerWidth(i)+h.offset().left&&!this.data_options(h).align_right){var g=e.left;if(i.hasClass("right")){i.removeClass("right")}}else{if(!i.hasClass("right")){i.addClass("right")}var g=e.left-(this.outerWidth(i)-this.outerWidth(h))}i.attr("style","").css({position:"absolute",top:e.top+this.outerHeight(h),left:g})}return i},small:function(){return c(b).width()<768||c("html").hasClass("lt-ie9")},off:function(){c(this.scope).off(".fndtn.dropdown");c("html, body").off(".fndtn.dropdown");c(b).off(".fndtn.dropdown");c("[data-dropdown-content]").off(".fndtn.dropdown");this.settings.init=false},reflow:function(){}}}(Foundation.zj,this,this.document));(function(d,c,a,e){Foundation.libs.forms={name:"forms",version:"4.3.2",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(g,h,f){if(typeof h==="object"){d.extend(true,this.settings,h)}if(typeof h!=="string"){if(!this.settings.init){this.events()}this.assemble();return this.settings.init}else{return this[h].call(this,f)}},assemble:function(){var f=this;d('form.custom input[type="radio"],[type="checkbox"]',d(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(function(g,h){f.set_custom_markup(h)}).change(function(){f.set_custom_markup(this)});d("form.custom select",d(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var f=this;d(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(g){g.preventDefault();g.stopPropagation();f.toggle_checkbox(d(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(g){g.preventDefault();g.stopPropagation();f.toggle_radio(d(this))}).on("change.fndtn.forms","form.custom select",function(h,g){if(d(this).is('[data-customforms="disabled"]')){return}f.refresh_custom_select(d(this),g)}).on("click.fndtn.forms","form.custom label",function(i){if(d(i.target).is("label")){var g=d("#"+f.escape(d(this).attr("for"))).not('[data-customforms="disabled"]'),j,h;if(g.length!==0){if(g.attr("type")==="checkbox"){i.preventDefault();j=d(this).find("span.custom.checkbox");if(j.length===0){j=g.add(this).siblings("span.custom.checkbox").first()}f.toggle_checkbox(j)}else{if(g.attr("type")==="radio"){i.preventDefault();h=d(this).find("span.custom.radio");if(h.length===0){h=g.add(this).siblings("span.custom.radio").first()}f.toggle_radio(h)}}}}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return false}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(j){var i=d(this),h=i.closest("div.custom.dropdown"),g=b(h,"select");if(!h.hasClass("open")){d(f.scope).trigger("click")}j.preventDefault();if(false===g.is(":disabled")){h.toggleClass("open");if(h.hasClass("open")){d(f.scope).on("click.fndtn.forms.customdropdown",function(){h.removeClass("open");d(f.scope).off(".fndtn.forms.customdropdown")})}else{d(f.scope).on(".fndtn.forms.customdropdown")}return false}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(n){var l=d(this),i=l.closest("div.custom.dropdown"),j=b(i,"select"),h=0;n.preventDefault();n.stopPropagation();if(!d(this).hasClass("disabled")){d("div.dropdown").not(i).removeClass("open");var g=l.closest("ul").find("li.selected");g.removeClass("selected");l.addClass("selected");i.removeClass("open").find("a.current").text(l.text());l.closest("ul").find("li").each(function(o){if(l[0]===this){h=o}});j[0].selectedIndex=h;j.data("prevalue",g.html());if(typeof(a.createEvent)!="undefined"){var k=a.createEvent("HTMLEvents");k.initEvent("change",true,true);j[0].dispatchEvent(k)}else{j[0].fireEvent("onchange")}}});d(c).on("keydown",function(j){var p=a.activeElement,n=Foundation.libs.forms,o=d(".custom.dropdown"),l=b(o,"select"),i=d("input,select,textarea,button");if(o.length>0&&o.hasClass("open")){j.preventDefault();if(j.which===9){d(i[d(i).index(l)+1]).focus();o.removeClass("open")}if(j.which===13){o.find("li.selected").trigger("click")}if(j.which===27){o.removeClass("open")}if(j.which>=65&&j.which<=90){var h=n.go_to(o,j.which),k=o.find("li.selected");if(h){k.removeClass("selected");n.scrollTo(h.addClass("selected"),300)}}if(j.which===38){var k=o.find("li.selected"),g=k.prev(":not(.disabled)");if(g.length>0){g.parent()[0].scrollTop=g.parent().scrollTop()-n.outerHeight(g);k.removeClass("selected");g.addClass("selected")}}else{if(j.which===40){var k=o.find("li.selected"),h=k.next(":not(.disabled)");if(h.length>0){h.parent()[0].scrollTop=h.parent().scrollTop()+n.outerHeight(h);k.removeClass("selected");h.addClass("selected")}}}}});d(c).on("keyup",function(h){var g=a.activeElement,i=d(".custom.dropdown");if(g===i.find(".current")[0]){i.find(".selector").focus().click()}});this.settings.init=true},go_to:function(l,k){var g=l.find("li"),j=g.length;if(j>0){for(var h=0;h<j;h++){var f=g.eq(h).text().charAt(0).toLowerCase();if(f===String.fromCharCode(k).toLowerCase()){return g.eq(h)}}}},scrollTo:function(i,j){if(j<0){return}var h=i.parent();var g=this.outerHeight(i);var k=(g*(i.index()))-h.scrollTop();var f=k/j*10;this.scrollToTimerCache=setTimeout(function(){if(!isNaN(parseInt(f,10))){h[0].scrollTop=h.scrollTop()+f;this.scrollTo(i,j-10)}}.bind(this),10)},set_custom_markup:function(h){var i=d(h),g=i.attr("type"),f=i.next("span.custom."+g);if(!i.parent().hasClass("switch")){i.addClass("hidden-field")}if(f.length===0){f=d('<span class="custom '+g+'"></span>').insertAfter(i)}f.toggleClass("checked",i.is(":checked"));f.toggleClass("disabled",i.is(":disabled"))},append_custom_select:function(s,h){var v=Foundation.libs.forms,o=d(h),n=o.next("div.custom.dropdown"),p=n.find("ul"),q=n.find(".current"),u=n.find(".selector"),l=o.find("option"),i=l.filter(":selected"),k=o.attr("class")?o.attr("class").split(" "):[],t=0,r="",g,f=false;if(n.length===0){var j=o.hasClass("small")?"small":o.hasClass("medium")?"medium":o.hasClass("large")?"large":o.hasClass("expand")?"expand":"";n=d('<div class="'+["custom","dropdown",j].concat(k).filter(function(y,x,w){if(y===""){return false}return w.indexOf(y)===x}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>');u=n.find(".selector");p=n.find("ul");r=l.map(function(){var w=d(this).attr("class")?d(this).attr("class"):"";return"<li class='"+w+"'>"+d(this).html()+"</li>"}).get().join("");p.append(r);f=n.prepend('<a href="#" class="current">'+(i.html()||"")+"</a>").find(".current");o.after(n).addClass("hidden-field")}else{r=l.map(function(){return"<li>"+d(this).html()+"</li>"}).get().join("");p.html("").append(r)}v.assign_id(o,n);n.toggleClass("disabled",o.is(":disabled"));g=p.find("li");v.cache[n.data("id")]=g.length;l.each(function(w){if(this.selected){g.eq(w).addClass("selected");if(f){f.html(d(this).html())}}if(d(this).is(":disabled")){g.eq(w).addClass("disabled")}});if(!n.is(".small, .medium, .large, .expand")){n.addClass("open");var v=Foundation.libs.forms;v.hidden_fix.adjust(p);t=(v.outerWidth(g)>t)?v.outerWidth(g):t;Foundation.libs.forms.hidden_fix.reset();n.removeClass("open")}},assign_id:function(f,h){var g=[+new Date(),Foundation.random_str(5)].join("-");f.attr("data-id",g);h.attr("data-id",g)},refresh_custom_select:function(g,h){var o=this;var l=0,j=g.next(),i=g.find("option"),k=j.find("ul"),f=j.find("li");if(i.length!==this.cache[j.data("id")]||h){k.html("");var n="";i.each(function(){var r=d(this),q=r.html(),p=this.selected;n+='<li class="'+(p?" selected ":"")+(r.is(":disabled")?" disabled ":"")+'">'+q+"</li>";if(p){j.find(".current").html(q)}});k.html(n);j.removeAttr("style");k.removeAttr("style");j.find("li").each(function(){j.addClass("open");if(o.outerWidth(d(this))>l){l=o.outerWidth(d(this))}j.removeClass("open")});f=j.find("li");this.cache[j.data("id")]=f.length}},refresh_custom_selection:function(f){var g=d("option:selected",f).text();d("a.current",f.next()).text(g)},toggle_checkbox:function(f){var h=f.prev(),g=h[0];if(false===h.is(":disabled")){g.checked=((g.checked)?false:true);f.toggleClass("checked");h.trigger("change")}},toggle_radio:function(f){var i=f.prev(),h=i.closest("form.custom"),g=i[0];if(false===i.is(":disabled")){h.find('input[type="radio"][name="'+this.escape(i.attr("name"))+'"]').next().not(f).removeClass("checked");if(!f.hasClass("checked")){f.toggleClass("checked")}g.checked=f.hasClass("checked");i.trigger("change")}},escape:function(f){if(!f){return""}return f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(g){var f=this;f.hidden=g.parents();f.hidden=f.hidden.add(g).filter(":hidden");f.hidden.each(function(){var h=d(this);f.tmp.push(h.attr("style"));h.css({visibility:"hidden",display:"block"})})},reset:function(){var f=this;f.hidden.each(function(h){var g=d(this),j=f.tmp[h];if(j===e){g.removeAttr("style")}else{g.attr("style",j)}});f.tmp=[];f.hidden=null}},off:function(){d(this.scope).off(".fndtn.forms")},reflow:function(){}};var b=function(g,f){var g=g.prev();while(g.length){if(g.is(f)){return g}g=g.prev()}return d()}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.interchange={name:"interchange",version:"4.2.4",cache:{},images_loaded:false,settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(f,g){if(/IMG/.test(f[0].nodeName)){var e=f[0].src;if(new RegExp(g,"i").test(e)){return}f[0].src=g;return f.trigger("replace",[f[0].src,e])}}}},init:function(f,g,e){Foundation.inherit(this,"throttle");if(typeof g==="object"){c.extend(true,this.settings,g)}this.events();this.images();if(typeof g!=="string"){return this.settings.init}else{return this[g].call(this,e)}},events:function(){var e=this;c(b).on("resize.fndtn.interchange",e.throttle(function(){e.resize.call(e)},50))},resize:function(){var e=this.cache;if(!this.images_loaded){setTimeout(c.proxy(this.resize,this),50);return}for(var f in e){if(e.hasOwnProperty(f)){var g=this.results(f,e[f]);if(g){this.settings.directives[g.scenario[1]](g.el,g.scenario[0])}}}},results:function(h,l){var j=l.length;if(j>0){var g=c('[data-uuid="'+h+'"]');for(var e=j-1;e>=0;e--){var f,k=l[e][2];if(this.settings.named_queries.hasOwnProperty(k)){f=matchMedia(this.settings.named_queries[k])}else{f=matchMedia(k)}if(f.matches){return{el:g,scenario:l[e]}}}}return false},images:function(e){if(typeof this.cached_images==="undefined"||e){return this.update_images()}return this.cached_images},update_images:function(){var e=a.getElementsByTagName("img"),j=e.length,h=0,g="data-"+this.settings.load_attr;this.cached_images=[];this.images_loaded=false;for(var f=j-1;f>=0;f--){this.loaded(c(e[f]),function(i){h++;if(i){var k=i.getAttribute(g)||"";if(k.length>0){this.cached_images.push(i)}}if(h===j){this.images_loaded=true;this.enhance()}}.bind(this))}return"deferred"},loaded:function(g,h){function e(){h(g[0])}function f(){this.one("load",e);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var j=this.attr("src"),i=j.match(/\?/)?"&":"?";i+="random="+(new Date()).getTime();this.attr("src",j+i)}}if(!g.attr("src")){e();return}if(g[0].complete||g[0].readyState===4){e()}else{f.call(g)}},enhance:function(){var f=this.images().length;for(var e=f-1;e>=0;e--){this._object(c(this.images()[e]))}return c(b).trigger("resize")},parse_params:function(f,g,e){return[this.trim(f),this.convert_directive(g),this.trim(e)]},convert_directive:function(f){var e=this.trim(f);if(e.length>0){return e}return"replace"},_object:function(h){var k=this.parse_data_attr(h),n=[],j=k.length;if(j>0){for(var g=j-1;g>=0;g--){var f=k[g].split(/\((.*?)(\))$/);if(f.length>1){var e=f[0].split(","),l=this.parse_params(e[0],e[1],f[1]);n.push(l)}}}return this.store(h,n)},uuid:function(f){var g=f||"-";function e(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(e()+e()+g+e()+g+e()+g+e()+g+e()+e()+e())},store:function(f,h){var e=this.uuid(),g=f.data("uuid");if(g){return this.cache[g]}f.attr("data-uuid",e);return this.cache[e]=h},trim:function(e){if(typeof e==="string"){return c.trim(e)}return e},parse_data_attr:function(h){var f=h.data(this.settings.load_attr).split(/\[(.*?)\]/),j=f.length,e=[];for(var g=j-1;g>=0;g--){if(f[g].replace(/[\W\d]+/,"").length>4){e.push(f[g])}}return e},reflow:function(){this.images(true)}}}(Foundation.zj,this,this.document));(function(c,b,a,e){var d=d||false;Foundation.libs.joyride={name:"joyride",version:"4.3.2",defaults:{expose:false,modal:false,tipLocation:"bottom",nubPosition:"auto",scrollSpeed:300,timer:0,startTimerOnClick:true,startOffset:0,nextButton:true,tipAnimation:"fade",pauseAfter:[],exposed:[],tipAnimationFadeSpeed:300,cookieMonster:false,cookieName:"joyride",cookieDomain:false,cookieExpires:365,tipContainer:"#interface",postRideCallback:function(){},postStepCallback:function(){},preStepCallback:function(){},preRideCallback:function(){},postExposeCallback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'},exposeAddClass:""},settings:{},init:function(g,h,f){this.scope=g||this.scope;Foundation.inherit(this,"throttle data_options scrollTo scrollLeft delay");if(typeof h==="object"){c.extend(true,this.settings,this.defaults,h)}else{c.extend(true,this.settings,this.defaults,f)}if(typeof h!=="string"){if(!this.settings.init){this.events()}return this.settings.init}else{return this[h].call(this,f)}},events:function(){var f=this;c(this.scope).on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(g){g.preventDefault();if(this.settings.$li.next().length<1){this.end()}else{if(this.settings.timer>0){clearTimeout(this.settings.automate);this.hide();this.show();this.startTimer()}else{this.hide();this.show()}}}.bind(this)).on("click.joyride",".joyride-close-tip",function(g){g.preventDefault();this.end()}.bind(this));c(b).on("resize.fndtn.joyride",f.throttle(function(){if(c("[data-joyride]").length>0&&f.settings.$next_tip){if(f.settings.exposed.length>0){var g=c(f.settings.exposed);g.each(function(){var h=c(this);f.un_expose(h);f.expose(h)})}if(f.is_phone()){f.pos_phone()}else{f.pos_default(false,true)}}},100));this.settings.init=true},start:function(){var g=this,i=c(this.scope).find("[data-joyride]"),f=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],h=f.length;if(!this.settings.init){this.events()}this.settings.$content_el=i;this.settings.$body=c(this.settings.tipContainer);this.settings.body_offset=c(this.settings.tipContainer).position();this.settings.$tip_content=this.settings.$content_el.find("> li");this.settings.paused=false;this.settings.attempts=0;this.settings.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]};if(typeof c.cookie!=="function"){this.settings.cookieMonster=false}if(!this.settings.cookieMonster||this.settings.cookieMonster&&c.cookie(this.settings.cookieName)===null){this.settings.$tip_content.each(function(j){var l=c(this);c.extend(true,g.settings,g.data_options(l));for(var k=h-1;k>=0;k--){g.settings[f[k]]=parseInt(g.settings[f[k]],10)}g.create({$li:l,index:j})});if(!this.settings.startTimerOnClick&&this.settings.timer>0){this.show("init");this.startTimer()}else{this.show("init")}}},resume:function(){this.set_li();this.show()},tip_template:function(g){var h,f;g.tip_class=g.tip_class||"";h=c(this.settings.template.tip).addClass(g.tip_class);f=c.trim(c(g.li).html())+this.button_text(g.button_text)+this.settings.template.link+this.timer_instance(g.index);h.append(c(this.settings.template.wrapper));h.first().attr("data-index",g.index);c(".joyride-content-wrapper",h).append(f);return h[0]},timer_instance:function(g){var f;if((g===0&&this.settings.startTimerOnClick&&this.settings.timer>0)||this.settings.timer===0){f=""}else{f=this.outerHTML(c(this.settings.template.timer)[0])}return f},button_text:function(f){if(this.settings.nextButton){f=c.trim(f)||"Next";f=this.outerHTML(c(this.settings.template.button).append(f)[0])}else{f=""}return f},create:function(h){var g=h.$li.attr("data-button")||h.$li.attr("data-text"),f=h.$li.attr("class"),i=c(this.tip_template({tip_class:f,index:h.index,button_text:g,li:h.$li}));c(this.settings.tipContainer).append(i)},show:function(g){var f=null;if(this.settings.$li===e||(c.inArray(this.settings.$li.index(),this.settings.pauseAfter)===-1)){if(this.settings.paused){this.settings.paused=false}else{this.set_li(g)}this.settings.attempts=0;if(this.settings.$li.length&&this.settings.$target.length>0){if(g){this.settings.preRideCallback(this.settings.$li.index(),this.settings.$next_tip);if(this.settings.modal){this.show_modal()}}this.settings.preStepCallback(this.settings.$li.index(),this.settings.$next_tip);if(this.settings.modal&&this.settings.expose){this.expose()}this.settings.tipSettings=c.extend(this.settings,this.data_options(this.settings.$li));this.settings.timer=parseInt(this.settings.timer,10);this.settings.tipSettings.tipLocationPattern=this.settings.tipLocationPatterns[this.settings.tipSettings.tipLocation];if(!/body/i.test(this.settings.$target.selector)){this.scroll_to()}if(this.is_phone()){this.pos_phone(true)}else{this.pos_default(true)}f=this.settings.$next_tip.find(".joyride-timer-indicator");if(/pop/i.test(this.settings.tipAnimation)){f.width(0);if(this.settings.timer>0){this.settings.$next_tip.show();this.delay(function(){f.animate({width:f.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)}else{this.settings.$next_tip.show()}}else{if(/fade/i.test(this.settings.tipAnimation)){f.width(0);if(this.settings.timer>0){this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed).show();this.delay(function(){f.animate({width:f.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)}else{this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed)}}}this.settings.$current_tip=this.settings.$next_tip}else{if(this.settings.$li&&this.settings.$target.length<1){this.show()}else{this.end()}}}else{this.settings.paused=true}},is_phone:function(){if(d){return d.mq("only screen and (max-width: 767px)")||c(".lt-ie9").length>0}return(c(b).width()<767)},hide:function(){if(this.settings.modal&&this.settings.expose){this.un_expose()}if(!this.settings.modal){c(".joyride-modal-bg").hide()}this.settings.$current_tip.css("visibility","hidden");setTimeout(c.proxy(function(){this.hide();this.css("visibility","visible")},this.settings.$current_tip),0);this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(f){if(f){this.settings.$li=this.settings.$tip_content.eq(this.settings.startOffset);this.set_next_tip();this.settings.$current_tip=this.settings.$next_tip}else{this.settings.$li=this.settings.$li.next();this.set_next_tip()}this.set_target()},set_next_tip:function(){this.settings.$next_tip=c(".joyride-tip-guide[data-index='"+this.settings.$li.index()+"']");this.settings.$next_tip.data("closed","")},set_target:function(){var f=this.settings.$li.attr("data-class"),h=this.settings.$li.attr("data-id"),g=function(){if(h){return c(a.getElementById(h))}else{if(f){return c("."+f).first()}else{return c("body")}}};this.settings.$target=g()},scroll_to:function(){var g,f;g=c(b).height()/2;f=Math.ceil(this.settings.$target.offset().top-g+this.outerHeight(this.settings.$next_tip));if(f>0){this.scrollTo(c("html, body"),f,this.settings.scrollSpeed)}},paused:function(){return(c.inArray((this.settings.$li.index()+1),this.settings.pauseAfter)===-1)},restart:function(){this.hide();this.settings.$li=e;this.show("init")},pos_default:function(p,l){var o=Math.ceil(c(b).height()/2),n=this.settings.$next_tip.offset(),j=this.settings.$next_tip.find(".joyride-nub"),f=Math.ceil(this.outerWidth(j)/2),k=Math.ceil(this.outerHeight(j)/2),i=p||false;if(i){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(typeof l==="undefined"){l=false}if(!/body/i.test(this.settings.$target.selector)){if(this.bottom()){var g=this.settings.$target.offset().left;if(Foundation.rtl){g=this.settings.$target.offset().width-this.settings.$next_tip.width()+g}g=g-this.settings.$body.offset().left;k=Math.ceil(c(".joyride-nub").outerHeight()/2);var h=(this.settings.$target.offset().top+k+this.outerHeight(this.settings.$target))-this.settings.$body.offset().top;this.settings.$next_tip.css({top:h,left:g});this.nub_position(j,this.settings.tipSettings.nubPosition,"top")}else{if(this.top()){var g=this.settings.$target.offset().left;if(Foundation.rtl){g=this.settings.$target.offset().width-this.settings.$next_tip.width()+g}this.settings.$next_tip.css({top:(this.settings.$target.offset().top-this.outerHeight(this.settings.$next_tip)-k),left:g});this.nub_position(j,this.settings.tipSettings.nubPosition,"bottom")}else{if(this.right()){this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:(this.outerWidth(this.settings.$target)+this.settings.$target.offset().left+f)});this.nub_position(j,this.settings.tipSettings.nubPosition,"left")}else{if(this.left()){this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:(this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-f)});this.nub_position(j,this.settings.tipSettings.nubPosition,"right")}}}}if(!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tipSettings.tipLocationPattern.length){j.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");this.settings.tipSettings.tipLocation=this.settings.tipSettings.tipLocationPattern[this.settings.attempts];this.settings.attempts++;this.pos_default()}}else{if(this.settings.$li.length){this.pos_modal(j)}}if(i){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_phone:function(k){var j=this.outerHeight(this.settings.$next_tip),i=this.settings.$next_tip.offset(),h=this.outerHeight(this.settings.$target),g=c(".joyride-nub",this.settings.$next_tip),l=Math.ceil(this.outerHeight(g)/2),f=k||false;g.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");if(f){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(!/body/i.test(this.settings.$target.selector)){if(this.top()){this.settings.$next_tip.offset({top:this.settings.$target.offset().top-j-l});g.addClass("bottom")}else{this.settings.$next_tip.offset({top:this.settings.$target.offset().top+h+l});g.addClass("top")}}else{if(this.settings.$li.length){this.pos_modal(g)}}if(f){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_modal:function(f){this.center();f.hide();this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var f=c(".joyride-modal-bg");if(f.length<1){c("body").append(this.settings.template.modal).show()}if(/pop/i.test(this.settings.tipAnimation)){f.show()}else{f.fadeIn(this.settings.tipAnimationFadeSpeed)}}},expose:function(){var g,j,i,k,f,h="expose-"+Math.floor(Math.random()*10000);if(arguments.length>0&&arguments[0] instanceof c){i=arguments[0]}else{if(this.settings.$target&&!/body/i.test(this.settings.$target.selector)){i=this.settings.$target}else{return false}}if(i.length<1){if(b.console){console.error("element not valid",i)}return false}g=c(this.settings.template.expose);this.settings.$body.append(g);g.css({top:i.offset().top,left:i.offset().left,width:this.outerWidth(i,true),height:this.outerHeight(i,true)});j=c(this.settings.template.exposeCover);k={zIndex:i.css("z-index"),position:i.css("position")};f=i.attr("class")==null?"":i.attr("class");i.css("z-index",parseInt(g.css("z-index"))+1);if(k.position=="static"){i.css("position","relative")}i.data("expose-css",k);i.data("orig-class",f);i.attr("class",f+" "+this.settings.exposeAddClass);j.css({top:i.offset().top,left:i.offset().left,width:this.outerWidth(i,true),height:this.outerHeight(i,true)});this.settings.$body.append(j);g.addClass(h);j.addClass(h);i.data("expose",h);this.settings.postExposeCallback(this.settings.$li.index(),this.settings.$next_tip,i);this.add_exposed(i)},un_expose:function(){var f,j,h,k,g,i=false;if(arguments.length>0&&arguments[0] instanceof c){j=arguments[0]}else{if(this.settings.$target&&!/body/i.test(this.settings.$target.selector)){j=this.settings.$target}else{return false}}if(j.length<1){if(b.console){console.error("element not valid",j)}return false}f=j.data("expose");h=c("."+f);if(arguments.length>1){i=arguments[1]}if(i===true){c(".joyride-expose-wrapper,.joyride-expose-cover").remove()}else{h.remove()}k=j.data("expose-css");if(k.zIndex=="auto"){j.css("z-index","")}else{j.css("z-index",k.zIndex)}if(k.position!=j.css("position")){if(k.position=="static"){j.css("position","")}else{j.css("position",k.position)}}g=j.data("orig-class");j.attr("class",g);j.removeData("orig-classes");j.removeData("expose");j.removeData("expose-z-index");this.remove_exposed(j)},add_exposed:function(f){this.settings.exposed=this.settings.exposed||[];if(f instanceof c||typeof f==="object"){this.settings.exposed.push(f[0])}else{if(typeof f=="string"){this.settings.exposed.push(f)}}},remove_exposed:function(h){var g,j;if(h instanceof c){g=h[0]}else{if(typeof h=="string"){g=h}}this.settings.exposed=this.settings.exposed||[];j=this.settings.exposed.length;for(var f=0;f<j;f++){if(this.settings.exposed[f]==g){this.settings.exposed.splice(f,1);return}}},center:function(){var f=c(b);this.settings.$next_tip.css({top:(((f.height()-this.outerHeight(this.settings.$next_tip))/2)+f.scrollTop()),left:(((f.width()-this.outerWidth(this.settings.$next_tip))/2)+this.scrollLeft(f))});return true},bottom:function(){return/bottom/i.test(this.settings.tipSettings.tipLocation)},top:function(){return/top/i.test(this.settings.tipSettings.tipLocation)},right:function(){return/right/i.test(this.settings.tipSettings.tipLocation)},left:function(){return/left/i.test(this.settings.tipSettings.tipLocation)},corners:function(j){var f=c(b),n=f.height()/2,k=Math.ceil(this.settings.$target.offset().top-n+this.settings.$next_tip.outerHeight()),i=f.width()+this.scrollLeft(f),h=f.height()+k,g=f.height()+f.scrollTop(),l=f.scrollTop();if(k<l){if(k<0){l=0}else{l=k}}if(h>g){g=h}return[j.offset().top<l,i<j.offset().left+j.outerWidth(),g<j.offset().top+j.outerHeight(),this.scrollLeft(f)>j.offset().left]},visible:function(f){var g=f.length;while(g--){if(f[g]){return false}}return true},nub_position:function(f,h,g){if(h==="auto"){f.addClass(g)}else{f.addClass(h)}},startTimer:function(){if(this.settings.$li.length){this.settings.automate=setTimeout(function(){this.hide();this.show();this.startTimer()}.bind(this),this.settings.timer)}else{clearTimeout(this.settings.automate)}},end:function(){if(this.settings.cookieMonster){c.cookie(this.settings.cookieName,"ridden",{expires:this.settings.cookieExpires,domain:this.settings.cookieDomain})}if(this.settings.timer>0){clearTimeout(this.settings.automate)}if(this.settings.modal&&this.settings.expose){this.un_expose()}this.settings.$next_tip.data("closed",true);c(".joyride-modal-bg").hide();this.settings.$current_tip.hide();this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip);this.settings.postRideCallback(this.settings.$li.index(),this.settings.$current_tip);c(".joyride-tip-guide").remove()},outerHTML:function(f){return f.outerHTML||new XMLSerializer().serializeToString(f)},off:function(){c(this.scope).off(".joyride");c(b).off(".joyride");c(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride");c(".joyride-tip-guide, .joyride-modal-bg").remove();clearTimeout(this.settings.automate);this.settings={}},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.magellan={name:"magellan",version:"4.3.2",settings:{activeClass:"active",threshold:0},init:function(f,g,e){this.scope=f||this.scope;Foundation.inherit(this,"data_options");if(typeof g==="object"){c.extend(true,this.settings,g)}if(typeof g!=="string"){if(!this.settings.init){this.fixed_magellan=c("[data-magellan-expedition]");this.set_threshold();this.last_destination=c("[data-magellan-destination]").last();this.events()}return this.settings.init}else{return this[g].call(this,e)}},events:function(){var e=this;c(this.scope).on("arrival.fndtn.magellan","[data-magellan-arrival]",function(i){var g=c(this),h=g.closest("[data-magellan-expedition]"),f=h.attr("data-magellan-active-class")||e.settings.activeClass;g.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(g).removeClass(f);g.addClass(f)});this.fixed_magellan.on("update-position.fndtn.magellan",function(){var f=c(this)}).trigger("update-position");c(b).on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var f=c(b).scrollTop();e.fixed_magellan.each(function(){var h=c(this);if(typeof h.data("magellan-top-offset")==="undefined"){h.data("magellan-top-offset",h.offset().top)}if(typeof h.data("magellan-fixed-position")==="undefined"){h.data("magellan-fixed-position",false)}var i=(f+e.settings.threshold)>h.data("magellan-top-offset");var g=h.attr("data-magellan-top-offset");if(h.data("magellan-fixed-position")!=i){h.data("magellan-fixed-position",i);if(i){h.addClass("fixed");h.css({position:"fixed",top:0})}else{h.removeClass("fixed");h.css({position:"",top:""})}if(i&&typeof g!="undefined"&&g!=false){h.css({position:"fixed",top:g+"px"})}}})});if(this.last_destination.length>0){c(b).on("scroll.fndtn.magellan",function(h){var g=c(b).scrollTop(),f=g+c(b).height(),i=Math.ceil(e.last_destination.offset().top);c("[data-magellan-destination]").each(function(){var l=c(this),k=l.attr("data-magellan-destination"),j=l.offset().top-g;if(j<=e.settings.threshold){c("[data-magellan-arrival='"+k+"']").trigger("arrival")}if(f>=c(e.scope).height()&&i>g&&i<f){c("[data-magellan-arrival]").last().trigger("arrival")}})})}this.settings.init=true},set_threshold:function(){if(typeof this.settings.threshold!=="number"){this.settings.threshold=(this.fixed_magellan.length>0)?this.outerHeight(this.fixed_magellan,true):0}},off:function(){c(this.scope).off(".fndtn.magellan");c(b).off(".fndtn.magellan")},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,f,g,b){var i=function(){};var a=function(p,q){if(p.hasClass(q.slides_container_class)){return this}var v=this,k,j=p,w,u,o,t=0,n,l,r=false,s=false;j.children().first().addClass(q.active_slide_class);v.update_slide_number=function(x){if(q.slide_number){w.find("span:first").text(parseInt(x)+1);w.find("span:last").text(j.children().length)}if(q.bullets){u.children().removeClass(q.bullets_active_class);c(u.children().get(x)).addClass(q.bullets_active_class)}};v.update_active_link=function(x){var y=c('a[data-orbit-link="'+j.children().eq(x).attr("data-orbit-slide")+'"]');y.parents("ul").find("[data-orbit-link]").removeClass(q.bullets_active_class);y.addClass(q.bullets_active_class)};v.build_markup=function(){j.wrap('<div class="'+q.container_class+'"></div>');k=j.parent();j.addClass(q.slides_container_class);if(q.navigation_arrows){k.append(c('<a href="#"><span></span></a>').addClass(q.prev_class));k.append(c('<a href="#"><span></span></a>').addClass(q.next_class))}if(q.timer){o=c("<div>").addClass(q.timer_container_class);o.append("<span>");o.append(c("<div>").addClass(q.timer_progress_class));o.addClass(q.timer_paused_class);k.append(o)}if(q.slide_number){w=c("<div>").addClass(q.slide_number_class);w.append("<span></span> "+q.slide_number_text+" <span></span>");k.append(w)}if(q.bullets){u=c("<ol>").addClass(q.bullets_container_class);k.append(u);j.children().each(function(x,z){var y=c("<li>").attr("data-orbit-slide",x);u.append(y)})}if(q.stack_on_small){k.addClass(q.stack_on_small_class)}v.update_slide_number(0);v.update_active_link(0)};v._goto=function(D,C){if(D===t){return false}if(typeof l==="object"){l.restart()}var A=j.children();var y="next";r=true;if(D<t){y="prev"}if(D>=A.length){D=0}else{if(D<0){D=A.length-1}}var B=c(A.get(t));var z=c(A.get(D));B.css("zIndex",2);B.removeClass(q.active_slide_class);z.css("zIndex",4).addClass(q.active_slide_class);j.trigger("orbit:before-slide-change");q.before_slide_change();v.update_active_link(D);var E=function(){var F=function(){t=D;r=false;if(C===true){l=v.create_timer();l.start()}v.update_slide_number(t);j.trigger("orbit:after-slide-change",[{slide_number:t,total_slides:A.length}]);q.after_slide_change(t,A.length)};if(j.height()!=z.height()&&q.variable_height){j.animate({height:z.height()},250,"linear",F)}else{F()}};if(A.length===1){E();return false}var x=function(){if(y==="next"){n.next(B,z,E)}if(y==="prev"){n.prev(B,z,E)}};if(z.height()>j.height()&&q.variable_height){j.animate({height:z.height()},250,"linear",x)}else{x()}};v.next=function(x){x.stopImmediatePropagation();x.preventDefault();v._goto(t+1)};v.prev=function(x){x.stopImmediatePropagation();x.preventDefault();v._goto(t-1)};v.link_custom=function(z){z.preventDefault();var y=c(this).attr("data-orbit-link");if((typeof y==="string")&&(y=c.trim(y))!=""){var x=k.find("[data-orbit-slide="+y+"]");if(x.index()!=-1){v._goto(x.index())}}};v.link_bullet=function(y){var x=c(this).attr("data-orbit-slide");if((typeof x==="string")&&(x=c.trim(x))!=""){v._goto(parseInt(x))}};v.timer_callback=function(){v._goto(t+1,true)};v.compute_dimensions=function(){var y=c(j.children().get(t));var x=y.height();if(!q.variable_height){j.children().each(function(){if(c(this).height()>x){x=c(this).height()}})}j.height(x)};v.create_timer=function(){var x=new h(k.find("."+q.timer_container_class),q,v.timer_callback);return x};v.stop_timer=function(){if(typeof l==="object"){l.stop()}};v.toggle_timer=function(){var x=k.find("."+q.timer_container_class);if(x.hasClass(q.timer_paused_class)){if(typeof l==="undefined"){l=v.create_timer()}l.start()}else{if(typeof l==="object"){l.stop()}}};v.init=function(){v.build_markup();if(q.timer){l=v.create_timer();l.start()}n=new e(q,j);if(q.animation==="slide"){n=new d(q,j)}k.on("click","."+q.next_class,v.next);k.on("click","."+q.prev_class,v.prev);k.on("click","[data-orbit-slide]",v.link_bullet);k.on("click",v.toggle_timer);if(q.swipe){k.on("touchstart.fndtn.orbit",function(y){if(!y.touches){y=y.originalEvent}var x={start_page_x:y.touches[0].pageX,start_page_y:y.touches[0].pageY,start_time:(new Date()).getTime(),delta_x:0,is_scrolling:b};k.data("swipe-transition",x);y.stopPropagation()}).on("touchmove.fndtn.orbit",function(z){if(!z.touches){z=z.originalEvent}if(z.touches.length>1||z.scale&&z.scale!==1){return}var x=k.data("swipe-transition");if(typeof x==="undefined"){x={}}x.delta_x=z.touches[0].pageX-x.start_page_x;if(typeof x.is_scrolling==="undefined"){x.is_scrolling=!!(x.is_scrolling||Math.abs(x.delta_x)<Math.abs(z.touches[0].pageY-x.start_page_y))}if(!x.is_scrolling&&!x.active){z.preventDefault();var y=(x.delta_x<0)?(t+1):(t-1);x.active=true;v._goto(y)}}).on("touchend.fndtn.orbit",function(x){k.data("swipe-transition",{});x.stopPropagation()})}k.on("mouseenter.fndtn.orbit",function(x){if(q.timer&&q.pause_on_hover){v.stop_timer()}}).on("mouseleave.fndtn.orbit",function(x){if(q.timer&&q.resume_on_mouseout){l.start()}});c(g).on("click","[data-orbit-link]",v.link_custom);c(f).on("resize",v.compute_dimensions);c(f).on("load",v.compute_dimensions);c(f).on("load",function(){k.prev(".preloader").css("display","none")});j.trigger("orbit:ready")};v.init()};var h=function(l,o,r){var s=this,p=o.timer_speed,j=l.find("."+o.timer_progress_class),k,q,n=-1;this.update_progress=function(t){var u=j.clone();u.attr("style","");u.css("width",t+"%");j.replaceWith(u);j=u};this.restart=function(){clearTimeout(q);l.addClass(o.timer_paused_class);n=-1;s.update_progress(0)};this.start=function(){if(!l.hasClass(o.timer_paused_class)){return true}n=(n===-1)?p:n;l.removeClass(o.timer_paused_class);k=new Date().getTime();j.animate({width:"100%"},n,"linear");q=setTimeout(function(){s.restart();r()},n);l.trigger("orbit:timer-started")};this.stop=function(){if(l.hasClass(o.timer_paused_class)){return true}clearTimeout(q);l.addClass(o.timer_paused_class);var u=new Date().getTime();n=n-(u-k);var t=100-((n/p)*100);s.update_progress(t);l.trigger("orbit:timer-stopped")}};var d=function(n,j){var p=n.animation_speed;var l=(c("html[dir=rtl]").length===1);var o=l?"marginRight":"marginLeft";var k={};k[o]="0%";var q=(typeof jQuery==="undefined")?"ease-in-out":b;this.next=function(s,r,t){r.animate(k,p,q,function(){s.css(o,"100%");t()});s.animate({marginLeft:"-100%"},p,q)};this.prev=function(s,r,t){r.css(o,"-100%");r.animate(k,p,q,function(){s.css(o,"100%");t()});s.animate({marginLeft:"100%"},p,q)}};var e=function(l,j){var o=l.animation_speed;var k=(c("html[dir=rtl]").length===1);var n=k?"marginRight":"marginLeft";this.next=function(q,p,r){p.css({margin:"0%",opacity:"0.01"});p.animate({opacity:"1"},o,"linear",function(){q.css("margin","100%");r()})};this.prev=function(q,p,r){p.css({margin:"0%",opacity:"0.01"});p.animate({opacity:"1"},o,"linear",function(){q.css("margin","100%");r()})}};Foundation.libs=Foundation.libs||{};Foundation.libs.orbit={name:"orbit",version:"4.3.2",settings:{animation:"slide",timer_speed:10000,pause_on_hover:true,resume_on_mouseout:false,animation_speed:500,stack_on_small:false,navigation_arrows:true,slide_number:true,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:true,timer:true,variable_height:false,swipe:true,before_slide_change:i,after_slide_change:i},init:function(n,p,k){var j=this;Foundation.inherit(j,"data_options");if(typeof p==="object"){c.extend(true,j.settings,p)}if(c(n).is("[data-orbit]")){var l=c(n);var o=j.data_options(l);new a(l,c.extend({},j.settings,o))}c("[data-orbit]",n).each(function(q,s){var r=c(s);var t=j.data_options(r);new a(r,c.extend({},j.settings,t))})}}}(Foundation.zj,this,this.document));(function(d){function e(h,g,f){if(h.addEventListener){return h.addEventListener(g,f,false)}if(h.attachEvent){return h.attachEvent("on"+g,f)}}function c(g,j){var h,f;for(h=0,f=g.length;h<f;h++){if(g[h]===j){return true}}return false}function b(h,g){var f;if(h.createTextRange){f=h.createTextRange();f.move("character",g);f.select()}else{if(h.selectionStart){h.focus();h.setSelectionRange(g,g)}}}function a(g,f){try{g.type=f;return true}catch(h){return false}}d.Placeholders={Utils:{addEventListener:e,inArray:c,moveCaret:b,changeType:a}}}(this));(function(c){var M=["text","search","url","tel","email","password","number","textarea"],u=[27,33,34,35,36,37,38,39,40,8,46],t="#ccc",J="placeholdersjs",z=new RegExp("(?:^|\\s)"+J+"(?!\\S)"),A,o,D="data-placeholder-value",O="data-placeholder-active",k="data-placeholder-type",B="data-placeholder-submit",p="data-placeholder-bound",h="data-placeholder-focus",Q="data-placeholder-live",l=document.createElement("input"),s=document.getElementsByTagName("head")[0],E=document.documentElement,y=c.Placeholders,P=y.Utils,F,a,j,n,g,G,H,K,R,v,S;function T(){}function r(U){var i;if(U.value===U.getAttribute(D)&&U.getAttribute(O)==="true"){U.setAttribute(O,"false");U.value="";U.className=U.className.replace(z,"");i=U.getAttribute(k);if(i){U.type=i}return true}return false}function N(U){var i,V=U.getAttribute(D);if(U.value===""&&V){U.setAttribute(O,"true");U.value=V;U.className+=" "+J;i=U.getAttribute(k);if(i){U.type="text"}else{if(U.type==="password"){if(P.changeType(U,"text")){U.setAttribute(k,"password")}}}return true}return false}function I(Y,aa){var W,Z,X,U,V;if(Y&&Y.getAttribute(D)){aa(Y)}else{W=Y?Y.getElementsByTagName("input"):A;Z=Y?Y.getElementsByTagName("textarea"):o;for(V=0,U=W.length+Z.length;V<U;V++){X=V<W.length?W[V]:Z[V-W.length];aa(X)}}}function C(i){I(i,r)}function f(i){I(i,N)}function b(i){return function(){if(F&&i.value===i.getAttribute(D)&&i.getAttribute(O)==="true"){P.moveCaret(i,0)}else{r(i)}}}function x(i){return function(){N(i)}}function e(i){return function(U){j=i.value;if(i.getAttribute(O)==="true"){if(j===i.getAttribute(D)&&P.inArray(u,U.keyCode)){if(U.preventDefault){U.preventDefault()}return false}}}}function L(i){return function(){var U;if(i.getAttribute(O)==="true"&&i.value!==j){i.className=i.className.replace(z,"");i.value=i.value.replace(i.getAttribute(D),"");i.setAttribute(O,false);U=i.getAttribute(k);if(U){i.type=U}}if(i.value===""){i.blur();P.moveCaret(i,0)}}}function d(i){return function(){if(i===document.activeElement&&i.value===i.getAttribute(D)&&i.getAttribute(O)==="true"){P.moveCaret(i,0)}}}function q(i){return function(){C(i)}}function w(i){if(i.form){K=i.form;if(!K.getAttribute(B)){P.addEventListener(K,"submit",q(K));K.setAttribute(B,"true")}}P.addEventListener(i,"focus",b(i));P.addEventListener(i,"blur",x(i));if(F){P.addEventListener(i,"keydown",e(i));P.addEventListener(i,"keyup",L(i));P.addEventListener(i,"click",d(i))}i.setAttribute(p,"true");i.setAttribute(D,G);N(i)}y.nativeSupport=l.placeholder!==void 0;if(!y.nativeSupport){A=document.getElementsByTagName("input");o=document.getElementsByTagName("textarea");F=E.getAttribute(h)==="false";a=E.getAttribute(Q)!=="false";n=document.createElement("style");n.type="text/css";g=document.createTextNode("."+J+" { color:"+t+"; }");if(n.styleSheet){n.styleSheet.cssText=g.nodeValue}else{n.appendChild(g)}s.insertBefore(n,s.firstChild);for(S=0,v=A.length+o.length;S<v;S++){R=S<A.length?A[S]:o[S-A.length];G=R.attributes.placeholder;if(G){G=G.nodeValue;if(G&&P.inArray(M,R.type)){w(R)}}}H=setInterval(function(){for(S=0,v=A.length+o.length;S<v;S++){R=S<A.length?A[S]:o[S-A.length];G=R.attributes.placeholder;if(G){G=G.nodeValue;if(G&&P.inArray(M,R.type)){if(!R.getAttribute(p)){w(R)}if(G!==R.getAttribute(D)||(R.type==="password"&&!R.getAttribute(k))){if(R.type==="password"&&!R.getAttribute(k)&&P.changeType(R,"text")){R.setAttribute(k,"password")}if(R.value===R.getAttribute(D)){R.value=G}R.setAttribute(D,G)}}}}if(!a){clearInterval(H)}},100)}y.disable=y.nativeSupport?T:C;y.enable=y.nativeSupport?T:f}(this));(function(c,b,a,d){Foundation.libs.reveal={name:"reveal",version:"4.3.2",locked:false,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:true,closeOnEsc:true,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:c(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(f,g,e){Foundation.inherit(this,"data_options delay");if(typeof g==="object"){c.extend(true,this.settings,g)}else{if(typeof e!=="undefined"){c.extend(true,this.settings,e)}}if(typeof g!=="string"){this.events();return this.settings.init}else{return this[g].call(this,e)}},events:function(){var e=this;c(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(i){i.preventDefault();if(!e.locked){var g=c(this),h=g.data("reveal-ajax");e.locked=true;if(typeof h==="undefined"){e.open.call(e,g)}else{var f=h===true?g.attr("href"):h;e.open.call(e,g,{url:f})}}}).on("click.fndtn.reveal touchend",this.close_targets(),function(h){h.preventDefault();if(!e.locked){var f=c.extend({},e.settings,e.data_options(c(".reveal-modal.open"))),g=c(h.target)[0]===c("."+f.bgClass)[0];if(g&&!f.closeOnBackgroundClick){return}e.locked=true;e.close.call(e,g?c(".reveal-modal.open"):c(this).closest(".reveal-modal"))}});if(c(this.scope).hasClass("reveal-modal")){c(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video)}else{c(this.scope).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video)}c("body").bind("keyup.reveal",function(h){var f=c(".reveal-modal.open"),g=c.extend({},e.settings,e.data_options(f));if(h.which===27&&g.closeOnEsc){f.foundation("reveal","close")}});return true},open:function(h,i){if(h){if(typeof h.selector!=="undefined"){var g=c("#"+h.data("reveal-id"))}else{var g=c(this.scope);i=h}}else{var g=c(this.scope)}if(!g.hasClass("open")){var f=c(".reveal-modal.open");g.data("css-top",10);if(typeof g.data("css-top")==="undefined"){g.data("css-top",parseInt(g.css("top"),10)).data("offset",this.cache_offset(g))}g.trigger("open");if(f.length<1){this.toggle_bg()}if(typeof i==="undefined"||!i.url){this.hide(f,this.settings.css.close);this.show(g,this.settings.css.open)}else{var e=this,j=typeof i.success!=="undefined"?i.success:null;c.extend(i,{success:function(l,n,k){if(c.isFunction(j)){j(l,n,k)}g.html(l);c(g).foundation("section","reflow");e.hide(f,e.settings.css.close);e.show(g,e.settings.css.open)}});c.ajax(i)}}},close:function(f){var f=f&&f.length?f:c(this.scope),e=c(".reveal-modal.open");if(e.length>0){this.locked=true;f.trigger("close");this.toggle_bg();this.hide(e,this.settings.css.close)}},close_targets:function(){var e="."+this.settings.dismissModalClass;if(this.settings.closeOnBackgroundClick){return e+", ."+this.settings.bgClass}return e},toggle_bg:function(){if(c("."+this.settings.bgClass).length===0){this.settings.bg=c("<div />",{"class":this.settings.bgClass}).appendTo("#interface")}if(this.settings.bg.filter(":visible").length>0){this.hide(this.settings.bg)}else{this.show(this.settings.bg)}},show:function(k,j){if(j){var h=c(b).width();var g=c("#appbuilder").width();var e=Math.round(h*0.8);var i=h-g;j.width=e+"px";j.left=(((h-e)/2)-i)+"px";j.margin=0;if(k.parent("body").length===0){var l=k.wrap('<div style="display: none;" />').parent();k.on("closed.fndtn.reveal.wrapped",function(){k.detach().appendTo(l);k.unwrap().unbind("closed.fndtn.reveal.wrapped")});k.detach().appendTo("#interface")}if(/pop/i.test(this.settings.animation)){j.top=c(b).scrollTop()-k.data("offset")+"px";var f={top:c(b).scrollTop()+k.data("css-top")+"px",opacity:1};return this.delay(function(){return k.css(j).animate(f,this.settings.animationSpeed,"linear",function(){this.locked=false;k.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var f={opacity:1};return this.delay(function(){return k.css(j).animate(f,this.settings.animationSpeed,"linear",function(){this.locked=false;k.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return k.css(j).show().css({opacity:1}).addClass("open").trigger("opened")}if(/fade/i.test(this.settings.animation)){return k.fadeIn(this.settings.animationSpeed/2)}return k.show()},hide:function(g,f){if(f){if(/pop/i.test(this.settings.animation)){var e={top:-c(b).scrollTop()-g.data("offset")+"px",opacity:0};return this.delay(function(){return g.animate(e,this.settings.animationSpeed,"linear",function(){this.locked=false;g.css(f).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var e={opacity:0};return this.delay(function(){return g.animate(e,this.settings.animationSpeed,"linear",function(){this.locked=false;g.css(f).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return g.hide().css(f).removeClass("open").trigger("closed")}if(/fade/i.test(this.settings.animation)){return g.fadeOut(this.settings.animationSpeed/2)}return g.hide()},close_video:function(h){var g=c(this).find(".flex-video"),f=g.find("iframe");if(f.length>0){f.attr("data-src",f[0].src);f.attr("src","about:blank");g.hide()}},open_video:function(h){var g=c(this).find(".flex-video"),f=g.find("iframe");if(f.length>0){var j=f.attr("data-src");if(typeof j==="string"){f[0].src=f.attr("data-src")}else{var i=f[0].src;f[0].src=d;f[0].src=i}g.show()}},cache_offset:function(e){var f=e.show().height()+parseInt(e.css("top"),10);e.hide();return f},off:function(){c(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,b,a){Foundation.libs.section={name:"section",version:"4.3.2",settings:{deep_linking:false,one_up:true,multi_expand:false,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",resized_data_attr:"data-section-resized",small_style_data_attr:"data-section-small-style",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',active_class:"active",small_breakpoint:768,callback:function(){}},init:function(f,g,e){var d=this;Foundation.inherit(this,"throttle data_options position_right offset_right");if(typeof g==="object"){c.extend(true,d.settings,g)}if(typeof g!=="string"){this.events();return true}else{return this[g].call(this,e)}},events:function(){var q=this;var g=[],d=q.settings.section_selector,p=q.settings.region_selector.split(","),l=q.settings.title_selector.split(",");for(var h=0,n=p.length;h<n;h++){var o=p[h];for(var f=0,e=l.length;f<e;f++){var k=d+">"+o+">"+l[f];g.push(k+" a");g.push(k)}}c(q.scope).on("click.fndtn.section",g.join(","),function(i){var j=c(this).closest(q.settings.title_selector);q.close_navs(j);if(j.siblings(q.settings.content_selector).length>0){q.toggle_active.call(j[0],i)}});c(b).on("resize.fndtn.section",q.throttle(function(){q.resize()},30)).on("hashchange.fndtn.section",q.set_active_from_hash);c(a).on("click.fndtn.section",function(i){if(i.isPropagationStopped&&i.isPropagationStopped()){return}if(i.target===a){return}q.close_navs(c(i.target).closest(q.settings.title_selector))});c(b).triggerHandler("resize.fndtn.section");c(b).triggerHandler("hashchange.fndtn.section")},close_navs:function(f){var d=Foundation.libs.section,e=c(d.settings.nav_selector).filter(function(){return !c.extend({},d.settings,d.data_options(c(this))).one_up});if(f.length>0){var g=f.parent().parent();if(d.is_horizontal_nav(g)||d.is_vertical_nav(g)){e=e.filter(function(){return this!==g[0]})}}e.children(d.settings.region_selector).removeClass(d.settings.active_class)},toggle_active:function(l){var k=c(this),d=Foundation.libs.section,j=k.parent(),h=k.siblings(d.settings.content_selector),i=j.parent(),g=c.extend({},d.settings,d.data_options(i)),f=i.children(d.settings.region_selector).filter("."+d.settings.active_class);if(!g.deep_linking&&h.length>0){l.preventDefault()}l.stopPropagation();if(!j.hasClass(d.settings.active_class)){if(!d.is_accordion(i)||(d.is_accordion(i)&&!d.settings.multi_expand)){f.removeClass(d.settings.active_class);f.trigger("closed.fndtn.section")}j.addClass(d.settings.active_class);d.resize(j.find(d.settings.section_selector).not("["+d.settings.resized_data_attr+"]"),true);j.trigger("opened.fndtn.section")}else{if(j.hasClass(d.settings.active_class)&&d.is_accordion(i)||!g.one_up&&(d.small(i)||d.is_vertical_nav(i)||d.is_horizontal_nav(i)||d.is_accordion(i))){j.removeClass(d.settings.active_class);j.trigger("closed.fndtn.section")}}g.callback(i)},check_resize_timer:null,resize:function(i,f){var d=Foundation.libs.section,e=c(d.settings.section_selector),h=d.small(e),g=function(k,j){return !d.is_accordion(k)&&!k.is("["+d.settings.resized_data_attr+"]")&&(!h||d.is_horizontal_tabs(k))&&j===(k.css("display")==="none"||!k.parent().is(":visible"))};i=i||c(d.settings.section_selector);clearTimeout(d.check_resize_timer);if(!h){i.removeAttr(d.settings.small_style_data_attr)}i.filter(function(){return g(c(this),false)}).each(function(){var s=c(this),l=s.children(d.settings.region_selector),p=l.children(d.settings.title_selector),q=l.children(d.settings.content_selector),t=0;if(f&&s.children(d.settings.region_selector).filter("."+d.settings.active_class).length==0){var k=c.extend({},d.settings,d.data_options(s));if(!k.deep_linking&&(k.one_up||!d.is_horizontal_nav(s)&&!d.is_vertical_nav(s)&&!d.is_accordion(s))){l.filter(":visible").first().addClass(d.settings.active_class)}}if(d.is_horizontal_tabs(s)||d.is_auto(s)){var j=0;p.each(function(){var w=c(this);if(w.is(":visible")){w.css(!d.rtl?"left":"right",j);var v=parseInt(w.css("border-"+(d.rtl?"left":"right")+"-width"),10);if(v.toString()==="Nan"){v=0}j+=d.outerWidth(w)-v;t=Math.max(t,d.outerHeight(w))}});p.css("height",t);l.each(function(){var w=c(this),x=w.children(d.settings.content_selector),v=parseInt(x.css("border-top-width"),10);if(v.toString()==="Nan"){v=0}w.css("padding-top",t-v)});s.css("min-height",t)}else{if(d.is_horizontal_nav(s)){var o=true;p.each(function(){t=Math.max(t,d.outerHeight(c(this)))});l.each(function(){var v=c(this);v.css("margin-left","-"+(o?s:v.children(d.settings.title_selector)).css("border-left-width"));o=false});l.css("margin-top","-"+s.css("border-top-width"));p.css("height",t);q.css("top",t);s.css("min-height",t)}else{if(d.is_vertical_tabs(s)){var r=0;p.each(function(){var v=c(this);if(v.is(":visible")){v.css("top",r);var w=parseInt(v.css("border-top-width"),10);if(w.toString()==="Nan"){w=0}r+=d.outerHeight(v)-w}});q.css("min-height",r+1)}else{if(d.is_vertical_nav(s)){var n=0,u=true;p.each(function(){n=Math.max(n,d.outerWidth(c(this)))});l.each(function(){var v=c(this);v.css("margin-top","-"+(u?s:v.children(d.settings.title_selector)).css("border-top-width"));u=false});p.css("width",n);q.css(!d.rtl?"left":"right",n);s.css("width",n)}}}}s.attr(d.settings.resized_data_attr,true)});if(c(d.settings.section_selector).filter(function(){return g(c(this),true)}).length>0){d.check_resize_timer=setTimeout(function(){d.resize(i.filter(function(){return g(c(this),false)}),true)},700)}if(h){i.attr(d.settings.small_style_data_attr,true)}},is_vertical_nav:function(d){return/vertical-nav/i.test(d.data("section"))},is_horizontal_nav:function(d){return/horizontal-nav/i.test(d.data("section"))},is_accordion:function(d){return/accordion/i.test(d.data("section"))},is_horizontal_tabs:function(d){return/^tabs$/i.test(d.data("section"))},is_vertical_tabs:function(d){return/vertical-tabs/i.test(d.data("section"))},is_auto:function(d){var e=d.data("section");return e===""||/auto/i.test(e)},set_active_from_hash:function(){var d=Foundation.libs.section,f=b.location.hash.substring(1),g=c(d.settings.section_selector);var e;g.each(function(){var h=c(this),i=h.children(d.settings.region_selector);i.each(function(){var k=c(this),j=k.children(d.settings.content_selector).data("slug");if(new RegExp(j,"i").test(f)){e=h;return false}});if(e!=null){return false}});if(e!=null){g.each(function(){if(e==c(this)){var k=c(this),j=c.extend({},d.settings,d.data_options(k)),l=k.children(d.settings.region_selector),h=j.deep_linking&&f.length>0,i=false;l.each(function(){var o=c(this);if(i){o.removeClass(d.settings.active_class)}else{if(h){var n=o.children(d.settings.content_selector).data("slug");if(n&&new RegExp(n,"i").test(f)){if(!o.hasClass(d.settings.active_class)){o.addClass(d.settings.active_class)}i=true}else{o.removeClass(d.settings.active_class)}}else{if(o.hasClass(d.settings.active_class)){i=true}}}});if(!i&&(j.one_up||!d.is_horizontal_nav(k)&&!d.is_vertical_nav(k)&&!d.is_accordion(k))){l.filter(":visible").first().addClass(d.settings.active_class)}}})}},reflow:function(){var d=Foundation.libs.section;c(d.settings.section_selector).removeAttr(d.settings.resized_data_attr);d.throttle(function(){d.resize()},30)()},small:function(e){var d=c.extend({},this.settings,this.data_options(e));if(this.is_horizontal_tabs(e)){return false}if(e&&this.is_accordion(e)){return true}if(c("html").hasClass("lt-ie9")){return true}if(c("html").hasClass("ie8compat")){return true}return c(b).width()<d.small_breakpoint},off:function(){c(this.scope).off(".fndtn.section");c(b).off(".fndtn.section");c(a).off(".fndtn.section")}};c.fn.reflow_section=function(e){var f=this,d=Foundation.libs.section;f.removeAttr(d.settings.resized_data_attr);d.throttle(function(){d.resize(f,e)},30)();return this}}(Foundation.zj,window,document));(function(c,b,a,d){Foundation.libs.tooltips={name:"tooltips",version:"4.3.2",settings:{selector:".has-tip",additionalInheritableClasses:[],tooltipClass:".tooltip",touchCloseText:"tap to close",appendTo:"#interface","disable-for-touch":false,tipTemplate:function(e,f){return'<span data-selector="'+e+'" class="'+Foundation.libs.tooltips.settings.tooltipClass.substring(1)+'">'+f+'<span class="nub"></span></span>'}},cache:{},init:function(g,h,f){Foundation.inherit(this,"data_options");var e=this;if(typeof h==="object"){c.extend(true,this.settings,h)}else{if(typeof f!=="undefined"){c.extend(true,this.settings,f)}}if(typeof h!=="string"){if(Modernizr.touch){c(this.scope).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(j){var i=c.extend({},e.settings,e.data_options(c(this)));if(!i["disable-for-touch"]){j.preventDefault();c(i.tooltipClass).hide();e.showOrCreateTip(c(this))}}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltipClass,function(i){i.preventDefault();c(this).fadeOut(150)})}else{c(this.scope).on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(j){var i=c(this);if(/enter|over/i.test(j.type)){e.showOrCreateTip(i)}else{if(j.type==="mouseout"||j.type==="mouseleave"){e.hide(i)}}})}}else{return this[h].call(this,f)}},showOrCreateTip:function(e){var f=this.getTip(e);if(f&&f.length>0){return this.show(e)}return this.create(e)},getTip:function(f){var e=this.selector(f),g=null;if(e){g=c('span[data-selector="'+e+'"]'+this.settings.tooltipClass)}return(typeof g==="object")?g:false},selector:function(e){var g=e.attr("id"),f=e.attr("data-tooltip")||e.attr("data-selector");if((g&&g.length<1||!g)&&typeof f!="string"){f="tooltip"+Math.random().toString(36).substring(7);e.attr("data-selector",f)}return(g&&g.length>0)?g:f},create:function(e){var g=c(this.settings.tipTemplate(this.selector(e),c("<div></div>").html(e.attr("title")).html())),f=this.inheritable_classes(e);g.addClass(f).appendTo(this.settings.appendTo);if(Modernizr.touch){g.append('<span class="tap-to-close">'+this.settings.touchCloseText+"</span>")}e.removeAttr("title").attr("title","");this.show(e)},reposition:function(j,o,h){var e,p,l,i,g,k;o.css("visibility","hidden").show();e=j.data("width");p=o.children(".nub");l=this.outerHeight(p);i=this.outerHeight(p);k=function(v,u,r,q,t,s){return v.css({top:(u)?u:"auto",bottom:(q)?q:"auto",left:(t)?t:"auto",right:(r)?r:"auto",width:(s)?s:"auto",position:"fixed"}).end()};k(o,(j.offset().top+this.outerHeight(j)+10),"auto","auto",j.offset().left,e);if(c(b).width()<767){k(o,(j.offset().top+this.outerHeight(j)+10),"auto","auto",12.5,c(this.scope).width());o.addClass("tip-override");k(p,-l,"auto","auto",j.offset().left)}else{var f=j.offset().left;if(Foundation.rtl){f=j.offset().left+j.offset().width-this.outerWidth(o)}var n=(j.offset().top+this.outerHeight(j)+10)-c(a).scrollTop();k(o,n,"auto","auto",f,e);o.removeClass("tip-override");if(h&&h.indexOf("tip-top")>-1){k(o,(j.offset().top-this.outerHeight(o)),"auto","auto",f,e).removeClass("tip-override")}else{if(h&&h.indexOf("tip-left")>-1){k(o,(j.offset().top+(this.outerHeight(j)/2)-l*2.5),"auto","auto",(j.offset().left-this.outerWidth(o)-l),e).removeClass("tip-override")}else{if(h&&h.indexOf("tip-right")>-1){k(o,(j.offset().top+(this.outerHeight(j)/2)-l*2.5),"auto","auto",(j.offset().left+this.outerWidth(j)+l),e).removeClass("tip-override")}}}}o.css("visibility","visible").hide()},inheritable_classes:function(h){var g=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additionalInheritableClasses),f=h.attr("class"),e=f?c.map(f.split(" "),function(k,j){if(c.inArray(k,g)!==-1){return k}}).join(" "):"";return c.trim(e)},show:function(e){var f=this.getTip(e);this.reposition(e,f,e.attr("class"));f.fadeIn(150)},hide:function(e){var f=this.getTip(e);f.fadeOut(150)},reload:function(){var e=c(this);return(e.data("fndtn-tooltips"))?e.foundationTooltips("destroy").foundationTooltips("init"):e.foundationTooltips("init")},off:function(){c(this.scope).off(".fndtn.tooltip");c(this.settings.tooltipClass).each(function(e){c("[data-tooltip]").get(e).attr("title",c(this).text())}).remove()},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.topbar={name:"topbar",version:"4.3.2",settings:{index:0,stickyClass:"sticky",custom_back_text:true,back_text:"Back",is_hover:true,mobile_show_parent_link:false,scrolltop:true,init:false},init:function(g,h,f){Foundation.inherit(this,"data_options addCustomRule");var e=this;if(typeof h==="object"){c.extend(true,this.settings,h)}else{if(typeof f!=="undefined"){c.extend(true,this.settings,f)}}if(typeof h!=="string"){c(".top-bar, [data-topbar]").each(function(){c.extend(true,e.settings,e.data_options(c(this)));e.settings.$w=c(b);e.settings.$topbar=c(this);e.settings.$section=e.settings.$topbar.find("section");e.settings.$titlebar=e.settings.$topbar.children("ul").first();e.settings.$topbar.data("index",0);var j=e.settings.$topbar.parent();if(j.hasClass("fixed")||j.hasClass(e.settings.stickyClass)){e.settings.$topbar.data("height",e.outerHeight(j));e.settings.$topbar.data("stickyoffset",j.offset().top)}else{e.settings.$topbar.data("height",e.outerHeight(e.settings.$topbar))}var i=c("<div class='top-bar-js-breakpoint'/>").insertAfter(e.settings.$topbar);e.settings.breakPoint=i.width();i.remove();e.assemble();if(e.settings.is_hover){e.settings.$topbar.find(".has-dropdown").addClass("not-click")}e.addCustomRule(".f-topbar-fixed { padding-top: "+e.settings.$topbar.data("height")+"px }");if(e.settings.$topbar.parent().hasClass("fixed")){c("body").addClass("f-topbar-fixed")}});if(!e.settings.init){this.events()}return this.settings.init}else{return this[h].call(this,f)}},toggle:function(){var f=this;var e=c(".top-bar, [data-topbar]"),g=e.find("section, .section");if(f.breakpoint()){if(!f.rtl){g.css({left:"0%"});g.find(">.name").css({left:"100%"})}else{g.css({right:"0%"});g.find(">.name").css({right:"100%"})}g.find("li.moved").removeClass("moved");e.data("index",0);e.toggleClass("expanded").css("height","")}if(f.settings.scrolltop){if(!e.hasClass("expanded")){if(e.hasClass("fixed")){e.parent().addClass("fixed");e.removeClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(e.parent().hasClass("fixed")){if(f.settings.scrolltop){e.parent().removeClass("fixed");e.addClass("fixed");c("body").removeClass("f-topbar-fixed");b.scrollTo(0,0)}else{e.parent().removeClass("expanded")}}}}else{if(e.parent().hasClass(f.settings.stickyClass)){e.parent().addClass("fixed")}if(e.parent().hasClass("fixed")){if(!e.hasClass("expanded")){e.removeClass("fixed");e.parent().removeClass("expanded");f.updateStickyPositioning()}else{e.addClass("fixed");e.parent().addClass("expanded")}}}},timer:null,events:function(){var e=this;c(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(f){f.preventDefault();e.toggle()}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(j){var g=c(this),i=c(j.target),h=g.closest("[data-topbar], .top-bar"),f=h.data("topbar");if(i.data("revealId")){e.toggle();return}if(e.breakpoint()){return}if(e.settings.is_hover&&!Modernizr.touch){return}j.stopImmediatePropagation();if(i[0].nodeName==="A"&&i.parent().hasClass("has-dropdown")){j.preventDefault()}if(g.hasClass("hover")){g.removeClass("hover").find("li").removeClass("hover");g.parents("li.hover").removeClass("hover")}else{g.addClass("hover")}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(k){if(e.breakpoint()&&c(b).width()!=e.settings.breakPoint){k.preventDefault();var j=c(this),g=j.closest(".top-bar, [data-topbar]"),i=g.find("section, .section"),h=j.next(".dropdown").outerHeight(),f=j.closest("li");g.data("index",g.data("index")+1);f.addClass("moved");if(!e.rtl){i.css({left:-(100*g.data("index"))+"%"});i.find(">.name").css({left:100*g.data("index")+"%"})}else{i.css({right:-(100*g.data("index"))+"%"});i.find(">.name").css({right:100*g.data("index")+"%"})}g.css("height",e.outerHeight(j.siblings("ul"),true)+e.settings.$topbar.data("height"))}});c(b).on("resize.fndtn.topbar",function(){if(typeof e.settings.$topbar==="undefined"){return}var g=e.settings.$topbar.parent("."+this.settings.stickyClass);var h;if(!e.breakpoint()){var f=e.settings.$topbar.hasClass("expanded");c(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover");if(f){e.toggle()}}if(g.length>0){if(g.hasClass("fixed")){g.removeClass("fixed");h=g.offset().top;if(c(a.body).hasClass("f-topbar-fixed")){h-=e.settings.$topbar.data("height")}e.settings.$topbar.data("stickyoffset",h);g.addClass("fixed")}else{h=g.offset().top;e.settings.$topbar.data("stickyoffset",h)}}}.bind(this));c("body").on("click.fndtn.topbar",function(g){var f=c(g.target).closest("li").closest("li.hover");if(f.length>0){return}c(".top-bar li, [data-topbar] li").removeClass("hover")});c(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(k){k.preventDefault();var j=c(this),g=j.closest(".top-bar, [data-topbar]"),i=g.find("section, .section"),h=j.closest("li.moved"),f=h.parent();g.data("index",g.data("index")-1);if(!e.rtl){i.css({left:-(100*g.data("index"))+"%"});i.find(">.name").css({left:100*g.data("index")+"%"})}else{i.css({right:-(100*g.data("index"))+"%"});i.find(">.name").css({right:100*g.data("index")+"%"})}if(g.data("index")===0){g.css("height","")}else{g.css("height",e.outerHeight(f,true)+e.settings.$topbar.data("height"))}setTimeout(function(){h.removeClass("moved")},300)})},breakpoint:function(){return c(a).width()<=this.settings.breakPoint||c("html").hasClass("lt-ie9")},assemble:function(){var e=this;this.settings.$section.detach();this.settings.$section.find(".has-dropdown>a").each(function(){var f=c(this),i=f.siblings(".dropdown"),g=f.attr("href");if(e.settings.mobile_show_parent_link&&g&&g.length>1){var h=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+g+'">'+f.text()+"</a></li>")}else{var h=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li>')}if(e.settings.custom_back_text==true){h.find("h5>a").html(e.settings.back_text)}else{h.find("h5>a").html("&laquo; "+f.html())}i.prepend(h)});this.settings.$section.appendTo(this.settings.$topbar);this.sticky()},height:function(f){var g=0,e=this;f.find("> li").each(function(){g+=e.outerHeight(c(this),true)});return g},sticky:function(){var f=c(b),e=this;f.scroll(function(){e.updateStickyPositioning()})},updateStickyPositioning:function(){var e="."+this.settings.stickyClass;var f=c(b);if(c(e).length>0){var g=this.settings.$topbar.data("stickyoffset");if(!c(e).hasClass("expanded")){if(f.scrollTop()>(g)){if(!c(e).hasClass("fixed")){c(e).addClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(f.scrollTop()<=g){if(c(e).hasClass("fixed")){c(e).removeClass("fixed");c("body").removeClass("f-topbar-fixed")}}}}}},off:function(){c(this.scope).off(".fndtn.topbar");c(b).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document));jQuery(document).ready(function(){wx.makeApiCall("account/get_tier",{},function(a){if(a.expiry==2.1||a.expiry=="2.1"){wx.makeApiCall("account/get_expiry",{},function(e){if(e.expiry=="0000-00-00 00:00:00"){return}var f=new Date(e.expiry);var b=86400000;var c=f.getTime()-(new Date()).getTime();var g=c/b;g=Math.floor(g);if(g<0){jQuery("#account-expired").show();return}if(g<5){jQuery("#account-expiration-warning .secondary").addClass("alert").removeClass("secondary")}if(g==0){jQuery("#expiry-days").html("today!")}else{if(g==1){jQuery("#expiry-days").html("in one day.")}else{jQuery("#expiry-days").html("in "+g.toString()+" days.")}}jQuery("#account-expiration-warning").show()})}})});var qq=qq||{};qq.extend=function(b,a){for(var c in a){b[c]=a[c]}};qq.indexOf=function(b,c,d){if(b.indexOf){return b.indexOf(c,d)}d=d||0;var a=b.length;if(d<0){d+=a}for(;d<a;d++){if(d in b&&b[d]===c){return d}}return -1};qq.getUniqueId=(function(){var a=0;return function(){return a++}})();qq.attach=function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}};qq.detach=function(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{if(a.attachEvent){a.detachEvent("on"+c,b)}}};qq.preventDefault=function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};qq.insertBefore=function(d,c){c.parentNode.insertBefore(d,c)};qq.remove=function(a){a.parentNode.removeChild(a)};qq.contains=function(b,a){if(b==a){return true}if(b.contains){return b.contains(a)}else{return !!(a.compareDocumentPosition(b)&8)}};qq.toElement=(function(){var a=document.createElement("div");return function(c){a.innerHTML=c;var b=a.firstChild;a.removeChild(b);return b}})();qq.css=function(a,b){if(b.opacity!=null){if(typeof a.style.opacity!="string"&&typeof(a.filters)!="undefined"){b.filter="alpha(opacity="+Math.round(100*b.opacity)+")"}}qq.extend(a.style,b)};qq.hasClass=function(b,a){var c=new RegExp("(^| )"+a+"( |$)");return c.test(b.className)};qq.addClass=function(b,a){if(!qq.hasClass(b,a)){b.className+=" "+a}};qq.removeClass=function(b,a){var c=new RegExp("(^| )"+a+"( |$)");b.className=b.className.replace(c," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(a,b){a.innerText=b;a.textContent=b};qq.children=function(b){var a=[],c=b.firstChild;while(c){if(c.nodeType==1){a.push(c)}c=c.nextSibling}return a};qq.getByClass=function(d,e){if(d.querySelectorAll){return d.querySelectorAll("."+e)}var b=[];var f=d.getElementsByTagName("*");var a=f.length;for(var c=0;c<a;c++){if(qq.hasClass(f[c],e)){b.push(f[c])}}return b};qq.obj2url=function(f,b,h){var g=[],d="&",e=function(k,j){var l=b?(/\[\]$/.test(b))?b:b+"["+j+"]":j;if((l!="undefined")&&(j!="undefined")){g.push((typeof k==="object")?qq.obj2url(k,l,true):(Object.prototype.toString.call(k)==="[object Function]")?encodeURIComponent(l)+"="+encodeURIComponent(k()):encodeURIComponent(l)+"="+encodeURIComponent(k))}};if(!h&&b){d=(/\?/.test(b))?(/\?$/.test(b))?"":"&":"?";g.push(b);g.push(qq.obj2url(f))}else{if((Object.prototype.toString.call(f)==="[object Array]")&&(typeof f!="undefined")){for(var c=0,a=f.length;c<a;++c){e(f[c],c)}}else{if((typeof f!="undefined")&&(f!==null)&&(typeof f==="object")){for(var c in f){e(f[c],c)}}else{g.push(encodeURIComponent(b)+"="+encodeURIComponent(f))}}}return g.join(d).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(a){this._options={debug:false,action:"/server/upload",params:{},button:null,multiple:true,maxConnections:3,allowedExtensions:[],sizeLimit:5500000,minSizeLimit:0,onSubmit:function(c,b){},onProgress:function(e,d,b,c){},onComplete:function(d,c,b){},onCancel:function(c,b){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(b){alert(b)}};qq.extend(this._options,a);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button){this._button=this._createUploadButton(this._options.button)}this._preventLeaveInProgress()};qq.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(b){var a=this;return new qq.UploadButton({element:b,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(c){a._onInputChange(c)}})},_createUploadHandler:function(){var a=this,c;if(qq.UploadHandlerXhr.isSupported()){c="UploadHandlerXhr"}else{c="UploadHandlerForm"}var b=new qq[c]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(g,f,d,e){a._onProgress(g,f,d,e);a._options.onProgress(g,f,d,e)},onComplete:function(f,e,d){a._onComplete(f,e,d);a._options.onComplete(f,e,d)},onCancel:function(e,d){a._onCancel(e,d);a._options.onCancel(e,d)}});return b},_preventLeaveInProgress:function(){var a=this;qq.attach(window,"beforeunload",function(b){if(!a._filesInProgress){return}var b=b||window.event;b.returnValue=a._options.messages.onLeave;return a._options.messages.onLeave})},_onSubmit:function(b,a){this._filesInProgress++},_onProgress:function(d,c,a,b){},_onComplete:function(c,b,a){this._filesInProgress--;if(a.error){this._options.showMessage(a.error)}},_onCancel:function(b,a){this._filesInProgress--},_onInputChange:function(a){if(this._handler instanceof qq.UploadHandlerXhr){this._uploadFileList(a.files)}else{if(this._validateFile(a)){this._uploadFile(a)}}this._button.reset()},_uploadFileList:function(b){for(var a=0;a<b.length;a++){if(!this._validateFile(b[a])){return}}for(var a=0;a<b.length;a++){this._uploadFile(b[a])}},_uploadFile:function(a){var c=this._handler.add(a);var b=this._handler.getName(c);if(this._options.onSubmit(c,b)!==false){this._onSubmit(c,b);this._handler.upload(c,this._options.params)}},_validateFile:function(c){var a,b;if(c.value){a=c.value.replace(/.*(\/|\\)/,"")}else{a=c.fileName!=null?c.fileName:c.name;b=c.fileSize!=null?c.fileSize:c.size}if(!this._isAllowedExtension(a)){this._error("typeError",a);return false}else{if(b===0){this._error("emptyError",a);return false}else{if(b&&this._options.sizeLimit&&b>this._options.sizeLimit){this._error("sizeError",a);return false}else{if(b&&b<this._options.minSizeLimit){this._error("minSizeError",a);return false}}}}return true},_error:function(c,d){var b=this._options.messages[c];function a(e,f){b=b.replace(e,f)}a("{file}",this._formatFileName(d));a("{extensions}",this._options.allowedExtensions.join(", "));a("{sizeLimit}",this._formatSize(this._options.sizeLimit));a("{minSizeLimit}",this._formatSize(this._options.minSizeLimit));this._options.showMessage(b)},_formatFileName:function(a){if(a.length>33){a=a.slice(0,19)+"..."+a.slice(-13)}return a},_isAllowedExtension:function(d){var b=(-1!==d.indexOf("."))?d.replace(/.*[.]/,"").toLowerCase():"";var c=this._options.allowedExtensions;if(!c.length){return true}for(var a=0;a<c.length;a++){if(c[a].toLowerCase()==b){return true}}return false},_formatSize:function(a){var b=-1;do{a=a/1024;b++}while(a>99);return Math.max(a,0.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][b]}};qq.FileUploader=function(a){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><button class="qq-upload-button success expand radius">Upload image</button><div class="qq-upload-drop-area" style="display:none; width:0; height:0;"></div><ul class="qq-upload-list" style="display: none; width: 0; height: 0;"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"},callback:null});qq.extend(this._options,a);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._callback=this._options.callback;this._button=this._createUploadButton(this._find(this._element,"button"));this._bindCancelEvent();this._setupDragDrop()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);qq.extend(qq.FileUploader.prototype,{_find:function(c,b){var a=qq.getByClass(c,this._options.classes[b])[0];if(!a){throw new Error("element not found "+b)}return a},_setupDragDrop:function(){var b=this,c=this._find(this._element,"drop");var a=new qq.UploadDropZone({element:c,onEnter:function(d){qq.addClass(c,b._classes.dropActive);d.stopPropagation()},onLeave:function(d){d.stopPropagation()},onLeaveNotDescendants:function(d){qq.removeClass(c,b._classes.dropActive)},onDrop:function(d){c.style.display="none";qq.removeClass(c,b._classes.dropActive);b._uploadFileList(d.dataTransfer.files)}});c.style.display="none";qq.attach(document,"dragenter",function(d){if(!a._isValidFileDrag(d)){return}c.style.display="block"});qq.attach(document,"dragleave",function(f){if(!a._isValidFileDrag(f)){return}var d=document.elementFromPoint(f.clientX,f.clientY);if(!d||d.nodeName=="HTML"){c.style.display="none"}})},_onSubmit:function(b,a){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(b,a)},_onProgress:function(g,f,a,d){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var c=this._getItemByFileId(g);var b=this._find(c,"size");b.style.display="inline";var e;if(a!=d){e=Math.round(a/d*100)+"% from "+this._formatSize(d)}else{e=this._formatSize(d)}qq.setText(b,e)},_onComplete:function(d,c,a){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var b=this._getItemByFileId(d);qq.remove(this._find(b,"cancel"));qq.remove(this._find(b,"spinner"));if(a.success){qq.addClass(b,this._classes.success);this._callback(a.url)}else{qq.addClass(b,this._classes.fail)}},_addToList:function(d,c){var a=qq.toElement(this._options.fileTemplate);a.qqFileId=d;var b=this._find(a,"file");qq.setText(b,this._formatFileName(c));this._find(a,"size").style.display="none";this._listElement.appendChild(a)},_getItemByFileId:function(b){var a=this._listElement.firstChild;while(a){if(a.qqFileId==b){return a}a=a.nextSibling}},_bindCancelEvent:function(){var a=this,b=this._listElement;qq.attach(b,"click",function(f){f=f||window.event;var d=f.target||f.srcElement;if(qq.hasClass(d,a._classes.cancel)){qq.preventDefault(f);var c=d.parentNode;a._handler.cancel(c.qqFileId);qq.remove(c)}})}});qq.UploadDropZone=function(a){this._options={element:null,onEnter:function(b){},onLeave:function(b){},onLeaveNotDescendants:function(b){},onDrop:function(b){}};qq.extend(this._options,a);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};qq.UploadDropZone.prototype={_disableDropOutside:function(a){if(!qq.UploadDropZone.dropOutsideDisabled){qq.attach(document,"dragover",function(b){if(b.dataTransfer){b.dataTransfer.dropEffect="none";b.preventDefault()}});qq.UploadDropZone.dropOutsideDisabled=true}},_attachEvents:function(){var a=this;qq.attach(a._element,"dragover",function(c){if(!a._isValidFileDrag(c)){return}var b=c.dataTransfer.effectAllowed;if(b=="move"||b=="linkMove"){c.dataTransfer.dropEffect="move"}else{c.dataTransfer.dropEffect="copy"}c.stopPropagation();c.preventDefault()});qq.attach(a._element,"dragenter",function(b){if(!a._isValidFileDrag(b)){return}a._options.onEnter(b)});qq.attach(a._element,"dragleave",function(c){if(!a._isValidFileDrag(c)){return}a._options.onLeave(c);var b=document.elementFromPoint(c.clientX,c.clientY);if(qq.contains(this,b)){return}a._options.onLeaveNotDescendants(c)});qq.attach(a._element,"drop",function(b){if(!a._isValidFileDrag(b)){return}b.preventDefault();a._options.onDrop(b)})},_isValidFileDrag:function(c){var b=c.dataTransfer,a=navigator.userAgent.indexOf("AppleWebKit")>-1;return b&&b.effectAllowed!="none"&&(b.files||(!a&&b.types.contains&&b.types.contains("Files")))}};qq.UploadButton=function(a){this._options={element:null,multiple:false,name:"file",onChange:function(b){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,a);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){if(this._input.parentNode){qq.remove(this._input)}qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var b=document.createElement("input");if(this._options.multiple){b.setAttribute("multiple","multiple")}b.setAttribute("type","file");b.setAttribute("name",this._options.name);qq.css(b,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});this._element.appendChild(b);var a=this;qq.attach(b,"change",function(){a._options.onChange(b)});qq.attach(b,"mouseover",function(){qq.addClass(a._element,a._options.hoverClass)});qq.attach(b,"mouseout",function(){qq.removeClass(a._element,a._options.hoverClass)});qq.attach(b,"focus",function(){qq.addClass(a._element,a._options.focusClass)});qq.attach(b,"blur",function(){qq.removeClass(a._element,a._options.focusClass)});if(window.attachEvent){b.setAttribute("tabIndex","-1")}return b}};qq.UploadHandlerAbstract=function(a){this._options={debug:false,action:"/upload.php",maxConnections:999,onProgress:function(e,d,b,c){},onComplete:function(d,c,b){},onCancel:function(c,b){}};qq.extend(this._options,a);this._queue=[];this._params=[]};qq.UploadHandlerAbstract.prototype={log:function(a){},add:function(a){},upload:function(d,b){var a=this._queue.push(d);var c={};qq.extend(c,b);this._params[d]=c;if(a<=this._options.maxConnections){this._upload(d,this._params[d])}},cancel:function(a){this._cancel(a);this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++){this._cancel(this._queue[a])}this._queue=[]},getName:function(a){},getSize:function(a){},getQueue:function(){return this._queue},_upload:function(a){},_cancel:function(a){},_dequeue:function(d){var b=qq.indexOf(this._queue,d);this._queue.splice(b,1);var a=this._options.maxConnections;if(this._queue.length>=a&&b<a){var c=this._queue[a-1];this._upload(c,this._params[c])}}};qq.UploadHandlerForm=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[b]=a;if(a.parentNode){qq.remove(a)}return b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(b){this._options.onCancel(b,this.getName(b));delete this._inputs[b];var a=document.getElementById(b);if(a){a.setAttribute("src","javascript:false;");qq.remove(a)}},_upload:function(g,e){var b=this._inputs[g];if(!b){throw new Error("file with passed id was not added, or already uploaded or cancelled")}var f=this.getName(g);var c=this._createIframe(g);var d=this._createForm(c,e);d.appendChild(b);var a=this;this._attachLoadEvent(c,function(){a.log("iframe loaded");var h=a._getIframeContentJSON(c);a._options.onComplete(g,f,h);a._dequeue(g);delete a._inputs[g];setTimeout(function(){qq.remove(c)},1)});d.submit();qq.remove(d);return g},_attachLoadEvent:function(a,b){qq.attach(a,"load",function(){if(!a.parentNode){return}if(a.contentDocument&&a.contentDocument.body&&a.contentDocument.body.innerHTML=="false"){return}b()})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")")}catch(err){response={}}return response},_createIframe:function(b){var a=qq.toElement('<iframe src="javascript:false;" name="'+b+'" />');a.setAttribute("id",b);a.style.display="none";document.body.appendChild(a);return a},_createForm:function(a,c){var b=qq.toElement('<form method="post" enctype="multipart/form-data"></form>');var d=qq.obj2url(c,this._options.action);b.setAttribute("action",d);b.setAttribute("target",a.name);b.style.display="none";document.body.appendChild(b);return b}});qq.UploadHandlerXhr=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");a.type="file";return("multiple" in a&&typeof File!="undefined"&&typeof(new XMLHttpRequest()).upload!="undefined")};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerXhr.prototype,{add:function(a){if(!(a instanceof File)){throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)")}return this._files.push(a)-1},getName:function(b){var a=this._files[b];return a.fileName!=null?a.fileName:a.name},getSize:function(b){var a=this._files[b];return a.fileSize!=null?a.fileSize:a.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(h,f){var d=this._files[h],b=this.getName(h),c=this.getSize(h);this._loaded[h]=0;var e=this._xhrs[h]=new XMLHttpRequest();var a=this;e.upload.onprogress=function(i){if(i.lengthComputable){a._loaded[h]=i.loaded;a._options.onProgress(h,b,i.loaded,i.total)}};e.onreadystatechange=function(){if(e.readyState==4){a._onComplete(h,e)}};f=f||{};f.qqfile=b;var g=qq.obj2url(f,this._options.action);e.open("POST",g,true);e.setRequestHeader("X-Requested-With","XMLHttpRequest");e.setRequestHeader("X-File-Name",encodeURIComponent(b));e.setRequestHeader("Content-Type","application/octet-stream");e.send(d)},_onComplete:function(id,xhr){if(!this._files[id]){return}var name=this.getName(id);var size=this.getSize(id);this._options.onProgress(id,name,size,size);if(xhr.status==200){this.log("xhr - server response received");this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")")}catch(err){response={}}this._options.onComplete(id,name,response)}else{this._options.onComplete(id,name,{})}this._files[id]=null;this._xhrs[id]=null;this._dequeue(id)},_cancel:function(a){this._options.onCancel(a,this.getName(a));this._files[a]=null;if(this._xhrs[a]){this._xhrs[a].abort();this._xhrs[a]=null}}});function loadImageUploaders(){jQuery(".wx-theme-file-uploader").each(function(){var b=jQuery(this).attr("ref");var c=jQuery(this).attr("rel");var a=new qq.FileUploader({element:jQuery(this)[0],action:ajaxurl+"?action=ajaxHandleUpload",debug:true,onSubmit:function(){jQuery("#"+b).fadeOut({duration:500,queue:true})},callback:function(d){jQuery("#wx-upload-info").remove();jQuery(".qq-upload-success").hide();jQuery("#"+b).attr("src",d).load(function(){jQuery("#"+b).fadeIn({queue:true})});var e=jQuery("input[name="+c+"]");e.attr("value",d);Backbone.Events.trigger("image:change",e);return false}})})}var wx=wx||{};var wxApp=wxApp||{};(function(a){wx.makeApiCall=function(j,h,d,g){var b="POST",f="";var i=wx.apiUrl+j+"?app_key="+wx.siteKey;var e=[];g=g||"json";for(var c in h){e.push(encodeURIComponent(c)+"="+encodeURIComponent(h[c]))}if(e.length){f=e.join("&")}a.ajax({url:i,type:b,data:f,datatype:g,success:function(k){wx.apiSuccess(k,d)},error:function(l,o){if(l.responseText[0]!=="{"){var n=l.responseText.indexOf("{");if(n>-1){var k=l.responseText.substring(n);k=JSON.parse(k);wx.apiSuccess(k,d);return}}jQuery("#wx-modal-loading-text").html(o);jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html("Server Error Occurred")}})};wx.apiSuccess=function(c,b){if(!c.error&&c.success){b(c)}else{jQuery("#wx-modal-loading-text").html(c.message?c.message:"Error");jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html("Server Error Occurred")}Backbone.Events.trigger("api:success")};wx.getText=function(d,b){var e="GET";var c=wx.apiUrl+d+"?app_key="+wx.siteKey;a.ajax({url:c,type:e,datatype:"text",success:function(f){if(b){b(f)}},error:function(f,g){console.log(g)}})};wx.refreshAppPreview=function(){console.log("Refreshing Preview");a("#iframe-loading").hide();if(a.browser.webkit){a("#preview-app-dialog-no-webkit").hide();a("#preview-app-dialog-frame").attr("src",a("#preview-app-dialog-frame").attr("rel"));a("#preview-app-dialog-frame").show()}else{a("#preview-app-dialog-frame").hide();a("#preview-app-dialog-no-webkit").show()}};wx.rebuildApp=function(){wx.poll=true;a("#preview-app-dialog-frame").hide();a("#preview-app-dialog-no-webkit").hide();a("#iframe-loading").show()};wx.cleanUrl=function(b){var c=b.indexOf("?");if(c>-1){b=b.substring(0,c)}return b}})(jQuery);wx.log=function(a){if(!!console.log){console.log(a)}};var wxApp=wxApp||{};(function(a){wxApp.Tab=Backbone.Model.extend({defaults:{id:"",title:"",icon_id:1,icon:"",tabIcon:null,tabIcon_id:0,subTabs:false},validate:function(b){},initialize:function(){var b=this;var c=new wxApp.SubTabCollection();this.set({subTabs:c});this.on("invalid",function(e,d){console.log(d)});this.get("subTabs").on("remove",function(d){if(!b.getSubTabs().length){b.trigger("destroy")}})},setTitle:function(b){this.set({title:b})},addSubTab:function(c){var b=this;c.set("parent_id",this.get("id"));this.get("subTabs").add(c);c.on("tab:move",function(){b.getSubTabs().remove(this)})},deleteSubTab:function(b){this.get("subTabs").remove(b)},getSubTabs:function(){return this.get("subTabs")},destroy:function(){var b=this;wx.makeApiCall("tabs/delete",{tab_id:this.get("id")},function(){b.trigger("destroy")})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTab=wxApp.Tab.extend({defaults:function(){return{id:null,parent_id:null,title:"",tabTitle:"",icon_id:1,icon:"",type:null,layout:null,tabLayout:null,typeDescription:"",published:1,config:{},featureName:"",validateFeed:true,buildPreview:false,helpTitle:"Help tips ",helpBody:""}},typeDescription:"",validateFeed:true,buildPreview:false,allowTitleEdit:true,initialize:function(){},setConfig:function(c,f){var b=this.getConfig();b[c]=f;try{this.set("config",b)}catch(d){}},deleteConfig:function(c){var b=this.getConfig();delete b[c];this.set("config",b)},getConfig:function(){return this.get("config")},getModelName:function(){var c=false;console.log(this.get("content"));for(var b in wxApp){if(b!=="SubTab"&&wxApp[b]==this.constructor){c=b;break}}console.log("Returning "+c);return c},getAPIData:function(){console.log("getAPIData");console.log(this);var b=this.toJSON();b.config=JSON.stringify(b.config);if(b.id==b.parent_id){delete b.parent_id}if(b.id){b.tab_id=b.id}return this.filterAPIData(b)},filterAPIData:function(b){if(typeof b.geo!=="undefined"){if(!b.geo){delete b.geo}}return b},toJSON:function(){var b=JSON.parse(JSON.stringify(this.attributes));b.validateFeed=this.validateFeed;b.typeDescription=this.typeDescription;return b},getValidateFeed:function(){return true},save:function(){var b=this;wx.makeApiCall("tabs/add_tab",b.getAPIData(),function(c){if(!b.get("id")){b.set("id",c.tab_id);Backbone.Events.trigger("tab:new",b)}else{b.trigger("save",b)}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlAttributes=Backbone.Model.extend({defaults:{}});wxApp.FormBuilderControl=Backbone.Model.extend({defaults:function(){return{control:"",type:"",label:"",hidePlaceholderClass:"",showPlaceholder:false,innerText:"",allowAdditional:"",allowAdditionalClass:"",valueType:"number",valueClass:"hide",minClass:"hide",maxClass:"hide",stepClass:"hide",multiClass:"hide",requiredClass:"",autocompleteClass:"hide",controlTitle:""}},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.togglePlaceholder();this.on("change:showPlaceholder",this.togglePlaceholder)},togglePlaceholder:function(){if(this.get("showPlaceholder")===false){this.set("hidePlaceholderClass","hide")}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"input",label:"Label"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Account=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("account/get_account",{},function(d){b.set(d.account);if(typeof c!=="undefined"){c()}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Config=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("config/get_config",{},function(d){b.set(d.config);if(typeof c!=="undefined"){c()}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Design=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("design/get_design",{},function(d){b.set(d.design);if(typeof c!=="undefined"){c()}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.Feature=Backbone.Model.extend({defaults:{featureName:"",imgUri:"",name:"",filterBy:"",rel:"",includeClass:"",visible:true,iconId:0}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderAction=Backbone.Model.extend({defaults:function(){return{control:"action",method:"post",value:"",username:"",password:"",returnUrl:"",pdfHeader:{title:"",line1:"",line2:"",line3:""}}},initialize:function(){console.log("FormBuilderAction init");console.log(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxFieldset=Backbone.Model.extend({defaults:{control:"checkboxfieldset",title:"Check all that apply",allowAdditional:"",allowAdditionalClass:"",requiredClass:"",name:""},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("checkboxGroup",new wxApp.FormBuilderControlCheckboxGroup());this.get("checkboxGroup").on("add",this.onCheckboxGroupAdd,this);console.log(this);return this},onCheckboxGroupAdd:function(b){console.log("onCheckboxGroupAdd");b.get("attributes").set("name",this.get("name"))}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckbox=wxApp.FormBuilderControlInput.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{label:"Checkbox",autocompleteClass:"hide"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this);this.get("attributes").set("type","checkbox")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInfo=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"div",label:"Informational text",innerHTML:""});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"input",label:"Label"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlAttributes=Backbone.Model.extend({defaults:{}});wxApp.FormBuilderControl=Backbone.Model.extend({defaults:function(){return{control:"",type:"",label:"",hidePlaceholderClass:"",showPlaceholder:false,innerText:"",allowAdditional:"",allowAdditionalClass:"",valueType:"number",valueClass:"hide",minClass:"hide",maxClass:"hide",stepClass:"hide",multiClass:"hide",requiredClass:"",autocompleteClass:"hide",controlTitle:""}},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.togglePlaceholder();this.on("change:showPlaceholder",this.togglePlaceholder)},togglePlaceholder:function(){if(this.get("showPlaceholder")===false){this.set("hidePlaceholderClass","hide")}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderLabel=wxApp.FormBuilderControl.extend({defaults:{label:"Label"}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOption=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"option",innerText:"Option"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this);return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioFieldset=Backbone.Model.extend({preview:null,defaults:{control:"radiofieldset",title:"Select a choice",allowAdditional:"",allowAdditionalClass:"",requiredClass:"",name:""},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("radioGroup",new wxApp.FormBuilderControlRadioGroup());this.get("radioGroup").on("add",this.onRadioGroupAdd,this);return this},onRadioGroupAdd:function(b){b.get("attributes").set("name",this.get("name"))}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadio=wxApp.FormBuilderControlInput.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{label:"Radio Button",autocompleteClass:"hide"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this);this.get("attributes").set("type","radio")}});wxApp.FormBuilderControlTextSliderOption=wxApp.FormBuilderControlInput.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{text:"Option",autocompleteClass:"hide"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRangeInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{input:"range",label:"Label"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSelect=Backbone.Model.extend({defaults:{control:"select",title:"Select a choice",allowAdditional:"",allowAdditionalClass:"",requiredClass:"",name:""},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("optionGroup",new wxApp.FormBuilderControlOptionGroup());return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSignature=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"signature",label:"Signature",username:"",password:"",returnUrl:""});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextarea=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"textarea",label:"Untitled",showPlaceholder:true});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextRange=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"input",label:"Label"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.IconFont=Backbone.Model.extend({defaults:{},fetch:function(d,c){var b=this;wx.makeApiCall("icons/get_font",{font_id:d},function(e){b.set(e.font);m=b;if(typeof c!=="undefined"){c()}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.BloggerSubTab=wxApp.SubTab.extend({default_icon_id:7,allowedLayouts:["list"],typeDescription:"Blogger",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Blog",icon:"e836",icon_id:6,type:"blogger",content:"blogger",layout:"list",config:{blog_url:"http://blogname.blogspot.com",subtab_name:"BloggerSubTab"}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookAlbumsSubTab=wxApp.SubTab.extend({default_icon_id:15,allowedLayouts:["list"],defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Photos",icon:"e046",icon_id:15,type:"facebookAlbums",content:"facebookAlbums",layout:"list",config:{url:"http://facebook.com/",user_id:"http://facebook.com/MyPage",subtab_name:"FacebookAlbumsSubTab"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add photos from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Photos must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"})},typeDescription:"Facebook Photos"})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookEventsSubTab=wxApp.SubTab.extend({default_icon_id:16,allowedLayouts:["list"],typeDescription:"Facebook Events",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Events",icon:"e029",icon_id:16,type:"facebookEvents",content:"facebookEvents",layout:"list",config:{url:"http://facebook.com/",subtab_name:"FacebookEventsSubTab"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add events from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Events must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookWallSubTab=wxApp.SubTab.extend({default_icon_id:13,typeDescription:"Facebook Wall",allowedLayouts:["list"],defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Facebook",icon:"e029",icon_id:13,type:"facebookWall",content:"facebookStatuses",layout:"list",config:{url:"http://facebook.com/",subtab_name:"FacebookWallSubTab"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add wall updates from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Wall updates must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FlickrSubTab=wxApp.SubTab.extend({default_icon_id:19,allowedLayouts:["list","carousel"],typeDescription:"Flickr",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Flickr",icon:"e049",icon_id:19,type:"flickr",content:"flickrPhotostream",layout:"carousel",config:{url:"http://flickr.com/",subtab_name:"FlickrSubTab"},helpBody:"<p><b>Flickr compatibility</b></p><p>Only publicly available photos on Flickr will display. Photos uploaded prior to April 2011 may not display as gallery thumbnails – simply rotate and resave these photos to fix.</p><p><b>Coming soon</b></p><p>Support for Flickr &ldquo;group pools&rdquo; (community galleries) and the ability to add just one photo set at a time to your app.</p>"})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderSubTab=wxApp.SubTab.extend({default_icon_id:30,validateFeed:false,buildPreview:true,typeDescription:"Form Builder",filterAPIData:function(b){if(typeof b.geo!=="undefined"){delete b.geo}return b},defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"My Form Title",icon:"e074",tabTitle:"Form",icon_id:30,type:"formbuilder",content:"formbuilder",layout:"panel",buildPreview:true,buttonText:"Submit",config:{uploadUrl:window.location.origin+"/wp-admin/admin-ajax.php",onUpload:{message:"Your upload has completed."},subtab_name:"FormBuilderSubTab",isDocuSign:false}})}});wxApp.DocuSignSubTab=wxApp.FormBuilderSubTab.extend({defaults:function(){return _.extend({},wxApp.FormBuilderSubTab.prototype.defaults(),{config:{uploadUrl:window.location.origin+"/wp-admin/admin-ajax.php",onUpload:{message:"Your upload has completed."},subtab_name:"FormBuilderSubTab",isDocuSign:true}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FoursquarePhotosSubTab=wxApp.SubTab.extend({default_icon_id:25,allowedLayouts:["carousel"],typeDescription:"Foursquare",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Photos",icon:"e057",icon_id:25,type:"foursquarePhotos",content:"foursquarePhotos",layout:"carousel",config:{venue_id:"http://foursquare.com/v/",subtab_name:"FoursquarePhotosSubTab"},helpBody:'<p><b>To find the web address of a Foursquare Venue:</b></p><p>1. Search the web for "Foursquare" and the name of the location.</p><p>2. Open the matching Foursquare venue page.</p><p>3. Copy the web address (url) of the venue page from your browser address bar.</p><p>Sharing live photos is a great way to engage event attendees or share info about a specific location.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.GoogleCalendarSubTab=wxApp.SubTab.extend({default_icon_id:7,allowedLayouts:["list"],typeDescription:"Google Calendar",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Calendar",icon:"e061",icon_id:7,type:"googleCalendar",content:"googleCalendar",layout:"list",config:{calendar_id:"abc123@group.calendar.google.com",subtab_name:"GoogleCalendarSubTab"},helpTitle:"Finding a calendar ID",helpBody:'<p><b>Primary Google calendars:</b></p><p>A primary calendar is associated with your Google / Gmail account, for example:</p><p>emailaddress@gmail.com</p><p><b>Group Google Calendars:</b></p><p>Group calendars (aka &lsquo;secondary calendars&rsquo; should be added to your app in a format like abc123@group.calendar.google.com.</p><p><b>Finding a Group Calendar ID</b></p><p>1. Login to <a target="_blank" href="http://google.com/calendar">Google.com/calendar</a></p><p>2. Choose a calendar and select &ldquo;settings&rdquo;</p><p>3. Copy and paste the calendar ID from this page.</p><p>The web address for the group calendar will be in a format like &ldquo;abc123@group.calendar.google.com&rdquo;.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTab=wxApp.Tab.extend({defaults:function(){return{id:null,parent_id:null,title:"",tabTitle:"",icon_id:1,icon:"",type:null,layout:null,tabLayout:null,typeDescription:"",published:1,config:{},featureName:"",validateFeed:true,buildPreview:false,helpTitle:"Help tips ",helpBody:""}},typeDescription:"",validateFeed:true,buildPreview:false,allowTitleEdit:true,initialize:function(){},setConfig:function(c,f){var b=this.getConfig();b[c]=f;try{this.set("config",b)}catch(d){}},deleteConfig:function(c){var b=this.getConfig();delete b[c];this.set("config",b)},getConfig:function(){return this.get("config")},getModelName:function(){var c=false;console.log(this.get("content"));for(var b in wxApp){if(b!=="SubTab"&&wxApp[b]==this.constructor){c=b;break}}console.log("Returning "+c);return c},getAPIData:function(){console.log("getAPIData");console.log(this);var b=this.toJSON();b.config=JSON.stringify(b.config);if(b.id==b.parent_id){delete b.parent_id}if(b.id){b.tab_id=b.id}return this.filterAPIData(b)},filterAPIData:function(b){if(typeof b.geo!=="undefined"){if(!b.geo){delete b.geo}}return b},toJSON:function(){var b=JSON.parse(JSON.stringify(this.attributes));b.validateFeed=this.validateFeed;b.typeDescription=this.typeDescription;return b},getValidateFeed:function(){return true},save:function(){var b=this;wx.makeApiCall("tabs/add_tab",b.getAPIData(),function(c){if(!b.get("id")){b.set("id",c.tab_id);Backbone.Events.trigger("tab:new",b)}else{b.trigger("save",b)}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.PicasaAlbumsSubTab=wxApp.SubTab.extend({default_icon_id:15,allowedLayouts:["list"],typeDescription:"Picasa Photos",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Photos",icon:"e053",icon_id:15,type:"picasaAlbums",content:"picasaAlbums",layout:"list",config:{user_id:"your.email@gmail.com",subtab_name:"PicasaAlbumsSubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.r3sSubTab=wxApp.SubTab.extend({default_icon_id:6,typeDescription:"R3S Object",validateFeed:false,allowedLayouts:["list"],defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"R3S Object",icon:"e836",icon_id:6,type:"r3s",content:"htmlR3s",layout:"list",config:{url:"http://yourwebsite.com/?feed=r3s",subtab_name:"r3sSubTab"},helpTitle:"What is an R3S Object?",helpBody:'<p><b>What is an R3S Object?</b></p><p>R3S is an open source specification for streaming content from web sites, social feeds, and other sources into apps.</p><p>R3S is a flexible format but is generally used in one or two different ways:</p><p>1.  To stream content into an app from another web site or service (most likely with a Weever Apps plugin installed).</p><p>2.  To stream content into an app from a custom application that is generating an R3S stream object.</p><p>If you are a developer and are interested in utilizing R3S, please check out the <a target="_blank" href="https://github.com/WeeverApps/r3s-spec">R3S repo on GitHub</a> and <a target="_blank" href="http://support.weeverapps.com">contact us</a> for more information.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.RSSSubTab=wxApp.SubTab.extend({default_icon_id:6,typeDescription:"RSS Feed",validateFeed:false,allowedLayouts:["list"],defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"RSS Feed",icon:"e836",icon_id:6,type:"rss",content:"html",layout:"list",config:{url:"http://yourwebsite.com/",subtab_name:"RSSSubTab"}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.TwitterSubTab=wxApp.SubTab.extend({default_icon_id:21,allowedLayouts:["list"],typeDescription:"Twitter",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Social",icon:"e025",icon_id:21,type:"twitterUser",content:"twitterUser",layout:"list",config:{subtab_name:"TwitterSubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.VimeoSubTab=wxApp.SubTab.extend({default_icon_id:35,allowedLayouts:["list"],typeDescription:"Vimeo Videos",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Vimeo",icon:"e041",icon_id:35,type:"vimeo",content:"vimeo",layout:"list",config:{url:"http://vimeo.com/user1234",subtab_name:"VimeoSubTab"},helpTitle:"Vimeo users and channels",helpBody:'<p><b>Vimeo users and channels</b></p><p>Adding a Vimeo user shares all videos associated with one <a target="_blank" href="http://vimeo.com">Vimeo.com</a> user account.</p><p><b>Sharing specific sets of videos</b></p><p>One vimeo &lsquo;user&rsquo; can have multiple &lsquo;channels&rsquo;.  Each channel includes specific collection of videos.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressBlogSubTab=wxApp.SubTab.extend({default_icon_id:5,allowedLayouts:["list"],typeDescription:"Content: Posts",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Blog",icon:"e800",icon_id:5,type:"WordpressBlog",content:"html",layout:"list",config:{subtab_name:"WordpressBlogSubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressCategorySubTab=wxApp.SubTab.extend({default_icon_id:5,allowedLayouts:["list"],typeDescription:"Wordpress Posts",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Blog",icon:"e836",icon_id:5,type:"WordpressCategory",content:"html",layout:"list",config:{subtab_name:"WordpressCategorySubTab"},helpTitle:"Adding Wordpress content",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.WordpressContactsSubTab=wxApp.SubTab.extend({default_icon_id:34,allowedLayouts:["list"],typeDescription:"Contact",validateFeed:false,allowTitleEdit:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Contact",icon:"e065",icon_id:34,type:"wordpress-contact",content:"contact",layout:"panel",config:{subtab_name:"WordpressContactsSubTab"},config_cache:{}})},filterAPIData:function(b){b.config_cache=JSON.stringify(this.get("config_cache"));delete b.config;return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressDirectorySubTab=wxApp.SubTab.extend({default_icon_id:11,allowedLayouts:["list"],typeDescription:"Content: Directory",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Directory",icon:"e800",icon_id:11,type:"WordpressDirectory",content:"html",layout:"list",config:{subtab_name:"WordpressDirectorySubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressMapSubTab=wxApp.SubTab.extend({default_icon_id:20,allowedLayouts:["list"],typeDescription:"Add map locations",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Map",icon:"e097",icon_id:20,type:"WordpressMap",content:"html",layout:"list",tabLayout:"map",config:{url:"",gps:"1",subtab_name:"WordpressMapSubTab"},helpTitle:"Creating a map",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressPageSubTab=wxApp.SubTab.extend({default_icon_id:28,allowedLayouts:["list"],typeDescription:"Wordpress Page",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Pages",icon:"e014",icon_id:28,type:"WordpressPage",content:"htmlPage",layout:"panel",config:{url:"",subtab_name:"WordpressPageSubTab"},helpTitle:"Adding Wordpress content",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressProximitySubTab=wxApp.SubTab.extend({default_icon_id:27,allowedLayouts:["list"],typeDescription:"Near to me",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Nearby",icon:"e101",icon_id:27,type:"WordpressProximity",content:"html",layout:"list",config:{url:"",gps:"1",geotag:"1",subtab_name:"WordpressProximitySubTab"},helpTitle:"About Near to me",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressSearchtermSubTab=wxApp.SubTab.extend({default_icon_id:8,allowedLayouts:["list"],typeDescription:"Wordpress Search",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Search",icon:"e256",icon_id:8,type:"WordpressSearchterm",content:"html",layout:"list",config:{url:"",subtab_name:"WordpressSearchtermSubTab"},helpTitle:"Adding Wordpress content",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressTagSubTab=wxApp.SubTab.extend({default_icon_id:13,allowedLayouts:["list"],validateFeed:false,typeDescription:"Wordpress Tag",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Blog",icon:"e081",icon_id:13,type:"WordpressTag",content:"html",layout:"list",config:{url:"",subtab_name:"WordpressTagSubTab"},helpTitle:"Adding Wordpress content",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.WufooSubTab=wxApp.SubTab.extend({default_icon_id:30,allowedLayouts:["list"],typeDescription:"Wufoo Forms",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Forms",icon:"e832",icon_id:30,type:"wufoo",content:"wufoo",layout:"list",config:{url:"https://USERNAME.wufoo.com",apikey:"XXXX-XXXX-XXXX-XXXX",subtab_name:"WufooSubTab"},helpTitle:"Adding a Wufoo Form",helpBody:'<p><b>Adding a Wufoo Form</b></p><p><b>Finding your Wufoo API Key</b></p><p>1. Login to <a target="_blank" href="http://wufoo.com/">Wufoo.com</a> and navigate to a specific form.</p><p>2. Choose the "Code" link, then click the "API Information" button.</p><p><b>Wufoo Integrations</b></p><p>Wufoo Forms connects to many free and paid services on the web.</p><p>Connections / integrations include MailChimp, Campaign Monitor, PayPal Donations and Payments, SalesForce CRM, Freshbooks Accounting &amp; Billing, Highrise CRM and Twitter.</p><p>For more information check out: <a target="_blank" href="http://wufoo.com/integrations">wufoo.com/integrations</a></p>'})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.YoutubeSubTab=wxApp.SubTab.extend({default_icon_id:18,allowedLayouts:["list"],typeDescription:"Youtube Videos",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"YouTube",icon:"e037",icon_id:18,type:"youtube",content:"youtube",layout:"list",config:{url:"http://youtube.com/",subtab_name:"YoutubeSubTab"},helpTitle:"About Youtube videos",helpBody:"<p><b>Youtube Channels</b></p><p>A YouTube Channel displays all videos associated with one YouTube user account.</p><p><b>Youtube Playlists</b></p><p>A Youtube playlist allows you to display a specific collection of videos from your account or from any public, sharing-enabled videos found on Youtube.</p>"})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Tab=Backbone.Model.extend({defaults:{id:"",title:"",icon_id:1,icon:"",tabIcon:null,tabIcon_id:0,subTabs:false},validate:function(b){},initialize:function(){var b=this;var c=new wxApp.SubTabCollection();this.set({subTabs:c});this.on("invalid",function(e,d){console.log(d)});this.get("subTabs").on("remove",function(d){if(!b.getSubTabs().length){b.trigger("destroy")}})},setTitle:function(b){this.set({title:b})},addSubTab:function(c){var b=this;c.set("parent_id",this.get("id"));this.get("subTabs").add(c);c.on("tab:move",function(){b.getSubTabs().remove(this)})},deleteSubTab:function(b){this.get("subTabs").remove(b)},getSubTabs:function(){return this.get("subTabs")},destroy:function(){var b=this;wx.makeApiCall("tabs/delete",{tab_id:this.get("id")},function(){b.trigger("destroy")})}})})(jQuery);var wxApp=wxApp||{};(function(){wxApp.FeatureCollection=Backbone.Collection.extend({model:wxApp.Feature,initialize:function(){}})})();wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlCheckbox,initialize:function(){console.log("checkbox group collection init");this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FormBuilderCollection=Backbone.Collection.extend({model:wxApp.FormBuilderControl,initialize:function(){console.log(this.toJSONrecursive());this.on("add",this.onAdd)},onAdd:function(b){a("#form-build-area").sortable({start:function(c,d){a("#form-build-area section").removeClass("active")},stop:function(c,d){d.item.trigger("sortable-drop",d.item.index())}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlOption,initialize:function(){console.log("option group collection init");this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlRadio,initialize:function(){this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextSliderOptions=Backbone.Collection.extend({model:wxApp.FormBuilderControlTextSliderOption,initialize:function(){this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.IconFontsCollection=Backbone.Collection.extend({model:wxApp.IconFont,fetch:function(){var b=this;wx.makeApiCall("icons/get_public_font_names",{},function(e){if(typeof e.fonts!="undefined"){for(var d=0;d<e.fonts.length;d++){var f=e.fonts[d];if(f.id<300000){continue}var c=new wxApp.IconFont(f);b.add(c)}}})}});wxApp.IconFonts=new wxApp.IconFontsCollection()})(jQuery);var wxApp=wxApp||{};(function(){wxApp.SubTabCollection=Backbone.Collection.extend({model:wxApp.SubTab})})();var wxApp=wxApp||{};(function(a){wxApp.TabsCollection=Backbone.Collection.extend({model:wxApp.Tab,url:wx.apiUrl+"tabs/get_tabs?site_key="+wx.siteKey,getModelNameByTabData:function(b){var d="SubTab";switch(b.content){case"contact":d="WordpressContactsSubTab";break;case"facebookAlbums":d="FacebookAlbumsSubTab";break;case"flickrPhotosets":d="FlickrSubTab";break;case"formbuilder":d="FormBuilderSubTab";break;case"htmlPage":d="WordpressPageSubTab";break;case"twitter":case"twitterUser":d="TwitterSubTab";break;case"wufoo":d="WufooSubTab";break;case"youtube":case"youtubePlaylist":d="YoutubeSubTab";break;default:if(b.config!=undefined&&b.config.subtab_name!=undefined){if(b.config.subtab_name in wxApp){d=b.config.subtab_name}}if("SubTab"==d){for(var c in wxApp){if(c.indexOf("SubTab")!=-1&&undefined!=wxApp[c].prototype.defaults&&undefined!=wxApp[c].prototype.defaults.type){if(wxApp[c].prototype.defaults.type==b.type){d=c;break}}}}if("SubTab"==d){for(var c in wxApp){if(c.indexOf("SubTab")!=-1&&undefined!=wxApp[c].prototype.defaults&&undefined!=wxApp[c].prototype.defaults.content){if(wxApp[c].prototype.defaults.content==b.content){d=c;break}}}}}return d},fetch:function(){var b=this;wx.makeApiCall("tabs/get_tabs",{},function(j){if(typeof j.tabs!="undefined"){var g=[];for(var d=0;d<j.tabs.length;d++){var c=j.tabs[d];if(!c.parent_id){var h=new wxApp.Tab(c);var e=b.getModelNameByTabData(c);h.addSubTab(new wxApp[e](c));for(var f=0;f<j.tabs.length;f++){if(h.get("id")==j.tabs[f].parent_id){e=b.getModelNameByTabData(j.tabs[f]);h.addSubTab(new wxApp[e](j.tabs[f]))}}g.push(h)}}b.reset();for(f=0;f<g.length;f++){b.add(g[f])}}})}});wxApp.Tabs=new wxApp.TabsCollection()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlView=Backbone.View.extend({tagName:"section",className:"wx-form-builder-row",events:{"keyup .wx-form-builder-label-input":"updateLabel","keyup .wx-form-builder-text-input":"updateText","keyup .wx-form-builder-placeholder-input":"updatePlaceholder","blur .wx-form-builder-min-input":"setMin","blur .wx-form-builder-max-input":"setMax","blur .wx-form-builder-value-input":"setValue","blur .wx-form-builder-step-input":"setStep","click .wx-form-builder-control-checked":"setChecked","click .wx-form-builder-required":"setRequired","click .wx-form-builder-delete":"deleteControl","sortable-drop":"sortableDrop"},sortableDrop:function(c,b){console.log("sortableDrop");this.$el.trigger("sortable-update",[this.model,b])},deleteControl:function(){console.log("deleteControl");this.getPreview().remove();this.remove();this.model.destroy()},updateLabel:function(b){var c=a(b.currentTarget).val();this.model.set("label",c);this.$(".wx-form-builder-label").text(c)},updateText:function(b){console.log("updateText");var c=a(b.currentTarget).val();this.model.set("text",c)},updatePlaceholder:function(c){var b=a(c.currentTarget);this.model.get("attributes").set("placeholder",b.val());this.model.trigger("change")},getFixedValue:function(d,c){var b;if(typeof d=="string"){b=parseFloat(d).toFixed(c)}else{if(typeof d=="number"){b=d.toFixed(c)}}return b},setMin:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("min",parseFloat(b));this.model.trigger("change")},setMax:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("max",parseFloat(b));this.model.trigger("change")},setValue:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("value",parseFloat(b));this.model.trigger("change")},setStep:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("step",parseFloat(b));this.model.trigger("change")},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("name",b.val())}this.getInput().attr("name",b.val())},setAutocomplete:function(b){this.model.get("attributes").set("autocomplete",a(b.currentTarget).val())},setChecked:function(b){console.log("setChecked");this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked");this.model.trigger("change")},setMultiple:function(c){console.log("setMultiple");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("multiple","checked")}else{this.model.get("attributes").unset("multiple")}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},setRequired:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked")}else{this.model.get("attributes").unset("required")}this.model.trigger("change")},getInput:function(){var b=this.$(".wx-form-builder-"+this.model.get("attributes").get("type")+"-input");if(b.length==0){b=this.$(".wx-form-builder-textarea")}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabView=Backbone.View.extend({tagName:"div",className:"wx-tab",subTabsContainerView:false,initialize:function(){this.tabTpl=_.template(a("#tab-template").html());this.model.bind("change",this.rerender,this);this.model.bind("destroy",this.destroyView,this);Backbone.Events.on("tab:id-update",this.updateTabId,this)},events:{click:"editAll"},rerender:function(){this.render()},render:function(){this.$el.html(this.tabTpl(this.model.toJSON()));this.loadIcon();if(undefined!==this.$el.droppable){this.$el.droppable({accept:".list-sub-items li, .list-add-content-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer",greedy:true})}this.$el.data("backbone-view",this);this.$el.addClass(this.model.get("id"));this.$el.attr("id",this.model.get("id")+"TabID");return this},onDrop:function(g,h){console.log("onDrop");var f=a(this).data("backbone-view");var e=a(h.draggable).data("backbone-view");console.log(e.model.get("parent_id"));if(h.draggable.hasClass("wx-add-feature")){var c=h.draggable.attr("id").replace("add-","");var b=f.model.get("id");wxApp.appView.createFeatureView(c,b)}else{Backbone.Events.trigger("tab:dropped",e.model.get("parent_id"));if(e.model.get("parent_id")!=f.model.get("id")){wx.makeApiCall("tabs/set_parent_id",{tab_id:e.model.get("id"),parent_id:f.model.get("id")},function(){e.model.trigger("tab:move");f.model.addSubTab(e.model);a("#"+f.model.get("id")+"TabID").click()})}}Backbone.Events.trigger("subtab:dragstop");var d=a("style")[a("style").length-1];if(d.innerHTML.indexOf("*{ cursor")==0){d.remove()}},editAll:function(){a('a[href="#panel2"]').click();a(".wx-tab button").addClass("secondary");a("div."+this.model.get("id")+" button").removeClass("secondary");this.subTabsContainerView=new wxApp.SubTabsContainerView({model:this.model});this.subTabsContainerView.tabView=this;a("#editSpace").html(this.subTabsContainerView.render().el)},updateTabId:function(b,c){if(b==this.model.get("id")){this.model.getSubTabs().forEach(function(d){d.set("parent_id",c)});this.model.set("id",c)}},loadIcon:function(){},destroyView:function(){wx.log("destroying tab view");if(this.subTabsContainerView){this.subTabsContainerView.remove()}this.remove()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabEditView=Backbone.View.extend({className:"wx-subtab-edit",subTabEditTplSelector:"",baseEditTplSelector:"#subtab-edit-template",feedSampleTplSelector:"#feedsample-template",parentContainerId:false,initialize:function(b){this.initializeEvents();this.subTabEditTpl=_.template(a(this.subTabEditTplSelector).html());this.baseEditTpl=_.template(a(this.baseEditTplSelector).html());this.feedSampleTpl=_.template(a(this.feedSampleTplSelector).html());this.render();Backbone.Events.on("tab:new",this.destroyView,this);this.model.on("save",this.destroyView,this)},initializeEvents:function(){this.events=this.genericEvents;this.delegateEvents()},genericEvents:{"change .wx-dialog-input":"next","change .wx-social-input":"next","keydown .wx-dialog-input":"hideValidateFeed","keyup .wx-edit-title":"editTitle","click .wx-finish-button":"finish","click .wx-next-button":"next","change .wx-content-radio":"contentChange","click .close-reveal-modal":"close",close:"close"},render:function(){m=this.model;this.$el.html(this.baseEditTpl(this.model.toJSON()));this.$(".subtab").html(this.subTabEditTpl(this.model.toJSON()));this.$el.prepend("<form>");this.$el.append("</form>");this.startValidation();if(this.model.validateFeed){this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide();if(this.model.get("id")!==null){this.next()}}else{this.$(".wx-next-button").hide();if(!this.model.allowTitleEdit){this.$(".wx-edit-title-div").hide()}}var b=this.$el;meeeee=b;this.$el.on("opened",function(){b.foundation("section","reflow");var c=b.height();c-=115;if(c<315){c=315}b.find(".previewTabs div.content").height(c);b.find("input[type=text]:first").focus()});return this},close:function(){this.undelegateEvents()},startValidation:function(){if(undefined!==this.$("form").validate){this.$("form").validate()}},contentChange:function(b){this.hideValidateFeed()},setParentViewContainerId:function(b){this.parentContainerId=b},finish:function(){if(this.validate()){this.setModelFromView(this.model);this.setTitleFromView(this.model);this.setIconFromView(this.model);this.saveModel();this.$el.foundation("reveal","close");wx.rebuildApp()}},validate:function(){return true},next:function(){if(!this.model.validateFeed){return}this.$("#dialog-loader").show();if(undefined!==this.$("form")&&undefined!=this.$("form").validate){var b=this.$("form").validate();if(this.$("form").valid()){this.validateFeed()}else{alert("Error count: "+b.errorList.length)}}else{this.validateFeed()}},saveModel:function(){this.model.save()},editTitle:function(b){if(a(".wx-validate-feed.panel").length){a(".wx-validate-feed.panel > h3").text(a(b.currentTarget).val())}},setTitleFromView:function(b){if(b.allowTitleEdit&&this.$(".wx-edit-title")){b.set("title",this.$(".wx-edit-title").val())}return b},setIconFromView:function(b){var c=this.$('input:radio[name="wx-icon"]:checked').val();b.set("icon_id",null);b.set("icon",c);return b},setModelFromView:function(b){},validateFeed:function(){var b=this;var c=this.getModelCopy();this.setModelFromView(c);this.getFeedSample(c,function(d){b.checkFeedSample(d)})},getModelCopy:function(){var b=a.extend(true,{},this.model);return b},checkFeedSample:function(b){if(typeof b!="undefined"&&b.success&&typeof b.feed!="undefined"){this.$("#dialog-loader").hide();this.$(".wx-feed-error").hide();this.displayFeedSample(b);this.$(".wx-next-button").hide();this.$(".wx-finish-button").show();if(this.model.allowTitleEdit){this.$(".wx-edit-title-div").show()}}else{this.$(".wx-feed-error").show()}},displayFeedSample:function(b){var d=this;this.$(".wx-validate-feed").show();if(!b.feed.length){this.$(".wx-validate-feed").html("No content added yet?")}else{this.$(".wx-validate-feed").html("<ul></ul>");for(var c=0;c<b.feed.length;c++){this.$(".wx-validate-feed ul").append(d.feedSampleTpl(b.feed[c]))}}},hideValidateFeed:function(){this.$(".wx-feed-error").hide();this.$(".wx-validate-feed").html('<div class="panel wx-preview"><h3 class="wx-preview-msg">preview</h3></div>');this.$(".wx-next-button").show();this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide()},getFeedSample:function(b,d){var c=b.getAPIData();c.api_check=1;c.confirm_feed=1;a.ajax({url:wx.apiUrl+"validator/validate_feed?site_key="+wx.siteKey,datatype:"JSON",data:c,success:function(e){d(e)}})},destroyView:function(){this.undelegateEvents();this.$el.removeData().unbind()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.StyleBase=Backbone.View.extend({showLoadingGif:function(c){var b="#"+c+"_loading";a(b).show();return b},hideLoadingGif:function(c,b){this.hideLoadGif(c,b)},hideLoadGif:function(e,c){var d=e+"_done";var b='<label id="'+d+'" class="left inline">Saved.</label>';a(c).before(b);a("#"+d).delay(2000).fadeOut(1000).queue(function(){a(this).remove()});a(c).hide()}})})(jQuery);wxApp=wxApp||{};(function(c){var d=function(e,g){if(typeof g!=="string"){return g}var f=encodeURIComponent(g);return f};var b=function(){return JSON.parse(JSON.stringify(this.attributes,d))};var a=function(){var e=[];this.models.forEach(function(f){e.push(f.toJSONrecursive())});return JSON.parse(JSON.stringify(e))};Backbone.Model.prototype.toJSONrecursive=b;Backbone.Collection.prototype.toJSONrecursive=a;wxApp.App=Backbone.View.extend({el:"#toptabs",initialize:function(){this.allowAddContentButtonsToBeDragged();this.allowDroppingOnAddArea();Backbone.Events.on("subtab:dragstart",this.showDropTab,this);Backbone.Events.on("subtab:dragstop",this.hideDropTab,this);Backbone.Events.on("tab:dropped",this.clearBodyStyles,this);Backbone.Events.on("tab:dropped",this.hideDropTab,this)},events:{"click #preview-refresh":"refreshAppPreview"},allowAddContentButtonsToBeDragged:function(){if(undefined!=this.$("list-add-content-items li").draggable){this.$(".list-add-content-items li").draggable({cursor:"move",cursorAt:{top:10,left:10},helper:function(e){return c("<div class='ui-widget-draggable'>"+c(e.delegateTarget).find("span")[0].innerHTML+"</div>")},revert:true})}},allowDroppingOnAddArea:function(){if(undefined!==this.$("#addFeatureID").droppable){this.$("#addFeatureID").droppable({accept:".list-add-content-items li",hoverClass:"ui-state-hover",drop:this.onDropOnAddArea})}},onDropOnAddArea:function(e,f){wxApp.appView.createFeatureView(c(f.draggable).attr("id").replace("add-",""))},createFeatureView:function(h,g){if(undefined!==wxApp[h+"SubTab"]&&undefined!==wxApp[h+"SubTabEditView"]){var f=new wxApp[h+"SubTab"]();if(undefined!=g&&g){f.set("parent_id",parseInt(g))}var e=new wxApp[h+"SubTabEditView"]({model:f,el:"#wx-edit-area-"+h})}else{throw new Error("Invalid type "+h)}},refreshAppPreview:function(){console.log("Refreshing...");wx.refreshAppPreview()},showDropTab:function(){c("#dropTab").show();c(".wx-layout-tablist .wx-tab").addClass("dragging");c("#editListTabsSortable").addClass("dragging")},hideDropTab:function(){c("#dropTab").hide();c(".wx-layout-tablist .wx-tab.dragging").removeClass("dragging");c("#editListTabsSortable.dragging").removeClass("dragging")},clearBodyStyles:function(){c("body").attr("style","")},changeFont:function(e){var f="@font-face {     font-family: 'wxFont-1';     src:         url('data:image/svg+xml;base64,"+e.get("svg")+"') format('svg'),         url('data:application/font-woff;charset=utf-8;base64,"+e.get("woff")+"') format('woff'),         url('data:application/x-font-ttf;charset=utf-8;base64,"+e.get("ttf")+"') format('truetype'); } .wxFont-1:before { font-family: 'wxFont-1'; } ";c("#fontstyle").html(f)}});wxApp.appView=new wxApp.App();wx.makeApiCall("design/get_font_id",{},function(f){if(typeof f.font_id!=="undefined"){if(f.font_id==1){f.font_id=300001;wx.makeApiCall("design/set_font_id",{font_id:f.font_id},function(g){console.log("Font upgraded.")})}wxApp.font=f.font_id;var e=new wxApp.IconFont();e.fetch(f.font_id,function(){c('<style id="fontstyle" type="text/css"></style>').appendTo("head");wxApp.appView.changeFont(e)})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.ContainerEditView=Backbone.View.extend({initialize:function(){this.tpl=_.template(a("#ContainerEditContent").html())},events:{"click .wx-save-button":"save"},render:function(){this.$el.html(this.tpl(this.model.toJSON()));return this},cancel:function(){try{this.remove()}catch(b){}},save:function(){var e=this,c=this.model.get("id"),f=a("#container-title").val(),d=a('input:radio[name="wx-icon"]:checked').val(),b=0;wx.makeApiCall("tabs/set_tabTitle",{tab_id:c,tabTitle:f},function(){e.model.set("tabTitle",f);if(++b==2){wx.rebuildApp()}});wx.makeApiCall("tabs/set_tabIcon",{tab_id:c,tabIcon:d},function(){e.model.set("tabIcon_id",null);e.model.set("tabIcon",d);if(++b==2){wx.rebuildApp()}});console.log("Closing...");a("#ContainerEditModal").foundation("reveal","close")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FeatureView=Backbone.View.extend({tagName:"li",className:"",initialize:function(){this.featureTpl=_.template(a("#feature-template").html());this.model.bind("change",this.render,this)},events:{"click .wx-add-feature":"addFeature"},render:function(){if(typeof this.model.get("tierRequired")==="undefined"){this.model.set("tierRequired",1)}this.$el.html(this.featureTpl(this.model.toJSON()));if(this.model.get("rel")!==""){this.$("a").attr("rel",this.model.get("rel"))}return this},addFeature:function(c){var b=c.currentTarget.id.replace("add-","");if(this.$("a").hasClass("wx-unavailable")){a("#wx-edit-area-"+b).html(a("#please-subscribe").html())}else{if(this.model.get("tierRequired")>parseFloat(wxApp.account.get("tier_raw"))){a("#wx-edit-area-"+b).html(a("#please-upgrade").html())}else{wxApp.appView.createFeatureView(b)}}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FeatureList=Backbone.View.extend({el:"#toptabs",initialize:function(){this.collection=new wxApp.FeatureCollection();this.collection.bind("add",this.addOne,this)},addOne:function(c){if(c.get("rel")===""){var d=this;var b=new wxApp.FeatureView({model:c});this.$el.append(b.render().el)}}});wxApp.account=new wxApp.Account();wxApp.account.fetch(function(){wxApp.featureList=new wxApp.FeatureList();wxApp.featureList.collection.fetch({url:wx.pluginUrl+"static/js/config/wx.featurelist.dev.js",success:function(b){},error:function(){wxApp.featureList.collection.fetch({url:wx.pluginUrl+"static/js/config/wx.featurelist.js",success:function(b){},error:function(){console.log("Could not load feature list.")}})}})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderActionView=Backbone.View.extend({tagName:"section",className:"wx-form-builder-row",tplPostSelector:"#form-builder-action-post",tplEmailSelector:"#form-builder-action-email",tplDocusignSelector:"#form-builder-action-docusign",events:{"blur .wx-form-builder-action":"updateAction","click .wx-form-builder-delete":"deleteControl","blur .wx-form-builder-docusign-username":"updateUsername","blur .wx-form-builder-docusign-password":"updatePassword","blur .wx-form-builder-docusign-returnUrl":"updateReturnUrl","blur .wx-form-builder-pdfheader-title":"updatePdfHeader","blur .wx-form-builder-pdfheader-line1":"updatePdfHeader","blur .wx-form-builder-pdfheader-line2":"updatePdfHeader","blur .wx-form-builder-pdfheader-line3":"updatePdfHeader"},initialize:function(){var c="";switch(this.model.get("method")){case"post":c=this.tplPostSelector;break;case"email":c=this.tplEmailSelector;break;case"docusign":c=this.tplDocusignSelector;break}var b=a(c);this.tpl=_.template(b.html())},render:function(){this.$el.html(this.tpl(this.model.toJSON()));return this},updateUsername:function(b){this.model.set("username",a(b.currentTarget).val())},updatePassword:function(b){this.model.set("password",a(b.currentTarget).val())},updateReturnUrl:function(b){this.model.set("returnUrl",a(b.currentTarget).val())},updatePdfHeader:function(c){console.log("updatePdfHeader");var b=a(c.currentTarget);if(b.hasClass("wx-form-builder-pdfheader-title")){this.model.get("pdfHeader").title=b.val()}if(b.hasClass("wx-form-builder-pdfheader-line1")){this.model.get("pdfHeader").line1=b.val()}if(b.hasClass("wx-form-builder-pdfheader-line2")){this.model.get("pdfHeader").line2=b.val()}if(b.hasClass("wx-form-builder-pdfheader-line3")){this.model.get("pdfHeader").line3=b.val()}console.log(this.model)},updateAction:function(c){console.log("updateAction");c.preventDefault();var b=a(c.currentTarget);this.model.set("value",b.val());console.log(this.model)},deleteControl:function(){console.log("deleteControl");this.remove();this.model.destroy()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlBaseFieldsetView=Backbone.View.extend({tagName:"section",className:"wx-form-builder-row",preview:null,events:{"keyup .wx-form-builder-title-input":"updateTitle","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-delete":"deleteControl","click .wx-form-builder-add-option":"addOption","click .wx-form-builder-required":"setRequired"},initialize:function(){var b=a(this.tplSelector);this.tpl=_.template(b.html())},render:function(){this.$el.html(this.tpl(this.model.toJSON()));return this},deleteControl:function(){this.getPreview().remove();this.remove();this.model.destroy()},setAllowAdditional:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},setRequired:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked");this.getPreview().$("legend .required").css("display","inline")}else{this.model.get("attributes").unset("required");this.getPreview().$("legend .required").css("display","none")}},updateTitle:function(c){var b=a(c.currentTarget);this.$(".wx-form-builder-label").text(b.val());this.getPreview().$("legend .title").text(b.val());this.model.set("title",b.val())}});wxApp.FormBuilderControlBaseFieldsetPreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b="#form-builder-radio-fieldset-preview";var c=a(b);this.fieldsetTpl=_.template(c.html())},render:function(){var b=this.model.toJSON();this.$el.html(this.fieldsetTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlBaseGroupView=Backbone.View.extend({initialize:function(b){this.template=_.template(a(this.tplSelector).html());this.collection.bind("add",this.addOne,this);this.previewArea=b.previewArea},render:function(){this.$el.html(this.template());return this},addToView:function(b){this.$el.append(b.render().el);this.previewArea.$("fieldset").append(b.getPreview().render().el)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlBaseView=wxApp.FormBuilderControlView.extend({tagName:"div",className:"row",preview:null,initialize:function(c){var b=a(this.tplSelector);this.inputTpl=_.template(b.html())},updateLabel:function(b){var c=a(b.currentTarget).val();this.model.set("label",c)},render:function(){var c=this.model.get("label").toString();if(c==="[object Object]"){c=this.model.attributes.label.label}var b=this.model.toJSON();b.label=c;this.$el.html(this.inputTpl(b));return this}});wxApp.FormBuilderControlBasePreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b=a(this.selector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){var c=this.model.get("label").toString();if(c==="[object Object]"){c=this.model.attributes.label.label}var b=this.model.toJSON();b.label=c;this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxFieldsetView=wxApp.FormBuilderControlBaseFieldsetView.extend({tplSelector:"#form-builder-checkbox-fieldset",getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlCheckboxFieldsetPreview({model:this.model})}return this.preview},addOption:function(){this.model.get("checkboxGroup").add(new wxApp.FormBuilderControlCheckbox())}});wxApp.FormBuilderControlCheckboxFieldsetPreview=wxApp.FormBuilderControlBaseFieldsetPreview.extend({selector:"#form-builder-checkbox-fieldset-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxGroupView=wxApp.FormBuilderControlBaseGroupView.extend({className:"wx-form-builder-checkbox-group",tplSelector:"#form-builder-checkbox-group",addOne:function(c){var b=new wxApp.FormBuilderControlCheckboxView({model:c,type:"checkbox"});this.addToView(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxView=wxApp.FormBuilderControlBaseView.extend({tplSelector:"#form-builder-checkbox",getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlCheckboxPreview({model:this.model})}return this.preview},setChecked:function(b){if(this.model.get("attributes").get("checked")){this.model.get("attributes").unset("checked")}else{this.model.get("attributes").set("checked","checked")}this.model.trigger("change")}});wxApp.FormBuilderControlCheckboxPreview=wxApp.FormBuilderControlBasePreview.extend({selector:"#form-builder-checkbox-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInfoView=wxApp.FormBuilderControlView.extend({tplSelector:"#form-builder-info",preview:null,events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"keyup .wx-form-builder-info":"setInfo"})},initialize:function(){console.log("formbuildercontrolinfoview init");var b=a(this.tplSelector);this.inputTpl=_.template(b.html())},render:function(){console.log("formbuildercontrolinfoview render");var c=this.model.toJSON();var b=this.inputTpl(c);this.$el.html(b);return this},setInfo:function(c){var b=a(c.currentTarget);this.model.set("innerHTML",b.val())},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlInfoPreview({model:this.model})}return this.preview}});wxApp.FormBuilderControlInfoPreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b="#form-builder-info-preview";var c=a(b);this.inputTpl=_.template(c.html());this.model.bind("change",this.render,this)},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInputView=wxApp.FormBuilderControlView.extend({inputTplSelector:"#form-builder-input",preview:null,initialize:function(c){console.log(c);c.type=(typeof c.type=="undefined"?"input":c.type);var b=a(this[c.type+"TplSelector"]);this.inputTpl=_.template(b.html())},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlInputPreview({model:this.model})}return this.preview},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));return this}});wxApp.FormBuilderControlInputPreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b="#form-builder-input-preview";var c=a(b);this.inputTpl=_.template(c.html());this.model.bind("change",this.render,this)},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));if(b.attributes.attributes.min){this.$("input").attr("min",b.attributes.attributes.min)}if(b.attributes.attributes.max){this.$("input").attr("max",b.attributes.attributes.max)}if(b.attributes.attributes.step){this.$("input").attr("step",b.attributes.attributes.step)}if(b.attributes.attributes.value){this.$("input").attr("value",b.attributes.attributes.value)}return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlView=Backbone.View.extend({tagName:"section",className:"wx-form-builder-row",events:{"keyup .wx-form-builder-label-input":"updateLabel","keyup .wx-form-builder-text-input":"updateText","keyup .wx-form-builder-placeholder-input":"updatePlaceholder","blur .wx-form-builder-min-input":"setMin","blur .wx-form-builder-max-input":"setMax","blur .wx-form-builder-value-input":"setValue","blur .wx-form-builder-step-input":"setStep","click .wx-form-builder-control-checked":"setChecked","click .wx-form-builder-required":"setRequired","click .wx-form-builder-delete":"deleteControl","sortable-drop":"sortableDrop"},sortableDrop:function(c,b){console.log("sortableDrop");this.$el.trigger("sortable-update",[this.model,b])},deleteControl:function(){console.log("deleteControl");this.getPreview().remove();this.remove();this.model.destroy()},updateLabel:function(b){var c=a(b.currentTarget).val();this.model.set("label",c);this.$(".wx-form-builder-label").text(c)},updateText:function(b){console.log("updateText");var c=a(b.currentTarget).val();this.model.set("text",c)},updatePlaceholder:function(c){var b=a(c.currentTarget);this.model.get("attributes").set("placeholder",b.val());this.model.trigger("change")},getFixedValue:function(d,c){var b;if(typeof d=="string"){b=parseFloat(d).toFixed(c)}else{if(typeof d=="number"){b=d.toFixed(c)}}return b},setMin:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("min",parseFloat(b));this.model.trigger("change")},setMax:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("max",parseFloat(b));this.model.trigger("change")},setValue:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("value",parseFloat(b));this.model.trigger("change")},setStep:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("step",parseFloat(b));this.model.trigger("change")},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("name",b.val())}this.getInput().attr("name",b.val())},setAutocomplete:function(b){this.model.get("attributes").set("autocomplete",a(b.currentTarget).val())},setChecked:function(b){console.log("setChecked");this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked");this.model.trigger("change")},setMultiple:function(c){console.log("setMultiple");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("multiple","checked")}else{this.model.get("attributes").unset("multiple")}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},setRequired:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked")}else{this.model.get("attributes").unset("required")}this.model.trigger("change")},getInput:function(){var b=this.$(".wx-form-builder-"+this.model.get("attributes").get("type")+"-input");if(b.length==0){b=this.$(".wx-form-builder-textarea")}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionGroupView=Backbone.View.extend({className:"wx-form-builder-option-group",initialize:function(b){this.template=_.template(a("#form-builder-option-group").html());this.collection.bind("add",this.addOne,this);this.previewArea=b.previewArea},render:function(){this.$el.html(this.template());return this},addOne:function(c){var b=new wxApp.FormBuilderControlOptionView({model:c});this.$el.append(b.render().el);this.previewArea.$("select").append(b.getPreview().render().el)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionView=wxApp.FormBuilderControlView.extend({className:"row",preview:null,events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"keyup .wx-form-builder-select-option-text":"updateOptionText","blur .wx-form-builder-select-option-value":"updateOptionValue","click .wx-form-builder-control-selected":"setSelected"})},initialize:function(){this.selectTpl=_.template(a("#form-builder-select-option").html())},render:function(){var c=this.model.get("innerText").toString();if(c==="[object Object]"){c=this.model.attributes.innerText.innerText}var b=this.model.toJSON();b.innerText=c;this.$el.html(this.selectTpl(b));return this},setSelected:function(b){console.log("setSelected");this.model.collection.models.forEach(function(c){c.get("attributes").unset("selected")});this.model.get("attributes").set("selected","checked");this.model.trigger("change")},updateOptionText:function(c){var b=a(c.currentTarget);this.model.set({innerText:b.val()})},updateOptionValue:function(c){var b=a(c.currentTarget);if(b.val()!=""){this.model.get("attributes").set("value",b.val())}this.model.trigger("change")},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlOptionPreview({model:this.model})}return this.preview}});wxApp.FormBuilderControlOptionPreview=Backbone.View.extend({tagName:"option",initialize:function(){this.model.bind("change",this.render,this)},render:function(){var b=this.model.get("innerText").toString();if(b==="[object Object]"){b=this.model.attributes.innerText.innerText}this.$el.html(b);this.$el.attr("value",this.model.get("attributes").get("value"));if(this.model.get("attributes").get("selected")){this.$el.attr("selected","selected")}return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioFieldsetView=wxApp.FormBuilderControlBaseFieldsetView.extend({tplSelector:"#form-builder-radio-fieldset",getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlRadioFieldsetPreview({model:this.model})}return this.preview},addOption:function(){this.model.get("radioGroup").add(new wxApp.FormBuilderControlRadio())}});wxApp.FormBuilderControlRadioFieldsetPreview=wxApp.FormBuilderControlBaseFieldsetPreview.extend({selector:"#form-builder-radio-fieldset-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioGroupView=wxApp.FormBuilderControlBaseGroupView.extend({className:"wx-form-builder-radio-group",tplSelector:"#form-builder-radio-group",addOne:function(c){var b=new wxApp.FormBuilderControlRadioView({model:c,type:"radio"});this.addToView(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioView=wxApp.FormBuilderControlBaseView.extend({tplSelector:"#form-builder-radio",getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlRadioPreview({model:this.model})}return this.preview},setChecked:function(b){this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked");this.model.trigger("change")}});wxApp.FormBuilderControlRadioPreview=wxApp.FormBuilderControlBasePreview.extend({selector:"#form-builder-radio-preview"});wxApp.FormBuilderControlTextSliderOptionView=wxApp.FormBuilderControlBaseView.extend({tplSelector:"#form-builder-text-slider-option",getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlTextSliderOptionPreview({model:this.model})}return this.preview},setChecked:function(b){this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked");this.model.trigger("change")}});wxApp.FormBuilderControlTextSliderOptionPreview=Backbone.View.extend({tagName:"li",selector:"#form-builder-text-slider-option-preview",initialize:function(){var b=a(this.selector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){console.log("Render");var b=this.model.toJSON();this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSelectView=Backbone.View.extend({tagName:"section",className:"wx-form-builder-row",tplSelector:"#form-builder-select",preview:null,events:{"keyup .wx-form-builder-title-input":"updateTitle","click .wx-form-builder-add-option":"addOption","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-delete":"deleteControl","click .wx-form-builder-required":"setRequired"},initialize:function(){var b=a(this.tplSelector);this.tpl=_.template(b.html())},render:function(){this.$el.html(this.tpl(this.model.toJSON()));return this},deleteControl:function(){this.remove();this.model.destroy()},addOption:function(){this.model.get("optionGroup").add(new wxApp.FormBuilderControlOption())},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlSelectPreview({model:this.model})}return this.preview},setRequired:function(c){console.log("Set Required.");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked");this.getPreview().$(".required").removeClass("hide")}else{this.model.get("attributes").unset("required");this.getPreview().$(".required").addClass("hide")}},updateTitle:function(c){console.log("updateTitle");var b=a(c.currentTarget);this.$(".wx-form-builder-edit-title").text(b.val());this.model.set("title",b.val());this.getPreview().$("label .title").text(b.val())}});wxApp.FormBuilderControlSelectPreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b="#form-builder-select-preview";var c=a(b);this.inputTpl=_.template(c.html())},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSignatureView=wxApp.FormBuilderControlView.extend({tplSelector:"#form-builder-signature",events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"blur .wx-form-builder-docusign-username":"updateUsername","blur .wx-form-builder-docusign-password":"updatePassword","blur .wx-form-builder-docusign-returnUrl":"updateReturnUrl"})},updateUsername:function(b){this.model.set("username",a(b.currentTarget).val())},updatePassword:function(b){this.model.set("password",a(b.currentTarget).val())},updateReturnUrl:function(b){this.model.set("returnUrl",a(b.currentTarget).val())},initialize:function(){var b=a(this.tplSelector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));return this;console.log("input render")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextareaView=wxApp.FormBuilderControlView.extend({preview:null,initialize:function(){this.inputTpl=_.template(a("#form-builder-textarea").html())},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));return this},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlTextareaPreview({model:this.model})}return this.preview}});wxApp.FormBuilderControlTextareaPreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b="#form-builder-textarea-preview";var c=a(b);this.inputTpl=_.template(c.html());this.model.bind("change",this.render,this)},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextRangeView=wxApp.FormBuilderControlView.extend({inputTplSelector:"#form-builder-text-range",preview:null,initialize:function(c){c.type=(typeof c.type=="undefined"?"input":c.type);var b=a(this[c.type+"TplSelector"]);this.inputTpl=_.template(b.html());if(!this.model.options){this.model.set("options",new wxApp.FormBuilderControlTextSliderOptions())}this.model.get("options").bind("add",this.addOne,this)},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlTextRangePreview({model:this.model})}return this.preview},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));return this},addOne:function(c){var b=new wxApp.FormBuilderControlTextSliderOptionView({model:c});this.$(".options").append(b.render().el);this.getPreview().render()}});wxApp.FormBuilderControlTextRangePreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b="#form-builder-text-range-preview";var c=a(b);this.inputTpl=_.template(c.html());this.model.bind("change",this.render,this)},render:function(){var b=this.model.toJSON();moedel=b;this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderFinishElementView=Backbone.View.extend({className:"wx-form-builder-finish-row",initialize:function(){console.log("finish element view init");var b=a("#form-builder-finish-element");this.template=_.template(b.html());return this},render:function(){console.log("finish element render");console.log(this.model);this.$el.html(this.template(this.model.toJSON()));console.log("finish element render end");return this}});wxApp.FormBuilderFinishView=Backbone.View.extend({events:{"click input[type=radio]":"setIdFieldIndex","blur .wx-form-builder-upload-message":"setUploadMessage"},initialize:function(){console.log("finish view init");this.template=_.template(a("#form-builder-finish").html());console.log(this.model)},render:function(){console.log("finish view render");this.$el.html(this.template({collection:this.model.get("config").formElements}));return this},setUploadMessage:function(b){this.model.get("config").onUpload.message=a(b.currentTarget).val()},setIdFieldIndex:function(b){console.log("setIdFieldIndex");console.log(a(b.currentTarget));this.model.get("config").idFieldIndex=parseInt(a(b.currentTarget).attr("value"));console.log(this.model)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.Advanced=wxApp.StyleBase.extend({el:"#advanced",events:{"click #save_advanced":"saveCss","change #localizations":"saveLanguage","change #font-list":"changeFont"},initialize:function(){this.collection.bind("add",this.addFont,this);this.tpl=_.template(a("#advanced-options").html());this.render()},render:function(){var b=wxApp.config.get("localization");b=b.replace(/"/g,"");wxApp.config.set("localization",b);this.$(".content").html(this.tpl({config:wxApp.config.toJSON(),design:wxApp.design.toJSON()}));if(this.collection.length){for(var d=0;d<this.collection.length;d++){var c=this.collection.models[d];this.addFont(c)}}},saveCss:function(){var d=this;var c=this.$("#css_styles").val();wxApp.design.get("css").styles=c;var b=JSON.stringify(wxApp.design.get("css"));var e={css:b};wx.makeApiCall("design/set_css",e,function(f){wx.rebuildApp()})},saveLanguage:function(){var c=this;var f="localizations";var b=this.showLoadingGif(f);var e=this.$("#"+f).val();wxApp.config.set("localization",e);var d={localization:e};wx.makeApiCall("config/set_localization",d,function(g){c.hideLoadingGif(f,b)})},addFont:function(b){b=b.toJSON();var c={value:b.id,text:b.name};if(b.id==wxApp.font){c.selected=true}a("#font-list").append(a("<option>",c))},changeFont:function(){var c=a("#font-list").val();a("#icon-font-preview").slideUp();if(c==="-1"){return}var b=new wxApp.IconFont();b.fetch(c,function(){wxApp.appView.changeFont(b);a("#icon-font-preview").slideDown()});var e=this;var d=this.showLoadingGif("font");wx.makeApiCall("design/set_font_id",{font_id:c},function(f){wx.rebuildApp();e.hideLoadingGif("font",d)})}});wxApp.IconFonts.fetch()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.CustomBranding=wxApp.StyleBase.extend({el:"#custom_branding",events:{"click #save_load_spinner":"saveLoadSpinner","click #save_domain":"saveDomain","click a.domain":"deleteDomain"},initialize:function(){this.tpl=_.template(a("#custom-branding").html());this.render()},render:function(){this.$(".content").html(this.tpl(this.model.toJSON()))},saveLoadSpinner:function(){if(this.$("#wx-load-spinner").length){var d=this;var f="save_load_spinner";var b=d.showLoadingGif(f);wxApp.design.get("loadspinner").text=this.$("#wx-load-spinner").val();var c=JSON.stringify(wxApp.design.get("loadspinner"));var e={loadspinner:c};wx.makeApiCall("design/set_loadspinner",e,function(g){d.hideLoadGif(f,b)})}},saveDomain:function(){if(!this.$("#wx-domain-map-input").length){return}if(wxApp.design.get("domain")===null){wxApp.design.set("domain",[])}var d=this;var f="wx-domain-map-input";var b=a("#"+f);var c=this.showLoadingGif(f);var e=b.val();wxApp.design.get("domain").push({domain:e});this.updateDomains(wxApp.design.get("domain"),function(g){wxApp.customBranding.render();d.hideLoadGif(f,c)})},deleteDomain:function(d){d.preventDefault();var c=a(d.currentTarget).data("id");var b=this.inArray(c,wxApp.design.get("domain"));if(b>-1){wxApp.design.get("domain").splice(b,1);this.updateDomains(wxApp.design.get("domain"),function(e){wxApp.customBranding.render()})}},inArray:function(d,e){var b=-1;for(var c=e.length-1;c>=0;c--){if(e[c].domain===d){b=c;break}}return b},updateDomains:function(b,e){var c=JSON.stringify(b);var d={domain:c};wx.makeApiCall("design/set_domain",d,e)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.InstallIcon=wxApp.StyleBase.extend({el:"#install_icon",events:{"click #save_install_icon":"clickSave","change input[name=switch-install]":"changeSave"},initialize:function(){this.tpl=_.template(a("#install-icon").html());this.$(".content").html(this.tpl(this.model.toJSON()))},clickSave:function(){a("#save_install_icon").html("Saving...");this.performSave(function(b){a("#save_install_icon").html("Saved!").delay(2000).queue(function(){a(this).html("Save")})})},changeSave:function(b){this.performSave(function(c){})},performSave:function(f){var b=a("input[name=switch-install]:checked").attr("id");if(b==="install-on"){b="1"}else{b="0"}wxApp.design.get("install").prompt=b;wxApp.design.get("install").name=a("#title").val();wxApp.design.get("install").icon=wx.cleanUrl(a("#wx-icon_live").attr("src"));var d=JSON.stringify(wxApp.design.get("install"));var e={install:d};wx.makeApiCall("design/set_install",e,f)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.StyleBase=Backbone.View.extend({showLoadingGif:function(c){var b="#"+c+"_loading";a(b).show();return b},hideLoadingGif:function(c,b){this.hideLoadGif(c,b)},hideLoadGif:function(e,c){var d=e+"_done";var b='<label id="'+d+'" class="left inline">Saved.</label>';a(c).before(b);a("#"+d).delay(2000).fadeOut(1000).queue(function(){a(this).remove()});a(c).hide()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.LaunchScreen=Backbone.View.extend({el:"#launch_screen",events:{"change .wx-theme-input":"saveImage"},initialize:function(){Backbone.Events.on("image:change",this.saveImage,this);this.tpl=_.template(a("#launch-screen").html());jsonModel=this.model.toJSON();jsonModel.launchscreen.phone=this.fixImageUrl(jsonModel.launchscreen.phone);jsonModel.launchscreen.tablet=this.fixImageUrl(jsonModel.launchscreen.tablet);jsonModel.launchscreen.tablet_landscape=this.fixImageUrl(jsonModel.launchscreen.tablet_landscape);this.$(".content").html(this.tpl(this.model.toJSON()))},saveImage:function(b){var f=b.attr("id");if(!f){f=b.attr("name")}var e=b.val();if(f==="titlebar_logo_live"){wxApp.design.get("titlebar").image=e;var c=JSON.stringify(wxApp.design.get("titlebar"));var d={titlebar:c};wx.makeApiCall("design/set_titlebar",d,function(g){})}else{if(f==="icon_live"){wxApp.design.get("install").icon=e;var c=JSON.stringify(wxApp.design.get("install"));var d={install:c};wx.makeApiCall("design/set_install",d,function(g){})}else{f=f.replace("_load_live","");wxApp.design.get("launchscreen")[f]=e;var c=JSON.stringify(wxApp.design.get("launchscreen"));var d={launchscreen:c};wx.makeApiCall("design/set_launchscreen",d,function(g){})}}},fixImageUrl:function(b){if(b.indexOf("wp_weeverapps-live/static/images")>0){b=b.replace("wp_weeverapps-live/static/images","weever-apps-20-mobile-web-apps/static/img/launchscreens")}return b}})})(jQuery);wxApp=wxApp||{};(function(c){wxApp.LogoDesign=wxApp.StyleBase.extend({el:"#logo_design",events:{"change input[name=titlebarSource]":"radioChange","click button.postfix":"showPicker","change .logo-design":"logoChange"},initialize:function(){this.tpl=_.template(c("#logo-design").html());this.$(".content").html(this.tpl(this.model.toJSON()));Backbone.Events.on("color:change",this.colorChange,this);jscolor.bind()},showPicker:function(e){var d=e.currentTarget;btn=d;var f=c(d).data("color-picker");this.$("#"+f)[0].color.showPicker()},radioChange:function(){switch(c("input:radio[name=titlebarSource]:checked").val()){case"text":c("#logoText").show();c("#logoImage").hide();break;case"image":c("#logoText").hide();c("#logoImage").show();break}this.logoChange(this)},colorChange:function(i){var g=this;var d=c(i.valueElement);var k=d.attr("id");var j=d.val();if(j.indexOf("#")!==0){j="#"+j}var f=this.showLoadingGif(k);var h={action:"ajaxSaveTheme",nonce:c("input#nonce").val()};h[k]=j;c.ajax({type:"POST",url:ajaxurl,data:h,success:function(e){g.hideLoadGif(k,f)},error:function(e,l){alert(l)}})},logoChange:function(i){var h=this;var d=c(i.currentTarget);var k=d.attr("id");var f=this.showLoadingGif(k);wxApp.design.get("titlebar").html=c("#titlebar_html").val();wxApp.design.get("titlebar").text=c("#titlebar_title").val();wxApp.design.get("titlebar").type=c("input:radio[name=titlebarSource]:checked").val();wxApp.design.get("titlebar").image=c("#titlebar_logo_live").attr("src");var g=JSON.stringify(wxApp.design.get("titlebar"));var j={titlebar:g};wx.makeApiCall("design/set_titlebar",j,function(e){h.hideLoadGif(k,f);wx.rebuildApp()})}});var a=false,b=false;wxApp.design=new wxApp.Design();wxApp.design.fetch(function(){wxApp.logoDesign=new wxApp.LogoDesign({model:wxApp.design});wxApp.launchSreen=new wxApp.LaunchScreen({model:wxApp.design});wxApp.installIcon=new wxApp.InstallIcon({model:wxApp.design});wxApp.customBranding=new wxApp.CustomBranding({model:wxApp.design});a=true;if(b){wxApp.advanced=new wxApp.Advanced({collection:wxApp.IconFonts})}loadImageUploaders()});wxApp.config=new wxApp.Config();wxApp.config.fetch(function(){b=true;if(a){wxApp.advanced=new wxApp.Advanced({collection:wxApp.IconFonts})}});wxApp.IconFonts.fetch()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.BloggerSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#blogger-subtab-edit-template",setModelFromView:function(b){console.log("Set Model From View");console.log(this.$(".wx-edit-input"));if(this.$(".wx-edit-input")){b.setConfig("blog_url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabEditView=Backbone.View.extend({className:"wx-subtab-edit",subTabEditTplSelector:"",baseEditTplSelector:"#subtab-edit-template",feedSampleTplSelector:"#feedsample-template",parentContainerId:false,initialize:function(b){this.initializeEvents();this.subTabEditTpl=_.template(a(this.subTabEditTplSelector).html());this.baseEditTpl=_.template(a(this.baseEditTplSelector).html());this.feedSampleTpl=_.template(a(this.feedSampleTplSelector).html());this.render();Backbone.Events.on("tab:new",this.destroyView,this);this.model.on("save",this.destroyView,this)},initializeEvents:function(){this.events=this.genericEvents;this.delegateEvents()},genericEvents:{"change .wx-dialog-input":"next","change .wx-social-input":"next","keydown .wx-dialog-input":"hideValidateFeed","keyup .wx-edit-title":"editTitle","click .wx-finish-button":"finish","click .wx-next-button":"next","change .wx-content-radio":"contentChange","click .close-reveal-modal":"close",close:"close"},render:function(){m=this.model;this.$el.html(this.baseEditTpl(this.model.toJSON()));this.$(".subtab").html(this.subTabEditTpl(this.model.toJSON()));this.$el.prepend("<form>");this.$el.append("</form>");this.startValidation();if(this.model.validateFeed){this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide();if(this.model.get("id")!==null){this.next()}}else{this.$(".wx-next-button").hide();if(!this.model.allowTitleEdit){this.$(".wx-edit-title-div").hide()}}var b=this.$el;meeeee=b;this.$el.on("opened",function(){b.foundation("section","reflow");var c=b.height();c-=115;if(c<315){c=315}b.find(".previewTabs div.content").height(c);b.find("input[type=text]:first").focus()});return this},close:function(){this.undelegateEvents()},startValidation:function(){if(undefined!==this.$("form").validate){this.$("form").validate()}},contentChange:function(b){this.hideValidateFeed()},setParentViewContainerId:function(b){this.parentContainerId=b},finish:function(){if(this.validate()){this.setModelFromView(this.model);this.setTitleFromView(this.model);this.setIconFromView(this.model);this.saveModel();this.$el.foundation("reveal","close");wx.rebuildApp()}},validate:function(){return true},next:function(){if(!this.model.validateFeed){return}this.$("#dialog-loader").show();if(undefined!==this.$("form")&&undefined!=this.$("form").validate){var b=this.$("form").validate();if(this.$("form").valid()){this.validateFeed()}else{alert("Error count: "+b.errorList.length)}}else{this.validateFeed()}},saveModel:function(){this.model.save()},editTitle:function(b){if(a(".wx-validate-feed.panel").length){a(".wx-validate-feed.panel > h3").text(a(b.currentTarget).val())}},setTitleFromView:function(b){if(b.allowTitleEdit&&this.$(".wx-edit-title")){b.set("title",this.$(".wx-edit-title").val())}return b},setIconFromView:function(b){var c=this.$('input:radio[name="wx-icon"]:checked').val();b.set("icon_id",null);b.set("icon",c);return b},setModelFromView:function(b){},validateFeed:function(){var b=this;var c=this.getModelCopy();this.setModelFromView(c);this.getFeedSample(c,function(d){b.checkFeedSample(d)})},getModelCopy:function(){var b=a.extend(true,{},this.model);return b},checkFeedSample:function(b){if(typeof b!="undefined"&&b.success&&typeof b.feed!="undefined"){this.$("#dialog-loader").hide();this.$(".wx-feed-error").hide();this.displayFeedSample(b);this.$(".wx-next-button").hide();this.$(".wx-finish-button").show();if(this.model.allowTitleEdit){this.$(".wx-edit-title-div").show()}}else{this.$(".wx-feed-error").show()}},displayFeedSample:function(b){var d=this;this.$(".wx-validate-feed").show();if(!b.feed.length){this.$(".wx-validate-feed").html("No content added yet?")}else{this.$(".wx-validate-feed").html("<ul></ul>");for(var c=0;c<b.feed.length;c++){this.$(".wx-validate-feed ul").append(d.feedSampleTpl(b.feed[c]))}}},hideValidateFeed:function(){this.$(".wx-feed-error").hide();this.$(".wx-validate-feed").html('<div class="panel wx-preview"><h3 class="wx-preview-msg">preview</h3></div>');this.$(".wx-next-button").show();this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide()},getFeedSample:function(b,d){var c=b.getAPIData();c.api_check=1;c.confirm_feed=1;a.ajax({url:wx.apiUrl+"validator/validate_feed?site_key="+wx.siteKey,datatype:"JSON",data:c,success:function(e){d(e)}})},destroyView:function(){this.undelegateEvents();this.$el.removeData().unbind()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookAlbumsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookalbums-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookEventsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookevents-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookWallSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookwall-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FlickrSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#flickr-subtab-edit-template",setModelFromView:function(c){var d=this.$(".wx-content-radio:checked").val();c.set("content",d);if(d==="flickrPhotostream"){c.set("layout","carousel")}else{c.set("layout","list")}var b=this.$(".wx-edit-input").val();b=b.replace(/\/$/,"");c.setConfig("url",b);c.setConfig("user_id",b);return c},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderSubTabEditView=wxApp.SubTabEditView.extend({previewPaneClass:"wx-preview-form",buildPaneSelector:"#form-build-area",subTabEditTplSelector:"#form-builder-subtab-edit-template",hasCalledFinish:false,finishView:null,previews:null,initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)},initialize:function(){wxApp.SubTabEditView.prototype.initialize.apply(this,arguments);a(".wx-validate-feed").html('<br><h3 class="subheader">'+this.model.get("title")+" &mdash; preview</h3>");a(".wx-validate-feed").append('<div class="'+this.previewPaneClass+'"></div>');a(".wx-validate-feed").append('<br><button class="success radius">'+this.model.get("buttonText")+"</button><br><br>");a(".wx-validate-feed").addClass("panel");if(typeof this.model.get("config").formElements=="undefined"){this.model.get("config").formElements=new wxApp.FormBuilderCollection()}else{var e;try{e=JSON.parse(this.model.get("config").formElements)}catch(f){e=this.model.get("config").formElements.toJSON()}this.model.get("config").formElements=new wxApp.FormBuilderCollection();for(var d=0;d<e.length;d++){if(e[d].control==="div"){this.addInfoWithProperties(e[d])}else{if(e[d].control==="textarea"){this.addTextareaWithProperties(e[d])}else{if(e[d].control==="radiofieldset"){this.addRadioGroupWithProperties(e[d])}else{if(e[d].control==="checkboxfieldset"){this.addCheckboxGroupWithProperties(e[d])}else{if(e[d].control==="select"){this.addSelectWithProperties(e[d])}else{if(e[d].type==="textSlider"){this.addTextSlider(e[d])}else{this.addInput(e[d])}}}}}}}}if(typeof this.model.get("config").formActions=="undefined"){this.getDefaultFormActions()}else{var c;try{c=JSON.parse(this.model.get("config").formActions)}catch(f){c=this.model.get("config").formActions.toJSON()}this.model.get("config").formActions=new Backbone.Collection();var h=false,j=false,b=false;for(var d=0;d<c.length;d++){var g=c[d];if(g.method=="docusign"){this.addDocusignAction(null,g);h=true}else{if(g.method=="post"){this.addPostAction(null,g);j=true}else{if(g.method=="email"){this.addEmailAction(null,g);b=true}}}}if(this.model.get("config").isDocuSign&&!h){this.addDocusignAction(null,{method:"docusign"})}if(!j){this.addPostAction(null,{method:"post"})}if(!b){this.addEmailAction(null,{method:"email"})}}if(typeof this.model.get("config").onUpload=="string"){this.model.get("config").onUpload=JSON.parse(this.model.get("config").onUpload)}},validate:function(){var d=false;a(".wx-form-builder-action").each(function(e,g){var f=a(g);if(f.val()){d=true}});if(!d){var b="Sorry! Your form could not be saved.  Please add an email recipient or custom post action in &ldquo;Form submission settings&rdquo;.";var c=a(".alert-box.alert .message").html(b);c.parent().slideDown()}return d},getDefaultFormActions:function(){this.model.get("config").formActions=new Backbone.Collection();var c=new wxApp.FormBuilderAction();c.set({method:"post"});var b=new wxApp.FormBuilderAction();b.set({method:"email"});this.model.get("config").formActions.push(c);this.model.get("config").formActions.push(b);this.addPostAction(c);this.addEmailAction(b)},setModelFromView:function(b){for(var c=0;c<b.get("config").formActions.length;c++){var d=b.get("config").formActions.models[c];if(d.get("method")==="post"||d.get("method")==="email"){if(!d.get("value")){b.get("config").formActions.remove(d);c--}}else{if((typeof d.get("username")==="undefined")||!d.get("password")){b.get("config").formActions.remove(d);c--}}}return b},events:{"click .wx-form-builder-add-text-input":"addTextInput","click .wx-form-builder-add-password-input":"addPasswordInput","click .wx-form-builder-add-date-input":"addDateInput","click .wx-form-builder-add-datetime-local-input":"addDateTimeLocalInput","click .wx-form-builder-add-email-input":"addEmailInput","click .wx-form-builder-add-file-input":"addFileInput","click .wx-form-builder-add-photo-input":"addPhotoInput","click .wx-form-builder-add-month-input":"addMonthInput","click .wx-form-builder-add-number-input":"addNumberInput","click .wx-form-builder-add-tel-input":"addTelInput","click .wx-form-builder-add-time-input":"addTimeInput","click .wx-form-builder-add-url-input":"addUrlInput","click .wx-form-builder-add-radio-group":"addRadioGroup","click .wx-form-builder-add-checkbox-group":"addCheckboxGroup","click .wx-form-builder-add-textarea":"addTextarea","click .wx-form-builder-add-range-input":"addRangeInput","click .wx-form-builder-add-text-range-input":"addTextRangeInput","click .wx-form-builder-add-select":"addSelect","click .wx-form-builder-add-info":"addInfo","keyup .button-text":"updateButtonText","sortable-update":"sortableUpdate"},updateButtonText:function(c){var b=a(c.currentTarget);this.model.set("buttonText",b.val());a(".wx-validate-feed.panel button.success").text(b.val())},sortableUpdate:function(f,c,b){var d=this.model.get("config").formElements;d.remove(c);d.each(function(i,h){var g=h;if(h>=b){g+=1}i.set("ordinal",g)});c.set("ordinal",b);d.add(c,{at:b});var e=this;a("."+this.previewPaneClass).html("");d.each(function(h,g){for(var j=0;j<e.previews.length;j++){var k=e.previews[j];if(k.model.cid===h.cid){a("."+e.previewPaneClass).append(k.render().el);break}}})},finish:function(){var g=false,e=this.model.get("config").formElements,h=this.model.get("config").formActions,b=function(){this.finishView=new wxApp.FormBuilderFinishView({model:this.model});this.$(this.buildPaneSelector).append(this.finishView.render().el)};var c={};for(var d=0;d<e.length;d++){c=e.at(d);if("input"==c.get("control")&&"file"==c.get("attributes").get("type")){g=true}else{if("textSlider"==c.get("type")){c.get("attributes").set("step",1);c.get("attributes").set("min",0);c.get("attributes").set("max",c.get("options").length-1);for(var d=0;d<c.get("options").length;d++){var f=c.get("options").models[d];if(f.get("attributes").attributes.checked){c.get("attributes").set("value",d);break}}}}}if(!g||typeof this.model.get("config").idFieldIndex=="number"){wxApp.SubTabEditView.prototype.finish.apply(this);return}if(typeof this.model.get("config").idFieldIndex!="number"&&!this.hasCalledFinish){b.apply(this);this.hasCalledFinish=true;return}if(this.hasCalledFinish){this.finishView.remove();b.apply(this)}},addDocusignAction:function(c,b){var d;if(typeof b!="undefined"){d=this.addCustomAction(b)}else{d=this.addCustomAction({method:"docusign"})}return d},addEmailAction:function(c,b){var d;if(typeof b!="undefined"){d=this.addCustomAction(b)}else{d=this.addCustomAction({method:"email"})}return d},addPostAction:function(c,b){var d;if(typeof b!="undefined"){d=this.addCustomAction(b)}else{d=this.addCustomAction({method:"post"})}return d},addCustomAction:function(b){var c=new wxApp.FormBuilderAction();if(typeof b=="object"){c.set(b)}var d=new wxApp.FormBuilderActionView({model:c});this.$("#form-settings-accordion").append(d.render().el);this.model.get("config").formActions.push(c);return c},addInput:function(f){var e={};var d={};for(var g in f){if(g!="attributes"){e[g]=f[g]}else{for(var h in f[g]){d[h]=f[g][h]}}}var c=new wxApp.FormBuilderControlInput(e);c.get("attributes").set(d);for(var h in d){c.get("attributes")[h]=d[h]}var b=new wxApp.FormBuilderControlInputView({model:c});this.addControl(c,b);return c},addTextSlider:function(f){var e={};var d={};for(var g in f){if(g!="attributes"){e[g]=f[g]}else{for(var h in f[g]){d[h]=f[g][h]}}}var c=new wxApp.FormBuilderControlTextRange(e);c.get("attributes").set(d);for(var h in d){c.get("attributes")[h]=d[h]}var b=new wxApp.FormBuilderControlTextRangeView({model:c});console.log(c);this.addControl(c,b);c.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"SD"}));c.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"D"}));c.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"NA"}));c.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"A"}));c.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"SA"}));return c},addDateInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Date",attributes:{type:"date"}})},addDateTimeLocalInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Date / Time",attributes:{type:"datetime-local"}})},addEmailInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Email",showPlaceholder:true,multiClass:"",attributes:{type:"email"}})},addFileInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"File upload",multiClass:"",autocompleteClass:"hide",attributes:{type:"file",accept:"image/*"}})},addPhotoInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Photo upload",multiClass:"",autocompleteClass:"hide",attributes:{type:"file",accept:"image/*"}})},addMonthInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Month",attributes:{type:"month"}})},addNumberInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Number",minClass:"",maxClass:"",stepClass:"",valueClass:"",attributes:{type:"number"}})},addPasswordInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Password",showPlaceholder:true,attributes:{type:"password"}})},addRangeInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Range",minClass:"",maxClass:"",stepClass:"",valueClass:"",attributes:{type:"range"}})},addTextRangeInput:function(b){this.addTextSlider({controlTitle:a(b.currentTarget).text(),label:"Select One",type:"textSlider",attributes:{type:"range"}})},addTelInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Telephone",type:"tel",showPlaceholder:true,attributes:{type:"tel"}})},addTextInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Untitled",type:"text",showPlaceholder:true,attributes:{type:"text"}})},addTimeInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"Time",attributes:{type:"time"}})},addUrlInput:function(b){this.addInput({controlTitle:a(b.currentTarget).text(),label:"URL",showPlaceholder:true,attributes:{type:"url"}})},addInfo:function(b){this.addInfoWithProperties({controlTitle:a(b.currentTarget).text()})},addInfoWithProperties:function(c){var d=new wxApp.FormBuilderControlInfo(c);var b=new wxApp.FormBuilderControlInfoView({model:d});this.addControl(d,b)},addTextarea:function(b){this.addTextareaWithProperties({controlTitle:a(b.currentTarget).text()})},addTextareaWithProperties:function(b){var d=new wxApp.FormBuilderControlTextarea(b);var c=new wxApp.FormBuilderControlTextareaView({model:d});this.addControl(d,c)},addRadioGroup:function(b){this.addRadioGroupWithProperties({controlTitle:a(b.currentTarget).text()})},addRadioGroupWithProperties:function(k){var e=new wxApp.FormBuilderControlRadioFieldset(k);var d=new wxApp.FormBuilderControlRadioFieldsetView({model:e});this.addControl(e,d);var j=new wxApp.FormBuilderControlRadioGroupView({collection:e.get("radioGroup"),previewArea:d.getPreview()});d.$(".wx-form-builder-radio-fieldset").append(j.render().el);if(k.radioGroup==undefined||k.radioGroup.length==0){var f=new wxApp.FormBuilderControlRadio({label:"Option A"});var c=new wxApp.FormBuilderControlRadio({label:"Option B"});var b=new wxApp.FormBuilderControlRadio({label:"Option C"});e.get("radioGroup").add(f);e.get("radioGroup").add(c);e.get("radioGroup").add(b)}else{for(var g=0;g<k.radioGroup.length;g++){var l=k.radioGroup[g];if(!l){l=k.radioGroup.models[g].attributes}var h=new wxApp.FormBuilderControlRadio(l);e.get("radioGroup").add(h)}}},addCheckboxGroup:function(b){this.addCheckboxGroupWithProperties({controlTitle:a(b.currentTarget).text()})},addCheckboxGroupWithProperties:function(d){var g=new wxApp.FormBuilderControlCheckboxFieldset(d);var h=new wxApp.FormBuilderControlCheckboxFieldsetView({model:g});this.addControl(g,h);var c=new wxApp.FormBuilderControlCheckboxGroupView({collection:g.get("checkboxGroup"),previewArea:h.getPreview()});h.$(".wx-form-builder-checkbox-fieldset").append(c.render().el);if(d.checkboxGroup==undefined||d.checkboxGroup.length==0){g.get("checkboxGroup").add(new wxApp.FormBuilderControlCheckbox({label:"Option A"}));g.get("checkboxGroup").add(new wxApp.FormBuilderControlCheckbox({label:"Option B"}));g.get("checkboxGroup").add(new wxApp.FormBuilderControlCheckbox({label:"Option C"}))}else{for(var b=0;b<d.checkboxGroup.length;b++){var f=d.checkboxGroup[b];if(!f){f=d.checkboxGroup.models[b].attributes}var e=new wxApp.FormBuilderControlCheckbox(f);g.get("checkboxGroup").add(e)}}},addSelect:function(b){this.addSelectWithProperties({controlTitle:a(b.currentTarget).text()})},addSelectWithProperties:function(d){var b=new wxApp.FormBuilderControlSelect(d);var h=new wxApp.FormBuilderControlSelectView({model:b});this.addControl(b,h);var g=new wxApp.FormBuilderControlOptionGroupView({collection:b.get("optionGroup"),previewArea:h.getPreview()});h.$(".wx-form-builder-select").append(g.render().el);if(d.optionGroup==undefined||d.optionGroup.length==0){b.get("optionGroup").add(new wxApp.FormBuilderControlOption({innerText:"Option A"}));b.get("optionGroup").add(new wxApp.FormBuilderControlOption({innerText:"Option B"}));b.get("optionGroup").add(new wxApp.FormBuilderControlOption({innerText:"Option C"}))}else{for(var c=0;c<d.optionGroup.length;c++){var e=d.optionGroup[c];if(!e){e=d.optionGroup.models[c].attributes}var f=new wxApp.FormBuilderControlOption(e);b.get("optionGroup").add(f)}}},addControl:function(c,b){var d=this.model.get("config").formElements.length;d++;c.set("ordinal",d);this.$(this.buildPaneSelector).append(b.render().el);a(".wx-form-builder-row").removeClass("active");b.$el.addClass("active");this.model.get("config").formElements.push(c);a(this.buildPaneSelector).foundation("section","reflow");var e=a(".wx-form-builder-row.active").offset().top-230;a("#form-creation").animate({scrollTop:e},1000);if(!this.previews){this.previews=[]}this.previews.push(b.getPreview());a("."+this.previewPaneClass).append(b.getPreview().render().el)}});wxApp.DocuSignSubTabEditView=wxApp.FormBuilderSubTabEditView.extend({validate:function(){var d=false;if(a(".wx-form-builder-docusign-username").val()&&a(".wx-form-builder-docusign-password").val()){d=true}if(!d){var b="Your form could not be saved! Please enter your DocuSign&trade; username and password under the <b>Form Settings</b> tab.";var c=a(".alert-box.alert .message").html(b);c.parent().slideDown()}return d},getDefaultFormActions:function(){this.model.get("config").formActions=new Backbone.Collection();var c=new wxApp.FormBuilderAction();c.set({method:"post"});var b=new wxApp.FormBuilderAction();b.set({method:"docusign"});this.model.get("config").formActions.push(c);this.model.get("config").formActions.push(b);this.addPostAction(c);this.addDocusignAction(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FoursquarePhotosSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#foursquarephotos-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("venue_id",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.GoogleCalendarSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#googlecalendar-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("calendar_id",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabView=wxApp.TabView.extend({tagName:"li",className:"wx-ui-row",attributes:function(){return{id:this.model.get("id")+"SubtabID"}},initialize:function(){this.subTabTpl=_.template(a("#subtab-template").html());var b=this;this.model.on("save",function(){b.render()});this.model.on("destroy",function(){b.remove()});this.model.on("tab:move",function(){b.remove()})},events:{"click .wx-edit-link":"editSubTab","click .wx-subtab-delete":"confirmDeleteSubTab"},render:function(){this.$el.html(this.subTabTpl(this.model.toJSON()));this.$el.data("backbone-view",this);return this},editSubTab:function(d){d.preventDefault();var c=this.model.getModelName()+"EditView";if("SubTabEditView"!=c&&undefined!==wxApp[c]){var b=new wxApp[c]({model:this.model,el:"#wx-edit-area-"+this.model.get("id")})}else{throw new Error("Invalid edit type "+this.model.get("content")+"--"+c)}},confirmDeleteSubTab:function(b){b.preventDefault();if(confirm("Are you sure you want to delete this item?")){this.deleteSubTab()}},deleteSubTab:function(){this.model.destroy();wx.rebuildApp()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.PicasaAlbumsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#picasaalbums-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("user_id",this.$(".wx-edit-input").val());b.setConfig("email",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.r3sSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#r3s-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.RSSSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#rss-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TwitterSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#twitter-subtab-edit-template",contentChange:function(c){wxApp.SubTabEditView.prototype.contentChange.call(this,c);var d="Search Term";var b=this.$(".wx-content-radio:checked").val();if("twitterUser"===b){d="@MyTwitterHandle"}else{if("twitterHashTag"===b){d="#hashtag"}}a("#wx-twitter-input").attr("placeholder",d)},setModelFromView:function(b){var c=this.$(".wx-content-radio:checked").val();if("twitterUser"==c){b.setConfig("screen_name",this.$(".wx-edit-input").val());b.deleteConfig("q")}else{c="twitter";b.setConfig("q",this.$(".wx-edit-input").val());b.deleteConfig("screen_name")}try{b.set("content",c)}catch(d){}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.VimeoSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#vimeo-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressBlogSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressblog-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-blog-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-blog-select")){b.setConfig("url",this.$(".wx-add-wordpress-blog-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressCategorySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresscategory-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-category-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-category-select")){b.setConfig("url",this.$(".wx-add-wordpress-category-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressContactsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresscontacts-subtab-edit-template",setModelFromView:function(d){var b={};if(this.$(".wx-contact-input-title")){d.set("title",this.$(".wx-contact-input-title").val())}if(this.$(".wx-contact-input-phone")){b.telephone=this.$(".wx-contact-input-phone").val()}if(this.$(".wx-contact-input-email")){b.email_to=this.$(".wx-contact-input-email").val()}if(this.$(".wx-contact-input-address")){b.address=this.$(".wx-contact-input-address").val()}if(this.$(".wx-contact-input-town")){b.town=this.$(".wx-contact-input-town").val()}if(this.$(".wx-contact-input-state")){b.state=this.$(".wx-contact-input-state").val()}if(this.$(".wx-contact-input-country")){b.country=this.$(".wx-contact-input-country").val()}b.googlemaps=(this.$(".wx-contact-input-googlemaps")&&this.$(".wx-contact-input-googlemaps").val()?1:0);b.emailform=(this.$(".wx-contact-input-emailform")&&this.$(".wx-contact-input-emailform").val()?1:0);if(this.$(".wx-contact-input-misc")){b.misc=this.$(".wx-contact-input-misc").val()}if(this.$(".wx-contact-input-image")){b.image=this.$(".wx-contact-input-image").val();b.showimage=(b.image.trim()?1:0)}var c={};var f=[];f.push(b);c.contacts=f;try{d.set("config_cache",c)}catch(g){}return d}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressDirectorySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressdirectory-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-directory-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-directory-select")){b.setConfig("url",this.$(".wx-add-wordpress-directory-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressMapSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressmap-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-map-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-map-select")){b.setConfig("url",this.$(".wx-add-wordpress-map-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressPageSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresspage-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;b=b.replace("?page_id","?wx_page_id");a(".wx-add-wordpress-page-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-page-select")){b.setConfig("url",this.$(".wx-add-wordpress-page-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressProximitySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressproximity-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-proximity-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-proximity-select")){b.setConfig("url",this.$(".wx-add-wordpress-proximity-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressSearchtermSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresssearchterm-subtab-edit-template",render:function(){var c=this.model.get("config").url;var d=c.indexOf("s=");var b=c.substr(d+2);this.model.get("config").search_value=_.unescape(b).replace("%20"," ");wxApp.SubTabEditView.prototype.render.apply(this)},setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-wordpress-siteurl").val()+"&s="+encodeURIComponent(this.$(".wx-edit-input").val()))}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressTagSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresstag-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-tag-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-tag-select")){b.setConfig("url",this.$(".wx-add-wordpress-tag-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WufooSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wufoo-subtab-edit-template",render:function(){var c=this.model.get("config").username;if(c){var b="https://"+c+".wufoo.com";this.model.get("config").url=b}wxApp.SubTabEditView.prototype.render.apply(this)},setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}if(this.$(".wx-wufoo-api-key-input")){b.setConfig("apikey",this.$(".wx-wufoo-api-key-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.YoutubeSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#youtube-subtab-edit-template",setModelFromView:function(b){b.set("content",this.$(".wx-content-radio:checked").val());b.setConfig("url",this.$(".wx-edit-input").val());return b},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabsView=Backbone.View.extend({tagName:"ul",className:"list-items-sortable list-items list-sub-items",attributes:function(){return{id:"listItemsSortable"+this.model.get("id")}},initialize:function(){var b=this;this.model.get("subTabs").bind("add",b.addSubTab,b);Backbone.Events.on("tab:dropped",this.cancelSort,this)},events:{},render:function(){this.$el.html("");this.startSortable();if(this.model.getSubTabs().length){var b=this;this.model.getSubTabs().forEach(function(c){b.addSubTab(c)})}return this},addSubTab:function(d){var c=this;var b=new wxApp.SubTabView({model:d});this.$el.append(b.render().el);d.on("destroy",function(){c.deleteSubTab(this)});this.refreshSortable()},startSortable:function(){var b=this;if(undefined!=this.$el.sortable){this.$el.sortable({start:function(c,d){console.log("trigger dragstart");Backbone.Events.trigger("subtab:dragstart")},stop:function(c,d){Backbone.Events.trigger("subtab:dragstop")},update:function(d,e){console.log("update");var c=String(a(this).sortable("toArray").map(function(f){return f.replace("SubtabID","")}));wx.makeApiCall("tabs/sort_tabs",{order:c},function(){wx.rebuildApp();b.setSubTabCollectionOrder(c.split(","));var f=c.split(",")[0];var g=a(e.item).data("backbone-view").model.get("parent_id");if(g!=f){Backbone.Events.trigger("tab:id-update",g,f)}})},helper:"clone",cursor:"move",handle:".wx-subtab-movehandle"})}},setSubTabCollectionOrder:function(b){this.model.get("subTabs").comparator=function(c){return b.indexOf(String(c.get("id")))};this.model.get("subTabs").sort()},refreshSortable:function(){if(undefined!=this.$el.sortable){this.$el.sortable("refresh")}},cancelSort:function(b){var c=this;if(undefined!=this.$el.sortable&&b==this.model.get("id")){c.$el.sortable("cancel")}},deleteSubTab:function(b){this.model.deleteSubTab(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabsContainerView=Backbone.View.extend({tagName:"div",tabView:false,initialize:function(){var b=this;this.subTabContainerTpl=_.template(a("#subtab-container-template").html());this.subTabsView=new wxApp.SubTabsView({model:this.model});this.subTabsView.on("delete",function(){b.model.destroy();b.remove()});this.containerEditContentTpl=_.template(a("#ContainerEditContent").html());this.containerEditView=new wxApp.ContainerEditView({model:this.model});this.model.on("change",this.render,this)},events:{"click #ContainerEditLink":"openEditModal","click .wx-delete-container":"confirmDelete","click .wx-layout-selector":"selectLayout"},render:function(){this.$el.html(this.subTabContainerTpl(this.model.toJSON()));this.$("#ContainerEditModal").html(this.containerEditContentTpl(this.model.toJSON()));this.$(".adminlist").append(this.subTabsView.render().el);this.$el.attr("id",this.model.get("id")+"Tab");return this},openEditModal:function(){console.log("editing container...");this.containerEditView=new wxApp.ContainerEditView({model:this.model});this.$("#ContainerEditModal").html(this.containerEditView.render().el);this.$(".section-container").foundation("section","reflow")},selectLayout:function(f){var c=a(f.currentTarget);a(".wx-layout-selector").addClass("secondary");c.removeClass("secondary");var b=c.attr("id");b=b.replace("layout-","");if(b==="classic"){b=null}var d=this;wx.makeApiCall("tabs/set_tabLayout",{tab_id:this.model.get("id"),tabLayout:b},function(){console.log("Layout Saved");d.model.set("tabLayout",b);wx.rebuildApp()})},confirmDelete:function(b){b.preventDefault();if(confirm("Are you sure you want to delete this item, including all of the sub-tabs?")){this.deleteContainer()}},deleteContainer:function(){this.model.destroy();wx.rebuildApp()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabView=Backbone.View.extend({tagName:"div",className:"wx-tab",subTabsContainerView:false,initialize:function(){this.tabTpl=_.template(a("#tab-template").html());this.model.bind("change",this.rerender,this);this.model.bind("destroy",this.destroyView,this);Backbone.Events.on("tab:id-update",this.updateTabId,this)},events:{click:"editAll"},rerender:function(){this.render()},render:function(){this.$el.html(this.tabTpl(this.model.toJSON()));this.loadIcon();if(undefined!==this.$el.droppable){this.$el.droppable({accept:".list-sub-items li, .list-add-content-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer",greedy:true})}this.$el.data("backbone-view",this);this.$el.addClass(this.model.get("id"));this.$el.attr("id",this.model.get("id")+"TabID");return this},onDrop:function(g,h){console.log("onDrop");var f=a(this).data("backbone-view");var e=a(h.draggable).data("backbone-view");console.log(e.model.get("parent_id"));if(h.draggable.hasClass("wx-add-feature")){var c=h.draggable.attr("id").replace("add-","");var b=f.model.get("id");wxApp.appView.createFeatureView(c,b)}else{Backbone.Events.trigger("tab:dropped",e.model.get("parent_id"));if(e.model.get("parent_id")!=f.model.get("id")){wx.makeApiCall("tabs/set_parent_id",{tab_id:e.model.get("id"),parent_id:f.model.get("id")},function(){e.model.trigger("tab:move");f.model.addSubTab(e.model);a("#"+f.model.get("id")+"TabID").click()})}}Backbone.Events.trigger("subtab:dragstop");var d=a("style")[a("style").length-1];if(d.innerHTML.indexOf("*{ cursor")==0){d.remove()}},editAll:function(){a('a[href="#panel2"]').click();a(".wx-tab button").addClass("secondary");a("div."+this.model.get("id")+" button").removeClass("secondary");this.subTabsContainerView=new wxApp.SubTabsContainerView({model:this.model});this.subTabsContainerView.tabView=this;a("#editSpace").html(this.subTabsContainerView.render().el)},updateTabId:function(b,c){if(b==this.model.get("id")){this.model.getSubTabs().forEach(function(d){d.set("parent_id",c)});this.model.set("id",c)}},loadIcon:function(){},destroyView:function(){wx.log("destroying tab view");if(this.subTabsContainerView){this.subTabsContainerView.remove()}this.remove()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabsView=Backbone.View.extend({el:"#editListTabsSortable",initialize:function(){this.collection.bind("add",this.addOne,this);this.collection.bind("remove",this.removeOne,this);Backbone.Events.on("tab:new",this.addNewlyCreatedTab,this);this.startTabs();this.startSortable();this.startDroppable();this.refreshUiTabs()},addOne:function(c){var d=this;var b=new wxApp.TabView({model:c});this.$el.append(b.render().el);b.subTabsContainerView=new wxApp.SubTabsContainerView({model:c});b.subTabsContainerView.tabView=b;c.on("destroy",function(e){d.removeTabFromCollection(e)});c.on("change",this.refreshUiTabs,this);a("#listTabs").append(b.subTabsContainerView.render().el);this.refreshUiTabs()},startTabs:function(){if(undefined!=a("#listTabs").tabs){a("#listTabs").tabs({select:function(c,b){jQuery("#wxuia-header-parentMenu li").removeClass("wxuia-selected");if(b.tab.href.indexOf("addTab")!=-1){jQuery("#addtabspan").show();jQuery("#addtabspan").css("display","block");jQuery("#edittabspan").hide();jQuery("#wxuia-header-parentMenu li:first").addClass("wxuia-selected")}else{jQuery("#addtabspan").hide();jQuery("#edittabspan").show();jQuery("#edittabspan").css("display","block");jQuery("#wxuia-header-parentMenu li:nth-child(2)").addClass("wxuia-selected")}}})}},startSortable:function(){var b=this;if(undefined!=this.$el.sortable){this.$el.sortable({axis:"x",cancel:".wx-nosort",placeholder:"wx-tab",update:function(d,e){var c=a(this).sortable("toArray");c=a.map(c,function(g){var f=g.toLowerCase().replace("tabid","");if(a.isNumeric(f)){return f}else{return null}});wx.makeApiCall("tabs/sort_tabs",{order:String(c)},function(){wx.rebuildApp()});if(a(e.item).attr("rel")!="unpublished"){a(e.item).removeAttr("style")}else{a(e.item).attr("style","float:right;")}}})}},startDroppable:function(){this.$el.droppable({accept:".list-sub-items li, .list-add-content-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer"})},onDrop:function(e,f){var d=a(this).data("backbone-view");var c=a(f.draggable).data("backbone-view");Backbone.Events.trigger("tab:dropped",c.model.get("parent_id"));wx.makeApiCall("tabs/set_parent_id",{tab_id:c.model.get("id"),parent_id:0},function(){c.model.trigger("tab:move");wxApp.EditTabsView.__super__.addNewMainTab.call(this,c.model);a("#"+c.model.get("id")+"TabID").click()});Backbone.Events.trigger("subtab:dragstop");var b=a("style")[a("style").length-1];if(b.innerHTML.indexOf("*{ cursor")==0){b.remove()}},refreshUiTabs:function(){if(undefined!=a("#listTabs").tabs){a("#listTabs").tabs("refresh")}},removeOne:function(b){a("#listTabs").tabs("refresh")},addNewlyCreatedTab:function(b){if(b.get("parent_id")){this.addNewSubTab(b)}else{this.addNewMainTab(b)}},addNewMainTab:function(b){var c=new wxApp.Tab(b.getAPIData());c.addSubTab(b);wxApp.Tabs.add(c);if(wxApp.Tabs.length===2){a(document).foundation("joyride","start")}},addNewSubTab:function(b){var c=wxApp.Tabs.get(b.get("parent_id"));if(c){c.addSubTab(b)}else{throw new Error("No main tab with id"+b.get("parent_id"))}},addTabToCollection:function(b){wxApp.Tabs.add(b)},removeTabFromCollection:function(b){wxApp.Tabs.remove(b)}});wxApp.tabsView=new wxApp.TabsView({collection:wxApp.Tabs});wxApp.Tabs.fetch()})(jQuery);