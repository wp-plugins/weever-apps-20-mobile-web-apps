jQuery(document).ready(function(){jQuery('input[name="switch-tablet"]').click(function(){console.log("Switch tablet.");if(this.id=="on"){tablets_enabled=1}else{tablets_enabled=0}console.log(tablets_enabled);jQuery("#switch-tablet-loading").show();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ajaxToggleTabletStatus",nonce:jQuery("input#nonce").val(),tablets_enabled:tablets_enabled},success:function(b){console.log("Tablet status saved");var a=tablets_enabled?"yes":"no";jQuery("#switch-tablet-loading").fadeOut()},error:function(a,b){alert(b)}})});jQuery("#refresh_preview").on("click",function(){console.log("Refresh Clicked.");wx.refreshAppPreview()});jQuery("#refresh_preview").click(function(){console.log("Refresh Clicked.");wx.refreshAppPreview()})});
/*!
 * Modernizr v2.8.2
 * www.modernizr.com
 *
 * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton
 * Available under the BSD and MIT licenses: www.modernizr.com/license/
 */
;window.Modernizr=function(ay,ax,aw){function av(b){ae.cssText=b}function au(d,c){return av(aa.join(d+";")+(c||""))}function at(d,c){return typeof d===c}function ar(d,c){return !!~(""+d).indexOf(c)}function aq(f,c){for(var h in f){var g=f[h];if(!ar(g,"-")&&ae[g]!==aw){return"pfx"==c?g:!0}}return !1}function ap(f,c,j){for(var i in f){var h=c[f[i]];if(h!==aw){return j===!1?f[i]:at(h,"function")?h.bind(j||c):h}}return !1}function ao(g,f,j){var i=g.charAt(0).toUpperCase()+g.slice(1),h=(g+" "+Y.join(i+" ")+i).split(" ");return at(f,"string")||at(f,"undefined")?aq(h,f):(h=(g+" "+X.join(i+" ")+i).split(" "),ap(h,f,j))}function an(){aj.input=function(f){for(var b=0,a=f.length;a>b;b++){T[f[b]]=!!(f[b] in ad)}return T.list&&(T.list=!(!ax.createElement("datalist")||!ay.HTMLDataListElement)),T}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),aj.inputtypes=function(b){for(var l,k,j,i=0,c=b.length;c>i;i++){ad.setAttribute("type",k=b[i]),l="text"!==ad.type,l&&(ad.value=ac,ad.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(k)&&ad.style.WebkitAppearance!==aw?(ah.appendChild(ad),j=ax.defaultView,l=j.getComputedStyle&&"textfield"!==j.getComputedStyle(ad,null).WebkitAppearance&&0!==ad.offsetHeight,ah.removeChild(ad)):/^(search|tel)$/.test(k)||(l=/^(url|email)$/.test(k)?ad.checkValidity&&ad.checkValidity()===!1:ad.value!=ac)),U[b[i]]=!!l}return U}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var am,al,ak="2.8.2",aj={},ai=!0,ah=ax.documentElement,ag="modernizr",af=ax.createElement(ag),ae=af.style,ad=ax.createElement("input"),ac=":)",ab={}.toString,aa=" -webkit- -moz- -o- -ms- ".split(" "),Z="Webkit Moz O ms",Y=Z.split(" "),X=Z.toLowerCase().split(" "),W={svg:"http://www.w3.org/2000/svg"},V={},U={},T={},S=[],R=S.slice,Q=function(w,v,u,t){var s,r,q,p,o=ax.createElement("div"),n=ax.body,b=n||ax.createElement("body");if(parseInt(u,10)){for(;u--;){q=ax.createElement("div"),q.id=t?t[u]:ag+(u+1),o.appendChild(q)}}return s=["&#173;",'<style id="s',ag,'">',w,"</style>"].join(""),o.id=ag,(n?o:b).innerHTML+=s,b.appendChild(o),n||(b.style.background="",b.style.overflow="hidden",p=ah.style.overflow,ah.style.overflow="hidden",ah.appendChild(b)),r=v(o,w),n?o.parentNode.removeChild(o):(b.parentNode.removeChild(b),ah.style.overflow=p),!!r},P=function(a){var f=ay.matchMedia||ay.msMatchMedia;if(f){return f(a)&&f(a).matches||!1}var e;return Q("@media "+a+" { #"+ag+" { position: absolute; } }",function(c){e="absolute"==(ay.getComputedStyle?getComputedStyle(c,null):c.currentStyle).position}),e},O=function(){function b(d,h){h=h||ax.createElement(c[d]||"div"),d="on"+d;var f=d in h;return f||(h.setAttribute||(h=ax.createElement("div")),h.setAttribute&&h.removeAttribute&&(h.setAttribute(d,""),f=at(h[d],"function"),at(h[d],"undefined")||(h[d]=aw),h.removeAttribute(d))),h=null,f}var c={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return b}(),N={}.hasOwnProperty;al=at(N,"undefined")||at(N.call,"undefined")?function(d,c){return c in d&&at(d.constructor.prototype[c],"undefined")}:function(d,c){return N.call(d,c)},Function.prototype.bind||(Function.prototype.bind=function(f){var e=this;if("function"!=typeof e){throw new TypeError}var h=R.call(arguments,1),g=function(){if(this instanceof g){var c=function(){};c.prototype=e.prototype;var b=new c,a=e.apply(b,h.concat(R.call(arguments)));return Object(a)===a?a:b}return e.apply(f,h.concat(R.call(arguments)))};return g}),V.flexbox=function(){return ao("flexWrap")},V.flexboxlegacy=function(){return ao("boxDirection")},V.canvas=function(){var b=ax.createElement("canvas");return !(!b.getContext||!b.getContext("2d"))},V.canvastext=function(){return !(!aj.canvas||!at(ax.createElement("canvas").getContext("2d").fillText,"function"))},V.webgl=function(){return !!ay.WebGLRenderingContext},V.touch=function(){var a;return"ontouchstart" in ay||ay.DocumentTouch&&ax instanceof DocumentTouch?a=!0:Q(["@media (",aa.join("touch-enabled),("),ag,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(b){a=9===b.offsetTop}),a},V.geolocation=function(){return"geolocation" in navigator},V.postmessage=function(){return !!ay.postMessage},V.websqldatabase=function(){return !!ay.openDatabase},V.indexedDB=function(){return !!ao("indexedDB",ay)},V.hashchange=function(){return O("hashchange",ay)&&(ax.documentMode===aw||ax.documentMode>7)},V.history=function(){return !(!ay.history||!history.pushState)},V.draganddrop=function(){var b=ax.createElement("div");return"draggable" in b||"ondragstart" in b&&"ondrop" in b},V.websockets=function(){return"WebSocket" in ay||"MozWebSocket" in ay},V.rgba=function(){return av("background-color:rgba(150,255,150,.5)"),ar(ae.backgroundColor,"rgba")},V.hsla=function(){return av("background-color:hsla(120,40%,100%,.5)"),ar(ae.backgroundColor,"rgba")||ar(ae.backgroundColor,"hsla")},V.multiplebgs=function(){return av("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(ae.background)},V.backgroundsize=function(){return ao("backgroundSize")},V.borderimage=function(){return ao("borderImage")},V.borderradius=function(){return ao("borderRadius")},V.boxshadow=function(){return ao("boxShadow")},V.textshadow=function(){return""===ax.createElement("div").style.textShadow},V.opacity=function(){return au("opacity:.55"),/^0.55$/.test(ae.opacity)},V.cssanimations=function(){return ao("animationName")},V.csscolumns=function(){return ao("columnCount")},V.cssgradients=function(){var e="background-image:",d="gradient(linear,left top,right bottom,from(#9f9),to(white));",f="linear-gradient(left top,#9f9, white);";return av((e+"-webkit- ".split(" ").join(d+e)+aa.join(f+e)).slice(0,-e.length)),ar(ae.backgroundImage,"gradient")},V.cssreflections=function(){return ao("boxReflect")},V.csstransforms=function(){return !!ao("transform")},V.csstransforms3d=function(){var b=!!ao("perspective");return b&&"webkitPerspective" in ah.style&&Q("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(a){b=9===a.offsetLeft&&3===a.offsetHeight}),b},V.csstransitions=function(){return ao("transition")},V.fontface=function(){var b;return Q('@font-face {font-family:"font";src:url("https://")}',function(k,j){var i=ax.getElementById("smodernizr"),h=i.sheet||i.styleSheet,a=h?h.cssRules&&h.cssRules[0]?h.cssRules[0].cssText:h.cssText||"":"";b=/src/i.test(a)&&0===a.indexOf(j.split(" ")[0])}),b},V.generatedcontent=function(){var b;return Q(["#",ag,"{font:0/0 a}#",ag,':after{content:"',ac,'";visibility:hidden;font:3px/1 a}'].join(""),function(a){b=a.offsetHeight>=3}),b},V.video=function(){var b=ax.createElement("video"),f=!1;try{(f=!!b.canPlayType)&&(f=new Boolean(f),f.ogg=b.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),f.h264=b.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),f.webm=b.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return f},V.audio=function(){var b=ax.createElement("audio"),f=!1;try{(f=!!b.canPlayType)&&(f=new Boolean(f),f.ogg=b.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),f.mp3=b.canPlayType("audio/mpeg;").replace(/^no$/,""),f.wav=b.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),f.m4a=(b.canPlayType("audio/x-m4a;")||b.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return f},V.localstorage=function(){try{return localStorage.setItem(ag,ag),localStorage.removeItem(ag),!0}catch(b){return !1}},V.sessionstorage=function(){try{return sessionStorage.setItem(ag,ag),sessionStorage.removeItem(ag),!0}catch(b){return !1}},V.webworkers=function(){return !!ay.Worker},V.applicationcache=function(){return !!ay.applicationCache},V.svg=function(){return !!ax.createElementNS&&!!ax.createElementNS(W.svg,"svg").createSVGRect},V.inlinesvg=function(){var b=ax.createElement("div");return b.innerHTML="<svg/>",(b.firstChild&&b.firstChild.namespaceURI)==W.svg},V.smil=function(){return !!ax.createElementNS&&/SVGAnimate/.test(ab.call(ax.createElementNS(W.svg,"animate")))},V.svgclippaths=function(){return !!ax.createElementNS&&/SVGClipPath/.test(ab.call(ax.createElementNS(W.svg,"clipPath")))};for(var M in V){al(V,M)&&(am=M.toLowerCase(),aj[am]=V[M](),S.push((aj[am]?"":"no-")+am))}return aj.input||an(),aj.addTest=function(e,c){if("object"==typeof e){for(var f in e){al(e,f)&&aj.addTest(f,e[f])}}else{if(e=e.toLowerCase(),aj[e]!==aw){return aj}c="function"==typeof c?c():c,"undefined"!=typeof ai&&ai&&(ah.className+=" "+(c?"":"no-")+e),aj[e]=c}return aj},av(""),af=ad=null,function(L,K){function J(f,e){var h=f.createElement("p"),g=f.getElementsByTagName("head")[0]||f.documentElement;return h.innerHTML="x<style>"+e+"</style>",g.insertBefore(h.lastChild,g.firstChild)}function I(){var b=t.elements;return"string"==typeof b?b.split(" "):b}function H(d){var c=u[d[w]];return c||(c={},v++,d[w]=v,u[v]=c),c}function G(b,h,g){if(h||(h=K),B){return h.createElement(b)}g||(g=H(h));var e;return e=g.cache[b]?g.cache[b].cloneNode():x.test(b)?(g.cache[b]=g.createElem(b)).cloneNode():g.createElem(b),!e.canHaveChildren||y.test(b)||e.tagUrn?e:g.frag.appendChild(e)}function F(b,l){if(b||(b=K),B){return b.createDocumentFragment()}l=l||H(b);for(var k=l.frag.cloneNode(),j=0,e=I(),d=e.length;d>j;j++){k.createElement(e[j])}return k}function E(d,c){c.cache||(c.cache={},c.createElem=d.createElement,c.createFrag=d.createDocumentFragment,c.frag=c.createFrag()),d.createElement=function(a){return t.shivMethods?G(a,d,c):c.createElem(a)},d.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+I().join().replace(/[\w\-]+/g,function(b){return c.createElem(b),c.frag.createElement(b),'c("'+b+'")'})+");return n}")(t,c.frag)}function D(b){b||(b=K);var c=H(b);return !t.shivCSS||C||c.hasCSS||(c.hasCSS=!!J(b,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),B||E(b,c),b}var C,B,A="3.7.0",z=L.html5||{},y=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,x=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,w="_html5shiv",v=0,u={};!function(){try{var b=K.createElement("a");b.innerHTML="<xyz></xyz>",C="hidden" in b,B=1==b.childNodes.length||function(){K.createElement("a");var c=K.createDocumentFragment();return"undefined"==typeof c.cloneNode||"undefined"==typeof c.createDocumentFragment||"undefined"==typeof c.createElement}()}catch(d){C=!0,B=!0}}();var t={elements:z.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:A,shivCSS:z.shivCSS!==!1,supportsUnknownElements:B,shivMethods:z.shivMethods!==!1,type:"default",shivDocument:D,createElement:G,createDocumentFragment:F};L.html5=t,D(K)}(this,ax),aj._version=ak,aj._prefixes=aa,aj._domPrefixes=X,aj._cssomPrefixes=Y,aj.mq=P,aj.hasEvent=O,aj.testProp=function(b){return aq([b])},aj.testAllProps=ao,aj.testStyles=Q,aj.prefixed=function(e,d,f){return d?ao(e,d,f):ao(e,"pfx")},ah.className=ah.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(ai?" js "+S.join(" "):""),aj}(this,this.document);var jscolor={dir:wx.pluginUrl+"static/js/jscolor/",bindClass:"color",binding:false,preloading:true,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=a!==false?a:"jscolor/"}return jscolor.dir},detectDir:function(){var c=location.href;var d=document.getElementsByTagName("base");for(var a=0;a<d.length;a+=1){if(d[a].href){c=d[a].href}}var d=document.getElementsByTagName("script");for(var a=0;a<d.length;a+=1){if(d[a].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(d[a].src)){var f=new jscolor.URI(d[a].src);var b=f.toAbsolute(c);b.path=b.path.replace(/[^\/]+$/,"");b.query=null;b.fragment=null;return b.toString()}}return false},bind:function(){var d=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i");var f=document.getElementsByTagName("input");for(var c=0;c<f.length;c+=1){var b;if(!f[c].color&&f[c].className&&(b=f[c].className.match(d))){var g={};if(b[3]){try{g=(new Function("return ("+b[3]+")"))()}catch(a){}}f[c].color=new jscolor.color(f[c],g)}}},preload:function(){for(var a in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(a)){jscolor.loadImage(a)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=true},loadImage:function(a){if(!jscolor.imgLoaded[a]){jscolor.imgLoaded[a]=new Image();jscolor.imgLoaded[a].src=jscolor.getDir()+a}},fetchElement:function(a){return typeof a==="string"?document.getElementById(a):a},addEvent:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}},fireEvent:function(a,c){if(!a){return}if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent(c,true,true);a.dispatchEvent(b)}else{if(document.createEventObject){var b=document.createEventObject();a.fireEvent("on"+c,b)}else{if(a["on"+c]){a["on"+c]()}}}},getElementPos:function(c){var d=c,b=c;var a=0,f=0;if(d.offsetParent){do{a+=d.offsetLeft;f+=d.offsetTop}while(d=d.offsetParent)}while((b=b.parentNode)&&b.nodeName.toUpperCase()!=="BODY"){a-=b.scrollLeft;f-=b.scrollTop}return[a,f]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(b){var a=0,c=0;if(!b){b=window.event}if(typeof b.offsetX==="number"){a=b.offsetX;c=b.offsetY}else{if(typeof b.layerX==="number"){a=b.layerX;c=b.layerY}}return{x:a,y:c}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}}}},URI:function(a){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(d){var c=d.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=c[3]?c[2]:null;this.authority=c[5]?c[6]:null;this.path=c[7];this.query=c[9]?c[10]:null;this.fragment=c[12]?c[13]:null;return this};this.toString=function(){var c="";if(this.scheme!==null){c=c+this.scheme+":"}if(this.authority!==null){c=c+"//"+this.authority}if(this.path!==null){c=c+this.path}if(this.query!==null){c=c+"?"+this.query}if(this.fragment!==null){c=c+"#"+this.fragment}return c};this.toAbsolute=function(e){var e=new jscolor.URI(e);var d=this;var c=new jscolor.URI;if(e.scheme===null){return false}if(d.scheme!==null&&d.scheme.toLowerCase()===e.scheme.toLowerCase()){d.scheme=null}if(d.scheme!==null){c.scheme=d.scheme;c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.authority!==null){c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.path===""){c.path=e.path;if(d.query!==null){c.query=d.query}else{c.query=e.query}}else{if(d.path.substr(0,1)==="/"){c.path=b(d.path)}else{if(e.authority!==null&&e.path===""){c.path="/"+d.path}else{c.path=e.path.replace(/[^\/]+$/,"")+d.path}c.path=b(c.path)}c.query=d.query}c.authority=e.authority}c.scheme=e.scheme}c.fragment=d.fragment;return c};function b(e){var c="";while(e){if(e.substr(0,3)==="../"||e.substr(0,2)==="./"){e=e.replace(/^\.+/,"").substr(1)}else{if(e.substr(0,3)==="/./"||e==="/."){e="/"+e.substr(3)}else{if(e.substr(0,4)==="/../"||e==="/.."){e="/"+e.substr(4);c=c.replace(/\/?[^\/]*$/,"")}else{if(e==="."||e===".."){e=""}else{var d=e.match(/^\/?[^\/]*/)[0];e=e.substr(d.length);c=c+d}}}}}return c}if(a){this.parse(a)}},color:function(D,d){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=D;this.styleElement=D;this.onImmediateChange=null;this.onClose=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=10000;for(var t in d){if(d.hasOwnProperty(t)){this[t]=d[t]}}this.hidePicker=function(){if(v()){g()}};this.showPicker=function(){if(!v()){var M=jscolor.getElementPos(D);var J=jscolor.getElementSize(D);var G=jscolor.getViewPos();var O=jscolor.getViewSize();var p=u(this);var N,L,K;switch(this.pickerPosition.toLowerCase()){case"left":N=1;L=0;K=-1;break;case"right":N=1;L=0;K=1;break;case"top":N=0;L=1;K=-1;break;default:N=0;L=1;K=1;break}var I=(J[L]+p[L])/2;if(!this.pickerSmartPosition){var H=[M[N],M[L]+J[L]-I+I*K]}else{var H=[-G[N]+M[N]+p[N]>O[N]?(-G[N]+M[N]+J[N]/2>O[N]/2&&M[N]+J[N]-p[N]>=0?M[N]+J[N]-p[N]:M[N]):M[N],-G[L]+M[L]+J[L]+p[L]-I+I*K>O[L]?(-G[L]+M[L]+J[L]/2>O[L]/2&&M[L]+J[L]-I-I*K>=0?M[L]+J[L]-I-I*K:M[L]+J[L]-I+I*K):(M[L]+J[L]-I+I*K>=0?M[L]+J[L]-I+I*K:M[L]+J[L]-I-I*K)]}k(H[N],H[L])}};this.importColor=function(){if(!a){this.exportColor()}else{if(!this.adjust){if(!this.fromString(a.value,z)){F.style.backgroundImage=F.jscStyle.backgroundImage;F.style.backgroundColor=F.jscStyle.backgroundColor;F.style.color=F.jscStyle.color;this.exportColor(z|E)}}else{if(!this.required&&/^\s*$/.test(a.value)){a.value="";F.style.backgroundImage=F.jscStyle.backgroundImage;F.style.backgroundColor=F.jscStyle.backgroundColor;F.style.color=F.jscStyle.color;this.exportColor(z|E)}else{if(this.fromString(a.value)){}else{this.exportColor()}}}}};this.exportColor=function(p){if(!(p&z)&&a){var G=this.toString();if(this.caps){G=G.toUpperCase()}if(this.hash){G="#"+G}a.value=G}if(!(p&E)&&F){F.style.backgroundImage="none";F.style.backgroundColor="#"+this.toString();F.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000"}if(!(p&w)&&v()){s()}if(!(p&e)&&v()){C()}};this.fromHSV=function(I,H,G,p){if(I!==null){I=Math.max(0,this.minH,Math.min(6,this.maxH,I))}if(H!==null){H=Math.max(0,this.minS,Math.min(1,this.maxS,H))}if(G!==null){G=Math.max(0,this.minV,Math.min(1,this.maxV,G))}this.rgb=h(I===null?this.hsv[0]:(this.hsv[0]=I),H===null?this.hsv[1]:(this.hsv[1]=H),G===null?this.hsv[2]:(this.hsv[2]=G));this.exportColor(p)};this.fromRGB=function(K,J,p,G){if(K!==null){K=Math.max(0,Math.min(1,K))}if(J!==null){J=Math.max(0,Math.min(1,J))}if(p!==null){p=Math.max(0,Math.min(1,p))}var I=A(K===null?this.rgb[0]:K,J===null?this.rgb[1]:J,p===null?this.rgb[2]:p);if(I[0]!==null){this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,I[0]))}if(I[2]!==0){this.hsv[1]=I[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,I[1]))}this.hsv[2]=I[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,I[2]));var H=h(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=H[0];this.rgb[1]=H[1];this.rgb[2]=H[2];this.exportColor(G)};this.fromString=function(H,G){var p=H.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!p){return false}else{if(p[1].length===6){this.fromRGB(parseInt(p[1].substr(0,2),16)/255,parseInt(p[1].substr(2,2),16)/255,parseInt(p[1].substr(4,2),16)/255,G)}else{this.fromRGB(parseInt(p[1].charAt(0)+p[1].charAt(0),16)/255,parseInt(p[1].charAt(1)+p[1].charAt(1),16)/255,parseInt(p[1].charAt(2)+p[1].charAt(2),16)/255,G)}return true}};this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1))};function A(K,J,G){var L=Math.min(Math.min(K,J),G);var H=Math.max(Math.max(K,J),G);var p=H-L;if(p===0){return[null,0,H]}var I=K===L?3+(G-J)/p:(J===L?5+(K-G)/p:1+(J-K)/p);return[I===6?0:I,p/H,H]}function h(J,I,G){if(J===null){return[G,G,G]}var H=Math.floor(J);var K=H%2?J-H:1-(J-H);var p=G*(1-I);var L=G*(1-I*K);switch(H){case 6:case 0:return[G,L,p];case 1:return[L,G,p];case 2:return[p,G,L];case 3:return[p,L,G];case 4:return[L,p,G];case 5:return[G,p,L]}}function g(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB);x()}function k(N,M){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(l.pickerCloseText)};for(var K=0,L=4;K<jscolor.images.sld[1];K+=L){var J=document.createElement("div");J.style.height=L+"px";J.style.fontSize="1px";J.style.lineHeight="0";jscolor.picker.sld.appendChild(J)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var G=jscolor.picker;G.box.onmouseup=G.box.onmouseout=function(){D.focus()};G.box.onmousedown=function(){o=true};G.box.onmousemove=function(p){if(c||q){c&&y(p);q&&i(p);if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}f()}};if("ontouchstart" in window){G.box.addEventListener("touchmove",function(Q){var p={offsetX:Q.touches[0].pageX-j.X,offsetY:Q.touches[0].pageY-j.Y};if(c||q){c&&y(p);q&&i(p);f()}Q.stopPropagation();Q.preventDefault()},false)}G.padM.onmouseup=G.padM.onmouseout=function(){if(c){c=false;jscolor.fireEvent(a,"change")}};G.padM.onmousedown=function(p){switch(b){case 0:if(l.hsv[2]===0){l.fromHSV(null,null,1)}break;case 1:if(l.hsv[1]===0){l.fromHSV(null,1,null)}break}q=false;c=true;y(p);f()};if("ontouchstart" in window){G.padM.addEventListener("touchstart",function(p){j={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-j.X,offsetY:p.touches[0].pageY-j.Y})})}G.sldM.onmouseup=G.sldM.onmouseout=function(){if(q){q=false;jscolor.fireEvent(a,"change")}};G.sldM.onmousedown=function(p){c=false;q=true;i(p);f()};if("ontouchstart" in window){G.sldM.addEventListener("touchstart",function(p){j={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-j.X,offsetY:p.touches[0].pageY-j.Y})})}var P=u(l);G.box.style.width=P[0]+"px";G.box.style.height=P[1]+"px";G.boxB.style.position="absolute";G.boxB.style.clear="both";G.boxB.style.left=N+"px";G.boxB.style.top=M+"px";G.boxB.style.zIndex=l.pickerZIndex;G.boxB.style.border=l.pickerBorder+"px solid";G.boxB.style.borderColor=l.pickerBorderColor;G.boxB.style.background=l.pickerFaceColor;G.pad.style.width=jscolor.images.pad[0]+"px";G.pad.style.height=jscolor.images.pad[1]+"px";G.padB.style.position="absolute";G.padB.style.left=l.pickerFace+"px";G.padB.style.top=l.pickerFace+"px";G.padB.style.border=l.pickerInset+"px solid";G.padB.style.borderColor=l.pickerInsetColor;G.padM.style.position="absolute";G.padM.style.left="0";G.padM.style.top="0";G.padM.style.width=l.pickerFace+2*l.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";G.padM.style.height=G.box.style.height;G.padM.style.cursor="crosshair";G.sld.style.overflow="hidden";G.sld.style.width=jscolor.images.sld[0]+"px";G.sld.style.height=jscolor.images.sld[1]+"px";G.sldB.style.display=l.slider?"block":"none";G.sldB.style.position="absolute";G.sldB.style.right=l.pickerFace+"px";G.sldB.style.top=l.pickerFace+"px";G.sldB.style.border=l.pickerInset+"px solid";G.sldB.style.borderColor=l.pickerInsetColor;G.sldM.style.display=l.slider?"block":"none";G.sldM.style.position="absolute";G.sldM.style.right="0";G.sldM.style.top="0";G.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+l.pickerFace+2*l.pickerInset+"px";G.sldM.style.height=G.box.style.height;try{G.sldM.style.cursor="pointer"}catch(I){G.sldM.style.cursor="hand"}function O(){var p=l.pickerInsetColor.split(/\s+/);var Q=p.length<2?p[0]:p[1]+" "+p[0]+" "+p[0]+" "+p[1];G.btn.style.borderColor=Q}G.btn.style.display=l.pickerClosable?"block":"none";G.btn.style.position="absolute";G.btn.style.left=l.pickerFace+"px";G.btn.style.bottom=l.pickerFace+"px";G.btn.style.padding="0 15px";G.btn.style.height="18px";G.btn.style.border=l.pickerInset+"px solid";O();G.btn.style.color=l.pickerButtonColor;G.btn.style.font="12px sans-serif";G.btn.style.textAlign="center";try{G.btn.style.cursor="pointer"}catch(I){G.btn.style.cursor="hand"}G.btn.onmousedown=function(){l.hidePicker()};G.btnS.style.lineHeight=G.btn.style.height;switch(b){case 0:var H="hs.png";break;case 1:var H="hv.png";break}G.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";G.padM.style.backgroundRepeat="no-repeat";G.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";G.sldM.style.backgroundRepeat="no-repeat";G.pad.style.backgroundImage="url('"+jscolor.getDir()+H+"')";G.pad.style.backgroundRepeat="no-repeat";G.pad.style.backgroundPosition="0 0";s();C();jscolor.picker.owner=l;document.getElementsByTagName("body")[0].appendChild(G.boxB)}function u(G){var p=[2*G.pickerInset+2*G.pickerFace+jscolor.images.pad[0]+(G.slider?2*G.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),G.pickerClosable?4*G.pickerInset+3*G.pickerFace+jscolor.images.pad[1]+G.pickerButtonHeight:2*G.pickerInset+2*G.pickerFace+jscolor.images.pad[1]];return p}function s(){switch(b){case 0:var I=1;break;case 1:var I=2;break}var M=Math.round((l.hsv[0]/6)*(jscolor.images.pad[0]-1));var L=Math.round((1-l.hsv[I])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(l.pickerFace+l.pickerInset+M-Math.floor(jscolor.images.cross[0]/2))+"px "+(l.pickerFace+l.pickerInset+L-Math.floor(jscolor.images.cross[1]/2))+"px";var p=jscolor.picker.sld.childNodes;switch(b){case 0:var K=h(l.hsv[0],l.hsv[1],1);for(var G=0;G<p.length;G+=1){p[G].style.backgroundColor="rgb("+(K[0]*(1-G/p.length)*100)+"%,"+(K[1]*(1-G/p.length)*100)+"%,"+(K[2]*(1-G/p.length)*100)+"%)"}break;case 1:var K,N,J=[l.hsv[2],0,0];var G=Math.floor(l.hsv[0]);var H=G%2?l.hsv[0]-G:1-(l.hsv[0]-G);switch(G){case 6:case 0:K=[0,1,2];break;case 1:K=[1,0,2];break;case 2:K=[2,0,1];break;case 3:K=[2,1,0];break;case 4:K=[1,2,0];break;case 5:K=[0,2,1];break}for(var G=0;G<p.length;G+=1){N=1-1/(p.length-1)*G;J[1]=J[0]*(1-N*H);J[2]=J[0]*(1-N);p[G].style.backgroundColor="rgb("+(J[K[0]]*100)+"%,"+(J[K[1]]*100)+"%,"+(J[K[2]]*100)+"%)"}break}}function C(){switch(b){case 0:var p=2;break;case 1:var p=1;break}var G=Math.round((1-l.hsv[p])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(l.pickerFace+l.pickerInset+G-Math.floor(jscolor.images.arrow[1]/2))+"px"}function v(){return jscolor.picker&&jscolor.picker.owner===l}function r(){if(a===D){l.importColor()}if(l.pickerOnfocus){l.hidePicker()}}function n(){if(a!==D){l.importColor()}}function y(H){var G=jscolor.getRelMousePos(H);var p=G.x-l.pickerFace-l.pickerInset;var I=G.y-l.pickerFace-l.pickerInset;switch(b){case 0:l.fromHSV(p*(6/(jscolor.images.pad[0]-1)),1-I/(jscolor.images.pad[1]-1),null,e);break;case 1:l.fromHSV(p*(6/(jscolor.images.pad[0]-1)),null,1-I/(jscolor.images.pad[1]-1),e);break}}function i(G){var p=jscolor.getRelMousePos(G);var H=p.y-l.pickerFace-l.pickerInset;switch(b){case 0:l.fromHSV(null,null,1-H/(jscolor.images.sld[1]-1),w);break;case 1:l.fromHSV(null,1-H/(jscolor.images.sld[1]-1),null,w);break}}function f(){if(l.onImmediateChange){var p;if(typeof l.onImmediateChange==="string"){p=new Function(l.onImmediateChange)}else{p=l.onImmediateChange}p.call(l)}}function x(){if(l.onClose){var p;if(typeof l.onClose==="string"){p=new Function(l.onClose)}else{p=l.onClose}p.call(l)}}var l=this;var b=this.pickerMode.toLowerCase()==="hvs"?1:0;var o=false;var a=jscolor.fetchElement(this.valueElement),F=jscolor.fetchElement(this.styleElement);var c=false,q=false,j={};var z=1<<0,E=1<<1,w=1<<2,e=1<<3;jscolor.addEvent(D,"focus",function(){if(l.pickerOnfocus){l.showPicker()}});jscolor.addEvent(D,"blur",function(){if(!o){window.setTimeout(function(){o||r();o=false},0)}else{o=false}});if(a){var B=function(){l.fromString(a.value,z);f()};jscolor.addEvent(a,"keyup",B);jscolor.addEvent(a,"input",B);jscolor.addEvent(a,"blur",n);a.setAttribute("autocomplete","off")}if(F){F.jscStyle={backgroundImage:F.style.backgroundImage,backgroundColor:F.style.backgroundColor,color:F.style.color}}switch(b){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();(function(f,h,j,b){var d=function(o){var n=o.length;var l=f("head");while(n--){if(l.has("."+o[n]).length===0){l.append('<meta class="'+o[n]+'" />')}}};d(["foundation-mq-small","foundation-mq-medium","foundation-mq-large","foundation-mq-xlarge","foundation-mq-xxlarge","foundation-data-attribute-namespace"]);f(function(){if(typeof FastClick!=="undefined"){if(typeof j.body!=="undefined"){FastClick.attach(j.body)}}});var e=function(n,o){if(typeof n==="string"){if(o){var l;if(o.jquery){l=o[0];if(!l){return o}}else{l=o}return f(l.querySelectorAll(n))}return f(j.querySelectorAll(n))}return f(n,o)};var k=function(n){var l=[];if(!n){l.push("data")}if(this.namespace.length>0){l.push(this.namespace)}l.push(this.name);return l.join("-")};var g=function(p){var o=p.split("-"),n=o.length,l=[];while(n--){if(n!==0){l.push(o[n])}else{if(this.namespace.length>0){l.push(this.namespace,o[n])}else{l.push(o[n])}}}return l.reverse().join("-")};var a=function(p,n){var l=this,o=!e(this).data(this.attr_name(true));if(typeof p==="string"){return this[p].call(this,n)}if(e(this.scope).is("["+this.attr_name()+"]")){e(this.scope).data(this.attr_name(true)+"-init",f.extend({},this.settings,(n||p),this.data_options(e(this.scope))));if(o){this.events(this.scope)}}else{e("["+this.attr_name()+"]",this.scope).each(function(){var q=!e(this).data(l.attr_name(true)+"-init");e(this).data(l.attr_name(true)+"-init",f.extend({},l.settings,(n||p),l.data_options(e(this))));if(q){l.events(this)}})}};var c=function(o,p){function l(){p(o[0])}function n(){this.one("load",l);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var r=this.attr("src"),q=r.match(/\?/)?"&":"?";q+="random="+(new Date()).getTime();this.attr("src",r+q)}}if(!o.attr("src")){l();return}if(o[0].complete||o[0].readyState===4){l()}else{n.call(o)}};h.matchMedia=h.matchMedia||(function(q){var o,l=q.documentElement,n=l.firstElementChild||l.firstChild,p=q.createElement("body"),r=q.createElement("div");r.id="mq-test-1";r.style.cssText="position:absolute;top:-100em";p.style.background="none";p.appendChild(r);return function(s){r.innerHTML='&shy;<style media="'+s+'"> #mq-test-1 { width: 42px; }</style>';l.insertBefore(p,n);o=r.offsetWidth===42;l.removeChild(p);return{matches:o,media:s}}}(j));(function(o){var l,p=0,t=["webkit","moz"],s=h.requestAnimationFrame,r=h.cancelAnimationFrame,n="undefined"!==typeof jQuery.fx;for(;p<t.length&&!s;p++){s=h[t[p]+"RequestAnimationFrame"];r=r||h[t[p]+"CancelAnimationFrame"]||h[t[p]+"CancelRequestAnimationFrame"]}function q(){if(l){s(q);if(n){jQuery.fx.tick()}}}if(s){h.requestAnimationFrame=s;h.cancelAnimationFrame=r;if(n){jQuery.fx.timer=function(u){if(u()&&jQuery.timers.push(u)&&!l){l=true;q()}};jQuery.fx.stop=function(){l=false}}}else{h.requestAnimationFrame=function(x){var u=new Date().getTime(),v=Math.max(0,16-(u-p)),w=h.setTimeout(function(){x(u+v)},v);p=u+v;return w};h.cancelAnimationFrame=function(u){clearTimeout(u)}}}(jQuery));function i(l){if(typeof l==="string"||l instanceof String){l=l.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")}return l}h.Foundation={name:"Foundation",version:"5.2.3",media_queries:{small:e(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:e(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:e(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:e(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:e(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:f("<style></style>").appendTo("head")[0].sheet,global:{namespace:b},init:function(q,n,t,p,l){var o=[q,t,p,l],r=[];this.rtl=/rtl/i.test(e("html").attr("dir"));this.scope=q||this.scope;this.set_namespace();if(n&&typeof n==="string"&&!/reflow/i.test(n)){if(this.libs.hasOwnProperty(n)){r.push(this.init_lib(n,o))}}else{for(var s in this.libs){r.push(this.init_lib(s,n))}}return q},init_lib:function(n,l){if(this.libs.hasOwnProperty(n)){this.patch(this.libs[n]);if(l&&l.hasOwnProperty(n)){if(typeof this.libs[n].settings!=="undefined"){f.extend(true,this.libs[n].settings,l[n])}else{if(typeof this.libs[n].defaults!=="undefined"){f.extend(true,this.libs[n].defaults,l[n])}}return this.libs[n].init.apply(this.libs[n],[this.scope,l[n]])}l=l instanceof Array?l:new Array(l);return this.libs[n].init.apply(this.libs[n],l)}return function(){}},patch:function(l){l.scope=this.scope;l.namespace=this.global.namespace;l.rtl=this.rtl;l.data_options=this.utils.data_options;l.attr_name=k;l.add_namespace=g;l.bindings=a;l.S=this.utils.S},inherit:function(p,n){var l=n.split(" "),o=l.length;while(o--){if(this.utils.hasOwnProperty(l[o])){p[l[o]]=this.utils[l[o]]}}},set_namespace:function(){var l=(this.global.namespace===b)?f(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=(l===b||/false/i.test(l))?"":l},libs:{},utils:{S:e,throttle:function(n,l){var o=null;return function(){var q=this,p=arguments;if(o==null){o=setTimeout(function(){n.apply(q,p);o=null},l)}}},debounce:function(p,o,n){var q,l;return function(){var u=this,t=arguments;var s=function(){q=null;if(!n){l=p.apply(u,t)}};var r=n&&!q;clearTimeout(q);q=setTimeout(s,o);if(r){l=p.apply(u,t)}return l}},data_options:function(o,r){r=r||"options";var l={},u,n,w,t=function(x){var p=Foundation.global.namespace;if(p.length>0){return x.data(p+"-"+r)}return x.data(r)};var s=t(o);if(typeof s==="object"){return s}w=(s||":").split(";");u=w.length;function v(p){return !isNaN(p-0)&&p!==null&&p!==""&&p!==false&&p!==true}function q(p){if(typeof p==="string"){return f.trim(p)}return p}while(u--){n=w[u].split(":");n=[n[0],n.slice(1).join(":")];if(/true/i.test(n[1])){n[1]=true}if(/false/i.test(n[1])){n[1]=false}if(v(n[1])){if(n[1].indexOf(".")===-1){n[1]=parseInt(n[1],10)}else{n[1]=parseFloat(n[1])}}if(n.length===2&&n[0].length>0){l[q(n[0])]=q(n[1])}}return l},register_media:function(n,l){if(Foundation.media_queries[n]===b){f("head").append('<meta class="'+l+'">');Foundation.media_queries[n]=i(f("."+l).css("font-family"))}},add_custom_rule:function(o,n){if(n===b&&Foundation.stylesheet){Foundation.stylesheet.insertRule(o,Foundation.stylesheet.cssRules.length)}else{var l=Foundation.media_queries[n];if(l!==b){Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[n]+"{ "+o+" }")}}},image_loaded:function(l,p){var n=this,o=l.length;if(o===0){p(l)}l.each(function(){c(n.S(this),function(){o-=1;if(o===0){p(l)}})})},random_str:function(){if(!this.fidx){this.fidx=0}this.prefix=this.prefix||[(this.name||"F"),(+new Date).toString(36)].join("-");return this.prefix+(this.fidx++).toString(36)}}};f.fn.foundation=function(){var l=Array.prototype.slice.call(arguments,0);return this.each(function(){Foundation.init.apply(Foundation,[this].concat(l));return this})}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.abide={name:"abide",version:"5.2.3",settings:{live_validate:true,focus_on_invalid:true,error_labels:true,timeout:1000,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:\.\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(f,h,e){var j=a.getElementById(f.getAttribute(this.add_namespace("data-equalto"))).value,i=f.value,g=(j===i);return g}}},timer:null,init:function(f,g,e){this.bindings(g,e)},events:function(g){var e=this,h=e.S(g).attr("novalidate","novalidate"),f=h.data(this.attr_name(true)+"-init")||{};this.invalid_attr=this.add_namespace("data-invalid");h.off(".abide").on("submit.fndtn.abide validate.fndtn.abide",function(j){var i=/ajax/i.test(e.S(this).attr(e.attr_name()));return e.validate(e.S(this).find("input, textarea, select").get(),j,i)}).on("reset",function(){return e.reset(c(this))}).find("input, textarea, select").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(i){e.validate([this],i)}).on("keydown.fndtn.abide",function(i){if(f.live_validate===true){clearTimeout(e.timer);e.timer=setTimeout(function(){e.validate([this],i)}.bind(this),f.timeout)}})},reset:function(e){e.removeAttr(this.invalid_attr);c(this.invalid_attr,e).removeAttr(this.invalid_attr);c(".error",e).not("small").removeClass("error")},validate:function(j,l,o){var g=this.parse_patterns(j),n=g.length,f=this.S(j[0]).closest("[data-"+this.attr_name(true)+"]"),h=f.data(this.attr_name(true)+"-init")||{},p=/submit/.test(l.type);f.trigger("validated");for(var k=0;k<n;k++){if(!g[k]&&(p||o)){if(h.focus_on_invalid){j[k].focus()}f.trigger("invalid");this.S(j[k]).closest("[data-"+this.attr_name(true)+"]").attr(this.invalid_attr,"");return false}}if(p||o){f.trigger("valid")}f.removeAttr(this.invalid_attr);if(o){return false}return true},parse_patterns:function(g){var f=g.length,e=[];while(f--){e.push(this.pattern(g[f]))}return this.check_validation_and_apply_styles(e)},pattern:function(f){var e=f.getAttribute("type"),h=typeof f.getAttribute("required")==="string";var g=f.getAttribute("pattern")||"";if(this.settings.patterns.hasOwnProperty(g)&&g.length>0){return[f,this.settings.patterns[g],h]}else{if(g.length>0){return[f,new RegExp("^"+g+"$"),h]}}if(this.settings.patterns.hasOwnProperty(e)){return[f,this.settings.patterns[e],h]}g=/.*/;return[f,g,h]},check_validation_and_apply_styles:function(n){var o=n.length,k=[],g=this.S(n[0][0]).closest("[data-"+this.attr_name(true)+"]"),l=g.data(this.attr_name(true)+"-init")||{};while(o--){var h=n[o][0],r=n[o][2],u=h.value.trim(),j=this.S(h).parent(),f=h.getAttribute(this.add_namespace("data-abide-validator")),v=h.type==="radio",p=h.type==="checkbox",s=this.S('label[for="'+h.getAttribute("id")+'"]'),q=(r)?(h.value.length>0):true;var t,e;if(h.getAttribute(this.add_namespace("data-equalto"))){f="equalTo"}if(!j.is("label")){t=j}else{t=j.parent()}if(v&&r){k.push(this.valid_radio(h,r))}else{if(p&&r){k.push(this.valid_checkbox(h,r))}else{if(f){e=this.settings.validators[f].apply(this,[h,r,t]);k.push(e);if(e){this.S(h).removeAttr(this.invalid_attr);t.removeClass("error")}else{this.S(h).attr(this.invalid_attr,"");t.addClass("error")}}else{if(n[o][1].test(u)&&q||!r&&h.value.length<1||c(h).attr("disabled")){this.S(h).removeAttr(this.invalid_attr);t.removeClass("error");if(s.length>0&&l.error_labels){s.removeClass("error")}k.push(true);c(h).triggerHandler("valid")}else{this.S(h).attr(this.invalid_attr,"");t.addClass("error");if(s.length>0&&l.error_labels){s.addClass("error")}k.push(false);c(h).triggerHandler("invalid")}}}}}return k},valid_checkbox:function(e,g){var e=this.S(e),f=(e.is(":checked")||!g);if(f){e.removeAttr(this.invalid_attr).parent().removeClass("error")}else{e.attr(this.invalid_attr,"").parent().addClass("error")}return f},valid_radio:function(g,l){var e=g.getAttribute("name"),k=this.S(g).closest("[data-"+this.attr_name(true)+"]").find("[name='"+e+"']"),j=k.length,h=false;for(var f=0;f<j;f++){if(k[f].checked){h=true}}for(var f=0;f<j;f++){if(h){this.S(k[f]).removeAttr(this.invalid_attr).parent().removeClass("error")}else{this.S(k[f]).attr(this.invalid_attr,"").parent().addClass("error")}}return h},valid_equal:function(f,h,e){var j=a.getElementById(f.getAttribute(this.add_namespace("data-equalto"))).value,i=f.value,g=(j===i);if(g){this.S(f).removeAttr(this.invalid_attr);e.removeClass("error")}else{this.S(f).attr(this.invalid_attr,"");e.addClass("error")}return g},valid_oneof:function(h,j,g,e){var h=this.S(h),f=this.S("["+this.add_namespace("data-oneof")+"]"),i=f.filter(":checked").length>0;if(i){h.removeAttr(this.invalid_attr).parent().removeClass("error")}else{h.attr(this.invalid_attr,"").parent().addClass("error")}if(!e){var k=this;f.each(function(){k.valid_oneof.call(k,this,null,null,true)})}return i}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.accordion={name:"accordion",version:"5.2.3",settings:{active_class:"active",multi_expand:false,toggleable:true,callback:function(){}},init:function(f,g,e){this.bindings(g,e)},events:function(){var e=this;var f=this.S;f(this.scope).off(".fndtn.accordion").on("click.fndtn.accordion","["+this.attr_name()+"] > dd > a",function(n){var g=f(this).closest("["+e.attr_name()+"]"),l=f("#"+this.href.split("#")[1]),o=f("dd > .content",g),k=c("dd",g),h=e.attr_name()+"="+g.attr(e.attr_name()),j=g.data(e.attr_name(true)+"-init"),i=f("dd > .content."+j.active_class,g);n.preventDefault();if(g.attr(e.attr_name())){o=o.add("["+h+"] dd > .content");k=k.add("["+h+"] dd")}if(j.toggleable&&l.is(i)){l.parent("dd").toggleClass(j.active_class,false);return l.toggleClass(j.active_class,false)}if(!j.multi_expand){o.removeClass(j.active_class);k.removeClass(j.active_class)}l.addClass(j.active_class).parent().addClass(j.active_class);j.callback(l)})},off:function(){},reflow:function(){}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.alert={name:"alert",version:"5.2.3",settings:{callback:function(){}},init:function(f,g,e){this.bindings(g,e)},events:function(){var e=this,f=this.S;c(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] a.close",function(i){var g=f(this).closest("["+e.attr_name()+"]"),h=g.data(e.attr_name(true)+"-init")||e.settings;i.preventDefault();if("transitionend" in b||"webkitTransitionEnd" in b||"oTransitionEnd" in b){g.addClass("alert-close");g.on("transitionend webkitTransitionEnd oTransitionEnd",function(j){f(this).trigger("close").remove();h.callback()})}else{g.fadeOut(300,function(){f(this).trigger("close").remove();h.callback()})}})},reflow:function(){}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.clearing={name:"clearing",version:"5.2.3",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",touch_label:"",init:false,locked:false},init:function(g,h,f){var e=this;Foundation.inherit(this,"throttle image_loaded");this.bindings(h,f);if(e.S(this.scope).is("["+this.attr_name()+"]")){this.assemble(e.S("li",this.scope))}else{e.S("["+this.attr_name()+"]",this.scope).each(function(){e.assemble(e.S("li",this))})}},events:function(g){var e=this,f=e.S,h=c(".scroll-container");if(h.length>0){this.scope=h}f(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li",function(o,n,l){var n=n||f(this),l=l||n,j=n.next("li"),i=n.closest("["+e.attr_name()+"]").data(e.attr_name(true)+"-init"),k=f(o.target);o.preventDefault();if(!i){e.init();i=n.closest("["+e.attr_name()+"]").data(e.attr_name(true)+"-init")}if(l.hasClass("visible")&&n[0]===l[0]&&j.length>0&&e.is_open(n)){l=j;k=f("img",l)}e.open(k,n,l);e.update_paddles(l)}).on("click.fndtn.clearing",".clearing-main-next",function(i){e.nav(i,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(i){e.nav(i,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(i){Foundation.libs.clearing.close(i,this)});c(a).on("keydown.fndtn.clearing",function(i){e.keydown(i)});f(b).off(".clearing").on("resize.fndtn.clearing",function(){e.resize()});this.swipe_events(g)},swipe_events:function(g){var e=this,f=e.S;f(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(i){if(!i.touches){i=i.originalEvent}var h={start_page_x:i.touches[0].pageX,start_page_y:i.touches[0].pageY,start_time:(new Date()).getTime(),delta_x:0,is_scrolling:d};f(this).data("swipe-transition",h);i.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(j){if(!j.touches){j=j.originalEvent}if(j.touches.length>1||j.scale&&j.scale!==1){return}var h=f(this).data("swipe-transition");if(typeof h==="undefined"){h={}}h.delta_x=j.touches[0].pageX-h.start_page_x;if(typeof h.is_scrolling==="undefined"){h.is_scrolling=!!(h.is_scrolling||Math.abs(h.delta_x)<Math.abs(j.touches[0].pageY-h.start_page_y))}if(!h.is_scrolling&&!h.active){j.preventDefault();var i=(h.delta_x<0)?"next":"prev";h.active=true;e.nav(j,i)}}).on("touchend.fndtn.clearing",".visible-img",function(h){f(this).data("swipe-transition",{});h.stopPropagation()})},assemble:function(j){var n=j.parent();if(n.parent().hasClass("carousel")){return}n.after('<div id="foundationClearingHolder"></div>');var e=n.detach(),l="";if(e[0]==null){return}else{l=e[0].outerHTML}var k=this.S("#foundationClearingHolder"),h=n.data(this.attr_name(true)+"-init"),i={grid:'<div class="carousel">'+l+"</div>",viewing:h.templates.viewing},f='<div class="clearing-assembled"><div>'+i.viewing+i.grid+"</div></div>",g=this.settings.touch_label;if(Modernizr.touch){f=c(f).find(".clearing-touch-label").html(g).end()}k.after(f).remove()},open:function(f,k,l){var r=this,j=c(a.body),o=l.closest(".clearing-assembled"),e=r.S("div",o).first(),i=r.S(".visible-img",e),h=r.S("img",i).not(f),q=r.S(".clearing-touch-label",e),n=false;h.error(function(){n=true});function p(){setTimeout(function(){this.image_loaded(h,function(){if(h.outerWidth()===1&&!n){p.call(this)}else{g.call(this,h)}}.bind(this))}.bind(this),50)}function g(t){var s=c(t);s.css("visibility","visible");j.css("overflow","hidden");o.addClass("clearing-blackout");e.addClass("clearing-container");i.show();this.fix_height(l).caption(r.S(".clearing-caption",i),r.S("img",l)).center_and_label(t,q).shift(k,l,function(){l.siblings().removeClass("visible");l.addClass("visible")});i.trigger("opened.fndtn.clearing")}if(!this.locked()){i.trigger("open.fndtn.clearing");h.attr("src",this.load(f)).css("visibility","hidden");p.call(this)}},close:function(k,j){k.preventDefault();var h=(function(e){if(/blackout/.test(e.selector)){return e}else{return e.closest(".clearing-blackout")}}(c(j))),f=c(a.body),g,i;if(j===k.target&&h){f.css("overflow","");g=c("div",h).first();i=c(".visible-img",g);i.trigger("close.fndtn.clearing");this.settings.prev_index=0;c("ul["+this.attr_name()+"]",h).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout");g.removeClass("clearing-container");i.hide();i.trigger("closed.fndtn.clearing")}return false},is_open:function(e){return e.parent().prop("style").length>0},keydown:function(j){var i=c(".clearing-blackout ul["+this.attr_name()+"]"),h=this.rtl?37:39,g=this.rtl?39:37,f=27;if(j.which===h){this.go(i,"next")}if(j.which===g){this.go(i,"prev")}if(j.which===f){this.S("a.clearing-close").trigger("click")}},nav:function(h,g){var f=c("ul["+this.attr_name()+"]",".clearing-blackout");h.preventDefault();this.go(f,g)},resize:function(){var f=c("img",".clearing-blackout .visible-img"),e=c(".clearing-touch-label",".clearing-blackout");if(f.length){this.center_and_label(f,e);f.trigger("resized.fndtn.clearing")}},fix_height:function(g){var f=g.parent().children(),e=this;f.each(function(){var h=e.S(this),i=h.find("img");if(h.height()>i.outerHeight()){h.addClass("fix-height")}}).closest("ul").width(f.length*100+"%");return this},update_paddles:function(f){var e=f.closest(".carousel").siblings(".visible-img");if(f.next().length>0){this.S(".clearing-main-next",e).removeClass("disabled")}else{this.S(".clearing-main-next",e).addClass("disabled")}if(f.prev().length>0){this.S(".clearing-main-prev",e).removeClass("disabled")}else{this.S(".clearing-main-prev",e).addClass("disabled")}},center_and_label:function(f,e){if(!this.rtl){f.css({marginLeft:-(f.outerWidth()/2),marginTop:-(f.outerHeight()/2)});if(e.length>0){e.css({marginLeft:-(e.outerWidth()/2),marginTop:-(f.outerHeight()/2)-e.outerHeight()-10})}}else{f.css({marginRight:-(f.outerWidth()/2),marginTop:-(f.outerHeight()/2),left:"auto",right:"50%"});if(e.length>0){e.css({marginRight:-(e.outerWidth()/2),marginTop:-(f.outerHeight()/2)-e.outerHeight()-10,left:"auto",right:"50%"})}}return this},load:function(f){var e;if(f[0].nodeName==="A"){e=f.attr("href")}else{e=f.parent().attr("href")}this.preload(f);if(e){return e}return f.attr("src")},preload:function(e){this.img(e.closest("li").next()).img(e.closest("li").prev())},img:function(e){if(e.length){var f=new Image(),g=this.S("a",e);if(g.length){f.src=g.attr("href")}else{f.src=this.S("img",e).attr("src")}}return this},caption:function(e,g){var f=g.attr("data-caption");if(f){e.html(f).show()}else{e.text("").hide()}return this},go:function(e,h){var g=this.S(".visible",e),f=g[h]();if(f.length){this.S("img",f).trigger("click",[g,f]).trigger("change.fndtn.clearing")}},shift:function(j,k,p){var l=k.parent(),i=this.settings.prev_index||k.index(),n=this.direction(l,j,k),h=this.rtl?"right":"left",g=parseInt(l.css("left"),10),f=k.outerWidth(),o;var e={};if(k.index()!==i&&!/skip/.test(n)){if(/left/.test(n)){this.lock();e[h]=g+f;l.animate(e,300,this.unlock())}else{if(/right/.test(n)){this.lock();e[h]=g-f;l.animate(e,300,this.unlock())}}}else{if(/skip/.test(n)){o=k.index()-this.settings.up_count;this.lock();if(o>0){e[h]=-(o*f);l.animate(e,300,this.unlock())}else{e[h]=0;l.animate(e,300,this.unlock())}}}p()},direction:function(h,j,i){var g=this.S("li",h),f=g.outerWidth()+(g.outerWidth()/4),k=Math.floor(this.S(".clearing-container").outerWidth()/f)-1,l=g.index(i),e;this.settings.up_count=k;if(this.adjacent(this.settings.prev_index,l)){if((l>k)&&l>this.settings.prev_index){e="right"}else{if((l>k-1)&&l<=this.settings.prev_index){e="left"}else{e=false}}}else{e="skip"}this.settings.prev_index=l;return e},adjacent:function(g,f){for(var e=f+1;e>=f-1;e--){if(e===g){return true}}return false},lock:function(){this.settings.locked=true},unlock:function(){this.settings.locked=false},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing");this.S(b).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.dropdown={name:"dropdown",version:"5.2.3",settings:{active_class:"open",align:"bottom",is_hover:false,opened:function(){},closed:function(){}},init:function(f,g,e){Foundation.inherit(this,"throttle");this.bindings(g,e)},events:function(g){var e=this,f=e.S;f(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(i){var h=f(this).data(e.attr_name(true)+"-init")||e.settings;if(!h.is_hover||Modernizr.touch){i.preventDefault();e.toggle(c(this))}}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(k){var j=f(this),l,i;clearTimeout(e.timeout);if(j.data(e.data_attr())){l=f("#"+j.data(e.data_attr()));i=j}else{l=j;i=f("["+e.attr_name()+"='"+l.attr("id")+"']")}var h=i.data(e.attr_name(true)+"-init")||e.settings;if(f(k.target).data(e.data_attr())&&h.is_hover){e.closeall.call(e)}if(h.is_hover){e.open.apply(e,[l,i])}}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(i){var h=f(this);e.timeout=setTimeout(function(){if(h.data(e.data_attr())){var j=h.data(e.data_attr(true)+"-init")||e.settings;if(j.is_hover){e.close.call(e,f("#"+h.data(e.data_attr())))}}else{var k=f("["+e.attr_name()+'="'+f(this).attr("id")+'"]'),j=k.data(e.attr_name(true)+"-init")||e.settings;if(j.is_hover){e.close.call(e,h)}}}.bind(this),150)}).on("click.fndtn.dropdown",function(i){var h=f(i.target).closest("["+e.attr_name()+"-content]");if(f(i.target).data(e.data_attr())||f(i.target).parent().data(e.data_attr())){return}if(!(f(i.target).data("revealId"))&&(h.length>0&&(f(i.target).is("["+e.attr_name()+"-content]")||c.contains(h.first()[0],i.target)))){i.stopPropagation();return}e.close.call(e,f("["+e.attr_name()+"-content]"))}).on("opened.fndtn.dropdown","["+e.attr_name()+"-content]",function(){e.settings.opened.call(this)}).on("closed.fndtn.dropdown","["+e.attr_name()+"-content]",function(){e.settings.closed.call(this)});f(b).off(".dropdown").on("resize.fndtn.dropdown",e.throttle(function(){e.resize.call(e)},50));this.resize()},close:function(f){var e=this;f.each(function(){if(e.S(this).hasClass(e.settings.active_class)){e.S(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(e.settings.active_class).prev("["+e.attr_name()+"]").removeClass(e.settings.active_class).removeData("target");e.S(this).trigger("closed",[f])}})},closeall:function(){var e=this;c.each(e.S("["+this.attr_name()+"-content]"),function(){e.close.call(e,e.S(this))})},open:function(f,e){this.css(f.addClass(this.settings.active_class),e);f.prev("["+this.attr_name()+"]").addClass(this.settings.active_class);f.data("target",e.get(0)).trigger("opened",[f,e])},data_attr:function(){if(this.namespace.length>0){return this.namespace+"-"+this.name}return this.name},toggle:function(e){var f=this.S("#"+e.data(this.data_attr()));if(f.length===0){return}this.close.call(this,this.S("["+this.attr_name()+"-content]").not(f));if(f.hasClass(this.settings.active_class)){this.close.call(this,f);if(f.data("target")!==e.get(0)){this.open.call(this,f,e)}}else{this.open.call(this,f,e)}},resize:function(){var f=this.S("["+this.attr_name()+"-content].open"),e=this.S("["+this.attr_name()+"='"+f.attr("id")+"']");if(f.length&&e.length){this.css(f,e)}},css:function(h,g){this.clear_idx();if(this.small()){var f=this.dirs.bottom.call(h,g);h.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:f.top});h.css(Foundation.rtl?"right":"left","2.5%")}else{var e=g.data(this.attr_name(true)+"-init")||this.settings;this.style(h,g,e)}return h},style:function(h,g,f){var e=c.extend({position:"absolute"},this.dirs[f.align].call(h,g,f));h.attr("style","").css(e)},dirs:{_base:function(e){var f=this.offsetParent(),h=f.offset(),g=e.offset();g.top-=h.top;g.left-=h.left;return g},top:function(f,g){var e=Foundation.libs.dropdown,h=e.dirs._base.call(this,f),i=(f.outerWidth()/2)-8;this.addClass("drop-top");if(f.outerWidth()<this.outerWidth()||e.small()){e.adjust_pip(i,h)}if(Foundation.rtl){return{left:h.left-this.outerWidth()+f.outerWidth(),top:h.top-this.outerHeight()}}return{left:h.left,top:h.top-this.outerHeight()}},bottom:function(f,g){var e=Foundation.libs.dropdown,h=e.dirs._base.call(this,f),i=(f.outerWidth()/2)-8;if(f.outerWidth()<this.outerWidth()||e.small()){e.adjust_pip(i,h)}if(e.rtl){return{left:h.left-this.outerWidth()+f.outerWidth(),top:h.top+f.outerHeight()}}return{left:h.left,top:h.top+f.outerHeight()}},left:function(e,f){var g=Foundation.libs.dropdown.dirs._base.call(this,e);this.addClass("drop-left");return{left:g.left-this.outerWidth(),top:g.top}},right:function(e,f){var g=Foundation.libs.dropdown.dirs._base.call(this,e);this.addClass("drop-right");return{left:g.left+e.outerWidth(),top:g.top}}},adjust_pip:function(k,j){var f=Foundation.stylesheet;if(this.small()){k+=j.left-8}this.rule_idx=f.cssRules.length;var h=".f-dropdown.open:before",g=".f-dropdown.open:after",e="left: "+k+"px;",i="left: "+(k-1)+"px;";if(f.insertRule){f.insertRule([h,"{",e,"}"].join(" "),this.rule_idx);f.insertRule([g,"{",i,"}"].join(" "),this.rule_idx+1)}else{f.addRule(h,e,this.rule_idx);f.addRule(g,i,this.rule_idx+1)}},clear_idx:function(){var e=Foundation.stylesheet;if(this.rule_idx){e.deleteRule(this.rule_idx);e.deleteRule(this.rule_idx);delete this.rule_idx}},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){this.S(this.scope).off(".fndtn.dropdown");this.S("html, body").off(".fndtn.dropdown");this.S(b).off(".fndtn.dropdown");this.S("[data-dropdown-content]").off(".fndtn.dropdown")},reflow:function(){}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.equalizer={name:"equalizer",version:"5.2.3",settings:{use_tallest:true,before_height_change:c.noop,after_height_change:c.noop,equalize_on_stack:false},init:function(f,g,e){Foundation.inherit(this,"image_loaded");this.bindings(g,e);this.reflow()},events:function(){this.S(b).off(".equalizer").on("resize.fndtn.equalizer",function(f){this.reflow()}.bind(this))},equalize:function(f){var l=false,k=f.find("["+this.attr_name()+"-watch]:visible"),i=f.data(this.attr_name(true)+"-init");if(k.length===0){return}var h=k.first().offset().top;i.before_height_change();f.trigger("before-height-change");k.height("inherit");k.each(function(){var n=c(this);if(n.offset().top!==h){l=true}});if(i.equalize_on_stack===false){if(l){return}}var j=k.map(function(){return c(this).outerHeight(false)}).get();if(i.use_tallest){var e=Math.max.apply(null,j);k.css("height",e)}else{var g=Math.min.apply(null,j);k.css("height",g)}i.after_height_change();f.trigger("after-height-change")},reflow:function(){var e=this;this.S("["+this.attr_name()+"]",this.scope).each(function(){var f=c(this);e.image_loaded(e.S("img",this),function(){e.equalize(f)})})}}})(jQuery,window,window.document);(function(c,b,a,d){Foundation.libs.interchange={name:"interchange",version:"5.2.3",cache:{},images_loaded:false,nodes_loaded:false,settings:{load_attr:"interchange",named_queries:{"default":"only screen",small:Foundation.media_queries.small,medium:Foundation.media_queries.medium,large:Foundation.media_queries.large,xlarge:Foundation.media_queries.xlarge,xxlarge:Foundation.media_queries.xxlarge,landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(g,i,e){if(/IMG/.test(g[0].nodeName)){var f=g[0].src;if(new RegExp(i,"i").test(f)){return}g[0].src=i;return e(g[0].src)}var h=g.data(this.data_attr+"-last-path");if(h==i){return}if(/\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i.test(i)){c(g).css("background-image","url("+i+")");g.data("interchange-last-path",i);return e(i)}return c.get(i,function(j){g.html(j);g.data(this.data_attr+"-last-path",i);e()})}}},init:function(f,g,e){Foundation.inherit(this,"throttle random_str");this.data_attr=this.set_data_attr();c.extend(true,this.settings,g,e);this.bindings(g,e);this.load("images");this.load("nodes")},get_media_hash:function(){var e="";for(var f in this.settings.named_queries){e+=matchMedia(this.settings.named_queries[f]).matches.toString()}return e},events:function(){var f=this,e;c(b).off(".interchange").on("resize.fndtn.interchange",f.throttle(function(){var g=f.get_media_hash();if(g!==e){f.resize()}e=g},50));return this},resize:function(){var e=this.cache;if(!this.images_loaded||!this.nodes_loaded){setTimeout(c.proxy(this.resize,this),50);return}for(var f in e){if(e.hasOwnProperty(f)){var g=this.results(f,e[f]);if(g){this.settings.directives[g.scenario[1]].call(this,g.el,g.scenario[0],function(){if(arguments[0] instanceof Array){var h=arguments[0]}else{var h=Array.prototype.slice.call(arguments,0)}g.el.trigger(g.scenario[1],h)})}}}},results:function(g,j){var h=j.length;if(h>0){var f=this.S("["+this.add_namespace("data-uuid")+'="'+g+'"]');while(h--){var e,i=j[h][2];if(this.settings.named_queries.hasOwnProperty(i)){e=matchMedia(this.settings.named_queries[i])}else{e=matchMedia(i)}if(e.matches){return{el:f,scenario:j[h]}}}}return false},load:function(f,e){if(typeof this["cached_"+f]==="undefined"||e){this["update_"+f]()}return this["cached_"+f]},update_images:function(){var e=this.S("img["+this.data_attr+"]"),j=e.length,h=j,g=0,f=this.data_attr;this.cache={};this.cached_images=[];this.images_loaded=(j===0);while(h--){g++;if(e[h]){var k=e[h].getAttribute(f)||"";if(k.length>0){this.cached_images.push(e[h])}}if(g===j){this.images_loaded=true;this.enhance("images")}}return this},update_nodes:function(){var e=this.S("["+this.data_attr+"]").not("img"),j=e.length,h=j,g=0,f=this.data_attr;this.cached_nodes=[];this.nodes_loaded=(j===0);while(h--){g++;var k=e[h].getAttribute(f)||"";if(k.length>0){this.cached_nodes.push(e[h])}if(g===j){this.nodes_loaded=true;this.enhance("nodes")}}return this},enhance:function(f){var e=this["cached_"+f].length;while(e--){this.object(c(this["cached_"+f][e]))}return c(b).trigger("resize")},parse_params:function(f,g,e){return[this.trim(f),this.convert_directive(g),this.trim(e)]},convert_directive:function(f){var e=this.trim(f);if(e.length>0){return e}return"replace"},object:function(h){var j=this.parse_data_attr(h),l=[],g=j.length;if(g>0){while(g--){var f=j[g].split(/\((.*?)(\))$/);if(f.length>1){var e=f[0].split(/\, /),k=this.parse_params(e[0],e[1],f[1]);l.push(k)}}}return this.store(h,l)},store:function(f,h){var e=this.random_str(),g=f.data(this.add_namespace("uuid",true));if(this.cache[g]){return this.cache[g]}f.attr(this.add_namespace("data-uuid"),e);return this.cache[e]=h},trim:function(e){if(typeof e==="string"){return c.trim(e)}return e},set_data_attr:function(e){if(e){if(this.namespace.length>0){return this.namespace+"-"+this.settings.load_attr}return this.settings.load_attr}if(this.namespace.length>0){return"data-"+this.namespace+"-"+this.settings.load_attr}return"data-"+this.settings.load_attr},parse_data_attr:function(h){var f=h.attr(this.attr_name()).split(/\[(.*?)\]/),g=f.length,e=[];while(g--){if(f[g].replace(/[\W\d]+/,"").length>4){e.push(f[g])}}return e},reflow:function(){this.load("images",true);this.load("nodes",true)}}}(jQuery,window,window.document));(function(c,b,a,e){var d=d||false;Foundation.libs.joyride={name:"joyride",version:"5.2.3",defaults:{expose:false,modal:true,tip_location:"bottom",nub_position:"auto",scroll_speed:1500,scroll_animation:"linear",timer:0,start_timer_on_click:true,start_offset:0,next_button:true,tip_animation:"fade",pause_after:[],exposed:[],tip_animation_fade_speed:300,cookie_monster:false,cookie_name:"joyride",cookie_domain:false,cookie_expires:365,tip_container:"body",abort_on_close:true,tip_location_patterns:{top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},post_ride_callback:function(){},post_step_callback:function(){},pre_step_callback:function(){},pre_ride_callback:function(){},post_expose_callback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',expose_cover:'<div class="joyride-expose-cover"></div>'},expose_add_class:""},init:function(g,h,f){Foundation.inherit(this,"throttle random_str");this.settings=this.settings||c.extend({},this.defaults,(f||h));this.bindings(h,f)},events:function(){var f=this;c(this.scope).off(".joyride").on("click.fndtn.joyride",".joyride-next-tip, .joyride-modal-bg",function(g){g.preventDefault();if(this.settings.$li.next().length<1){this.end()}else{if(this.settings.timer>0){clearTimeout(this.settings.automate);this.hide();this.show();this.startTimer()}else{this.hide();this.show()}}}.bind(this)).on("click.fndtn.joyride",".joyride-close-tip",function(g){g.preventDefault();this.end(this.settings.abort_on_close)}.bind(this));c(b).off(".joyride").on("resize.fndtn.joyride",f.throttle(function(){if(c("["+f.attr_name()+"]").length>0&&f.settings.$next_tip){if(f.settings.exposed.length>0){var g=c(f.settings.exposed);g.each(function(){var h=c(this);f.un_expose(h);f.expose(h)})}if(f.is_phone()){f.pos_phone()}else{f.pos_default(false)}}},100))},start:function(){var g=this,i=c("["+this.attr_name()+"]",this.scope),f=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],h=f.length;if(!i.length>0){return}if(!this.settings.init){this.events()}this.settings=i.data(this.attr_name(true)+"-init");this.settings.$content_el=i;this.settings.$body=c(this.settings.tip_container);this.settings.body_offset=c(this.settings.tip_container).position();this.settings.$tip_content=this.settings.$content_el.find("> li");this.settings.paused=false;this.settings.attempts=0;if(typeof c.cookie!=="function"){this.settings.cookie_monster=false}if(!this.settings.cookie_monster||this.settings.cookie_monster&&!c.cookie(this.settings.cookie_name)){this.settings.$tip_content.each(function(j){var l=c(this);this.settings=c.extend({},g.defaults,g.data_options(l));var k=h;while(k--){g.settings[f[k]]=parseInt(g.settings[f[k]],10)}g.create({$li:l,index:j})});if(!this.settings.start_timer_on_click&&this.settings.timer>0){this.show("init");this.startTimer()}else{this.show("init")}}},resume:function(){this.set_li();this.show()},tip_template:function(g){var h,f;g.tip_class=g.tip_class||"";h=c(this.settings.template.tip).addClass(g.tip_class);f=c.trim(c(g.li).html())+this.button_text(g.button_text)+this.settings.template.link+this.timer_instance(g.index);h.append(c(this.settings.template.wrapper));h.first().attr(this.add_namespace("data-index"),g.index);c(".joyride-content-wrapper",h).append(f);return h[0]},timer_instance:function(g){var f;if((g===0&&this.settings.start_timer_on_click&&this.settings.timer>0)||this.settings.timer===0){f=""}else{f=c(this.settings.template.timer)[0].outerHTML}return f},button_text:function(f){if(this.settings.next_button){f=c.trim(f)||"Next";f=c(this.settings.template.button).append(f)[0].outerHTML}else{f=""}return f},create:function(h){var g=h.$li.attr(this.add_namespace("data-button"))||h.$li.attr(this.add_namespace("data-text")),f=h.$li.attr("class"),i=c(this.tip_template({tip_class:f,index:h.index,button_text:g,li:h.$li}));c(this.settings.tip_container).append(i)},show:function(g){var f=null;if(this.settings.$li===e||(c.inArray(this.settings.$li.index(),this.settings.pause_after)===-1)){if(this.settings.paused){this.settings.paused=false}else{this.set_li(g)}this.settings.attempts=0;if(this.settings.$li.length&&this.settings.$target.length>0){if(g){this.settings.pre_ride_callback(this.settings.$li.index(),this.settings.$next_tip);if(this.settings.modal){this.show_modal()}}this.settings.pre_step_callback(this.settings.$li.index(),this.settings.$next_tip);if(this.settings.modal&&this.settings.expose){this.expose()}this.settings.tip_settings=c.extend({},this.settings,this.data_options(this.settings.$li));this.settings.timer=parseInt(this.settings.timer,10);this.settings.tip_settings.tip_location_pattern=this.settings.tip_location_patterns[this.settings.tip_settings.tip_location];if(!/body/i.test(this.settings.$target.selector)){this.scroll_to()}if(this.is_phone()){this.pos_phone(true)}else{this.pos_default(true)}f=this.settings.$next_tip.find(".joyride-timer-indicator");if(/pop/i.test(this.settings.tip_animation)){f.width(0);if(this.settings.timer>0){this.settings.$next_tip.show();setTimeout(function(){f.animate({width:f.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)}else{this.settings.$next_tip.show()}}else{if(/fade/i.test(this.settings.tip_animation)){f.width(0);if(this.settings.timer>0){this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed).show();setTimeout(function(){f.animate({width:f.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tip_animation_fade_speed)}else{this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed)}}}this.settings.$current_tip=this.settings.$next_tip}else{if(this.settings.$li&&this.settings.$target.length<1){this.show()}else{this.end()}}}else{this.settings.paused=true}},is_phone:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},hide:function(){if(this.settings.modal&&this.settings.expose){this.un_expose()}if(!this.settings.modal){c(".joyride-modal-bg").hide()}this.settings.$current_tip.css("visibility","hidden");setTimeout(c.proxy(function(){this.hide();this.css("visibility","visible")},this.settings.$current_tip),0);this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(f){if(f){this.settings.$li=this.settings.$tip_content.eq(this.settings.start_offset);this.set_next_tip();this.settings.$current_tip=this.settings.$next_tip}else{this.settings.$li=this.settings.$li.next();this.set_next_tip()}this.set_target()},set_next_tip:function(){this.settings.$next_tip=c(".joyride-tip-guide").eq(this.settings.$li.index());this.settings.$next_tip.data("closed","")},set_target:function(){var f=this.settings.$li.attr(this.add_namespace("data-class")),h=this.settings.$li.attr(this.add_namespace("data-id")),g=function(){if(h){return c(a.getElementById(h))}else{if(f){return c("."+f).first()}else{return c("body")}}};this.settings.$target=g()},scroll_to:function(){var g,f;g=c(b).height()/2;f=Math.ceil(this.settings.$target.offset().top-g+this.settings.$next_tip.outerHeight());if(f!=0){c("html, body").stop().animate({scrollTop:f},this.settings.scroll_speed,"swing")}},paused:function(){return(c.inArray((this.settings.$li.index()+1),this.settings.pause_after)===-1)},restart:function(){this.hide();this.settings.$li=e;this.show("init")},pos_default:function(i){var h=this.settings.$next_tip.find(".joyride-nub"),g=Math.ceil(h.outerWidth()/2),j=Math.ceil(h.outerHeight()/2),f=i||false;if(f){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(!/body/i.test(this.settings.$target.selector)){if(this.bottom()){if(this.rtl){this.settings.$next_tip.css({top:(this.settings.$target.offset().top+j+this.settings.$target.outerHeight()),left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()})}else{this.settings.$next_tip.css({top:(this.settings.$target.offset().top+j+this.settings.$target.outerHeight()),left:this.settings.$target.offset().left})}this.nub_position(h,this.settings.tip_settings.nub_position,"top")}else{if(this.top()){if(this.rtl){this.settings.$next_tip.css({top:(this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-j),left:this.settings.$target.offset().left+this.settings.$target.outerWidth()-this.settings.$next_tip.outerWidth()})}else{this.settings.$next_tip.css({top:(this.settings.$target.offset().top-this.settings.$next_tip.outerHeight()-j),left:this.settings.$target.offset().left})}this.nub_position(h,this.settings.tip_settings.nub_position,"bottom")}else{if(this.right()){this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:(this.settings.$target.outerWidth()+this.settings.$target.offset().left+g)});this.nub_position(h,this.settings.tip_settings.nub_position,"left")}else{if(this.left()){this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:(this.settings.$target.offset().left-this.settings.$next_tip.outerWidth()-g)});this.nub_position(h,this.settings.tip_settings.nub_position,"right")}}}}if(!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tip_settings.tip_location_pattern.length){h.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");this.settings.tip_settings.tip_location=this.settings.tip_settings.tip_location_pattern[this.settings.attempts];this.settings.attempts++;this.pos_default()}}else{if(this.settings.$li.length){this.pos_modal(h)}}if(f){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_phone:function(k){var j=this.settings.$next_tip.outerHeight(),i=this.settings.$next_tip.offset(),h=this.settings.$target.outerHeight(),g=c(".joyride-nub",this.settings.$next_tip),l=Math.ceil(g.outerHeight()/2),f=k||false;g.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");if(f){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(!/body/i.test(this.settings.$target.selector)){if(this.top()){this.settings.$next_tip.offset({top:this.settings.$target.offset().top-j-l});g.addClass("bottom")}else{this.settings.$next_tip.offset({top:this.settings.$target.offset().top+h+l});g.addClass("top")}}else{if(this.settings.$li.length){this.pos_modal(g)}}if(f){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_modal:function(f){this.center();f.hide();this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var f=c(".joyride-modal-bg");if(f.length<1){c("body").append(this.settings.template.modal).show()}if(/pop/i.test(this.settings.tip_animation)){f.show()}else{f.fadeIn(this.settings.tip_animation_fade_speed)}}},expose:function(){var g,j,i,k,f,h="expose-"+this.random_str(6);if(arguments.length>0&&arguments[0] instanceof c){i=arguments[0]}else{if(this.settings.$target&&!/body/i.test(this.settings.$target.selector)){i=this.settings.$target}else{return false}}if(i.length<1){if(b.console){console.error("element not valid",i)}return false}g=c(this.settings.template.expose);this.settings.$body.append(g);g.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(true),height:i.outerHeight(true)});j=c(this.settings.template.expose_cover);k={zIndex:i.css("z-index"),position:i.css("position")};f=i.attr("class")==null?"":i.attr("class");i.css("z-index",parseInt(g.css("z-index"))+1);if(k.position=="static"){i.css("position","relative")}i.data("expose-css",k);i.data("orig-class",f);i.attr("class",f+" "+this.settings.expose_add_class);j.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(true),height:i.outerHeight(true)});if(this.settings.modal){this.show_modal()}this.settings.$body.append(j);g.addClass(h);j.addClass(h);i.data("expose",h);this.settings.post_expose_callback(this.settings.$li.index(),this.settings.$next_tip,i);this.add_exposed(i)},un_expose:function(){var f,j,h,k,g,i=false;if(arguments.length>0&&arguments[0] instanceof c){j=arguments[0]}else{if(this.settings.$target&&!/body/i.test(this.settings.$target.selector)){j=this.settings.$target}else{return false}}if(j.length<1){if(b.console){console.error("element not valid",j)}return false}f=j.data("expose");h=c("."+f);if(arguments.length>1){i=arguments[1]}if(i===true){c(".joyride-expose-wrapper,.joyride-expose-cover").remove()}else{h.remove()}k=j.data("expose-css");if(k.zIndex=="auto"){j.css("z-index","")}else{j.css("z-index",k.zIndex)}if(k.position!=j.css("position")){if(k.position=="static"){j.css("position","")}else{j.css("position",k.position)}}g=j.data("orig-class");j.attr("class",g);j.removeData("orig-classes");j.removeData("expose");j.removeData("expose-z-index");this.remove_exposed(j)},add_exposed:function(f){this.settings.exposed=this.settings.exposed||[];if(f instanceof c||typeof f==="object"){this.settings.exposed.push(f[0])}else{if(typeof f=="string"){this.settings.exposed.push(f)}}},remove_exposed:function(h){var g,f;if(h instanceof c){g=h[0]}else{if(typeof h=="string"){g=h}}this.settings.exposed=this.settings.exposed||[];f=this.settings.exposed.length;while(f--){if(this.settings.exposed[f]==g){this.settings.exposed.splice(f,1);return}}},center:function(){var f=c(b);this.settings.$next_tip.css({top:(((f.height()-this.settings.$next_tip.outerHeight())/2)+f.scrollTop()),left:(((f.width()-this.settings.$next_tip.outerWidth())/2)+f.scrollLeft())});return true},bottom:function(){return/bottom/i.test(this.settings.tip_settings.tip_location)},top:function(){return/top/i.test(this.settings.tip_settings.tip_location)},right:function(){return/right/i.test(this.settings.tip_settings.tip_location)},left:function(){return/left/i.test(this.settings.tip_settings.tip_location)},corners:function(j){var f=c(b),n=f.height()/2,k=Math.ceil(this.settings.$target.offset().top-n+this.settings.$next_tip.outerHeight()),i=f.width()+f.scrollLeft(),h=f.height()+k,g=f.height()+f.scrollTop(),l=f.scrollTop();if(k<l){if(k<0){l=0}else{l=k}}if(h>g){g=h}return[j.offset().top<l,i<j.offset().left+j.outerWidth(),g<j.offset().top+j.outerHeight(),f.scrollLeft()>j.offset().left]},visible:function(f){var g=f.length;while(g--){if(f[g]){return false}}return true},nub_position:function(f,h,g){if(h==="auto"){f.addClass(g)}else{f.addClass(h)}},startTimer:function(){if(this.settings.$li.length){this.settings.automate=setTimeout(function(){this.hide();this.show();this.startTimer()}.bind(this),this.settings.timer)}else{clearTimeout(this.settings.automate)}},end:function(f){if(this.settings.cookie_monster){c.cookie(this.settings.cookie_name,"ridden",{expires:this.settings.cookie_expires,domain:this.settings.cookie_domain})}if(this.settings.timer>0){clearTimeout(this.settings.automate)}if(this.settings.modal&&this.settings.expose){this.un_expose()}this.settings.$next_tip.data("closed",true);c(".joyride-modal-bg").hide();this.settings.$current_tip.hide();if(typeof f==="undefined"||f===false){this.settings.post_step_callback(this.settings.$li.index(),this.settings.$current_tip);this.settings.post_ride_callback(this.settings.$li.index(),this.settings.$current_tip)}c(".joyride-tip-guide").remove()},off:function(){c(this.scope).off(".joyride");c(b).off(".joyride");c(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride");c(".joyride-tip-guide, .joyride-modal-bg").remove();clearTimeout(this.settings.automate);this.settings={}},reflow:function(){}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs["magellan-expedition"]={name:"magellan-expedition",version:"5.2.3",settings:{active_class:"active",threshold:0,destination_threshold:20,throttle_delay:30,fixed_top:0},init:function(f,g,e){Foundation.inherit(this,"throttle");this.bindings(g,e)},events:function(){var e=this,f=e.S,g=e.settings;e.set_expedition_position();f(e.scope).off(".magellan").on("click.fndtn.magellan","["+e.add_namespace("data-magellan-arrival")+'] a[href^="#"]',function(n){n.preventDefault();var l=c(this).closest("["+e.attr_name()+"]"),i=l.data("magellan-expedition-init"),k=this.hash.split("#").join(""),j=c("a[name='"+k+"']");if(j.length===0){j=c("#"+k)}var h=j.offset().top;h=h-l.outerHeight();c("html, body").stop().animate({scrollTop:h},700,"swing",function(){if(history.pushState){history.pushState(null,null,"#"+k)}else{location.hash="#"+k}})}).on("scroll.fndtn.magellan",e.throttle(this.check_for_arrivals.bind(this),g.throttle_delay));c(b).on("resize.fndtn.magellan",e.throttle(this.set_expedition_position.bind(this),g.throttle_delay))},check_for_arrivals:function(){var e=this;e.update_arrivals();e.update_expedition_positions()},set_expedition_position:function(){var e=this;c("["+this.attr_name()+"=fixed]",e.scope).each(function(f,h){var j=c(this),i=j.attr("styles"),g;j.attr("style","");g=j.offset().top+e.settings.threshold;j.data(e.data_attr("magellan-top-offset"),g);j.attr("style",i)})},update_expedition_positions:function(){var f=this,e=c(b).scrollTop();c("["+this.attr_name()+"=fixed]",f.scope).each(function(){var h=c(this),g=h.data("magellan-top-offset");if(e>=g){var i=h.prev("["+f.add_namespace("data-magellan-expedition-clone")+"]");if(i.length===0){i=h.clone();i.removeAttr(f.attr_name());i.attr(f.add_namespace("data-magellan-expedition-clone"),"");h.before(i)}h.css({position:"fixed",top:f.settings.fixed_top})}else{h.prev("["+f.add_namespace("data-magellan-expedition-clone")+"]").remove();h.attr("style","").removeClass("fixed")}})},update_arrivals:function(){var f=this,e=c(b).scrollTop();c("["+this.attr_name()+"]",f.scope).each(function(){var k=c(this),g=k.data(f.attr_name(true)+"-init"),i=f.offsets(k,e),j=k.find("["+f.add_namespace("data-magellan-arrival")+"]"),h=false;i.each(function(l,n){if(n.viewport_offset>=n.top_offset){var o=k.find("["+f.add_namespace("data-magellan-arrival")+"]");o.not(n.arrival).removeClass(g.active_class);n.arrival.addClass(g.active_class);h=true;return true}});if(!h){j.removeClass(g.active_class)}})},offsets:function(i,e){var f=this,g=i.data(f.attr_name(true)+"-init"),h=e;return i.find("["+f.add_namespace("data-magellan-arrival")+"]").map(function(j,o){var n=c(this).data(f.data_attr("magellan-arrival")),l=c("["+f.add_namespace("data-magellan-destination")+"="+n+"]");if(l.length>0){var k=l.offset().top-g.destination_threshold-i.outerHeight();return{destination:l,arrival:c(this),top_offset:k,viewport_offset:h}}}).sort(function(k,j){if(k.top_offset<j.top_offset){return -1}if(k.top_offset>j.top_offset){return 1}return 0})},data_attr:function(e){if(this.namespace.length>0){return this.namespace+"-"+e}return e},off:function(){this.S(this.scope).off(".magellan");this.S(b).off(".magellan")},reflow:function(){var e=this;c("["+e.add_namespace("data-magellan-expedition-clone")+"]",e.scope).remove()}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.offcanvas={name:"offcanvas",version:"5.2.3",settings:{open_method:"move",close_on_click:true},init:function(f,g,e){this.bindings(g,e)},events:function(){var f=this,h=f.S,g="",i="",e="";if(this.settings.open_method==="move"){g="move-";i="right";e="left"}else{if(this.settings.open_method==="overlap"){g="offcanvas-overlap"}}h(this.scope).off(".offcanvas").on("click.fndtn.offcanvas",".left-off-canvas-toggle",function(j){f.click_toggle_class(j,g+i)}).on("click.fndtn.offcanvas",".left-off-canvas-menu a",function(k){var j=f.get_settings(k);if(j.close_on_click){f.hide.call(f,g+i,f.get_wrapper(k))}}).on("click.fndtn.offcanvas",".right-off-canvas-toggle",function(j){f.click_toggle_class(j,g+e)}).on("click.fndtn.offcanvas",".right-off-canvas-menu a",function(k){var j=f.get_settings(k);if(j.close_on_click){f.hide.call(f,g+e,f.get_wrapper(k))}}).on("click.fndtn.offcanvas",".exit-off-canvas",function(j){f.click_remove_class(j,g+e);if(i){f.click_remove_class(j,g+i)}})},toggle:function(f,e){e=e||this.get_wrapper();if(e.is("."+f)){this.hide(f,e)}else{this.show(f,e)}},show:function(f,e){e=e||this.get_wrapper();e.trigger("open");e.addClass(f)},hide:function(f,e){e=e||this.get_wrapper();e.trigger("close");e.removeClass(f)},click_toggle_class:function(h,g){h.preventDefault();var f=this.get_wrapper(h);this.toggle(g,f)},click_remove_class:function(h,g){h.preventDefault();var f=this.get_wrapper(h);this.hide(g,f)},get_settings:function(g){var f=this.S(g.target).closest("["+this.attr_name()+"]");return f.data(this.attr_name(true)+"-init")||this.settings},get_wrapper:function(g){var f=this.S(g?g.target:this.scope).closest(".off-canvas-wrap");if(f.length===0){f=this.S(".off-canvas-wrap")}return f},reflow:function(){}}}(jQuery,window,window.document));(function(f,e,b,h){var d=function(){};var g=function(o,p){if(o.hasClass(p.slides_container_class)){return this}var t=this,j,i=o,u,s,l,r=0,k,q=false,n=i.find("."+p.active_slide_class).length>0;t.cache={};t.slides=function(){return i.children(p.slide_selector)};if(!n){t.slides().first().addClass(p.active_slide_class)}t.update_slide_number=function(v){if(p.slide_number){u.find("span:first").text(parseInt(v)+1);u.find("span:last").text(t.slides().length)}if(p.bullets){s.children().removeClass(p.bullets_active_class);f(s.children().get(v)).addClass(p.bullets_active_class)}};t.update_active_link=function(v){var w=f('[data-orbit-link="'+t.slides().eq(v).attr("data-orbit-slide")+'"]');w.siblings().removeClass(p.bullets_active_class);w.addClass(p.bullets_active_class)};t.build_markup=function(){i.wrap('<div class="'+p.container_class+'"></div>');j=i.parent();i.addClass(p.slides_container_class);i.addClass(p.animation);if(p.stack_on_small){j.addClass(p.stack_on_small_class)}if(p.navigation_arrows){j.append(f('<a href="#"><span></span></a>').addClass(p.prev_class));j.append(f('<a href="#"><span></span></a>').addClass(p.next_class))}if(p.timer){l=f("<div>").addClass(p.timer_container_class);l.append("<span>");if(p.timer_show_progress_bar){l.append(f("<div>").addClass(p.timer_progress_class))}l.addClass(p.timer_paused_class);j.append(l)}if(p.slide_number){u=f("<div>").addClass(p.slide_number_class);u.append("<span></span> "+p.slide_number_text+" <span></span>");j.append(u)}if(p.bullets){s=f("<ol>").addClass(p.bullets_container_class);j.append(s);s.wrap('<div class="orbit-bullets-container"></div>');t.slides().each(function(v,x){var w=f("<li>").attr("data-orbit-slide",v).on("click",t.link_bullet);s.append(w)})}};t._prepare_direction=function(A,w){var v="next";if(A<=r){v="prev"}if(p.animation==="slide"){setTimeout(function(){i.removeClass("swipe-prev swipe-next");if(v==="next"){i.addClass("swipe-next")}else{if(v==="prev"){i.addClass("swipe-prev")}}},0)}var y=t.slides();if(A>=y.length){if(!p.circular){return false}A=0}else{if(A<0){if(!p.circular){return false}A=y.length-1}}var z=f(y.get(r)),x=f(y.get(A));return[v,z,x,A]};t._goto=function(C,x){if(C===null){return false}if(t.cache.animating){return false}if(C===r){return false}if(typeof t.cache.timer==="object"){t.cache.timer.restart()}var v=t.slides();t.cache.animating=true;var B=t._prepare_direction(C),w=B[0],A=B[1],y=B[2],C=B[3];if(B===false){return false}i.trigger("before-slide-change.fndtn.orbit");p.before_slide_change();r=C;A.css("transitionDuration",p.animation_speed+"ms");y.css("transitionDuration",p.animation_speed+"ms");var D=function(){var E=function(){if(x===true){t.cache.timer.restart()}t.update_slide_number(r);y.removeClass("animate-in");y.addClass(p.active_slide_class);t.update_active_link(C);i.trigger("after-slide-change.fndtn.orbit",[{slide_number:r,total_slides:v.length}]);p.after_slide_change(r,v.length);setTimeout(function(){t.cache.animating=false},100)};if(i.height()!=y.height()&&p.variable_height){i.animate({"min-height":y.height()},250,"linear",E)}else{E()}};if(v.length===1){D();return false}var z=function(){if(w==="next"){k.next(A,y,D)}if(w==="prev"){k.prev(A,y,D)}};if(y.height()>i.height()&&p.variable_height){i.animate({"min-height":y.height()},250,"linear",z)}else{z()}};t.next=function(v){v.stopImmediatePropagation();v.preventDefault();t._prepare_direction(r+1);setTimeout(function(){t._goto(r+1)},100)};t.prev=function(v){v.stopImmediatePropagation();v.preventDefault();t._prepare_direction(r-1);setTimeout(function(){t._goto(r-1)},100)};t.link_custom=function(x){x.preventDefault();var w=f(this).attr("data-orbit-link");if((typeof w==="string")&&(w=f.trim(w))!=""){var v=j.find("[data-orbit-slide="+w+"]");if(v.index()!=-1){setTimeout(function(){t._goto(v.index())},100)}}};t.link_bullet=function(x){var w=f(this).attr("data-orbit-slide");if((typeof w==="string")&&(w=f.trim(w))!=""){if(isNaN(parseInt(w))){var v=j.find("[data-orbit-slide="+w+"]");if(v.index()!=-1){w=v.index()+1;t._prepare_direction(w);setTimeout(function(){t._goto(w)},100)}}else{w=parseInt(w);t._prepare_direction(w);setTimeout(function(){t._goto(w)},100)}}};t.timer_callback=function(){t._goto(r+1,true)};t.compute_dimensions=function(){var w=f(t.slides().get(r));var v=w.height();if(!p.variable_height){t.slides().each(function(){if(f(this).height()>v){v=f(this).height()}})}i.css("minHeight",String(v)+"px")};t.create_timer=function(){var v=new c(j.find("."+p.timer_container_class),p,t.timer_callback);return v};t.stop_timer=function(){if(typeof t.cache.timer==="object"){t.cache.timer.stop()}};t.toggle_timer=function(){var v=j.find("."+p.timer_container_class);if(v.hasClass(p.timer_paused_class)){if(typeof t.cache.timer==="undefined"){t.cache.timer=t.create_timer()}t.cache.timer.start()}else{if(typeof t.cache.timer==="object"){t.cache.timer.stop()}}};t.init=function(){t.build_markup();if(p.timer){t.cache.timer=t.create_timer();Foundation.utils.image_loaded(this.slides().find("img"),t.cache.timer.start)}k=new a(p,i);if(n){var v=i.find("."+p.active_slide_class),x=p.animation_speed;p.animation_speed=1;v.removeClass("active");t._goto(v.index());p.animation_speed=x}j.on("click","."+p.next_class,t.next);j.on("click","."+p.prev_class,t.prev);if(p.next_on_click){j.on("click","."+p.slides_container_class+" [data-orbit-slide]",t.link_bullet)}j.on("click",t.toggle_timer);if(p.swipe){i.on("touchstart.fndtn.orbit",function(y){if(t.cache.animating){return}if(!y.touches){y=y.originalEvent}y.preventDefault();y.stopPropagation();t.cache.start_page_x=y.touches[0].pageX;t.cache.start_page_y=y.touches[0].pageY;t.cache.start_time=(new Date()).getTime();t.cache.delta_x=0;t.cache.is_scrolling=null;t.cache.direction=null;t.stop_timer()}).on("touchmove.fndtn.orbit",function(y){if(Math.abs(t.cache.delta_x)>5){y.preventDefault();y.stopPropagation()}if(t.cache.animating){return}requestAnimationFrame(function(){if(!y.touches){y=y.originalEvent}if(y.touches.length>1||y.scale&&y.scale!==1){return}t.cache.delta_x=y.touches[0].pageX-t.cache.start_page_x;if(t.cache.is_scrolling===null){t.cache.is_scrolling=!!(t.cache.is_scrolling||Math.abs(t.cache.delta_x)<Math.abs(y.touches[0].pageY-t.cache.start_page_y))}if(t.cache.is_scrolling){return}var B=(t.cache.delta_x<0)?(r+1):(r-1);if(t.cache.direction!==B){var z=t._prepare_direction(B);t.cache.direction=B;t.cache.dir=z[0];t.cache.current=z[1];t.cache.next=z[2]}if(p.animation==="slide"){var C,A;C=(t.cache.delta_x/j.width())*100;if(C>=0){A=-(100-C)}else{A=100+C}t.cache.current.css("transform","translate3d("+C+"%,0,0)");t.cache.next.css("transform","translate3d("+A+"%,0,0)")}})}).on("touchend.fndtn.orbit",function(y){if(t.cache.animating){return}y.preventDefault();y.stopPropagation();setTimeout(function(){t._goto(t.cache.direction)},50)})}j.on("mouseenter.fndtn.orbit",function(y){if(p.timer&&p.pause_on_hover){t.stop_timer()}}).on("mouseleave.fndtn.orbit",function(y){if(p.timer&&p.resume_on_mouseout){t.cache.timer.start()}});f(b).on("click","[data-orbit-link]",t.link_custom);f(e).on("load resize",t.compute_dimensions);var w=this.slides().find("img");Foundation.utils.image_loaded(w,t.compute_dimensions);Foundation.utils.image_loaded(w,function(){j.prev("."+p.preloader_class).css("display","none");t.update_slide_number(r);t.update_active_link(r);i.trigger("ready.fndtn.orbit")})};t.init()};var c=function(k,n,r){var s=this,o=n.timer_speed,i=k.find("."+n.timer_progress_class),p=i&&i.css("display")!="none",j,q,l=-1;this.update_progress=function(t){var u=i.clone();u.attr("style","");u.css("width",t+"%");i.replaceWith(u);i=u};this.restart=function(){clearTimeout(q);k.addClass(n.timer_paused_class);l=-1;if(p){s.update_progress(0)}s.start()};this.start=function(){if(!k.hasClass(n.timer_paused_class)){return true}l=(l===-1)?o:l;k.removeClass(n.timer_paused_class);if(p){j=new Date().getTime();i.animate({width:"100%"},l,"linear")}q=setTimeout(function(){s.restart();r()},l);k.trigger("timer-started.fndtn.orbit")};this.stop=function(){if(k.hasClass(n.timer_paused_class)){return true}clearTimeout(q);k.addClass(n.timer_paused_class);if(p){var u=new Date().getTime();l=l-(u-j);var t=100-((l/o)*100);s.update_progress(t)}k.trigger("timer-stopped.fndtn.orbit")}};var a=function(j,i){var k="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";this.next=function(n,l,o){if(Modernizr.csstransitions){l.on(k,function(p){l.unbind(k);n.removeClass("active animate-out");i.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""});o()})}else{setTimeout(function(){n.removeClass("active animate-out");i.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""});o()},j.animation_speed)}i.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""});n.addClass("animate-out");l.addClass("animate-in")};this.prev=function(n,l,o){if(Modernizr.csstransitions){l.on(k,function(p){l.unbind(k);n.removeClass("active animate-out");i.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""});o()})}else{setTimeout(function(){n.removeClass("active animate-out");i.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""});o()},j.animation_speed)}i.children().css({transform:"","-ms-transform":"","-webkit-transition-duration":"","-moz-transition-duration":"","-o-transition-duration":"","transition-duration":""});n.addClass("animate-out");l.addClass("animate-in")}};Foundation.libs=Foundation.libs||{};Foundation.libs.orbit={name:"orbit",version:"5.2.3",settings:{animation:"slide",timer_speed:10000,pause_on_hover:true,resume_on_mouseout:false,next_on_click:true,animation_speed:500,stack_on_small:false,navigation_arrows:true,slide_number:true,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",timer_show_progress_bar:true,slides_container_class:"orbit-slides-container",preloader_class:"preloader",slide_selector:"*",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:true,circular:true,timer:true,variable_height:false,swipe:true,before_slide_change:d,after_slide_change:d},init:function(k,l,j){var i=this;this.bindings(l,j)},events:function(i){var k=this;var j=new g(this.S(i),this.S(i).data("orbit-init"));this.S(i).data(k.name+"-instance",j)},reflow:function(){var j=this;if(j.S(j.scope).is("[data-orbit]")){var k=j.S(j.scope);var i=k.data(j.name+"-instance");i.compute_dimensions()}else{j.S("[data-orbit]",j.scope).each(function(n,p){var o=j.S(p);var q=j.data_options(o);var l=o.data(j.name+"-instance");l.compute_dimensions()})}}}}(jQuery,window,window.document));(function(d,c,a,e){Foundation.libs.reveal={name:"reveal",version:"5.2.3",locked:false,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:true,close_on_esc:true,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:d(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(g,h,f){d.extend(true,this.settings,h,f);this.bindings(h,f)},events:function(h){var f=this,g=f.S;g(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(l){l.preventDefault();if(!f.locked){var j=g(this),k=j.data(f.data_attr("reveal-ajax"));f.locked=true;if(typeof k==="undefined"){f.open.call(f,j)}else{var i=k===true?j.attr("href"):k;f.open.call(f,j,{url:i})}}});g(a).on("touchend.fndtn.reveal click.fndtn.reveal",this.close_targets(),function(j){j.preventDefault();if(!f.locked){var i=g("["+f.attr_name()+"].open").data(f.attr_name(true)+"-init")||f.settings,k=g(j.target)[0]===g("."+i.bg_class)[0];if(k){if(i.close_on_background_click){j.stopPropagation()}else{return}}f.locked=true;f.close.call(f,k?g("["+f.attr_name()+"].open"):g(this).closest("["+f.attr_name()+"]"))}});if(g("["+f.attr_name()+"]",this.scope).length>0){g(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video)}else{g(this.scope).on("open.fndtn.reveal","["+f.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+f.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+f.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+f.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+f.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+f.attr_name()+"]",this.close_video)}return true},key_up_on:function(g){var f=this;f.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(j){var h=f.S("["+f.attr_name()+"].open"),i=h.data(f.attr_name(true)+"-init");if(i&&j.which===27&&i.close_on_esc&&!f.locked){f.close.call(f,h)}});return true},key_up_off:function(f){this.S("body").off("keyup.fndtn.reveal");return true},open:function(j,k){var g=this,i;if(j){if(typeof j.selector!=="undefined"){i=g.S("#"+j.data(g.data_attr("reveal-id"))).first()}else{i=g.S(this.scope);k=j}}else{i=g.S(this.scope)}var h=i.data(g.attr_name(true)+"-init");h=h||this.settings;if(!i.hasClass("open")){var f=g.S("["+g.attr_name()+"].open");i.data("css-top",10);if(typeof i.data("css-top")==="undefined"){i.data("css-top",parseInt(i.css("top"),10)).data("offset",this.cache_offset(i))}this.key_up_on(i);i.trigger("open").trigger("open.fndtn.reveal");if(f.length<1){this.toggle_bg(i,true)}if(typeof k==="string"){k={url:k}}if(typeof k==="undefined"||!k.url){if(f.length>0){this.hide(f,h.css.close)}this.show(i,h.css.open)}else{var l=typeof k.success!=="undefined"?k.success:null;d.extend(k,{success:function(o,p,n){if(d.isFunction(l)){l(o,p,n)}i.html(o);g.S(i).foundation("section","reflow");g.S(i).children().foundation();if(f.length>0){g.hide(f,h.css.close)}g.show(i,h.css.open)}});d.ajax(k)}}},close:function(h){var h=h&&h.length?h:this.S(this.scope),g=this.S("["+this.attr_name()+"].open"),f=h.data(this.attr_name(true)+"-init")||this.settings;if(g.length>0){this.locked=true;this.key_up_off(h);h.trigger("close").trigger("close.fndtn.reveal");this.toggle_bg(h,false);this.hide(g,f.css.close,f)}},close_targets:function(){var f="."+this.settings.dismiss_modal_class;if(this.settings.close_on_background_click){return f+", ."+this.settings.bg_class}return f},toggle_bg:function(f,g){if(this.S("."+this.settings.bg_class).length===0){this.settings.bg=d("<div />",{"class":this.settings.bg_class}).appendTo("body").hide()}var h=this.settings.bg.filter(":visible").length>0;if(g!=h){if(g==e?h:!g){this.hide(this.settings.bg)}else{this.show(this.settings.bg)}}},show:function(g,i){if(i){var h=g.data(this.attr_name(true)+"-init")||this.settings,p=h.root_element;var n=d(c).width();var j=Math.round(n*0.8);i.width=j+"px";var f=parseInt(jQuery("#wpcontent").css("marginLeft"));i.left=(((n-j)/2)-f)+"px";i.margin=0;if(g.parent(p).length===0){var o=g.wrap('<div style="display: none;" />').parent();g.on("closed.fndtn.reveal.wrapped",function(){g.detach().appendTo(o);g.unwrap().unbind("closed.fndtn.reveal.wrapped")});g.detach().appendTo(p)}var l=b(h.animation);if(!l.animate){this.locked=false}if(l.pop){i.top=d(c).scrollTop()-g.data("offset")+"px";var k={top:d(c).scrollTop()+g.data("css-top")+"px",opacity:1};return setTimeout(function(){return g.css(i).animate(k,h.animation_speed,"linear",function(){this.locked=false;g.trigger("opened").trigger("opened.fndtn.reveal")}.bind(this)).addClass("open")}.bind(this),h.animation_speed/2)}if(l.fade){i.top=d(c).scrollTop()+g.data("css-top")+"px";var k={opacity:1};return setTimeout(function(){return g.css(i).animate(k,h.animation_speed,"linear",function(){this.locked=false;g.trigger("opened").trigger("opened.fndtn.reveal")}.bind(this)).addClass("open")}.bind(this),h.animation_speed/2)}return g.css(i).show().css({opacity:1}).addClass("open").trigger("opened").trigger("opened.fndtn.reveal")}var h=this.settings;if(b(h.animation).fade){return g.fadeIn(h.animation_speed/2)}this.locked=false;return g.show()},hide:function(j,h){if(h){var i=j.data(this.attr_name(true)+"-init");i=i||this.settings;var g=b(i.animation);if(!g.animate){this.locked=false}if(g.pop){var f={top:-d(c).scrollTop()-j.data("offset")+"px",opacity:0};return setTimeout(function(){return j.animate(f,i.animation_speed,"linear",function(){this.locked=false;j.css(h).trigger("closed").trigger("closed.fndtn.reveal")}.bind(this)).removeClass("open")}.bind(this),i.animation_speed/2)}if(g.fade){var f={opacity:0};return setTimeout(function(){return j.animate(f,i.animation_speed,"linear",function(){this.locked=false;j.css(h).trigger("closed").trigger("closed.fndtn.reveal")}.bind(this)).removeClass("open")}.bind(this),i.animation_speed/2)}return j.hide().css(h).removeClass("open").trigger("closed").trigger("closed.fndtn.reveal")}var i=this.settings;if(b(i.animation).fade){return j.fadeOut(i.animation_speed/2)}return j.hide()},close_video:function(h){var g=d(".flex-video",h.target),f=d("iframe",g);if(f.length>0){f.attr("data-src",f[0].src);f.attr("src","about:blank");g.hide()}},open_video:function(h){var g=d(".flex-video",h.target),f=g.find("iframe");if(f.length>0){var j=f.attr("data-src");if(typeof j==="string"){f[0].src=f.attr("data-src")}else{var i=f[0].src;f[0].src=e;f[0].src=i}g.show()}},data_attr:function(f){if(this.namespace.length>0){return this.namespace+"-"+f}return f},cache_offset:function(f){var g=f.show().height()+parseInt(f.css("top"),10);f.hide();return g},off:function(){d(this.scope).off(".fndtn.reveal")},reflow:function(){}};function b(h){var g=/fade/i.test(h);var f=/pop/i.test(h);return{animate:g||f,pop:f,fade:g}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.slider={name:"slider",version:"5.2.3",settings:{start:0,end:100,step:1,initial:null,display_selector:"",on_change:function(){}},cache:{},init:function(f,g,e){Foundation.inherit(this,"throttle");this.bindings(g,e);this.reflow()},events:function(){var e=this;c(this.scope).off(".slider").on("mousedown.fndtn.slider touchstart.fndtn.slider pointerdown.fndtn.slider","["+e.attr_name()+"] .range-slider-handle",function(f){if(!e.cache.active){f.preventDefault();e.set_active_slider(c(f.target))}}).on("mousemove.fndtn.slider touchmove.fndtn.slider pointermove.fndtn.slider",function(f){if(!!e.cache.active){f.preventDefault();e.calculate_position(e.cache.active,f.pageX||f.originalEvent.clientX||f.originalEvent.touches[0].clientX||f.currentPoint.x)}}).on("mouseup.fndtn.slider touchend.fndtn.slider pointerup.fndtn.slider",function(f){e.remove_active_slider()}).on("change.fndtn.slider",function(f){e.settings.on_change()});e.S(b).on("resize.fndtn.slider",e.throttle(function(f){e.reflow()},300))},set_active_slider:function(e){this.cache.active=e},remove_active_slider:function(){this.cache.active=null},calculate_position:function(l,j){var f=this,h=c.extend({},f.settings,f.data_options(l.parent())),g=c.data(l[0],"handle_w"),e=c.data(l[0],"handle_o"),k=c.data(l[0],"bar_w"),i=c.data(l[0],"bar_o");requestAnimationFrame(function(){var o;if(Foundation.rtl){o=f.limit_to(((i+k-j)/k),0,1)}else{o=f.limit_to(((j-i)/k),0,1)}var n=f.normalized_value(o,h.start,h.end,h.step);f.set_ui(l,n)})},set_ui:function(l,g){var f=c.extend({},this.settings,this.data_options(l.parent())),e=c.data(l[0],"handle_w"),k=c.data(l[0],"bar_w"),i=this.normalized_percentage(g,f.start,f.end),h=i*(k-e)-1,j=i*100;if(Foundation.rtl){h=-h}this.set_translate(l,h);l.siblings(".range-slider-active-segment").css("width",j+"%");l.parent().attr(this.attr_name(),g);l.parent().trigger("change");l.parent().children("input[type=hidden]").val(g);if(f.input_id!=""){c(f.display_selector).each(function(){if(this.hasOwnProperty("value")){c(this).val(g)}else{c(this).text(g)}})}},normalized_percentage:function(f,g,e){return(f-g)/(e-g)},normalized_value:function(f,e,h,g){var i=h-e,k=f*i,j=(k-(k%g))/g,l=k%g,n=(l>=g*0.5?g:0);return(j*g+n)+e},set_translate:function(f,g,e){if(e){c(f).css("-webkit-transform","translateY("+g+"px)").css("-moz-transform","translateY("+g+"px)").css("-ms-transform","translateY("+g+"px)").css("-o-transform","translateY("+g+"px)").css("transform","translateY("+g+"px)")}else{c(f).css("-webkit-transform","translateX("+g+"px)").css("-moz-transform","translateX("+g+"px)").css("-ms-transform","translateX("+g+"px)").css("-o-transform","translateX("+g+"px)").css("transform","translateX("+g+"px)")}},limit_to:function(g,f,e){return Math.min(Math.max(g,f),e)},initialize_settings:function(e){c.data(e,"bar",c(e).parent());c.data(e,"bar_o",c(e).parent().offset().left);c.data(e,"bar_w",c(e).parent().outerWidth());c.data(e,"handle_o",c(e).offset().left);c.data(e,"handle_w",c(e).outerWidth());c.data(e,"settings",c.extend({},this.settings,this.data_options(c(e).parent())))},set_initial_position:function(g){var f=c.data(g.children(".range-slider-handle")[0],"settings"),e=(!!f.initial?f.initial:Math.floor((f.end-f.start)*0.5/f.step)*f.step+f.start),h=g.children(".range-slider-handle");this.set_ui(h,e)},set_value:function(f){var e=this;c("["+e.attr_name()+"]",this.scope).each(function(){c(this).attr(e.attr_name(),f)});if(!!c(this.scope).attr(e.attr_name())){c(this.scope).attr(e.attr_name(),f)}e.reflow()},reflow:function(){var e=this;e.S("["+this.attr_name()+"]").each(function(){var f=c(this).children(".range-slider-handle")[0],g=c(this).attr(e.attr_name());e.initialize_settings(f);if(g){e.set_ui(c(f),parseFloat(g))}else{e.set_initial_position(c(this))}})}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.tab={name:"tab",version:"5.2.3",settings:{active_class:"active",callback:function(){},deep_linking:false,scroll_to_content:true,is_hover:false},default_tab_hashes:[],init:function(h,i,f){var e=this,g=this.S;this.bindings(i,f);this.handle_location_hash_change();g("["+this.attr_name()+"] > .active > a",this.scope).each(function(){e.default_tab_hashes.push(this.hash)})},events:function(){var e=this,f=this.S;f(this.scope).off(".tab").on("click.fndtn.tab","["+this.attr_name()+"] > * > a",function(h){var g=f(this).closest("["+e.attr_name()+"]").data(e.attr_name(true)+"-init");if(!g.is_hover||Modernizr.touch){h.preventDefault();h.stopPropagation();e.toggle_active_tab(f(this).parent())}}).on("mouseenter.fndtn.tab","["+this.attr_name()+"] > * > a",function(h){var g=f(this).closest("["+e.attr_name()+"]").data(e.attr_name(true)+"-init");if(g.is_hover){e.toggle_active_tab(f(this).parent())}});f(b).on("hashchange.fndtn.tab",function(g){g.preventDefault();e.handle_location_hash_change()})},handle_location_hash_change:function(){var e=this,f=this.S;f("["+this.attr_name()+"]",this.scope).each(function(){var i=f(this).data(e.attr_name(true)+"-init");if(i.deep_linking){var k=e.scope.location.hash;if(k!=""){var h=f(k);if(h.hasClass("content")&&h.parent().hasClass("tab-content")){e.toggle_active_tab(c("["+e.attr_name()+"] > * > a[href="+k+"]").parent())}else{var g=h.closest(".content").attr("id");if(g!=d){e.toggle_active_tab(c("["+e.attr_name()+"] > * > a[href=#"+g+"]").parent(),k)}}}else{for(var j in e.default_tab_hashes){e.toggle_active_tab(c("["+e.attr_name()+"] > * > a[href="+e.default_tab_hashes[j]+"]").parent())}}}})},toggle_active_tab:function(e,i){var g=this.S,l=e.closest("["+this.attr_name()+"]"),h=e.children("a").first(),o="#"+h.attr("href").split("#")[1],j=g(o),n=e.siblings(),f=l.data(this.attr_name(true)+"-init");if(g(this).data(this.data_attr("tab-content"))){o="#"+g(this).data(this.data_attr("tab-content")).split("#")[1];j=g(o)}if(f.deep_linking){var k=c("body,html").scrollTop();if(i!=d){b.location.hash=i}else{b.location.hash=o}if(f.scroll_to_content){if(i==d||i==o){e.parent()[0].scrollIntoView()}else{g(o)[0].scrollIntoView()}}else{if(i==d||i==o){c("body,html").scrollTop(k)}}}e.addClass(f.active_class).triggerHandler("opened");n.removeClass(f.active_class);j.siblings().removeClass(f.active_class).end().addClass(f.active_class);f.callback(e);j.triggerHandler("toggled",[e]);l.triggerHandler("toggled",[j])},data_attr:function(e){if(this.namespace.length>0){return this.namespace+"-"+e}return e},off:function(){},reflow:function(){}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.tooltip={name:"tooltip",version:"5.2.3",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"#interface",touch_close_text:"Tap To Close",disable_for_touch:false,hover_delay:200,show_on:"all",tip_template:function(e,f){return'<span data-selector="'+e+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'">'+f+'<span class="nub"></span></span>'}},cache:{},init:function(f,g,e){Foundation.inherit(this,"random_str");this.bindings(g,e)},should_show:function(g,f){var e=c.extend({},this.settings,this.data_options(g));if(e.show_on==="all"){return true}else{if(this.small()&&e.show_on==="small"){return true}else{if(this.medium()&&e.show_on==="medium"){return true}else{if(this.large()&&e.show_on==="large"){return true}}}}return false},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},events:function(e){var f=this,g=f.S;f.create(this.S(e));c(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(k){var j=g(this),i=c.extend({},f.settings,f.data_options(j)),h=false;if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(k.type)&&g(k.target).is("a")){return false}if(/mouse/i.test(k.type)&&f.ie_touch(k)){return false}if(j.hasClass("open")){if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(k.type)){k.preventDefault()}f.hide(j)}else{if(i.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(k.type)){return}else{if(!i.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(k.type)){k.preventDefault();g(i.tooltip_class+".open").hide();h=true}}if(/enter|over/i.test(k.type)){this.timer=setTimeout(function(){var l=f.showTip(j)}.bind(this),f.settings.hover_delay)}else{if(k.type==="mouseout"||k.type==="mouseleave"){clearTimeout(this.timer);f.hide(j)}else{f.showTip(j)}}}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(h){if(/mouse/i.test(h.type)&&f.ie_touch(h)){return false}if(c(this).data("tooltip-open-event-type")=="touch"&&h.type=="mouseleave"){return}else{if(c(this).data("tooltip-open-event-type")=="mouse"&&/MSPointerDown|touchstart/i.test(h.type)){f.convert_to_touch(c(this))}else{f.hide(c(this))}}}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(h){f.hide(g(this))})},ie_touch:function(f){return false},showTip:function(e){var f=this.getTip(e);if(this.should_show(e,f)){return this.show(e)}return},getTip:function(f){var e=this.selector(f),g=c.extend({},this.settings,this.data_options(f)),h=null;if(e){h=this.S('span[data-selector="'+e+'"]'+g.tooltip_class)}return(typeof h==="object")?h:false},selector:function(e){var g=e.attr("id"),f=e.attr(this.attr_name())||e.attr("data-selector");if((g&&g.length<1||!g)&&typeof f!="string"){f=this.random_str(6);e.attr("data-selector",f)}return(g&&g.length>0)?g:f},create:function(e){var g=this,i=c.extend({},this.settings,this.data_options(e)),f=this.settings.tip_template;if(typeof i.tip_template==="string"&&b.hasOwnProperty(i.tip_template)){f=b[i.tip_template]}var j=c(f(this.selector(e),c("<div></div>").html(e.attr("title")).html())),h=this.inheritable_classes(e);j.addClass(h).appendTo(i.append_to);if(Modernizr.touch){j.append('<span class="tap-to-close">'+i.touch_close_text+"</span>");j.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(k){g.hide(e)})}e.removeAttr("title").attr("title","")},reposition:function(j,o,h){var e,p,l,i,g,k;o.css("visibility","hidden").show();e=j.data("width");p=o.children(".nub");l=p.outerHeight();i=p.outerHeight();if(this.small()){o.css({width:"100%"})}else{o.css({width:(e)?e:"auto"})}k=function(v,u,r,q,t,s){return v.css({top:(u)?u:"auto",bottom:(q)?q:"auto",left:(t)?t:"auto",right:(r)?r:"auto"}).end()};k(o,(j.offset().top+j.outerHeight()+10),"auto","auto",j.offset().left);if(this.small()){k(o,(j.offset().top+j.outerHeight()+10),"auto","auto",12.5,c(this.scope).width());o.addClass("tip-override");k(p,-l,"auto","auto",j.offset().left)}else{var f=j.offset().left;if(Foundation.rtl){p.addClass("rtl");f=j.offset().left+j.outerWidth()-o.outerWidth()}k(o,(j.offset().top+j.outerHeight()+10),"auto","auto",f);o.removeClass("tip-override");if(h&&h.indexOf("tip-top")>-1){if(Foundation.rtl){p.addClass("rtl")}k(o,(j.offset().top-o.outerHeight()),"auto","auto",f).removeClass("tip-override")}else{if(h&&h.indexOf("tip-left")>-1){k(o,(j.offset().top+(j.outerHeight()/2)-(o.outerHeight()/2)),"auto","auto",(j.offset().left-o.outerWidth()-l)).removeClass("tip-override");p.removeClass("rtl")}else{if(h&&h.indexOf("tip-right")>-1){var n=(j.offset().top+(j.outerHeight()/2)-(o.outerHeight()/2)),f=(j.offset().left+j.outerWidth()+l);if(c("#interface").offset()){n-=c("#interface").offset().top;f-=c("#interface").offset().left}k(o,n,"auto","auto",f).removeClass("tip-override");p.removeClass("rtl")}}}}o.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},inheritable_classes:function(e){var h=c.extend({},this.settings,this.data_options(e)),i=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(h.additional_inheritable_classes),g=e.attr("class"),f=g?c.map(g.split(" "),function(k,j){if(c.inArray(k,i)!==-1){return k}}).join(" "):"";return c.trim(f)},convert_to_touch:function(e){var f=this,h=f.getTip(e),g=c.extend({},f.settings,f.data_options(e));if(h.find(".tap-to-close").length===0){h.append('<span class="tap-to-close">'+g.touch_close_text+"</span>");h.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(i){f.hide(e)})}e.data("tooltip-open-event-type","touch")},show:function(e){var f=this.getTip(e);if(e.data("tooltip-open-event-type")=="touch"){this.convert_to_touch(e)}this.reposition(e,f,e.attr("class"));e.addClass("open");f.fadeIn(150)},hide:function(e){var f=this.getTip(e);f.fadeOut(150,function(){f.find(".tap-to-close").remove();f.off("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose");e.removeClass("open")})},off:function(){var e=this;this.S(this.scope).off(".fndtn.tooltip");this.S(this.settings.tooltip_class).each(function(f){c("["+e.attr_name()+"]").eq(f).attr("title",c(this).text())}).remove()},reflow:function(){}}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.topbar={name:"topbar",version:"5.2.3",settings:{index:0,sticky_class:"sticky",custom_back_text:true,back_text:"Back",is_hover:true,mobile_show_parent_link:false,scrolltop:true,sticky_on:"all"},init:function(g,h,f){Foundation.inherit(this,"add_custom_rule register_media throttle");var e=this;e.register_media("topbar","foundation-mq-topbar");this.bindings(h,f);e.S("["+this.attr_name()+"]",this.scope).each(function(){var i=c(this),j=i.data(e.attr_name(true)+"-init"),l=e.S("section",this);i.data("index",0);var k=i.parent();if(k.hasClass("fixed")||e.is_sticky(i,k,j)){e.settings.sticky_class=j.sticky_class;e.settings.sticky_topbar=i;i.data("height",k.outerHeight());i.data("stickyoffset",k.offset().top)}else{i.data("height",i.outerHeight())}if(!j.assembled){e.assemble(i)}if(j.is_hover){e.S(".has-dropdown",i).addClass("not-click")}else{e.S(".has-dropdown",i).removeClass("not-click")}e.add_custom_rule(".f-topbar-fixed { padding-top: "+i.data("height")+"px }");if(k.hasClass("fixed")){e.S("body").addClass("f-topbar-fixed")}})},is_sticky:function(e,g,f){var h=g.hasClass(f.sticky_class);if(h&&f.sticky_on==="all"){return true}else{if(h&&this.small()&&f.sticky_on==="small"){return true}else{if(h&&this.medium()&&f.sticky_on==="medium"){return true}else{if(h&&this.large()&&f.sticky_on==="large"){return true}}}}return false},toggle:function(e){var g=this,f;if(e){f=g.S(e).closest("["+this.attr_name()+"]")}else{f=g.S("["+this.attr_name()+"]")}var h=f.data(this.attr_name(true)+"-init");var i=g.S("section, .section",f);if(g.breakpoint()){if(!g.rtl){i.css({left:"0%"});c(">.name",i).css({left:"100%"})}else{i.css({right:"0%"});c(">.name",i).css({right:"100%"})}g.S("li.moved",i).removeClass("moved");f.data("index",0);f.toggleClass("expanded").css("height","")}if(h.scrolltop){if(!f.hasClass("expanded")){if(f.hasClass("fixed")){f.parent().addClass("fixed");f.removeClass("fixed");g.S("body").addClass("f-topbar-fixed")}}else{if(f.parent().hasClass("fixed")){if(h.scrolltop){f.parent().removeClass("fixed");f.addClass("fixed");g.S("body").removeClass("f-topbar-fixed");b.scrollTo(0,0)}else{f.parent().removeClass("expanded")}}}}else{if(g.is_sticky(f,f.parent(),h)){f.parent().addClass("fixed")}if(f.parent().hasClass("fixed")){if(!f.hasClass("expanded")){f.removeClass("fixed");f.parent().removeClass("expanded");g.update_sticky_positioning()}else{f.addClass("fixed");f.parent().addClass("expanded");g.S("body").addClass("f-topbar-fixed")}}}},timer:null,events:function(g){var e=this,f=this.S;f(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(h){h.preventDefault();e.toggle(this)}).on("click.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(i){var h=c(this).closest("li");if(e.breakpoint()&&!h.hasClass("back")&&!h.hasClass("has-dropdown")){e.toggle()}}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(l){var h=f(this),k=f(l.target),i=h.closest("["+e.attr_name()+"]"),j=i.data(e.attr_name(true)+"-init");if(k.data("revealId")){e.toggle();return}if(e.breakpoint()){return}if(j.is_hover&&!Modernizr.touch){return}l.stopImmediatePropagation();if(h.hasClass("hover")){h.removeClass("hover").find("li").removeClass("hover");h.parents("li.hover").removeClass("hover")}else{h.addClass("hover");c(h).siblings().removeClass("hover");if(k[0].nodeName==="A"&&k.parent().hasClass("has-dropdown")){l.preventDefault()}}}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(n){if(e.breakpoint()){n.preventDefault();var l=f(this),i=l.closest("["+e.attr_name()+"]"),k=i.find("section, .section"),j=l.next(".dropdown").outerHeight(),h=l.closest("li");i.data("index",i.data("index")+1);h.addClass("moved");if(!e.rtl){k.css({left:-(100*i.data("index"))+"%"});k.find(">.name").css({left:100*i.data("index")+"%"})}else{k.css({right:-(100*i.data("index"))+"%"});k.find(">.name").css({right:100*i.data("index")+"%"})}i.css("height",l.siblings("ul").outerHeight(true)+i.data("height"))}});f(b).off(".topbar").on("resize.fndtn.topbar",e.throttle(function(){e.resize.call(e)},50)).trigger("resize");f("body").off(".topbar").on("click.fndtn.topbar touchstart.fndtn.topbar",function(i){var h=f(i.target).closest("li").closest("li.hover");if(h.length>0){return}f("["+e.attr_name()+"] li.hover").removeClass("hover")});f(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(o){o.preventDefault();var n=f(this),i=n.closest("["+e.attr_name()+"]"),l=i.find("section, .section"),k=i.data(e.attr_name(true)+"-init"),j=n.closest("li.moved"),h=j.parent();i.data("index",i.data("index")-1);if(!e.rtl){l.css({left:-(100*i.data("index"))+"%"});l.find(">.name").css({left:100*i.data("index")+"%"})}else{l.css({right:-(100*i.data("index"))+"%"});l.find(">.name").css({right:100*i.data("index")+"%"})}if(i.data("index")===0){i.css("height","")}else{i.css("height",h.outerHeight(true)+i.data("height"))}setTimeout(function(){j.removeClass("moved")},300)})},resize:function(){var e=this;e.S("["+this.attr_name()+"]").each(function(){var g=e.S(this),i=g.data(e.attr_name(true)+"-init");var h=g.parent("."+e.settings.sticky_class);var j;if(!e.breakpoint()){var f=g.hasClass("expanded");g.css("height","").removeClass("expanded").find("li").removeClass("hover");if(f){e.toggle(g)}}if(e.is_sticky(g,h,i)){if(h.hasClass("fixed")){h.removeClass("fixed");j=h.offset().top;if(e.S(a.body).hasClass("f-topbar-fixed")){j-=g.data("height")}g.data("stickyoffset",j);h.addClass("fixed")}else{j=h.offset().top;g.data("stickyoffset",j)}}})},breakpoint:function(){return !matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(f){var e=this,g=f.data(this.attr_name(true)+"-init"),h=e.S("section",f);h.detach();e.S(".has-dropdown>a",h).each(function(){var i=e.S(this),l=i.siblings(".dropdown"),j=i.attr("href"),k;if(!l.find(".title.back").length){if(g.mobile_show_parent_link&&j&&j.length>1){k=c('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li><a class="parent-link js-generated" href="'+j+'">'+i.text()+"</a></li>")}else{k=c('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li>')}if(g.custom_back_text==true){c("h5>a",k).html(g.back_text)}else{c("h5>a",k).html("&laquo; "+i.html())}l.prepend(k)}});h.appendTo(f);this.sticky();this.assembled(f)},assembled:function(e){e.data(this.attr_name(true),c.extend({},e.data(this.attr_name(true)),{assembled:true}))},height:function(f){var g=0,e=this;c("> li",f).each(function(){g+=e.S(this).outerHeight(true)});return g},sticky:function(){var e=this;this.S(b).on("scroll",function(){e.update_sticky_positioning()})},update_sticky_positioning:function(){var e="."+this.settings.sticky_class,g=this.S(b),f=this;if(f.settings.sticky_topbar&&f.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var h=this.settings.sticky_topbar.data("stickyoffset");if(!f.S(e).hasClass("expanded")){if(g.scrollTop()>(h)){if(!f.S(e).hasClass("fixed")){f.S(e).addClass("fixed");f.S("body").addClass("f-topbar-fixed")}}else{if(g.scrollTop()<=h){if(f.S(e).hasClass("fixed")){f.S(e).removeClass("fixed");f.S("body").removeClass("f-topbar-fixed")}}}}}},off:function(){this.S(this.scope).off(".fndtn.topbar");this.S(b).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,this,this.document));jQuery(document).ready(function(){wx.makeApiCall("account/get_tier",{},function(a){if(a.tier_raw==2.1||a.tier_raw=="2.1"||a.tier_raw==100||a.tier_raw=="100"||a.tier_raw==200||a.tier_raw=="200"){wx.makeApiCall("account/get_expiry",{},function(e){if(e.expiry=="0000-00-00 00:00:00"){return}var f=new Date(e.expiry);var b=86400000;var c=f.getTime()-(new Date()).getTime();var g=c/b;g=Math.floor(g);if(g<0){jQuery("#account-expired").show();return}if(g<5){jQuery("#account-expiration-warning .secondary").addClass("alert").removeClass("secondary")}if(g==0){jQuery("#expiry-days").html("today!")}else{if(g==1){jQuery("#expiry-days").html("in one day.")}else{jQuery("#expiry-days").html("in "+g.toString()+" days.")}}jQuery("#account-expiration-warning").show()})}})});var qq=qq||{};qq.extend=function(b,a){for(var c in a){b[c]=a[c]}};qq.indexOf=function(b,c,d){if(b.indexOf){return b.indexOf(c,d)}d=d||0;var a=b.length;if(d<0){d+=a}for(;d<a;d++){if(d in b&&b[d]===c){return d}}return -1};qq.getUniqueId=(function(){var a=0;return function(){return a++}})();qq.attach=function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}};qq.detach=function(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{if(a.attachEvent){a.detachEvent("on"+c,b)}}};qq.preventDefault=function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};qq.insertBefore=function(d,c){c.parentNode.insertBefore(d,c)};qq.remove=function(a){a.parentNode.removeChild(a)};qq.contains=function(b,a){if(b==a){return true}if(b.contains){return b.contains(a)}else{return !!(a.compareDocumentPosition(b)&8)}};qq.toElement=(function(){var a=document.createElement("div");return function(c){a.innerHTML=c;var b=a.firstChild;a.removeChild(b);return b}})();qq.css=function(a,b){if(b.opacity!=null){if(typeof a.style.opacity!="string"&&typeof(a.filters)!="undefined"){b.filter="alpha(opacity="+Math.round(100*b.opacity)+")"}}qq.extend(a.style,b)};qq.hasClass=function(b,a){var c=new RegExp("(^| )"+a+"( |$)");return c.test(b.className)};qq.addClass=function(b,a){if(!qq.hasClass(b,a)){b.className+=" "+a}};qq.removeClass=function(b,a){var c=new RegExp("(^| )"+a+"( |$)");b.className=b.className.replace(c," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(a,b){a.innerText=b;a.textContent=b};qq.children=function(b){var a=[],c=b.firstChild;while(c){if(c.nodeType==1){a.push(c)}c=c.nextSibling}return a};qq.getByClass=function(d,e){if(d.querySelectorAll){return d.querySelectorAll("."+e)}var b=[];var f=d.getElementsByTagName("*");var a=f.length;for(var c=0;c<a;c++){if(qq.hasClass(f[c],e)){b.push(f[c])}}return b};qq.obj2url=function(f,b,h){var g=[],d="&",e=function(k,j){var l=b?(/\[\]$/.test(b))?b:b+"["+j+"]":j;if((l!="undefined")&&(j!="undefined")){g.push((typeof k==="object")?qq.obj2url(k,l,true):(Object.prototype.toString.call(k)==="[object Function]")?encodeURIComponent(l)+"="+encodeURIComponent(k()):encodeURIComponent(l)+"="+encodeURIComponent(k))}};if(!h&&b){d=(/\?/.test(b))?(/\?$/.test(b))?"":"&":"?";g.push(b);g.push(qq.obj2url(f))}else{if((Object.prototype.toString.call(f)==="[object Array]")&&(typeof f!="undefined")){for(var c=0,a=f.length;c<a;++c){e(f[c],c)}}else{if((typeof f!="undefined")&&(f!==null)&&(typeof f==="object")){for(var c in f){e(f[c],c)}}else{g.push(encodeURIComponent(b)+"="+encodeURIComponent(f))}}}return g.join(d).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(a){this._options={debug:false,action:"/server/upload",params:{},button:null,multiple:true,maxConnections:3,allowedExtensions:[],sizeLimit:5500000,minSizeLimit:0,onSubmit:function(c,b){},onProgress:function(e,d,b,c){},onComplete:function(d,c,b){},onCancel:function(c,b){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(b){alert(b)}};qq.extend(this._options,a);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button){this._button=this._createUploadButton(this._options.button)}this._preventLeaveInProgress()};qq.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(b){var a=this;return new qq.UploadButton({element:b,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(c){a._onInputChange(c)}})},_createUploadHandler:function(){var a=this,c;if(qq.UploadHandlerXhr.isSupported()){c="UploadHandlerXhr"}else{c="UploadHandlerForm"}var b=new qq[c]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(g,f,d,e){a._onProgress(g,f,d,e);a._options.onProgress(g,f,d,e)},onComplete:function(f,e,d){a._onComplete(f,e,d);a._options.onComplete(f,e,d)},onCancel:function(e,d){a._onCancel(e,d);a._options.onCancel(e,d)}});return b},_preventLeaveInProgress:function(){var a=this;qq.attach(window,"beforeunload",function(b){if(!a._filesInProgress){return}var b=b||window.event;b.returnValue=a._options.messages.onLeave;return a._options.messages.onLeave})},_onSubmit:function(b,a){this._filesInProgress++},_onProgress:function(d,c,a,b){},_onComplete:function(c,b,a){this._filesInProgress--;if(a.error){this._options.showMessage(a.error)}},_onCancel:function(b,a){this._filesInProgress--},_onInputChange:function(a){if(this._handler instanceof qq.UploadHandlerXhr){this._uploadFileList(a.files)}else{if(this._validateFile(a)){this._uploadFile(a)}}this._button.reset()},_uploadFileList:function(b){for(var a=0;a<b.length;a++){if(!this._validateFile(b[a])){return}}for(var a=0;a<b.length;a++){this._uploadFile(b[a])}},_uploadFile:function(a){var c=this._handler.add(a);var b=this._handler.getName(c);if(this._options.onSubmit(c,b)!==false){this._onSubmit(c,b);this._handler.upload(c,this._options.params)}},_validateFile:function(c){var a,b;if(c.value){a=c.value.replace(/.*(\/|\\)/,"")}else{a=c.fileName!=null?c.fileName:c.name;b=c.fileSize!=null?c.fileSize:c.size}if(!this._isAllowedExtension(a)){this._error("typeError",a);return false}else{if(b===0){this._error("emptyError",a);return false}else{if(b&&this._options.sizeLimit&&b>this._options.sizeLimit){this._error("sizeError",a);return false}else{if(b&&b<this._options.minSizeLimit){this._error("minSizeError",a);return false}}}}return true},_error:function(c,d){var b=this._options.messages[c];function a(e,f){b=b.replace(e,f)}a("{file}",this._formatFileName(d));a("{extensions}",this._options.allowedExtensions.join(", "));a("{sizeLimit}",this._formatSize(this._options.sizeLimit));a("{minSizeLimit}",this._formatSize(this._options.minSizeLimit));this._options.showMessage(b)},_formatFileName:function(a){if(a.length>33){a=a.slice(0,19)+"..."+a.slice(-13)}return a},_isAllowedExtension:function(d){var b=(-1!==d.indexOf("."))?d.replace(/.*[.]/,"").toLowerCase():"";var c=this._options.allowedExtensions;if(!c.length){return true}for(var a=0;a<c.length;a++){if(c[a].toLowerCase()==b){return true}}return false},_formatSize:function(a){var b=-1;do{a=a/1024;b++}while(a>99);return Math.max(a,0.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][b]}};qq.FileUploader=function(a){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><button class="qq-upload-button success expand radius">Upload image</button><div class="qq-upload-drop-area" style="display:none; width:0; height:0;"></div><ul class="qq-upload-list" style="display: none; width: 0; height: 0;"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"},callback:null});qq.extend(this._options,a);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._callback=this._options.callback;this._button=this._createUploadButton(this._find(this._element,"button"));this._bindCancelEvent();this._setupDragDrop()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);qq.extend(qq.FileUploader.prototype,{_find:function(c,b){var a=qq.getByClass(c,this._options.classes[b])[0];if(!a){throw new Error("element not found "+b)}return a},_setupDragDrop:function(){var b=this,c=this._find(this._element,"drop");var a=new qq.UploadDropZone({element:c,onEnter:function(d){qq.addClass(c,b._classes.dropActive);d.stopPropagation()},onLeave:function(d){d.stopPropagation()},onLeaveNotDescendants:function(d){qq.removeClass(c,b._classes.dropActive)},onDrop:function(d){c.style.display="none";qq.removeClass(c,b._classes.dropActive);b._uploadFileList(d.dataTransfer.files)}});c.style.display="none";qq.attach(document,"dragenter",function(d){if(!a._isValidFileDrag(d)){return}c.style.display="block"});qq.attach(document,"dragleave",function(f){if(!a._isValidFileDrag(f)){return}var d=document.elementFromPoint(f.clientX,f.clientY);if(!d||d.nodeName=="HTML"){c.style.display="none"}})},_onSubmit:function(b,a){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(b,a)},_onProgress:function(g,f,a,d){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var c=this._getItemByFileId(g);var b=this._find(c,"size");b.style.display="inline";var e;if(a!=d){e=Math.round(a/d*100)+"% from "+this._formatSize(d)}else{e=this._formatSize(d)}qq.setText(b,e)},_onComplete:function(d,c,a){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var b=this._getItemByFileId(d);qq.remove(this._find(b,"cancel"));qq.remove(this._find(b,"spinner"));if(a.success){qq.addClass(b,this._classes.success);this._callback(a.url)}else{qq.addClass(b,this._classes.fail)}},_addToList:function(d,c){var a=qq.toElement(this._options.fileTemplate);a.qqFileId=d;var b=this._find(a,"file");qq.setText(b,this._formatFileName(c));this._find(a,"size").style.display="none";this._listElement.appendChild(a)},_getItemByFileId:function(b){var a=this._listElement.firstChild;while(a){if(a.qqFileId==b){return a}a=a.nextSibling}},_bindCancelEvent:function(){var a=this,b=this._listElement;qq.attach(b,"click",function(f){f=f||window.event;var d=f.target||f.srcElement;if(qq.hasClass(d,a._classes.cancel)){qq.preventDefault(f);var c=d.parentNode;a._handler.cancel(c.qqFileId);qq.remove(c)}})}});qq.UploadDropZone=function(a){this._options={element:null,onEnter:function(b){},onLeave:function(b){},onLeaveNotDescendants:function(b){},onDrop:function(b){}};qq.extend(this._options,a);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};qq.UploadDropZone.prototype={_disableDropOutside:function(a){if(!qq.UploadDropZone.dropOutsideDisabled){qq.attach(document,"dragover",function(b){if(b.dataTransfer){b.dataTransfer.dropEffect="none";b.preventDefault()}});qq.UploadDropZone.dropOutsideDisabled=true}},_attachEvents:function(){var a=this;qq.attach(a._element,"dragover",function(c){if(!a._isValidFileDrag(c)){return}var b=c.dataTransfer.effectAllowed;if(b=="move"||b=="linkMove"){c.dataTransfer.dropEffect="move"}else{c.dataTransfer.dropEffect="copy"}c.stopPropagation();c.preventDefault()});qq.attach(a._element,"dragenter",function(b){if(!a._isValidFileDrag(b)){return}a._options.onEnter(b)});qq.attach(a._element,"dragleave",function(c){if(!a._isValidFileDrag(c)){return}a._options.onLeave(c);var b=document.elementFromPoint(c.clientX,c.clientY);if(qq.contains(this,b)){return}a._options.onLeaveNotDescendants(c)});qq.attach(a._element,"drop",function(b){if(!a._isValidFileDrag(b)){return}b.preventDefault();a._options.onDrop(b)})},_isValidFileDrag:function(c){var b=c.dataTransfer,a=navigator.userAgent.indexOf("AppleWebKit")>-1;return b&&b.effectAllowed!="none"&&(b.files||(!a&&b.types.contains&&b.types.contains("Files")))}};qq.UploadButton=function(a){this._options={element:null,multiple:false,name:"file",onChange:function(b){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,a);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){if(this._input.parentNode){qq.remove(this._input)}qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var b=document.createElement("input");if(this._options.multiple){b.setAttribute("multiple","multiple")}b.setAttribute("type","file");b.setAttribute("name",this._options.name);qq.css(b,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});this._element.appendChild(b);var a=this;qq.attach(b,"change",function(){a._options.onChange(b)});qq.attach(b,"mouseover",function(){qq.addClass(a._element,a._options.hoverClass)});qq.attach(b,"mouseout",function(){qq.removeClass(a._element,a._options.hoverClass)});qq.attach(b,"focus",function(){qq.addClass(a._element,a._options.focusClass)});qq.attach(b,"blur",function(){qq.removeClass(a._element,a._options.focusClass)});if(window.attachEvent){b.setAttribute("tabIndex","-1")}return b}};qq.UploadHandlerAbstract=function(a){this._options={debug:false,action:"/upload.php",maxConnections:999,onProgress:function(e,d,b,c){},onComplete:function(d,c,b){},onCancel:function(c,b){}};qq.extend(this._options,a);this._queue=[];this._params=[]};qq.UploadHandlerAbstract.prototype={log:function(a){},add:function(a){},upload:function(d,b){var a=this._queue.push(d);var c={};qq.extend(c,b);this._params[d]=c;if(a<=this._options.maxConnections){this._upload(d,this._params[d])}},cancel:function(a){this._cancel(a);this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++){this._cancel(this._queue[a])}this._queue=[]},getName:function(a){},getSize:function(a){},getQueue:function(){return this._queue},_upload:function(a){},_cancel:function(a){},_dequeue:function(d){var b=qq.indexOf(this._queue,d);this._queue.splice(b,1);var a=this._options.maxConnections;if(this._queue.length>=a&&b<a){var c=this._queue[a-1];this._upload(c,this._params[c])}}};qq.UploadHandlerForm=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[b]=a;if(a.parentNode){qq.remove(a)}return b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(b){this._options.onCancel(b,this.getName(b));delete this._inputs[b];var a=document.getElementById(b);if(a){a.setAttribute("src","javascript:false;");qq.remove(a)}},_upload:function(g,e){var b=this._inputs[g];if(!b){throw new Error("file with passed id was not added, or already uploaded or cancelled")}var f=this.getName(g);var c=this._createIframe(g);var d=this._createForm(c,e);d.appendChild(b);var a=this;this._attachLoadEvent(c,function(){a.log("iframe loaded");var h=a._getIframeContentJSON(c);a._options.onComplete(g,f,h);a._dequeue(g);delete a._inputs[g];setTimeout(function(){qq.remove(c)},1)});d.submit();qq.remove(d);return g},_attachLoadEvent:function(a,b){qq.attach(a,"load",function(){if(!a.parentNode){return}if(a.contentDocument&&a.contentDocument.body&&a.contentDocument.body.innerHTML=="false"){return}b()})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")")}catch(err){response={}}return response},_createIframe:function(b){var a=qq.toElement('<iframe src="javascript:false;" name="'+b+'" />');a.setAttribute("id",b);a.style.display="none";document.body.appendChild(a);return a},_createForm:function(a,c){var b=qq.toElement('<form method="post" enctype="multipart/form-data"></form>');var d=qq.obj2url(c,this._options.action);b.setAttribute("action",d);b.setAttribute("target",a.name);b.style.display="none";document.body.appendChild(b);return b}});qq.UploadHandlerXhr=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");a.type="file";return("multiple" in a&&typeof File!="undefined"&&typeof(new XMLHttpRequest()).upload!="undefined")};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerXhr.prototype,{add:function(a){if(!(a instanceof File)){throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)")}return this._files.push(a)-1},getName:function(b){var a=this._files[b];return a.fileName!=null?a.fileName:a.name},getSize:function(b){var a=this._files[b];return a.fileSize!=null?a.fileSize:a.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(h,f){var d=this._files[h],b=this.getName(h),c=this.getSize(h);this._loaded[h]=0;var e=this._xhrs[h]=new XMLHttpRequest();var a=this;e.upload.onprogress=function(i){if(i.lengthComputable){a._loaded[h]=i.loaded;a._options.onProgress(h,b,i.loaded,i.total)}};e.onreadystatechange=function(){if(e.readyState==4){a._onComplete(h,e)}};f=f||{};f.qqfile=b;var g=qq.obj2url(f,this._options.action);e.open("POST",g,true);e.setRequestHeader("X-Requested-With","XMLHttpRequest");e.setRequestHeader("X-File-Name",encodeURIComponent(b));e.setRequestHeader("Content-Type","application/octet-stream");e.send(d)},_onComplete:function(id,xhr){if(!this._files[id]){return}var name=this.getName(id);var size=this.getSize(id);this._options.onProgress(id,name,size,size);if(xhr.status==200){this.log("xhr - server response received");this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")")}catch(err){response={}}this._options.onComplete(id,name,response)}else{this._options.onComplete(id,name,{})}this._files[id]=null;this._xhrs[id]=null;this._dequeue(id)},_cancel:function(a){this._options.onCancel(a,this.getName(a));this._files[a]=null;if(this._xhrs[a]){this._xhrs[a].abort();this._xhrs[a]=null}}});(function(a,b){a.ajaxPrefilter(function(d,c,e){if(d.iframe){d.originalURL=d.url;return"iframe"}});a.ajaxTransport("iframe",function(l,j,k){var f=null,i=null,e="iframe-"+a.now(),d=a(l.files).filter(":file:enabled"),h=null,c=null;function g(){h.prop("disabled",false);f.remove();i.one("load",function(){i.remove()});i.attr("src","javascript:false;")}l.dataTypes.shift();l.data=j.data;if(d.length){f=a("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:l.originalURL,target:e});if(typeof(l.data)==="string"&&l.data.length>0){a.error("data must not be serialized")}a.each(l.data||{},function(n,o){if(a.isPlainObject(o)){n=o.name;o=o.value}a("<input type='hidden' />").attr({name:n,value:o}).appendTo(f)});a("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(f);if(l.dataTypes[0]&&l.accepts[l.dataTypes[0]]){c=l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", */*; q=0.01":"")}else{c=l.accepts["*"]}a("<input type='hidden' name='X-HTTP-Accept'>").attr("value",c).appendTo(f);h=d.after(function(n){return a(this).clone().prop("disabled",true)}).next();d.appendTo(f);return{send:function(o,n){i=a("<iframe src='javascript:false;' name='"+e+"' id='"+e+"' style='display:none'></iframe>");i.one("load",function(){i.one("load",function(){var v=this.contentWindow?this.contentWindow.document:(this.contentDocument?this.contentDocument:this.document),r=v.documentElement?v.documentElement:v.body,q=r.getElementsByTagName("textarea")[0],s=q&&q.getAttribute("data-type")||null,p=q&&q.getAttribute("data-status")||200,u=q&&q.getAttribute("data-statusText")||"OK",t={html:r.innerHTML,text:s?q.value:r?(r.textContent||r.innerText):null};g();n(p,u,t,s?("Content-Type: "+s):null)});f[0].submit()});a("body").append(f,i)},abort:function(){if(i!==null){i.unbind("load").attr("src","javascript:false;");g()}}}}})})(jQuery);var wx=wx||{};var wxApp=wxApp||{};(function(a){wx.makeApiCall=function(k,i,e,d,h){var b="POST",g="";var f=[];h=h||"json";for(var c in i){f.push(encodeURIComponent(c)+"="+encodeURIComponent(i[c]))}if(f.length){g=f.join("&")}var j="";if(k.indexOf("_docusign")===0||k.indexOf("_quiz")===0){j=wx.liveUrl+"api/v3/"+k+"?app_key="+wx.siteKey;g=i}else{j=wx.apiUrl+k+"?app_key="+wx.siteKey}a.ajax({url:j,type:b,data:g,datatype:h,success:function(l){wx.apiSuccess(l,e,d)},error:function(n,p){console.log("error");if(n.responseText[0]!=="{"){var o=n.responseText.indexOf("{");if(o>-1){var l=n.responseText.substring(o);l=JSON.parse(l);wx.apiSuccess(l,e,d);return}}if(d){d(n)}else{jQuery("#wx-modal-loading-text").html(p);jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html("Server Error Occurred")}}})};wx.apiSuccess=function(c,b,d){if(!c.error&&c.success){b(c)}else{if(d){d(c)}else{jQuery("#wx-modal-loading-text").html(c.message?c.message:"Error");jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html("Server Error Occurred")}}Backbone.Events.trigger("api:success")};wx.setCurrentBuildVersion=function(b){wx.getText("_metadata/get_build_version",function(f){console.log("currentBuildVersion",f);var e=f.split(":");var c=e[1].split(".");var d={build:parseInt(e[0]),major:parseInt(c[0]),minor:parseInt(c[1]),patch:parseInt(c[2])};wx.currentBuildVersion=d.build;if(typeof b=="function"){b(d)}})};wx.getText=function(d,b){var e="GET";var c=wx.apiUrl+d+"?app_key="+wx.siteKey;a.ajax({url:c,type:e,datatype:"text",success:function(f){if(b){b(f)}},error:function(f,g){console.log(g)}})};wx.refreshAppPreview=function(){console.log("Refreshing Preview");a("#iframe-loading").hide();var b=parseInt(a.browser.version.split(".")[0]);if(a.browser.webkit||(a.browser.msie&&b>=10)){a("#preview-app-dialog-no-webkit").hide();a("#preview-app-dialog-frame").attr("src",a("#preview-app-dialog-frame").attr("rel"));a("#preview-app-dialog-frame").show()}else{a("#preview-app-dialog-frame").hide();a("#preview-app-dialog-no-webkit").show()}};wx.rebuildApp=function(){console.debug("rebuildApp");var b=function(){if(wx.currentBuildVersion<wx.expectedBuildVersion){wx.newBuildPollingHandle=setTimeout(function(){console.debug("pollForNewBuild");console.debug("expected: "+wx.expectedBuildVersion,"current: "+wx.currentBuildVersion);wx.setCurrentBuildVersion(b)},1000)}else{console.debug("clearing newBuildPollingHandle");clearTimeout(wx.newBuildPollingHandle);wx.newBuildPollingHandle=null;if(wx.refreshPreviewHandle!=null){console.debug("clearing refreshPreviewHandle");clearTimeout(wx.refreshPreviewHandle);wx.refreshPreviewHandle=null}wx.refreshPreviewHandle=setTimeout(wx.refreshAppPreview,2000)}};if(wx.expectedBuildVersion<=wx.currentBuildVersion){wx.expectedBuildVersion=wx.expectedBuildVersion+1}if(wx.newBuildPollingHandle!=null){clearTimeout(wx.newBuildPollingHandle);wx.newBuildPollingHandle=null}b();a("#preview-app-dialog-frame").hide();a("#preview-app-dialog-no-webkit").hide();a("#iframe-loading").show()};wx.cleanUrl=function(b){var c=b.indexOf("?");if(c>-1){b=b.substring(0,c)}return b}})(jQuery);wx.log=function(a){if(!!console.log){console.log(a)}};
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):jQuery)}(function(j){function i(b){return k.raw?b:encodeURIComponent(b)}function q(b){return k.raw?b:decodeURIComponent(b)}function p(b){return i(k.json?JSON.stringify(b):String(b))}function o(d){0===d.indexOf('"')&&(d=d.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return d=decodeURIComponent(d.replace(l," ")),k.json?JSON.parse(d):d}catch(c){}}function n(a,f){var e=k.raw?a:o(a);return j.isFunction(f)?f(e):e}var l=/\+/g,k=j.cookie=function(x,w,v){if(void 0!==w&&!j.isFunction(w)){if(v=j.extend({},k.defaults,v),"number"==typeof v.expires){var u=v.expires,t=v.expires=new Date;t.setTime(+t+86400000*u)}return document.cookie=[i(x),"=",p(w),v.expires?"; expires="+v.expires.toUTCString():"",v.path?"; path="+v.path:"",v.domain?"; domain="+v.domain:"",v.secure?"; secure":""].join("")}for(var s=x?void 0:{},h=document.cookie?document.cookie.split("; "):[],f=0,d=h.length;d>f;f++){var c=h[f].split("="),b=q(c.shift()),a=c.join("=");if(x&&x===b){s=n(a,w);break}x||void 0===(a=n(a))||(s[b]=a)}return s};k.defaults={},j.removeCookie=function(a,d){return void 0===j.cookie(a)?!1:(j.cookie(a,"",j.extend({},d,{expires:-1})),!j.cookie(a))}});var wxApp=wxApp||{};(function(a){wxApp.Tab=Backbone.Model.extend({defaults:{id:"",title:"",icon_id:1,icon:"",tabIcon:null,tabIcon_id:0,subTabs:false},validate:function(b){},initialize:function(){var b=this;var c=new wxApp.SubTabCollection();this.set({subTabs:c});this.on("invalid",function(e,d){console.log(d)});this.get("subTabs").on("remove",function(d){if(!b.getSubTabs().length){b.trigger("destroy")}})},setTitle:function(b){this.set({title:b})},addSubTab:function(c){var b=this;c.set("parent_id",this.get("id"));if(typeof this.get("subTabs")=="undefined"){this.set({subTabs:new wxApp.SubTabCollection()})}this.get("subTabs").add(c);c.on("tab:move",function(){b.getSubTabs().remove(this)})},deleteSubTab:function(b){this.get("subTabs").remove(b)},getSubTabs:function(){return this.get("subTabs")},destroy:function(){if(this.get("subTabs")){for(var c=0;c<this.get("subTabs").length;c++){var b=this.get("subTabs").models[c];wx.makeApiCall("tabs/delete",{tab_id:b.get("id")},function(){})}}else{wx.makeApiCall("tabs/delete",{tab_id:this.get("id")},function(){})}this.trigger("destroy")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTab=wxApp.Tab.extend({defaults:function(){return{id:null,parent_id:null,title:"",tabTitle:"",icon_id:1,icon:"",type:null,layout:null,tabLayout:null,typeDescription:"",published:1,config:{},featureName:"",validateFeed:true,helpTitle:"Help ",helpBody:""}},typeDescription:"",validateFeed:true,allowTitleEdit:true,initialize:function(){},setConfig:function(c,f){var b=this.getConfig();b[c]=f;try{this.set("config",b)}catch(d){}},deleteConfig:function(c){var b=this.getConfig();delete b[c];this.set("config",b)},getConfig:function(){return this.get("config")},getModelName:function(){var c=false;for(var b in wxApp){if(b!=="SubTab"&&wxApp[b]==this.constructor){c=b;break}}return c},getAPIData:function(){var b=this.toJSON();b.config=JSON.stringify(b.config);if(b.id==b.parent_id){delete b.parent_id}if(b.id){b.tab_id=b.id}return this.filterAPIData(b)},filterAPIData:function(b){if(typeof b.geo!=="undefined"){if(!b.geo){delete b.geo}}return b},toJSON:function(){var b=JSON.parse(JSON.stringify(this.attributes));b.validateFeed=this.validateFeed;b.typeDescription=this.typeDescription;return b},getValidateFeed:function(){return true},getFeedSample:function(d,c){var b=this.getAPIData();b.api_check=1;b.confirm_feed=1;c=c||wx.apiUrl;a.ajax({url:c+"validator/validate_feed?site_key="+wx.siteKey,datatype:"JSON",data:b,success:function(e){d(e)}})},save:function(b){var c=this;wx.makeApiCall("tabs/add_tab",c.getAPIData(),function(d){if(!c.get("id")){c.set("id",d.tab_id);Backbone.Events.trigger("tab:new",c)}else{c.trigger("save",c)}if(b){b(true)}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabV3=wxApp.SubTab.extend({getFeedSample:function(c){var b=wx.liveUrl+"api/v3/";wxApp.SubTab.prototype.getFeedSample.apply(this,[c,b])}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlAttributes=Backbone.Model.extend({defaults:{}});wxApp.FormBuilderControl=Backbone.Model.extend({defaults:function(){return{control:"",type:"",label:"",hidePlaceholderClass:"",showPlaceholder:false,innerText:"",allowAdditional:"",allowAdditionalClass:"",valueType:"number",valueClass:"hide",minClass:"hide",maxClass:"hide",stepClass:"hide",multiClass:"hide",requiredClass:"",autocompleteClass:"hide",controlTitle:"",advanced:wx.formbuilderAdvanced,emailOptionClass:"hide",optionSendPDF:false}},initialize:function(b){this.set("attributes",new wxApp.FormBuilderControlAttributes());if(b&&b.attributes){for(var c in b.attributes){this.get("attributes").set(c,b.attributes[c])}}this.togglePlaceholder();this.on("change:showPlaceholder",this.togglePlaceholder)},togglePlaceholder:function(){if(this.get("showPlaceholder")===false){this.set("hidePlaceholderClass","hide")}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"input",label:"Label"});return b},initialize:function(b){wxApp.FormBuilderControl.prototype.initialize.apply(this,arguments)}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Account=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("account/get_account",{},function(d){b.set(d.account);if(typeof c!=="undefined"){c()}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Config=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("config/get_config",{},function(d){b.set(d.config);if(typeof c!=="undefined"){c()}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Design=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("design/get_design",{},function(d){b.set(d.design);if(typeof c!=="undefined"){c()}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.Feature=Backbone.Model.extend({defaults:{featureName:"",imgUri:"",name:"",filterBy:"",rel:"",includeClass:"",visible:true,iconId:0}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderAction=Backbone.Model.extend({defaults:function(){return{control:"action",method:"post",mode:"direct",value:"",placeholder:"",currentUserEmail:wx.currentUserEmail,rawUrl:"",username:"",password:"",returnUrl:"",pdfHeader:{title:"",line1:"",line2:"",line3:""}}},initialize:function(){},setUrl:function(){if(this.get("method")!=="post"){return}var b=this,c=b.get("value");if(c.indexOf("_postproxy")===-1){b.set("rawUrl",c);if(this.get("mode")==="proxy"){var d="http://weeverapp.com/api/v2/_postproxy/send?target="+encodeURIComponent(c);b.set("value",d)}}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderCalculatorField=Backbone.Model.extend({defaults:function(){return{ordinal:"",operation:"+",constant:0}}});wxApp.FormBuilderCalculatorFields=Backbone.Collection.extend({model:wxApp.FormBuilderCalculatorField});wxApp.FormBuilderCalculator=Backbone.Model.extend({defaults:function(){var b=new wxApp.FormBuilderCalculatorFields();b.add([new wxApp.FormBuilderCalculatorField(),new wxApp.FormBuilderCalculatorField()]);return{control:"calculation",fields:b,label:"Calculator Result"}},initialize:function(d){var b=[];if(d){d.fields;delete d.fields}Backbone.Model.prototype.initialize.apply(this,arguments);var f=new wxApp.FormBuilderCalculatorFields();if(b&&b.length){if(b instanceof wxApp.FormBuilderCalculatorFields){f=b}else{for(var c=0;c<b.length;c++){var e=b[c];if(!e instanceof wxApp.FormBuilderCalculatorField){e=new wxApp.FormBuilderCalculatorField(e)}f.add(e)}}}else{f.add(new wxApp.FormBuilderCalculatorField());f.add(new wxApp.FormBuilderCalculatorField())}this.set("fields",f)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxFieldset=Backbone.Model.extend({defaults:{control:"checkboxfieldset",title:"Check all that apply",allowAdditional:"",allowAdditionalClass:"hide",requiredClass:"",name:""},initialize:function(c){var f=new wxApp.FormBuilderControlCheckboxGroup();if(c.checkboxGroup===undefined||c.checkboxGroup.length===0){f.add(new wxApp.FormBuilderControlCheckbox({label:"Option A"}));f.add(new wxApp.FormBuilderControlCheckbox({label:"Option B"}));f.add(new wxApp.FormBuilderControlCheckbox({label:"Option C"}))}else{for(var b=0;b<c.checkboxGroup.length;b++){var e=c.checkboxGroup[b],d=null;if(typeof e.valueType==="string"){delete e.type;delete e.hidePlaceholderClass;delete e.showPlaceholder;delete e.innerText;delete e.allowAdditional;delete e.allowAdditionalClass;delete e.valueType;delete e.valueClass;delete e.minClass;delete e.maxClass;delete e.stepClass;delete e.multiClass;delete e.requiredClass;delete e.autocompleteClass;delete e.emailOptionClass;delete e.optionSendPDF}d=new wxApp.FormBuilderControlCheckbox(e);f.add(d)}}this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("checkboxGroup",f);return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderChildInput=Backbone.Model.extend({defaults:function(){return{control:"input"}},initialize:function(){if(this.get("attributes")){this.set("attributes",new wxApp.FormBuilderControlAttributes(this.get("attributes")))}else{this.set("attributes",new wxApp.FormBuilderControlAttributes())}}});wxApp.FormBuilderControlCheckbox=wxApp.FormBuilderChildInput.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{label:"Checkbox"});return b},initialize:function(){wxApp.FormBuilderChildInput.prototype.initialize.apply(this);this.get("attributes").set("type","checkbox")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInfo=Backbone.Model.extend({defaults:function(){return{advanced:wx.formbuilderAdvanced,control:"div",controlTitle:"Info Box",innerHTML:"Enter some informational text here!",label:"Informational text"}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"input",label:"Label"});return b},initialize:function(b){wxApp.FormBuilderControl.prototype.initialize.apply(this,arguments)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlAttributes=Backbone.Model.extend({defaults:{}});wxApp.FormBuilderControl=Backbone.Model.extend({defaults:function(){return{control:"",type:"",label:"",hidePlaceholderClass:"",showPlaceholder:false,innerText:"",allowAdditional:"",allowAdditionalClass:"",valueType:"number",valueClass:"hide",minClass:"hide",maxClass:"hide",stepClass:"hide",multiClass:"hide",requiredClass:"",autocompleteClass:"hide",controlTitle:"",advanced:wx.formbuilderAdvanced,emailOptionClass:"hide",optionSendPDF:false}},initialize:function(b){this.set("attributes",new wxApp.FormBuilderControlAttributes());if(b&&b.attributes){for(var c in b.attributes){this.get("attributes").set(c,b.attributes[c])}}this.togglePlaceholder();this.on("change:showPlaceholder",this.togglePlaceholder)},togglePlaceholder:function(){if(this.get("showPlaceholder")===false){this.set("hidePlaceholderClass","hide")}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderLabel=wxApp.FormBuilderControl.extend({defaults:{label:"Label"}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOption=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"option",innerText:"Option"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this);return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlPagebreak=Backbone.Model.extend({defaults:function(){return{control:"pagebreak",controlTitle:"Page Break"}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioFieldset=Backbone.Model.extend({preview:null,defaults:{control:"radiofieldset",title:"Select a choice",allowAdditional:"",allowAdditionalClass:"hide",requiredClass:"",name:""},initialize:function(d){var b=new wxApp.FormBuilderControlRadioGroup();if(d.radioGroup===undefined||d.radioGroup.length===0){b.add(new wxApp.FormBuilderControlRadio({label:"Option A"}));b.add(new wxApp.FormBuilderControlRadio({label:"Option B"}));b.add(new wxApp.FormBuilderControlRadio({label:"Option C"}))}else{for(var c=0;c<d.radioGroup.length;c++){var f=d.radioGroup[c],e=null;if(typeof f.valueType==="string"){delete f.type;delete f.hidePlaceholderClass;delete f.showPlaceholder;delete f.innerText;delete f.allowAdditional;delete f.allowAdditionalClass;delete f.valueType;delete f.valueClass;delete f.minClass;delete f.maxClass;delete f.stepClass;delete f.multiClass;delete f.requiredClass;delete f.autocompleteClass;delete f.emailOptionClass;delete f.optionSendPDF}e=new wxApp.FormBuilderControlRadio(f);b.add(e)}}this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("radioGroup",b);return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadio=wxApp.FormBuilderChildInput.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{label:"Radio Button"});return b},initialize:function(){wxApp.FormBuilderChildInput.prototype.initialize.apply(this);this.get("attributes").set("type","radio")}});wxApp.FormBuilderControlTextSliderOption=wxApp.FormBuilderControlInput.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{text:"Option",autocompleteClass:"hide"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRangeInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{input:"range",label:"Label"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this,arguments)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSelect=Backbone.Model.extend({defaults:{control:"select",title:"Select a choice",allowAdditional:"",allowAdditionalClass:"hide",requiredClass:"",name:""},initialize:function(d){var b=new wxApp.FormBuilderControlOptionGroup();if(d.optionGroup===undefined||d.optionGroup.length===0){b.add(new wxApp.FormBuilderControlOption({innerText:"Option A"}));b.add(new wxApp.FormBuilderControlOption({innerText:"Option B"}));b.add(new wxApp.FormBuilderControlOption({innerText:"Option C"}))}else{for(var c=0;c<d.optionGroup.length;c++){var e=d.optionGroup[c],f=null;f=new wxApp.FormBuilderControlOption(e);b.add(f)}}this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("optionGroup",b);return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlDocusignSignature=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"docusignSignature",label:"Sign here",labelOption:{verb:"",fields:[]},instructions:"On completing this form your data will be presented back to you for review and signature.",title:"Name, email and signature",username:"",password:"",returnUrl:""});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this);this.get("attributes").set("required","checked")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextarea=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"textarea",label:"Untitled",showPlaceholder:true});return b},initialize:function(b){wxApp.FormBuilderControl.prototype.initialize.apply(this,arguments)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextRange=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"input",label:"Label"});return b},initialize:function(c){wxApp.FormBuilderControl.prototype.initialize.apply(this);this.set("options",new wxApp.FormBuilderControlTextSliderOptions());if(c&&c.options&&c.options.length>0){for(var b=0;b<c.options.length;b++){this.get("options").add(new wxApp.FormBuilderControlTextSliderOption(c.options[b]))}}else{this.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"NA"}));this.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"SA"}));this.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"A"}));this.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"D"}));this.get("options").add(new wxApp.FormBuilderControlTextSliderOption({text:"SD"}))}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlWeeverSignature=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"weeverSignature",label:"Sign here",instructions:"Tap the text above, then sign with your finger.",title:"Please add your signature",username:"",password:"",returnUrl:""});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderHierarchicalDropDownListOption=Backbone.Model.extend({defaults:function(){return{text:"",value:"",children:new wxApp.FormBuilderHierarchicalDropDownListOptions()}},initialize:function(d){d=d||{};var c=d.children;delete d.children;Backbone.Model.prototype.initialize.apply(this,arguments);this.set("children",new wxApp.FormBuilderHierarchicalDropDownListOptions());if(c&&c.length){for(var b=0;b<c.length;b++){var e=c[b];this.get("children").add(new wxApp.FormBuilderHierarchicalDropDownListOption(e))}}this.get("children").bind("change",this.onChildChange,this);return this},onChildChange:function(){this.trigger("change")}});wxApp.FormBuilderHierarchicalDropDownListOptions=Backbone.Collection.extend({model:wxApp.FormBuilderHierarchicalDropDownListOption});wxApp.FormBuilderHierarchicalDropDownList=Backbone.Model.extend({defaults:function(){return{control:"hierarchical-drop-down",label:"",levels:2,titles:["",""],ordinal:0,options:new wxApp.FormBuilderHierarchicalDropDownListOptions(),requiredClass:""}},initialize:function(e){var c=e.options;delete e.options;Backbone.Model.prototype.initialize.apply(this,arguments);var b=new wxApp.FormBuilderHierarchicalDropDownListOptions();if(c&&c.length){if(c instanceof wxApp.FormBuilderHierarchicalDropDownListOptions){b=c}else{for(var d=0;d<c.length;d++){var f=c[d];b.add(new wxApp.FormBuilderHierarchicalDropDownListOption(f))}}}this.set("options",b);this.get("options").bind("change",this.onChildChange,this);this.set("attributes",new wxApp.FormBuilderControlAttributes());return this},onChildChange:function(){this.trigger("change")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderRepeatableForm=Backbone.Model.extend({defaults:function(){return{advanced:true,control:"repeatableform",label:"Repeatable Form",ordinal:0}},initialize:function(b){Backbone.Model.prototype.initialize.apply(this,arguments);this.set("formElements",new wxApp.FormBuilderCollection());return this}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.IconFont=Backbone.Model.extend({defaults:{},fetch:function(d,c){var b=this;wx.makeApiCall("icons/get_font",{font_id:d},function(e){b.set(e.font);m=b;if(typeof c!=="undefined"){c()}})}})})(jQuery);(function(a){wxApp.Quiz=Backbone.Model.extend({defaults:function(){return{name:"",questions:new wxApp.QuizQuestions(),settings:{passphrase:""},_id:null}},addQuestion:function(){var b=new wxApp.QuizQuestion();for(var c=0;c<4;c++){b.get("responses").push("")}b.set("ordinal",this.get("questions").length);this.get("questions").add(b);return b},fetch:function(b){var c=this;wx.makeApiCall("_quiz/get",{id:c.get("_id")},function(f){var g=f.quiz.questions;delete f.quiz.questions;c.set(f.quiz);for(var e=0;e<g.length;e++){var d=new wxApp.QuizQuestion(g[e]);c.get("questions").add(d)}if(b){b()}})},save:function(d){var e=this;var c=e.toJSON();c.questions=[];for(var b=0;b<e.get("questions").length;b++){c.questions.push(e.get("questions").at(b).toJSON())}c={quiz:JSON.stringify(c)};wx.makeApiCall("_quiz/create",c,function(f){if(f.error){alert("An error occurred while saving your quiz.")}else{e.set("_id",f.quiz._id);if(d){d()}}})}})})(jQuery);(function(a){wxApp.QuizQuestion=Backbone.Model.extend({defaults:function(){return{challenge:"",imageUrl:"",responses:[],answers:[],ordinal:0,settings:{}}}});wxApp.QuizQuestions=Backbone.Collection.extend({model:wxApp.QuizQuestion})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.BloggerSubTab=wxApp.SubTab.extend({default_icon_id:7,allowedLayouts:["list"],typeDescription:"Blogger",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Blog",icon:"e836",icon_id:6,type:"blogger",content:"blogger",layout:"list",config:{blog_url:"http://blogname.blogspot.com",subtab_name:"BloggerSubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.CouponSubTab=wxApp.SubTab.extend({default_icon_id:13,allowedLayouts:["list"],typeDescription:"Coupon Builder",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Coupon",icon_id:13,content:"htmlPage",layout:"panel",config:{url:"",subtab_name:"CouponSubTab",title:"",description:"",barcodeText:"",termsAndConditions:"",titleBackgroundColor:"#990000",titleTextColor:"#ffffff"}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookAlbumsSubTab=wxApp.SubTab.extend({default_icon_id:15,allowedLayouts:["list"],defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Photos",icon:"e046",icon_id:15,type:"facebookAlbums",content:"facebookAlbums",layout:"list",config:{url:"http://facebook.com/",user_id:"http://facebook.com/MyPage",subtab_name:"FacebookAlbumsSubTab"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add photos from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Photos must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"})},typeDescription:"Facebook Photos"})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookEventsSubTab=wxApp.SubTab.extend({default_icon_id:16,allowedLayouts:["list"],typeDescription:"Facebook Events",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Events",icon:"e029",icon_id:16,type:"facebookEvents",content:"facebookEvents",layout:"list",config:{url:"http://facebook.com/",subtab_name:"FacebookEventsSubTab"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add events from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Events must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookWallSubTab=wxApp.SubTab.extend({default_icon_id:13,typeDescription:"Facebook Wall",allowedLayouts:["list"],defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Facebook",icon:"e029",icon_id:13,type:"facebookWall",content:"facebookStatuses",layout:"list",config:{url:"http://facebook.com/",subtab_name:"FacebookWallSubTab"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add wall updates from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Wall updates must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FlickrSubTab=wxApp.SubTab.extend({default_icon_id:19,allowedLayouts:["list","carousel"],typeDescription:"Flickr",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Flickr",icon:"e049",icon_id:19,type:"flickr",content:"flickrPhotostream",layout:"carousel",config:{url:"http://flickr.com/",subtab_name:"FlickrSubTab"},helpBody:"<p><b>Flickr compatibility</b></p><p>Only publicly available photos on Flickr will display. Photos uploaded prior to April 2011 may not display as gallery thumbnails  simply rotate and resave these photos to fix.</p><p><b>Coming soon</b></p><p>Support for Flickr &ldquo;group pools&rdquo; (community galleries) and the ability to add just one photo set at a time to your app.</p>"})}})})(jQuery);wxApp=wxApp||{};(function(b){var a="";switch(wx.cms){case"wordpress":a=window.location.origin+"/wp-admin/admin-ajax.php";break;case"joomla":a=window.location.origin+"/administrator/components/com_weever/helpers/file-upload.php";break;default:a=wx.apiUrl+"/_google_drive/upload";break}wxApp.FormBuilderSubTab=wxApp.SubTab.extend({default_icon_id:30,validateFeed:false,typeDescription:"AppBuilder Forms",filterAPIData:function(c){if(typeof c.geo!=="undefined"){delete c.geo}return c},initialize:function(d){if(d&&d.config){if(d.config.formElements){var c=this.translateFormElements(d.config.formElements);this.get("config").formElements=c}if(d.config.formActions){var e=this.translateFormActions(d.config.formActions);this.get("config").formActions=e}if(d.config.onUpload){if(typeof d.config.onUpload==="string"){this.get("config").onUpload=JSON.parse(d.config.onUpload)}else{this.get("config").onUpload=d.config.onUpload}}}},defaults:function(){var d=null;if(wxApp.featureList){wxApp.featureList.collection.findWhere({featureName:"FormBuilder"})}var c=wx.formbuilderAdvanced||0;if(d&&d.get("options")&&d.get("options").allow_advanced_mode){c=parseInt(d.get("options").allow_advanced_mode.value)}return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"My Form Title",icon:"e074",tabTitle:"Form",icon_id:30,type:"formbuilder",content:"formbuilder",layout:"panel",saveToAccount:true,advancedMode:c,config:{submitButtonText:"Submit",advanced:c,uploadUrl:a,onUpload:{message:"Your upload has completed."},subtab_name:"FormBuilderSubTab",isDocuSign:false}})},translateFormElements:function(g){var h=this,f=(typeof g==="string")?JSON.parse(g):g,c=new wxApp.FormBuilderCollection(),e,d,j;for(e=0;e<f.length;e++){d=f[e];j=null;switch(d.control){case"div":j=h.createInfoBox(d);break;case"textarea":j=h.createTextArea(d);break;case"radiofieldset":j=h.createRadioFieldset(d);break;case"checkboxfieldset":j=h.createCheckboxFieldset(d);break;case"select":j=h.createSelect(d);break;case"docusignSignature":j=h.createDocusignSignature(d);break;case"weeverSignature":j=h.createWeeverSignature(d);break;case"calculation":j=h.createCalculator(d);break;case"hierarchical-drop-down":j=h.createHierarchicalDropDownList(d);break;case"repeatableform":j=h.createRepeatableForm(d);break;case"pagebreak":j=h.createPagebreak();break;case"input":default:if(d.type==="textSlider"){j=h.createTextSlider(d)}else{j=h.createInput(d)}break}if(j){c.push(j)}}return c},createCalculator:function(c){var d=new wxApp.FormBuilderCalculator(c);return d},createCheckboxFieldset:function(c){var d=new wxApp.FormBuilderControlCheckboxFieldset(c);return d},createDocusignSignature:function(c){var d=new wxApp.FormBuilderControlDocusignSignature(c);return d},createHierarchicalDropDownList:function(c){var d=new wxApp.FormBuilderHierarchicalDropDownList(c);return d},createInfoBox:function(c){if(typeof c.valueType==="string"){delete c.type;delete c.hidePlaceholderClass;delete c.showPlaceholder;delete c.innerText;delete c.allowAdditional;delete c.allowAdditionalClass;delete c.valueType;delete c.valueClass;delete c.minClass;delete c.maxClass;delete c.stepClass;delete c.multiClass;delete c.requiredClass;delete c.autocompleteClass;delete c.emailOptionClass;delete c.optionSendPDF;delete c.attributes}var d=new wxApp.FormBuilderControlInfo(c);return d},createInput:function(d){var c=new wxApp.FormBuilderControlInput(d);return c},createPagebreak:function(){var c=new wxApp.FormBuilderControlPagebreak();return c},createRadioFieldset:function(c){var d=new wxApp.FormBuilderControlRadioFieldset(c);return d},createRepeatableForm:function(d){var e=new wxApp.FormBuilderRepeatableForm(d);if(d.formElements){var c=this.translateFormElements(d.formElements);e.set("formElements",c)}return e},createSelect:function(c){var d=new wxApp.FormBuilderControlSelect(c);return d},createTextArea:function(c){delete c.attributes;var d=new wxApp.FormBuilderControlTextarea(c);return d},createTextSlider:function(c){var d=new wxApp.FormBuilderControlTextRange(c);return d},createWeeverSignature:function(c){var d=new wxApp.FormBuilderControlWeeverSignature(c);return d},translateFormActions:function(o){var j=this,c=this.get("config"),k=(typeof o==="string")?JSON.parse(o):o,h=new Backbone.Collection(),l=false,f=false,n=false,e,g,d;c.advanced=j.apiToBoolean(c.advanced);c.isDocuSign=j.apiToBoolean(c.isDocuSign);for(e=0;e<k.length;e++){g=k[e];d=null;switch(g.method){case"docusign":l=true;d=new wxApp.FormBuilderAction(g);break;case"post":f=true;d=new wxApp.FormBuilderAction(g);break;case"email":n=true;d=new wxApp.FormBuilderAction(g);break}if(d){h.push(d)}}if(!f&&c.advanced){d=new wxApp.FormBuilderAction({method:"post"});h.push(d)}if(!n&&((c.isDocuSign&&c.advanced)||(!c.isDocuSign))){d=new wxApp.FormBuilderAction({method:"email"});h.push(d)}return h},apiToBoolean:function(c){if(typeof c=="undefined"||c===false||c==="false"||c==="0"||c===0){return false}return true}});wxApp.DocuSignSubTab=wxApp.FormBuilderSubTab.extend({defaults:function(){var e=wxApp.featureList.collection.findWhere({featureName:"DocuSign"});var c=wx.formbuilderAdvanced||0;if(e&&e.get("options")&&e.get("options").allow_advanced_mode){c=parseInt(e.get("options").allow_advanced_mode.value)}var d=0;if(e&&e.get("options")&&e.get("options").allow_demo_mode){d=parseInt(e.get("options").allow_demo_mode.value)}return _.extend({},wxApp.FormBuilderSubTab.prototype.defaults(),{config:{submitButtonText:"Tap to Review and Sign",icon:"e074",advanced:c,allowDemoMode:d,uploadUrl:a,onUpload:{message:"Your upload has completed."},subtab_name:"FormBuilderSubTab",isDocuSign:true}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FoursquarePhotosSubTab=wxApp.SubTab.extend({default_icon_id:25,allowedLayouts:["carousel"],typeDescription:"Foursquare",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Photos",icon:"e057",icon_id:25,type:"foursquarePhotos",content:"foursquarePhotos",layout:"carousel",config:{venue_id:"http://foursquare.com/v/",subtab_name:"FoursquarePhotosSubTab"},helpBody:'<p><b>To find the web address of a Foursquare Venue:</b></p><p>1. Search the web for "Foursquare" and the name of the location.</p><p>2. Open the matching Foursquare venue page.</p><p>3. Copy the web address (url) of the venue page from your browser address bar.</p><p>Sharing live photos is a great way to engage event attendees or share info about a specific location.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.GoogleCalendarSubTab=wxApp.SubTabV3.extend({default_icon_id:7,allowedLayouts:["list"],typeDescription:"Google Calendar",defaults:function(){return _.extend({},wxApp.SubTabV3.prototype.defaults(),{title:"Calendar",icon:"e061",icon_id:7,type:"googleCalendar",content:"googleCalendar",layout:"list",config:{calendar_id:"abc123@group.calendar.google.com",subtab_name:"GoogleCalendarSubTab"},helpBody:'<p><b>Primary Google calendars:</b></p><p>A primary calendar is associated with your Google / Gmail account, for example:</p><p>emailaddress@gmail.com</p><p><b>Group Google Calendars:</b></p><p>Group calendars (aka &lsquo;secondary calendars&rsquo; should be added to your app in a format like abc123@group.calendar.google.com.</p><p><b>Finding a Group Calendar ID</b></p><p>1. Login to <a target="_blank" href="http://google.com/calendar">Google.com/calendar</a></p><p>2. Choose a calendar and select &ldquo;settings&rdquo;</p><p>3. Copy and paste the calendar ID from this page.</p><p>The web address for the group calendar will be in a format like &ldquo;abc123@group.calendar.google.com&rdquo;.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTab=wxApp.Tab.extend({defaults:function(){return{id:null,parent_id:null,title:"",tabTitle:"",icon_id:1,icon:"",type:null,layout:null,tabLayout:null,typeDescription:"",published:1,config:{},featureName:"",validateFeed:true,helpTitle:"Help ",helpBody:""}},typeDescription:"",validateFeed:true,allowTitleEdit:true,initialize:function(){},setConfig:function(c,f){var b=this.getConfig();b[c]=f;try{this.set("config",b)}catch(d){}},deleteConfig:function(c){var b=this.getConfig();delete b[c];this.set("config",b)},getConfig:function(){return this.get("config")},getModelName:function(){var c=false;for(var b in wxApp){if(b!=="SubTab"&&wxApp[b]==this.constructor){c=b;break}}return c},getAPIData:function(){var b=this.toJSON();b.config=JSON.stringify(b.config);if(b.id==b.parent_id){delete b.parent_id}if(b.id){b.tab_id=b.id}return this.filterAPIData(b)},filterAPIData:function(b){if(typeof b.geo!=="undefined"){if(!b.geo){delete b.geo}}return b},toJSON:function(){var b=JSON.parse(JSON.stringify(this.attributes));b.validateFeed=this.validateFeed;b.typeDescription=this.typeDescription;return b},getValidateFeed:function(){return true},getFeedSample:function(d,c){var b=this.getAPIData();b.api_check=1;b.confirm_feed=1;c=c||wx.apiUrl;a.ajax({url:c+"validator/validate_feed?site_key="+wx.siteKey,datatype:"JSON",data:b,success:function(e){d(e)}})},save:function(b){var c=this;wx.makeApiCall("tabs/add_tab",c.getAPIData(),function(d){if(!c.get("id")){c.set("id",d.tab_id);Backbone.Events.trigger("tab:new",c)}else{c.trigger("save",c)}if(b){b(true)}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.MapSubTab=wxApp.SubTab.extend({default_icon_id:13,allowedLayouts:["list"],typeDescription:"Add Map Location",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Mapped Post",icon:"e014",icon_id:13,content:"htmlMap",layout:"browser",config:{subtab_name:"MapSubTab"}})},save:function(f){var e=true;for(var d=0;d<wxApp.Tabs.length;d++){var b=wxApp.Tabs.models[d],c=b.get("config");if(!c){continue}if(typeof c==="string"){c=JSON.parse(c)}if(c.items){var g=c.items[0];if(g.subtab_name==="MapSubTab"&&g.url.indexOf("category_name=map")>-1){e=false;break}}else{if(c.subtab_name==="MapSubTab"&&c.url.indexOf("category_name=map")>-1){e=false;break}}}if(e){wxApp.SubTab.prototype.save.apply(this,arguments)}else{f(false)}}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.PicasaAlbumsSubTab=wxApp.SubTab.extend({default_icon_id:15,allowedLayouts:["list"],typeDescription:"Picasa Photos",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Photos",icon:"e053",icon_id:15,type:"picasaAlbums",content:"picasaAlbums",layout:"list",config:{user_id:"your.email@gmail.com",subtab_name:"PicasaAlbumsSubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.QuizBuilderSubTab=wxApp.SubTab.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{content:"quiz",layout:"panel",config:{quiz_id:""},quiz:new wxApp.Quiz()});return b},initialize:function(b){Backbone.Model.prototype.initialize.apply(this,arguments);if(b){var c=new wxApp.Quiz({_id:this.getConfig().quiz_id});this.set("quiz",c);c.fetch()}},save:function(b){var c=this;c.get("quiz").save(function(){c.setConfig("quiz_id",c.get("quiz").get("_id"));wxApp.SubTab.prototype.save.apply(c,[b])})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.r3sSubTab=wxApp.SubTab.extend({default_icon_id:6,typeDescription:"R3S Object",validateFeed:false,allowedLayouts:["list"],defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"R3S Object",icon:"e836",icon_id:6,type:"r3s",content:"html",layout:"list",config:{url:"http://yourwebsite.com/?feed=r3s",subtab_name:"r3sSubTab"},helpBody:'<p><b>What is an R3S Object?</b></p><p>R3S is an open source specification for streaming content from web sites, social feeds, and other sources into apps.</p><p>R3S is a flexible format but is generally used in one or two different ways:</p><p>1.  To stream content into an app from another web site or service (most likely with a Weever Apps plugin installed).</p><p>2.  To stream content into an app from a custom application that is generating an R3S stream object.</p><p>If you are a developer and are interested in utilizing R3S, please check out the <a target="_blank" href="https://github.com/WeeverApps/r3s-spec">R3S repo on GitHub</a> and <a target="_blank" href="http://support.weeverapps.com">contact us</a> for more information.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.RSSSubTab=wxApp.SubTab.extend({default_icon_id:6,typeDescription:"RSS Feed",validateFeed:false,allowedLayouts:["list"],defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"RSS Feed",icon:"e836",icon_id:6,type:"rss",content:"html",layout:"list",config:{url:"http://yourwebsite.com/",subtab_name:"RSSSubTab"}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.TwitterSubTab=wxApp.SubTab.extend({default_icon_id:21,allowedLayouts:["list"],typeDescription:"Twitter",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Social",icon:"e025",icon_id:21,type:"twitterUser",content:"twitterUser",layout:"list",config:{subtab_name:"TwitterSubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabV3=wxApp.SubTab.extend({getFeedSample:function(c){var b=wx.liveUrl+"api/v3/";wxApp.SubTab.prototype.getFeedSample.apply(this,[c,b])}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.VimeoSubTab=wxApp.SubTab.extend({default_icon_id:35,allowedLayouts:["list"],typeDescription:"Vimeo Videos",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Vimeo",icon:"e041",icon_id:35,type:"vimeo",content:"vimeo",layout:"list",config:{url:"http://vimeo.com/user1234",subtab_name:"VimeoSubTab"},helpBody:'<p><b>Vimeo users and channels</b></p><p>Adding a Vimeo user shares all videos associated with one <a target="_blank" href="http://vimeo.com">Vimeo.com</a> user account.</p><p><b>Sharing specific sets of videos</b></p><p>One vimeo &lsquo;user&rsquo; can have multiple &lsquo;channels&rsquo;.  Each channel includes specific collection of videos.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressBlogSubTab=wxApp.SubTab.extend({default_icon_id:5,allowedLayouts:["list"],typeDescription:"Content: Posts",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Blog",icon:"e800",icon_id:5,type:"WordpressBlog",content:"html",layout:"list",config:{subtab_name:"WordpressBlogSubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressCategorySubTab=wxApp.SubTab.extend({default_icon_id:5,allowedLayouts:["list"],typeDescription:"Wordpress Posts",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Blog",icon:"e836",icon_id:5,type:"WordpressCategory",content:"html",layout:"list",config:{subtab_name:"WordpressCategorySubTab"},helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in AppBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with AppBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the AppBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Nearby</b></p><p>&ldquo;Nearby&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Nearby&rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Nearby&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.WordpressContactsSubTab=wxApp.SubTab.extend({default_icon_id:34,allowedLayouts:["list"],typeDescription:"Contact",validateFeed:false,allowTitleEdit:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Contact",icon:"e065",icon_id:34,type:"wordpress-contact",content:"contact",layout:"panel"})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressDirectorySubTab=wxApp.SubTab.extend({default_icon_id:11,allowedLayouts:["list"],typeDescription:"Content: Directory",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Directory",icon:"e800",icon_id:11,type:"WordpressDirectory",content:"html",layout:"list",config:{subtab_name:"WordpressDirectorySubTab"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressMapSubTab=wxApp.SubTab.extend({default_icon_id:20,allowedLayouts:["list"],typeDescription:"Add map locations",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Map",icon:"e097",icon_id:20,type:"WordpressMap",content:"html",layout:"list",tabLayout:"map",config:{url:"",gps:"1",subtab_name:"WordpressMapSubTab"},helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with AppBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the AppBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Nearby</b></p><p>&ldquo;Nearby&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Nearby&rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Nearby&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in AppBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressPageSubTab=wxApp.SubTab.extend({default_icon_id:28,allowedLayouts:["list"],typeDescription:"Wordpress Page",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Pages",icon:"e014",icon_id:28,type:"WordpressPage",content:"htmlPage",layout:"panel",config:{url:"",subtab_name:"WordpressPageSubTab"}})}});wxApp.WordpressAddPageSubTab=wxApp.WordpressPageSubTab.extend({validateFeed:false,default_icon_id:28,allowedLayouts:["list"],typeDescription:"Add Page",defaults:function(){return _.extend({},wxApp.WordpressPageSubTab.prototype.defaults(),{published:1,tabLayout:"list",bodyContent:"",validateFeed:false,config:{url:"",subtab_name:"WordpressAddPageSubTab",type:"htmlContent"}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressProximitySubTab=wxApp.SubTab.extend({default_icon_id:27,allowedLayouts:["list"],typeDescription:"Nearby",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Nearby",icon:"e101",icon_id:27,type:"WordpressProximity",content:"html",layout:"list",config:{url:"",gps:"1",geotag:"1",subtab_name:"WordpressProximitySubTab"},helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Nearby</b></p><p>&ldquo;Nearby&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Nearby&rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Nearby&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with AppBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the AppBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in AppBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressSearchtermSubTab=wxApp.SubTab.extend({default_icon_id:8,allowedLayouts:["list"],typeDescription:"Wordpress Search",validateFeed:false,defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Search",icon:"e256",icon_id:8,type:"WordpressSearchterm",content:"html",layout:"list",config:{url:"",subtab_name:"WordpressSearchtermSubTab"},helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in AppBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with AppBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the AppBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Nearby</b></p><p>&ldquo;Nearby&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Nearby&rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Nearby&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p>'})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressTagSubTab=wxApp.SubTab.extend({default_icon_id:13,allowedLayouts:["list"],validateFeed:false,typeDescription:"Wordpress Tag",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Blog",icon:"e081",icon_id:13,type:"WordpressTag",content:"html",layout:"list",config:{url:"",subtab_name:"WordpressTagSubTab"},helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in AppBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with AppBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the AppBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Nearby</b></p><p>&ldquo;Nearby&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Nearby&rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Nearby&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.WufooSubTab=wxApp.SubTab.extend({default_icon_id:30,allowedLayouts:["list"],typeDescription:"Wufoo Forms",defaults:function(){return _.extend({},wxApp.SubTab.prototype.defaults(),{title:"Forms",icon:"e832",icon_id:30,type:"wufoo",content:"wufoo",layout:"list",config:{url:"https://USERNAME.wufoo.com",apikey:"XXXX-XXXX-XXXX-XXXX",subtab_name:"WufooSubTab"},helpBody:'<p><b>Adding a Wufoo Form</b></p><p><b>Finding your Wufoo API Key</b></p><p>1. Login to <a target="_blank" href="http://wufoo.com/">Wufoo.com</a> and navigate to a specific form.</p><p>2. Choose the "Code" link, then click the "API Information" button.</p><p><b>Wufoo Integrations</b></p><p>Wufoo Forms connects to many free and paid services on the web.</p><p>Connections / integrations include MailChimp, Campaign Monitor, PayPal Donations and Payments, SalesForce CRM, Freshbooks Accounting &amp; Billing, Highrise CRM and Twitter.</p><p>For more information check out: <a target="_blank" href="http://wufoo.com/integrations">wufoo.com/integrations</a></p>'})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.YoutubeSubTab=wxApp.SubTabV3.extend({default_icon_id:18,allowedLayouts:["list"],typeDescription:"Youtube Videos",defaults:function(){return _.extend({},wxApp.SubTabV3.prototype.defaults(),{title:"YouTube",icon:"e037",icon_id:18,type:"youtube",content:"youtube",layout:"list",config:{url:"http://youtube.com/",subtab_name:"YoutubeSubTab"},helpBody:"<p><b>Youtube Channels</b></p><p>A YouTube Channel displays all videos associated with one YouTube user account.</p><p><b>Youtube Playlists</b></p><p>A Youtube playlist allows you to display a specific collection of videos from your account or from any public, sharing-enabled videos found on Youtube.</p>"})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Tab=Backbone.Model.extend({defaults:{id:"",title:"",icon_id:1,icon:"",tabIcon:null,tabIcon_id:0,subTabs:false},validate:function(b){},initialize:function(){var b=this;var c=new wxApp.SubTabCollection();this.set({subTabs:c});this.on("invalid",function(e,d){console.log(d)});this.get("subTabs").on("remove",function(d){if(!b.getSubTabs().length){b.trigger("destroy")}})},setTitle:function(b){this.set({title:b})},addSubTab:function(c){var b=this;c.set("parent_id",this.get("id"));if(typeof this.get("subTabs")=="undefined"){this.set({subTabs:new wxApp.SubTabCollection()})}this.get("subTabs").add(c);c.on("tab:move",function(){b.getSubTabs().remove(this)})},deleteSubTab:function(b){this.get("subTabs").remove(b)},getSubTabs:function(){return this.get("subTabs")},destroy:function(){if(this.get("subTabs")){for(var c=0;c<this.get("subTabs").length;c++){var b=this.get("subTabs").models[c];wx.makeApiCall("tabs/delete",{tab_id:b.get("id")},function(){})}}else{wx.makeApiCall("tabs/delete",{tab_id:this.get("id")},function(){})}this.trigger("destroy")}})})(jQuery);var wxApp=wxApp||{};(function(){wxApp.FeatureCollection=Backbone.Collection.extend({model:wxApp.Feature,initialize:function(){}})})();wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlCheckbox,initialize:function(){console.log("checkbox group collection init");this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FormBuilderCollection=Backbone.Collection.extend({model:wxApp.FormBuilderControl,initialize:function(){this.on("add",this.onAdd)},onAdd:function(b){a(".wx-preview-form").sortable({axis:"y",start:function(c,d){a(".wx-preview-form .wx-form-preview-row").removeClass("wx-active")},stop:function(c,d){d.item.trigger("sortable-drop",d.item.index())}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlOption,initialize:function(){console.log("option group collection init");this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlRadio,initialize:function(){this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextSliderOptions=Backbone.Collection.extend({model:wxApp.FormBuilderControlTextSliderOption,initialize:function(){this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.IconFontsCollection=Backbone.Collection.extend({model:wxApp.IconFont,fetch:function(){var b=this;wx.makeApiCall("icons/get_public_font_names",{},function(e){if(typeof e.fonts!="undefined"){for(var d=0;d<e.fonts.length;d++){var f=e.fonts[d];if(f.id<300000){continue}var c=new wxApp.IconFont(f);b.add(c)}}})}});wxApp.IconFonts=new wxApp.IconFontsCollection()})(jQuery);var wxApp=wxApp||{};(function(){wxApp.SubTabCollection=Backbone.Collection.extend({model:wxApp.SubTab})})();var wxApp=wxApp||{};(function(a){wxApp.TabsCollection=Backbone.Collection.extend({model:wxApp.Tab,url:wx.apiUrl+"tabs/get_tabs?site_key="+wx.siteKey,loaded:false,fetch:function(b){var c=this;wx.makeApiCall("tabs/get_tabs",{},function(k){if(typeof k.tabs!="undefined"){console.log("TABS!",k.tabs);var h=[];for(var e=0;e<k.tabs.length;e++){var d=k.tabs[e];if(!d.parent_id){var j=new wxApp.Tab(d);var f=c.getModelNameByTabData(d);j.addSubTab(new wxApp[f](d));for(var g=0;g<k.tabs.length;g++){if(j.get("id")==k.tabs[g].parent_id){f=c.getModelNameByTabData(k.tabs[g]);j.addSubTab(new wxApp[f](k.tabs[g]))}}h.push(j)}}c.reset();for(g=0;g<h.length;g++){c.add(h[g])}c.loaded=true;if(b){b()}}})}});wxApp.Tabs=new wxApp.TabsCollection()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlView=Backbone.View.extend({tagName:"div",className:"wx-form-builder-row panel",firstRender:true,events:{"keyup .wx-form-builder-label-input":"updateLabel","keyup .wx-form-builder-text-input":"updateText","keyup .wx-form-builder-placeholder-input":"updatePlaceholder","keyup .wx-form-builder-title-input":"updateTitle","blur .wx-form-builder-min-input":"setMin","blur .wx-form-builder-max-input":"setMax","blur .wx-form-builder-value-input":"setValue","blur .wx-form-builder-step-input":"setStep","blur .wx-form-builder-name-input":"setName","click .wx-form-builder-control-checked":"setChecked","click .wx-form-builder-required":"setRequired","click .wx-form-builder-delete":"deleteControl","focus .wx-form-builder-select-option-text":"selectInputText","focus .wx-form-builder-label-input":"selectInputText","focus .wx-form-builder-text-input":"selectInputText","focus .wx-form-builder-input":"selectInputText","click .wx-form-builder-done":"backToMain"},selectInputText:function(b){setTimeout(function(){b.currentTarget.select()},1)},deleteControl:function(){console.log("deleteControl");this.getPreview().remove();this.remove();this.model.destroy();this.backToMain()},backToMain:function(){console.log("backToMain");a('a[href="#panel-new-form-fields"]').click()},updateLabel:function(b){var c=a(b.currentTarget).val();this.model.set("label",c);this.$(".wx-form-builder-label").text(c)},updateTitle:function(b){var c=a(b.currentTarget).val();this.model.set("title",c);this.$(".wx-form-builder-title").text(c)},updateText:function(b){console.log("updateText");var c=a(b.currentTarget).val();this.model.set("text",c)},updatePlaceholder:function(c){var b=a(c.currentTarget);this.model.get("attributes").set("placeholder",b.val());this.model.trigger("change")},getFixedValue:function(d,c){var b;if(typeof d=="string"){b=parseFloat(d).toFixed(c)}else{if(typeof d=="number"){b=d.toFixed(c)}}return b},setMin:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("min",parseFloat(b));this.model.trigger("change")},setMax:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("max",parseFloat(b));this.model.trigger("change")},setValue:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("value",parseFloat(b));this.model.trigger("change")},setStep:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("step",parseFloat(b));this.model.trigger("change")},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("name",b.val())}this.getInput().attr("name",b.val());this.model.trigger("change")},setAutocomplete:function(b){this.model.get("attributes").set("autocomplete",a(b.currentTarget).val())},setChecked:function(b){console.log("setChecked");this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked");this.model.trigger("change")},setMultiple:function(c){console.log("setMultiple");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("multiple","checked")}else{this.model.get("attributes").unset("multiple")}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},setRequired:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked")}else{this.model.get("attributes").unset("required")}this.model.trigger("change")},getInput:function(){var b=this.$(".wx-form-builder-"+this.model.get("attributes").get("type")+"-input");if(b.length==0){b=this.$(".wx-form-builder-textarea")}return b}});wxApp.FormBuilderControlPreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",selector:"",events:{click:"selectField","sortable-drop":"sortableDrop"},initialize:function(c){var b=a(c.selector||this.selector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));return this},sortableDrop:function(c,b){console.log("sortableDrop",this.model);console.log(b);this.$el.trigger("sortable-update",[this.model,b])},selectField:function(f){f.stopImmediatePropagation();var b=this.model.get("ordinal");a(".wx-form-preview-row").removeClass("wx-active");this.$el.addClass("wx-active");var d=function(){var e=a(".reveal-modal.open").attr("id");a("#"+e+" .wx-form-control-"+b).css("display","none");a("#"+e+" .wx-form-control-"+b).addClass("wx-active");a("#"+e+" .wx-form-control-"+b).slideDown(200)};if(a(".wx-form-builder-row.wx-active").length){var c=a(".wx-form-builder-row.wx-active");c.css("display","block");c.slideUp(200,function(){c.removeClass("wx-active");d()})}else{d()}a('a[href="#panel-field-settings"]').click()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabView=Backbone.View.extend({tagName:"div",className:"wx-tab",subTabsContainerView:false,initialize:function(){this.tabTpl=_.template(a("#tab-template").html());this.model.bind("change",this.rerender,this);this.model.bind("destroy",this.destroyView,this);Backbone.Events.on("tab:id-update",this.updateTabId,this)},events:{click:"editAll"},rerender:function(){this.render()},render:function(){this.$el.html(this.tabTpl(this.model.toJSON()));this.loadIcon();if(undefined!==this.$el.droppable){this.$el.droppable({accept:".list-sub-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer",greedy:true})}this.$el.data("backbone-view",this);this.$el.addClass(this.model.get("id"));this.$el.attr("id",this.model.get("id")+"TabID");if(this.model.get("layout")=="share"){this.$el.addClass("wx-share")}return this},onDrop:function(e,f){console.log("onDrop");var d=a(this).data("backbone-view");var c=a(f.draggable).data("backbone-view");Backbone.Events.trigger("tab:dropped",c.model.get("parent_id"));if(c.model.get("parent_id")!=d.model.get("id")){wx.setting_parent=true;wx.makeApiCall("tabs/set_parent_id",{tab_id:c.model.get("id"),parent_id:d.model.get("id")},function(){wx.rebuildApp();c.model.trigger("tab:move");d.model.addSubTab(c.model);a("#"+d.model.get("id")+"TabID").click();wx.setting_parent=false})}Backbone.Events.trigger("subtab:dragstop");var b=a("style")[a("style").length-1];if(b.innerHTML.indexOf("*{ cursor")==0){b.remove()}},editAll:function(){a('a[href="#panel2"]').click();a(".wx-tab button").addClass("secondary");a("div."+this.model.get("id")+" button").removeClass("secondary");this.subTabsContainerView=new wxApp.SubTabsContainerView({model:this.model});this.subTabsContainerView.tabView=this;a("#editSpace").html(this.subTabsContainerView.render().el)},updateTabId:function(b,c){if(b==this.model.get("id")){this.model.getSubTabs().forEach(function(d){d.set("parent_id",c)});this.model.set("id",c)}},loadIcon:function(){},destroyView:function(){console.log("destroying tab view");if(this.subTabsContainerView){this.subTabsContainerView.remove()}this.remove()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabEditView=Backbone.View.extend({className:"wx-subtab-edit",subTabEditTplSelector:"",baseEditTplSelector:"#subtab-edit-template",feedSampleTplSelector:"#feedsample-template",parentContainerId:false,initialize:function(b){this.initializeEvents();if(this.subTabEditTplSelector){this.subTabEditTpl=_.template(a(this.subTabEditTplSelector).html())}this.baseEditTpl=_.template(a(this.baseEditTplSelector).html());this.feedSampleTpl=_.template(a(this.feedSampleTplSelector).html());this.render();Backbone.Events.on("tab:new",this.destroyView,this);this.model.on("save",this.destroyView,this)},initializeEvents:function(){this.events=this.genericEvents;this.delegateEvents()},genericEvents:{"change .wx-dialog-input":"next","change .wx-social-input":"next","keydown .wx-dialog-input":"hideValidateFeed","keyup .wx-edit-title":"editTitle","click .wx-finish-button":"finish","click .wx-next-button":"next","change .wx-content-radio":"contentChange","click .close-reveal-modal":"close","click .wx-close-reveal-modal":"closeReveal","click .wx-close-button":"closeReveal",close:"close"},render:function(){this.$el.html(this.baseEditTpl(this.model.toJSON()));if(this.subTabEditTpl){this.$(".subtab").html(this.subTabEditTpl(this.model.toJSON()))}this.$el.prepend("<form>");this.$el.append("</form>");this.startValidation();if(this.model.validateFeed){this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide();if(this.model.get("id")!==null){this.next()}}else{this.$(".wx-next-button").hide();if(!this.model.allowTitleEdit){this.$(".wx-edit-title-div").hide()}}var b=this.$el;this.$el.on("opened",function(){b.foundation("reflow");var c=b.height();c-=115;if(c<315){c=315}b.find(".previewTabs div.content").height(c);b.find("input[type=text]:first").focus()});return this},closeReveal:function(){this.$el.foundation("reveal","close")},close:function(){this.undelegateEvents()},startValidation:function(){if(undefined!==this.$("form").validate){this.$("form").validate()}},contentChange:function(b){this.hideValidateFeed()},setParentViewContainerId:function(b){this.parentContainerId=b},finish:function(){if(this.validate()){this.setModelFromView(this.model);this.setTitleFromView(this.model);this.setIconFromView(this.model);this.saveModel();this.$el.foundation("reveal","close")}},validate:function(){return true},next:function(){if(!this.model.validateFeed){return}this.$("#dialog-loader").show();if(undefined!==this.$("form")&&undefined!=this.$("form").validate){var b=this.$("form").validate();if(this.$("form").valid()){this.validateFeed()}else{alert("Error count: "+b.errorList.length)}}else{this.validateFeed()}},saveModel:function(){var b=function(c){if(c){wx.rebuildApp()}else{wx.refreshAppPreview()}};this.model.save(b)},editTitle:function(b){if(a(".wx-validate-feed.panel").length){a(".wx-validate-feed.panel > h3").text(a(b.currentTarget).val())}},setTitleFromView:function(b){if(b.allowTitleEdit&&this.$(".wx-edit-title").val()){b.set("title",this.$(".wx-edit-title").val())}return b},setIconFromView:function(b){var c=this.$('input:radio[name="wx-icon"]:checked').val();if(c){b.set("icon_id",null);b.set("icon",c)}return b},setModelFromView:function(b){},validateFeed:function(){var b=this;var c=this.getModelCopy();this.setModelFromView(c);c.getFeedSample(function(d){b.checkFeedSample(d)})},getModelCopy:function(){var b=a.extend(true,{},this.model);return b},checkFeedSample:function(b){if(typeof b!="undefined"&&b.success&&typeof b.feed!="undefined"){this.$("#dialog-loader").hide();this.$(".wx-feed-error").hide();this.displayFeedSample(b);this.$(".wx-next-button").hide();this.$(".wx-finish-button").show();if(this.model.allowTitleEdit){this.$(".wx-edit-title-div").show()}}else{this.$(".wx-feed-error").show()}},displayFeedSample:function(b){var d=this;this.$(".wx-validate-feed").show();if(!b.feed.length){this.$(".wx-validate-feed").html("No content added yet?")}else{this.$(".wx-validate-feed").html("<ul></ul>");for(var c=0;c<b.feed.length;c++){this.$(".wx-validate-feed ul").append(d.feedSampleTpl(b.feed[c]))}}},hideValidateFeed:function(){this.$(".wx-feed-error").hide();this.$(".wx-validate-feed").html('<div class="panel wx-preview"><h3 class="wx-preview-msg">preview</h3></div>');this.$(".wx-next-button").show();this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide()},destroyView:function(){this.undelegateEvents();this.$el.removeData().unbind()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderSubTabEditView=wxApp.SubTabEditView.extend({previewPaneClass:"wx-main-preview-form",buildPaneSelector:".form-build-area",baseEditTplSelector:"#formbuilder-subtab-edit-template",hasCalledFinish:false,finishView:null,docusign:null,numberControls:null,initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)},dataCleanupOnFormEdit:function(){this.$(".form-builder-delete-data").show();this.$(".form-builder-step-one").hide()},initialize:function(){this.populateForm();wxApp.SubTabEditView.prototype.initialize.apply(this,arguments)},populateForm:function(){var e=this,b=this.model.get("config"),d;wx.isVisible=false;e.numberControls=new wxApp.FormBuilderCollection();a(document).on("opened.fndtn.reveal","[data-reveal]",function(){a(document).off("opened.fndtn.reveal","[data-reveal]");wx.isVisible=true;a(e.buildPaneSelector).foundation("reflow")});if(b.formElements===undefined){b.formElements=new wxApp.FormBuilderCollection()}else{setTimeout(function(){e.drawAllElements(b.formElements)},100)}if(b.formActions===undefined||b.formActions.length===0){e.getDefaultFormActions()}else{for(var c=0;c<b.formActions.length;c++){var f=b.formActions.at(c);if(f.get("method")==="docusign"){e.docusign=f}else{if(f.get("method")==="email"){var g=this.__getActionByMethod(f.get("method"));g.set("value",f.get("value"))}}}}},drawAllElements:function(d){var e=this;for(var c=0;c<d.length;c++){var b=d.at(c);switch(b.get("control")){case"div":e.addInfoWithProperties(b);break;case"textarea":e.addTextareaWithProperties(b);break;case"radiofieldset":e.addRadioGroupWithProperties(b);break;case"checkboxfieldset":e.addCheckboxGroupWithProperties(b);break;case"select":e.addSelectWithProperties(b);break;case"docusignSignature":e.addDocusignSignatureWithProperties(b);break;case"weeverSignature":e.addWeeverSignatureWithProperties(b);break;case"calculation":e.addCalculationWithProperties(b);break;case"hierarchical-drop-down":e.addHierarchicalDropDownListWithProperties(b);break;case"repeatableform":e.addRepeatableFormWithProperties(b);break;case"pagebreak":e.addPagebreak();break;default:if(b.get("type")==="textSlider"){e.addTextRangeInputWithProperties(b)}else{e.addInput(b)}}}},validate:function(){var f=this,g=[],c="Sorry! Your form could not be saved.";var b=function(){var h=false;if(a(".email-pdf-to-recipients").is(":checked")&&a(".wx-form-builder-action-email").val()==""){g.push({type:"formActions",message:"You requested the form be emailed, however you did not specify an email address."})}if(a(".wx-form-builder-docusign-username").val()||a(".wx-form-builder-docusign-password").val()){if(!(a(".wx-form-builder-docusign-username").val()&&a(".wx-form-builder-docusign-password").val())){g.push({type:"formActions",message:"Please provide both a User Name and Password for DocuSign&trade;."})}}};var e=function(i){var o="rangeAttributes",j=i.get("attributes").get("min"),h=i.get("attributes").get("max"),n=i.get("attributes").get("value"),l=i.get("attributes").get("step");if(i.get("type")=="textSlider"){var k=(h-j+l)/l;n=isNaN(n)?(k/2)-0.5:n;i.get("attributes").set("value",n)}if(isNaN(i.get("attributes").get("min"))){g.push({type:o,message:"The Minimum value is empty on one or more of your Number Sliders."})}if(isNaN(i.get("attributes").get("max"))){g.push({type:o,message:"The Maximum value is empty on one or more of your Number Sliders."})}if(isNaN(i.get("attributes").get("value"))){g.push({type:o,message:"The Starting value is empty on one or more of your Number Sliders."})}if(isNaN(i.get("attributes").get("step"))){g.push({type:o,message:"The Step value is empty on one or more of your Number Sliders."})}};this.model.get("config").formElements.forEach(function(h){if(h.get("control")=="input"&&h.get("attributes").get("type")=="range"){e(h)}});b();if(g.length){g.forEach(function(h){c+="<br><br>"+h.message});var d=a(".alert-box.alert .message").html(c);d.parent().slideDown();return false}return true},getDefaultFormActions:function(){this.model.get("config").formActions=new Backbone.Collection();if((!this.model.get("config").isDocuSign)||this.model.get("advancedMode")){this.addEmailAction(null)}if(this.model.get("advancedMode")){this.addPostAction(null)}},setModelFromView:function(b){for(var c=0;c<b.get("config").formActions.length;c++){var d=b.get("config").formActions.at(c),e=true;if(d.get("method")==="post"||d.get("method")==="email"){if(!d.get("value")){b.get("config").formActions.remove(d);e=false;c--}}else{if((typeof d.get("username")==="undefined")||!d.get("password")){b.get("config").formActions.remove(d);c--}}if(e&&d.get("method")==="post"){d.setUrl()}}return b},events:{"click .wx-form-builder-add-text-input":"addTextInput","click .wx-form-builder-add-password-input":"addPasswordInput","click .wx-form-builder-add-date-input":"addDateInput","click .wx-form-builder-add-datetime-local-input":"addDateTimeLocalInput","click .wx-form-builder-add-email-input":"addEmailInput","click .wx-form-builder-add-file-input":"addFileInput","click .wx-form-builder-add-photo-input":"addPhotoInput","click .wx-form-builder-add-month-input":"addMonthInput","click .wx-form-builder-add-number-input":"addNumberInput","click .wx-form-builder-add-tel-input":"addTelInput","click .wx-form-builder-add-time-input":"addTimeInput","click .wx-form-builder-add-url-input":"addUrlInput","click .wx-form-builder-add-radio-group":"addRadioGroup","click .wx-form-builder-add-checkbox-group":"addCheckboxGroup","click .wx-form-builder-add-textarea":"addTextarea","click .wx-form-builder-add-range-input":"addRangeInput","click .wx-form-builder-add-text-range-input":"addTextRangeInput","click .wx-form-builder-add-select":"addSelect","click .wx-form-builder-add-info":"addInfo","click .wx-form-builder-add-pagebreak":"addPagebreak","click .wx-form-builder-add-docusign-signature":"addDocusignSignature","click .wx-form-builder-add-weever-signature":"addWeeverSignature","click .wx-form-builder-add-calculation":"addCalculation","click .wx-form-builder-add-hierarchical-drop-down-list":"addHierarchicalDropDownList","click .wx-form-builder-add-repeatable-form":"addRepeatableForm","click .wx-submit-button":"showSubmitButtonInfo","keyup .submit-button-text":"updateSubmitButtonText","sortable-update":"sortableUpdate","click .wx-continue-button":"next","click .wx-back-button":"back","click .wx-close-button":"closeConfirmation","click .wx-close-reveal-modal":"closeConfirmation","change .email-pdf-to-recipients":"showHideEmailInfo","change .custom-post":"showHideCustomPostInfo","blur .wx-form-builder-action":"updateAction","change .wx-form-builder-send-current-user-email":"toggleSendEmailAddress","keyup .wx-form-builder-pdfheader-title":"updatePdfHeader","keyup .wx-form-builder-pdfheader-line1":"updatePdfHeader","keyup .wx-form-builder-pdfheader-line2":"updatePdfHeader","keyup .wx-form-builder-pdfheader-line3":"updatePdfHeader","click .radio-mode":"updateMode","click .wx-dd-close-button":"closeReveal","click .wx-form-builder-warning-acknowledged":"acknowledgementReceived","click .wx-form-builder-warning-proceed":"proceed"},updateSubmitButtonText:function(c){var b=a(c.currentTarget);this.model.get("config").submitButtonText=b.val();a(".wx-validate-feed.panel button.wx-submit-button").text(b.val());this.$("span.submit-button-text").text(b.val())},showSubmitButtonInfo:function(d){a(".wx-form-preview-row.wx-active").removeClass("wx-active");a(".wx-submit-button").parent().addClass("wx-active");var c=this,b=c.$(".wx-form-builder-row.wx-active");c.$('a[href="#panel-field-settings"]').click();b.css("display","block");b.slideUp(200,function(){b.removeClass("wx-active");c.$(".wx-button-controls").css("display","none");c.$(".wx-button-controls").addClass("wx-active");c.$(".wx-button-controls").slideDown(200)})},sortableUpdate:function(e,c,b){var d=this.model.get("config").formElements;d.remove(c);d.add(c,{at:b})},finish:function(){var h=false,f=this.model.get("config").formElements,b=function(){this.finishView=new wxApp.FormBuilderFinishView({model:this.model});this.$(this.buildPaneSelector).append(this.finishView.render().el)};var d={};for(var e=0;e<f.length;e++){d=f.at(e);if("input"==d.get("control")&&"file"==d.get("attributes").get("type")){h=true}else{if("textSlider"==d.get("type")){d.get("attributes").set("step",1);d.get("attributes").set("min",0);d.get("attributes").set("max",d.get("options").length-1);for(var c=0;c<d.get("options").length;c++){var g=d.get("options").models[c];if(g.get("attributes").attributes.checked){d.get("attributes").set("value",c);break}}}}}wxApp.SubTabEditView.prototype.finish.apply(this);return;if(!h||typeof this.model.get("config").idFieldIndex=="number"){wxApp.SubTabEditView.prototype.finish.apply(this);return}if(typeof this.model.get("config").idFieldIndex!="number"&&!this.hasCalledFinish){b.apply(this);this.hasCalledFinish=true;return}if(this.hasCalledFinish){this.finishView.remove();b.apply(this)}},addDocusignAction:function(b,c){if(c===undefined){c=new wxApp.FormBuilderAction({method:"docusign"})}this.addCustomAction(c);return c},addEmailAction:function(b,c){if(c===undefined){c=new wxApp.FormBuilderAction({method:"email"})}this.addCustomAction(c);return c},addPostAction:function(b,c){if(c===undefined){c=new wxApp.FormBuilderAction({method:"post"})}this.addCustomAction(c);return c},addCustomAction:function(b){this.model.get("config").formActions.push(b);return b},addInput:function(c){var b=new wxApp.FormBuilderControlInputView({model:c});this.addControl(c,b);return c},addDateInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Date",attributes:{type:"date"}});this.addInput(b)},addDateTimeLocalInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Date / Time",attributes:{type:"datetime-local"}});this.addInput(b)},addEmailInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Email",showPlaceholder:true,multiClass:"",emailOptionClass:"",attributes:{type:"email"}});this.addInput(b)},addFileInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"File upload",multiClass:"",autocompleteClass:"hide",attributes:{type:"file",accept:"image/*"}});this.addInput(b)},addPhotoInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Photo upload",multiClass:"",autocompleteClass:"hide",attributes:{type:"file",accept:"image/*"}});this.addInput(b)},addMonthInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Month",attributes:{type:"month"}});this.addInput(b)},addNumberInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Number",minClass:"",maxClass:"",stepClass:"",valueClass:"",attributes:{type:"number"}});this.addInput(b)},addPasswordInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Password",showPlaceholder:true,attributes:{type:"password"}});this.addInput(b)},addRangeInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Range",minClass:"",maxClass:"",stepClass:"",valueClass:"",attributes:{type:"range",min:"1.00",max:"5.00",value:"3.00",step:"1.00"}});this.addInput(b)},addTextRangeInput:function(c){var b=new wxApp.FormBuilderControlTextRange({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Select One",type:"textSlider",attributes:{type:"range"}});this.addTextRangeInputWithProperties(b)},addTextRangeInputWithProperties:function(c){var b=new wxApp.FormBuilderControlTextRangeView({model:c});this.addControl(c,b);return c},addTelInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Telephone",type:"tel",showPlaceholder:true,attributes:{type:"tel"}});this.addInput(b)},addTextInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Untitled",type:"text",showPlaceholder:true,attributes:{type:"text"}});this.addInput(b)},addTimeInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Time",attributes:{type:"time"}});this.addInput(b)},addUrlInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"URL",showPlaceholder:true,attributes:{type:"url"}});this.addInput(b)},addPagebreak:function(c){var d=new wxApp.FormBuilderControlPagebreak();var b=new wxApp.FormBuilderControlPagebreakView({model:d});this.addControl(d,b)},addInfo:function(c){var b=new wxApp.FormBuilderControlInfo({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addInfoWithProperties(b)},addInfoWithProperties:function(c){var b=new wxApp.FormBuilderControlInfoView({model:c});this.addControl(c,b)},addDocusignSignature:function(c){var b=wxApp.FormBuilderControlDocusignSignature({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addDocusignSignatureWithProperties(b)},addDocusignSignatureWithProperties:function(c){var b=new wxApp.FormBuilderControlDocusignSignatureView({model:c});this.addControl(c,b)},addWeeverSignature:function(c){var b=new wxApp.FormBuilderControlWeeverSignature({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addWeeverSignatureWithProperties(b)},addWeeverSignatureWithProperties:function(c){var b=new wxApp.FormBuilderControlWeeverSignatureView({model:c});this.addControl(c,b)},addTextarea:function(b){var c=new wxApp.FormBuilderControlTextarea({controlTitle:a(b.currentTarget).children(".wx-button-label").text().trim()});this.addTextareaWithProperties(c)},addTextareaWithProperties:function(c){var b=new wxApp.FormBuilderControlTextareaView({model:c});this.addControl(c,b)},addRadioGroup:function(c){var b=new wxApp.FormBuilderControlRadioFieldset({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addRadioGroupWithProperties(b)},addRadioGroupWithProperties:function(b){var c=new wxApp.FormBuilderControlRadioFieldsetView({model:b});this.addControl(b,c)},addCheckboxGroup:function(b){var c=new wxApp.FormBuilderControlCheckboxFieldset({controlTitle:a(b.currentTarget).children(".wx-button-label").text().trim()});this.addCheckboxGroupWithProperties(c)},addCheckboxGroupWithProperties:function(b){var c=new wxApp.FormBuilderControlCheckboxFieldsetView({model:b});this.addControl(b,c)},addSelect:function(c){var b=new wxApp.FormBuilderControlSelect({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addSelectWithProperties(b)},addSelectWithProperties:function(b){var c=new wxApp.FormBuilderControlSelectView({model:b});this.addControl(b,c)},addCalculation:function(b){if(this.numberControls.length){var c=new wxApp.FormBuilderCalculator();this.addCalculationWithProperties(c)}else{alert("Please add at least one number field.")}},addCalculationWithProperties:function(c){var b=new wxApp.FormBuilderCalculatorView({model:c,inputs:this.numberControls});this.addControl(c,b)},addHierarchicalDropDownList:function(c){var d={},b=new wxApp.FormBuilderHierarchicalDropDownList(d);this.addHierarchicalDropDownListWithProperties(b)},addHierarchicalDropDownListWithProperties:function(c){var b=new wxApp.FormBuilderHierarchicalDropDownListView({model:c});this.addControl(c,b)},addRepeatableForm:function(c){var b=new wxApp.FormBuilderRepeatableForm({});this.addRepeatableFormWithProperties(b)},addRepeatableFormWithProperties:function(c){var d=this,b=new wxApp.FormBuilderRepeatableFormView({model:c});d.addControl(c,b);d.$(".add-element-to-form").append('<option value="'+c.get("ordinal")+'">&mdash; '+c.get("label")+"</option>");console.log("REPEATABLE",c);if(c.get("formElements")){console.log("drawAllElements",c.get("formElements"));d.$(".add-element-to-form").val(c.get("ordinal"));d.drawAllElements(c.get("formElements"));d.$(".add-element-to-form").val("")}else{d.$(".add-element-to-form").val(c.get("ordinal"))}a(".add-element-ddl-container").show()},addControl:function(n,l){var k=this,c=this.model.get("config"),d=c.formElements,j=n.get("ordinal"),p=c.advanced||false,f=false,o=parseInt(k.$(".add-element-to-form").val()),b="."+this.previewPaneClass;if(o){for(var g=0;g<d.length;g++){var h=d.at(g);if(h.get("ordinal")===o){d=h.get("formElements");b=".subform-"+h.get("ordinal")+"-preview-form";break}}}if(!j){j=k._getLargestOrdinal(c.formElements);n.set("ordinal",++j)}l.$el.removeClass(function(i,q){return(q.match(/\bwx-form-control-\S+/g)||[]).join(" ")});l.$el.addClass("wx-form-control-"+j.toString());n.set("advanced",p);this.$(this.buildPaneSelector).append(l.render().el);a(".wx-form-builder-row.wx-active").removeClass("wx-active").css("display","none");a(".wx-form-preview-row.wx-active").removeClass("wx-active");l.$el.addClass("wx-active").css("display","block");if(wx.isVisible){d.push(n)}if((n.get("attributes")&&n.get("attributes").get("type")==="number")||(n.get("control")==="calculation")){this.numberControls.push(n)}if(wx.isVisible){a(k.buildPaneSelector).foundation("reflow");k.$('a[href="#panel-field-settings"]').click()}var e=l.getPreview().render().$el;a(b).append(e);setTimeout(function(){e.addClass("wx-active")},1)},confirmClosePopup:function(c){c.preventDefault();var b=confirm("Are you sure you want to cancel?  Your changes have not been saved.");if(!b){c.stopImmediatePropagation();return false}},closeConfirmation:function(){var b=confirm("Are you sure you want to cancel?  Your changes have not been saved.");if(b){this.$el.foundation("reveal","close")}},next:function(c){c.preventDefault();if(a(".form-builder-step-one").is(":visible")){a(".form-builder-step-one").slideUp();a(".form-builder-step-two").slideDown();var b=this.__getActionByMethod("email");if(!this.model.get("id")){var d=a(".wx-edit-form-title").val();b.get("pdfHeader").title=d;a(".wx-form-builder-pdfheader-title").val(d);this.$(".wx-pdf-preview .title").html(d)}}else{a(".form-builder-step-two").slideUp();a(".form-builder-step-three").slideDown()}this.$el.foundation("reflow")},back:function(){if(a(".form-builder-step-two").is(":visible")){a(".form-builder-step-one").slideDown();a(".form-builder-step-two").slideUp()}else{a(".form-builder-step-two").slideDown();a(".form-builder-step-three").slideUp()}this.$el.foundation("reflow")},showHideEmailInfo:function(c){var b=a(c.currentTarget).is(":checked");if(b){a(".wx-email-action").slideDown()}else{a(".wx-email-action").slideUp()}},showHideCustomPostInfo:function(c){var b=a(c.currentTarget).is(":checked");if(b){a(".wx-custom-post").slideDown()}else{a(".wx-custom-post").slideUp()}},toggleSendEmailAddress:function(c){var d=this.__getActionByMethod("email"),b=a(c.currentTarget),e=this.$('.wx-email-action input[type="email"]');if(b.is(":checked")){e.val(wx.currentUserEmail);d.set("value",wx.currentUserEmail)}else{e.val("");d.set("value","")}},updatePdfHeader:function(c){var d=this.__getActionByMethod("email"),b=a(c.currentTarget);if(b.hasClass("wx-form-builder-pdfheader-title")){d.get("pdfHeader").title=b.val();this.$(".wx-pdf-preview .title").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line1")){d.get("pdfHeader").line1=b.val();this.$(".wx-pdf-preview .line1").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line2")){d.get("pdfHeader").line2=b.val();this.$(".wx-pdf-preview .line2").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line3")){d.get("pdfHeader").line3=b.val();this.$(".wx-pdf-preview .line3").html(b.val())}},updateAction:function(c){console.log("updateAction!");c.preventDefault();var b=a(c.currentTarget),e="email";if(b.hasClass("wx-form-builder-action-post")){e="post"}var d=this.__getActionByMethod(e);d.set("value",b.val())},updateMode:function(c){var d=this.__getActionByMethod("post"),b=a(c.currentTarget);d.set("mode",b.val())},__getActionByMethod:function(e){var d=null;for(var b=0;b<this.model.get("config").formActions.length;b++){var c=this.model.get("config").formActions.models[b];if(c.get("method")===e){d=c;break}}return d},acknowledgementReceived:function(b){if(a(b.currentTarget).is(":checked")){a(".wx-form-builder-warning-proceed").removeClass("disabled")}else{a(".wx-form-builder-warning-proceed").addClass("disabled")}},proceed:function(c){var b=this;c.preventDefault();if(a(c.currentTarget).hasClass("disabled")){return}var d=window.confirm("Are you SURE you want to proceed? All of your existing form submissions will be erased!");if(!d){return}a.ajax({url:wx.apiUrl+"_formbuilder/delete_form_data?tab_id="+this.model.get("id"),success:function(e){b.$(".form-builder-delete-data").slideUp();b.$(".form-builder-step-one").slideDown()},error:function(e,g,f){alert("An unknown error has occurred deleting the data. Please contact support@weeverapps.com.")}})},_getLargestOrdinal:function(e,b){if(!b){b=0}for(var d=0;d<e.length;d++){var c=e.at(d);if(c.get("ordinal")>b){b=c.get("ordinal")}if(c.get("formElements")){b=this._getLargestOrdinal(c.get("formElements"),b)}}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.StyleBase=Backbone.View.extend({showLoadingGif:function(c){var b="#"+c+"_loading";a(b).show();return b},hideLoadingGif:function(c,b){this.hideLoadGif(c,b)},hideLoadGif:function(e,c){var d=e+"_done";var b='<label id="'+d+'" class="left inline">Saved.</label>';a(c).before(b);a("#"+d).delay(2000).fadeOut(1000).queue(function(){a(this).remove()});a(c).hide()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressAddPageSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressaddpage-subtab-edit-template",editorId:"",isCoupon:false,events:{"keyup .wx-coupon-title":"updatePreview","keyup .wx-coupon-description":"updatePreview","keyup .wx-coupon-terms":"updatePreview","keyup .wx-coupon-barcode":"updateBarcode"},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)},render:function(){var c=this,b=this.model.get("config").url;if(b){c.loadExistingArticle(b)}wxApp.SubTabEditView.prototype.render.apply(c);c.$("section.post-list").hide();c.$("section.editor").show();c.$("section.coupon").hide();c.$("section.mapper").hide();c.editorId="wx-content-"+Math.floor((Math.random()*1000000)+1).toString();c.$(".wx-content-editor").attr("id",c.editorId);setTimeout(function(){var d=wx.pluginUrl+"file-upload.php?upload_path="+wx.uploadPath+"&upload_url="+wx.uploadUrl;new nicEditor({fullPanel:true,uploadURI:d}).panelInstance(c.editorId)},200)},setModelFromView:function(d){var h="",c="",g="",f="",e="",b;if(a("section.editor").is(":visible")){c=this.$(".wx-edit-input").val();h=nicEditors.findEditor(this.editorId).nicInstances[0].getContent()}if(a("section.coupon").is(":visible")){if(!c){c=this.$(".wx-coupon-title").val()}g=this.$(".wx-coupon-description").val();f=this.$(".wx-coupon-terms").val();e=this.$(".wx-coupon-barcode").val();d.setConfig("description",g);d.setConfig("terms",f);d.setConfig("barcodeText",e)}b=this.createPage(c,h);d.setConfig("name",c);d.setConfig("title",c);d.setConfig("url",b);d.set("parent_id",null);return d},loadExistingArticle:function(b){var c=this;a.getJSON(b,function(f){console.log("loadExistingArticle");console.log(f);if(c.isCoupon){var d=c.model.get("config");if(!!d.barcodeText){c.$(".wx-coupon-barcode").val(c.model.get("config").barcodeText);c.$("#wx_coupon_barcode_preview").html('<img src="'+f.results[0].image+'" />')}}var e=f.results[0].html;e=a("<div/>").html(e).contents();var g=e.find("h1.wx-article-title").html().trim();e.find("h1.wx-article-title").detach();e=a(e.find("div")[0]).html().trim();if(a("div.nicEdit-main")){a("div.nicEdit-main").html(e)}else{c.$(".wx-content-editor").val(e)}c.$(".wx-edit-input").val(g)})},createPage:function(b,e,d){var g="",f={action:"ajaxAddNewContent",name:b,content:e,nonce:a("input#nonce").val()};if(d){for(var c in d){if(d.hasOwnProperty(c)){f[c]=d[c]}}}jQuery.ajax({type:"POST",url:ajaxurl,async:false,data:f,success:function(h){g=h.replace("weever_cartographer0","weever_cartographer")},error:function(h,i){console.log(h);console.log(i)}});return g},updatePreview:function(){var d=a(".wx-coupon-title").val(),c=a(".wx-coupon-description").val(),b=a(".wx-coupon-terms").val();if(d){this.$("#wx_coupon_title_preview").text(d)}if(c){this.$("#wx_coupon_content_preview").text(c)}if(b){this.$("#wx_coupon_conditions_preview").text(b)}},updateBarcode:function(){console.log("updateBarcode");var d=this,c=jQuery("input#nonce").val(),e=this.$(".wx-coupon-barcode").val(),b=this.model;setTimeout(function(){if(e==d.$(".wx-coupon-barcode").val()){console.log(e);jQuery.ajax({type:"POST",url:ajaxurl,async:false,data:{action:"ajaxGetBarcode",text:e,nonce:c},success:function(f){f=JSON.parse(f);console.log(f);if(f.success){var g=f.filename;d.$("#wx_coupon_barcode_preview").html('<img src="'+g+'" />');b.setConfig("url",g)}},error:function(f,g){console.log(f);console.log(g)}})}},500)}})})(jQuery);wxApp=wxApp||{};(function(d){var e=function(f,h){if(typeof h!=="string"){return h}var g=encodeURIComponent(h);return g};var c=function(){return JSON.parse(JSON.stringify(this.attributes,e))};var b=function(){var f=[];this.models.forEach(function(g){f.push(g.toJSONrecursive())});return JSON.parse(JSON.stringify(f))};var a=function(f){var i="SubTab";switch(f.content){case"contact":i="WordpressContactsSubTab";break;case"facebookAlbums":i="FacebookAlbumsSubTab";break;case"flickrPhotosets":i="FlickrSubTab";break;case"formbuilder":if(f.config.isDocuSign=="true"){i="DocuSignSubTab"}else{i="FormBuilderSubTab"}break;case"htmlMap":i="MapSubTab";break;case"htmlPage":if(f.config&&f.config.subtab_name){i=f.config.subtab_name}else{i="WordpressPageSubTab";if(wx.cms==="cloud"){i="WordpressAddPageSubTab"}}break;case"quiz":i="QuizBuilderSubTab";break;case"twitter":case"twitterUser":i="TwitterSubTab";break;case"wufoo":i="WufooSubTab";break;case"youtube":case"youtubePlaylist":i="YoutubeSubTab";break;default:if(f.config!=undefined&&f.config.subtab_name!=undefined){if(f.config.subtab_name in wxApp){i=f.config.subtab_name}}if("SubTab"==i&&f.config!=undefined&&f.config.url!=undefined){if(f.config.url.indexOf("_rss2r3s")>=0){i="RSSSubTab";var g=f.config.url;g=g.replace("http://weeverapp.com/api/v2/_rss2r3s/byUrl?url=","");g=decodeURIComponent(g);f.config.rawUrl=g;f.config.subtab_name="RSSSubTab"}}if("SubTab"==i){for(var h in wxApp){if(h.indexOf("SubTab")!=-1&&undefined!=wxApp[h].prototype.defaults&&undefined!=wxApp[h].prototype.defaults.type){if(wxApp[h].prototype.defaults.type==f.type){i=h;break}}}}if("SubTab"==i){for(var h in wxApp){if(h.indexOf("SubTab")!=-1&&undefined!=wxApp[h].prototype.defaults&&undefined!=wxApp[h].prototype.defaults.content){if(wxApp[h].prototype.defaults.content==f.content){i=h;break}}}}}return i};Backbone.Collection.prototype.getModelNameByTabData=a;Backbone.Model.prototype.toJSONrecursive=c;Backbone.Collection.prototype.toJSONrecursive=b;wxApp.App=Backbone.View.extend({el:"#toptabs",initialize:function(){Backbone.Events.on("subtab:dragstart",this.showDropTab,this);Backbone.Events.on("subtab:dragstop",this.hideDropTab,this);Backbone.Events.on("tab:dropped",this.clearBodyStyles,this);Backbone.Events.on("tab:dropped",this.hideDropTab,this)},events:{"click #preview-refresh":"refreshAppPreview"},createFeatureView:function(i,h){if(undefined!==wxApp[i+"SubTab"]&&undefined!==wxApp[i+"SubTabEditView"]){var g=new wxApp[i+"SubTab"]();if(undefined!=h&&h){g.set("parent_id",parseInt(h))}var f=new wxApp[i+"SubTabEditView"]({model:g,el:"#wx-edit-area-"+i})}else{throw new Error("Invalid type "+i)}},refreshAppPreview:function(){console.log("Refreshing...");wx.refreshAppPreview()},showDropTab:function(){d("#dropTab").show();d(".wx-layout-tablist .wx-tab").addClass("dragging");d("#editListTabsSortable").addClass("dragging")},hideDropTab:function(){d("#dropTab").hide();d(".wx-layout-tablist .wx-tab.dragging").removeClass("dragging");d("#editListTabsSortable.dragging").removeClass("dragging")},clearBodyStyles:function(){d("body").attr("style","")},changeFont:function(f){var g="@font-face {     font-family: 'wxFont-1';     src:         url('data:image/svg+xml;base64,"+f.get("svg")+"') format('svg'),         url('data:application/font-woff;charset=utf-8;base64,"+f.get("woff")+"') format('woff'),         url('data:application/x-font-ttf;charset=utf-8;base64,"+f.get("ttf")+"') format('truetype'); } .wxFont-1:before { font-family: 'wxFont-1'; } ";d("#fontstyle").html(g)}});wxApp.appView=new wxApp.App();wx.makeApiCall("design/get_font_id",{},function(g){if(typeof g.font_id!=="undefined"){if(g.font_id==1){g.font_id=300001;wx.makeApiCall("design/set_font_id",{font_id:g.font_id},function(h){console.log("Font upgraded.")})}wxApp.font=g.font_id;var f=new wxApp.IconFont();f.fetch(g.font_id,function(){d('<style id="fontstyle" type="text/css"></style>').appendTo("head");wxApp.appView.changeFont(f)})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.AppStatusToggle=Backbone.View.extend({el:"#appToggle",events:{"click #on":"save","click #off":"save"},initialize:function(){this.tpl=_.template(a("#appStatusToggle").html());this.render();this.model.bind("change",this.render,this)},render:function(){this.$el.html(this.tpl(this.model.toJSON()))},save:function(b){a("#status-loading").show();if(b.currentTarget.id=="on"){app_enabled=1}else{app_enabled=0}wxApp.config.online=app_enabled;wx.makeApiCall("config/set_online",{online:app_enabled},function(d){var c=app_enabled?"online":"offline";a("#appStatus b").html(c);a("#status-loading").fadeOut()})}})})($);wxApp=wxApp||{};(function(a){wxApp.ContainerEditView=Backbone.View.extend({initialize:function(){this.tpl=_.template(a("#ContainerEditContent").html())},events:{"click .wx-save-button":"save"},render:function(){this.$el.html(this.tpl(this.model.toJSON()));return this},cancel:function(){try{this.remove()}catch(b){}},save:function(){var d=this,b=this.model.get("id"),e=a("#container-title").val(),c=a('input:radio[name="wx-icon"]:checked').val();wx.makeApiCall("tabs/set_tabAttributes",{tab_id:b,tabTitle:e,tabIcon:c},function(){d.model.set("tabTitle",e);d.model.set("tabIcon_id",null);d.model.set("tabIcon",c);wx.rebuildApp()});console.log("Closing...");a("#ContainerEditModal").foundation("reveal","close")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FeatureView=Backbone.View.extend({tagName:"li",className:"",initialize:function(){this.featureTpl=_.template(a("#feature-template").html());this.model.bind("change",this.render,this)},events:{"click .wx-add-feature":"addFeature"},render:function(){if(typeof this.model.get("tierRequired")==="undefined"){this.model.set("tierRequired",1)}this.$el.html(this.featureTpl(this.model.toJSON()));if(this.model.get("rel")!==""){this.$("a").attr("rel",this.model.get("rel"))}return this},addFeature:function(c){var b=c.currentTarget.id.replace("add-","");if(this.$("a").hasClass("wx-unavailable")){a("#wx-edit-area-"+b).html(a("#please-subscribe").html())}else{if(this.model.get("tierRequired")>parseFloat(wxApp.account.get("tier_raw"))){a("#wx-edit-area-"+b).html(a("#please-upgrade").html())}else{wxApp.appView.createFeatureView(b,null)}}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FeatureList=Backbone.View.extend({el:"#toptabs",initialize:function(){this.collection=new wxApp.FeatureCollection();this.collection.bind("add",this.addOne,this)},addOne:function(c){if(c.get("cms")==null||a.inArray("all",c.get("cms"))===0||a.inArray(wx.cms,c.get("cms"))===0){var d=this;var b=new wxApp.FeatureView({model:c});this.$el.append(b.render().el)}}});wxApp.account=new wxApp.Account();wxApp.account.fetch(function(){var b=parseInt(wxApp.account.get("tier_raw")),c=wxApp.account.get("site");c=c.replace("http://","").replace("https://","");c=a("#preview-app-dialog-frame").attr("rel")+c+"?simphone=1&cache_manifest=false";a("#preview-app-dialog-frame").attr("rel",c);wx.refreshAppPreview();wx.poll=true;console.log("=== TIER ===",b);if(b>=100){a("#toptabs").removeClass("medium-block-grid-7").addClass("medium-block-grid-5")}wxApp.featureList=new wxApp.FeatureList();wxApp.Tabs.fetch();wxApp.featureList.collection.fetch({url:wx.apiUrl+"features/get_features_backbone?app_key="+wx.siteKey,success:function(d){},error:function(){var e="wx.featurelist.js";var d=window.location.hostname;if(d.lastIndexOf(".dev")==(d.length-4)||d.lastIndexOf("weeverdev.com")==(d.length-13)){e="wx.featurelist.dev.js"}if(b>=300){e="wx.featurelist.quiz.js"}else{if(b>=200){e="wx.featurelist.training.js"}else{if(b>=100){e="wx.featurelist.docusign.js"}}}wxApp.featureList.collection.fetch({url:wx.pluginUrl+"static/js/config/"+e,success:function(f){},error:function(){wxApp.featureList.collection.fetch({url:wx.pluginUrl+"static/js/config/wx.featurelist.js",success:function(f){},error:function(){console.log("Could not load feature list.")}})}})}})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderCalculatorView=wxApp.FormBuilderControlView.extend({inputTplSelector:"#form-builder-calculator",preview:null,inputs:null,events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"click .wx-add-calculation-field":"addField","click .wx-delete-calculation-field":"deleteField","change .wx-calculation-field":"changeField","change .wx-calculation-operator":"changeOperator","blur input.wx-constant":"changeConstant","change input.wx-constant":"changeConstant"})},initialize:function(c){var b=a(this.inputTplSelector);this.inputTpl=_.template(b.html());this.inputs=c.inputs},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderCalculatorPreview({model:this.model})}return this.preview},render:function(){var b=this;b.$el.html(b.inputTpl(b.model.toJSON()));if(b.firstRender){setTimeout(function(){b.$(".wx-form-builder-label-input").focus()},1);b.firstRender=false;b.inputs.on("add",b.updateDropDownLists,b);b.inputs.on("remove",b.updateDropDownLists,b);b.inputs.on("change",b.updateDropDownLists,b)}b.updateDropDownLists();return b},updateDropDownLists:function(h){var g=this,b=this.$(".wx-calculation-field"),d=[];for(var f=0;f<this.inputs.length;f++){var c=this.inputs.at(f);d.push(c)}a.each(b,function(e,k){k=a(k);k.html("<option></option>");a.each(d,function(o,p){var n=p.get("label"),l=p.get("ordinal");k.append(a("<option>",{value:l,text:n}))});k.append(a("<option>",{value:"wxConstantValue",text:"[Constant Value]"}));var j=g.model.get("fields").at(e);k.val(j.get("ordinal"));if(e>0){g.$('.wx-calculation-operator[data-index="'+e.toString()+'"]').val(j.get("operation"))}if(j.get("ordinal")=="wxConstantValue"){g.$('div.wx-constant[data-index="'+e.toString()+'"]').show()}g.$('div.wx-constant[data-index="'+e.toString()+'"] input').val(j.get("constant"))});setTimeout(function(){g.getPreview().render()},100)},addField:function(b){b.preventDefault();this.model.get("fields").add(new wxApp.FormBuilderCalculatorField());this.render()},deleteField:function(d){d.preventDefault();var b=a(d.currentTarget),c=b.data("index");this.model.get("fields").remove(this.model.get("fields").at(c));this.render()},changeConstant:function(d){var b=a(d.currentTarget),f=b.val(),c=b.parent().parent().data("index");this.model.get("fields").at(c).set("constant",parseFloat(f));this.model.trigger("change")},changeField:function(d){var b=a(d.currentTarget),f=b.val(),c=b.data("index");if(f==="wxConstantValue"){this.$('div.wx-constant[data-index="'+c+'"]').slideDown()}else{this.$('div.wx-constant[data-index="'+c+'"]').slideUp()}this.model.get("fields").at(c).set("ordinal",f);this.model.trigger("change")},changeOperator:function(d){var b=a(d.currentTarget),f=b.val(),c=b.data("index");this.model.get("fields").at(c).set("operation",f);this.model.trigger("change")}});wxApp.FormBuilderCalculatorPreview=wxApp.FormBuilderControlPreview.extend({selector:"#form-builder-calculator-preview",initialize:function(c,b){wxApp.FormBuilderControlPreview.prototype.initialize.apply(this,arguments);Backbone.Events.on("recalculate",this.recalculate,this)},recalculate:function(b){if(this.cid!==b.cid){this.calculate()}},render:function(){var c=this,b=c.model.toJSON();c.$el.html(c.inputTpl(b));c.calculate();return c},calculate:function(){var j=this,h=j.model.toJSON(),b=true,o=[],e=0,q=0,c=j.$el.parents(".wx-validate-feed");j.$el.removeClass("wx-error");for(var g=0;g<h.fields.length;g++){var l=h.fields.models[g].attributes.ordinal,f=c.find("input[data-ordinal='"+l+"']");if(!l){j.$el.addClass("wx-error");j.$(".wx-form-builder-calculation-result strong").html("Please update the settings for this field");b=false;return}if(l=="wxConstantValue"){var n=parseFloat(h.fields.models[g].attributes.constant);if(isNaN(n)){j.$el.addClass("wx-error")}e=Math.max(e,j.countDecimalPlaces(n));o.push(n);continue}if(f.length===0){j.$el.addClass("wx-error");j.$(".wx-form-builder-calculation-result strong").html("Could not find a field for the calculation.");b=false;return}f.off("change");f.on("change",function(){j.calculate()});var n=f.val();if(!a.isNumeric(n)){var k=a(".wx-form-control-"+l+" .wx-form-builder-label-input").val();j.$(".wx-form-builder-calculation-result strong").html("The value in <em>"+k+"</em> is not a number.");b=false;continue}e=Math.max(e,j.countDecimalPlaces(n));o.push(parseFloat(n))}if(!b){j.$('input[type="hidden"]').val(0);j.$('input[type="hidden"]').trigger("change");return}q=o[0];for(var g=1;g<h.fields.length;g++){var d=h.fields.models[g].attributes.operation;switch(d){case"+":q=q+o[g];break;case"-":q=q-o[g];break;case"*":q=q*o[g];break;case"/":q=q/o[g];break}}if(q){q=q.toFixed(e);j.$(".wx-form-builder-calculation-result strong").html(q);var p=j.$('input[type="hidden"]').val();j.$('input[type="hidden"]').val(q);if(q!=p){Backbone.Events.trigger("recalculate",j)}}},countDecimalPlaces:function(c){var b=(""+c).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!b){return 0}return Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0))}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlBaseFieldsetView=Backbone.View.extend({tagName:"div",className:"wx-form-builder-row panel",preview:null,events:{"keyup .wx-form-builder-title-input":"updateTitle","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-delete":"deleteControl","click .wx-form-builder-add-option":"addOption","click .wx-form-builder-required":"setRequired","input .wx-form-builder-name-input":"setName","focus .wx-form-builder-title-input":"selectInputText","click .wx-form-builder-done":"backToMain"},selectInputText:function(b){setTimeout(function(){b.currentTarget.select()},1)},initialize:function(){var b=a(this.tplSelector);this.tpl=_.template(b.html())},render:function(){this.$el.html(this.tpl(this.model.toJSON()));return this},deleteControl:function(){this.getPreview().remove();this.remove();this.model.destroy();this.backToMain()},backToMain:function(){console.log("backToMain");a('a[href="#panel-new-form-fields"]').click()},setAllowAdditional:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.set("name",b.val());this.model.get("attributes").set("name",b.val())}this.model.trigger("change")},setRequired:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked");this.getPreview().$("legend .required").css("display","inline")}else{this.model.get("attributes").unset("required");this.getPreview().$("legend .required").css("display","none")}},updateTitle:function(c){var b=a(c.currentTarget);this.$(".wx-form-builder-label").text(b.val());this.getPreview().$("legend .title").text(b.val());this.model.set("title",b.val())}});wxApp.FormBuilderControlBaseFieldsetPreview=wxApp.FormBuilderControlPreview.extend({initialize:function(){var b="#form-builder-radio-fieldset-preview";var c=a(b);this.fieldsetTpl=_.template(c.html())},render:function(){var d=this.model.toJSON();this.$el.html(this.fieldsetTpl(d));if(this.selector.indexOf("checkbox")>-1){for(var e=0;e<d.checkboxGroup.length;e++){var f=d.checkboxGroup.models[e];var b=new wxApp.FormBuilderControlCheckboxView({model:f,type:"checkbox"});this.$("fieldset").append(b.getPreview().render().el)}}else{for(var e=0;e<d.radioGroup.length;e++){var c=d.radioGroup.models[e];var b=new wxApp.FormBuilderControlRadioView({model:c,type:"radio"});this.$("fieldset").append(b.getPreview().render().el)}}return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlBaseGroupView=Backbone.View.extend({firstRender:true,initialize:function(b){this.template=_.template(a(this.tplSelector).html());this.collection.bind("add",this.addOne,this);this.previewArea=b.previewArea},render:function(){this.$el.html(this.template());if(this.firstRender){this.firstRender=false;for(var c=0;c<this.collection.length;c++){var b=this.collection.at(c);this.addOne(b)}}return this},addToView:function(b,c){if(!c){c="fieldset"}this.$el.append(b.render().el);this.previewArea.$(c).append(b.getPreview().render().el)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlBaseView=wxApp.FormBuilderControlView.extend({tagName:"div",className:"row",preview:null,firstRender:true,initialize:function(c){var b=a(this.tplSelector);this.inputTpl=_.template(b.html())},updateLabel:function(b){var c=a(b.currentTarget).val();this.model.set("label",c)},render:function(){var c=this.model.get("label").toString();if(c==="[object Object]"){c=this.model.attributes.label.label}var b=this.model.toJSON();b.label=c;this.$el.html(this.inputTpl(b));if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-title-input").focus()},1);this.firstRender=false}return this}});wxApp.FormBuilderControlBasePreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b=a(this.selector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){var c=this.model.get("label").toString();if(c==="[object Object]"){c=this.model.attributes.label.label}var b=this.model.toJSON();b.label=c;this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxFieldsetView=wxApp.FormBuilderControlBaseFieldsetView.extend({tplSelector:"#form-builder-checkbox-fieldset",getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlCheckboxFieldsetPreview({model:this.model})}return this.preview},addOption:function(b){b.preventDefault();this.model.get("checkboxGroup").add(new wxApp.FormBuilderControlCheckbox())},render:function(){wxApp.FormBuilderControlBaseFieldsetView.prototype.render.apply(this);var b=new wxApp.FormBuilderControlCheckboxGroupView({collection:this.model.get("checkboxGroup"),previewArea:this.getPreview()});this.$(".wx-form-builder-checkbox-fieldset").append(b.render().el);return this}});wxApp.FormBuilderControlCheckboxFieldsetPreview=wxApp.FormBuilderControlBaseFieldsetPreview.extend({selector:"#form-builder-checkbox-fieldset-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxGroupView=wxApp.FormBuilderControlBaseGroupView.extend({className:"wx-form-builder-checkbox-group",tplSelector:"#form-builder-checkbox-group",addOne:function(c){var b=new wxApp.FormBuilderControlCheckboxView({model:c,type:"checkbox"});this.addToView(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxView=wxApp.FormBuilderControlBaseView.extend({tplSelector:"#form-builder-checkbox",deleteControl:function(){console.log("deleteControl");this.getPreview().remove();this.remove();this.model.destroy()},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlCheckboxPreview({model:this.model})}return this.preview},setChecked:function(b){if(this.model.get("attributes").get("checked")){this.model.get("attributes").unset("checked")}else{this.model.get("attributes").set("checked","checked")}this.model.trigger("change")}});wxApp.FormBuilderControlCheckboxPreview=wxApp.FormBuilderControlBasePreview.extend({selector:"#form-builder-checkbox-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInfoView=wxApp.FormBuilderControlView.extend({tplSelector:"#form-builder-info",preview:null,events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"input .wx-form-builder-info":"setInfo"})},initialize:function(){var b=a(this.tplSelector);this.inputTpl=_.template(b.html())},render:function(){var c=this.model.toJSON();var b=this.inputTpl(c);this.$el.html(b);if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-info").focus().select()},1);this.firstRender=false}return this},setInfo:function(c){var b=a(c.currentTarget);this.model.set("innerHTML",b.val())},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlInfoPreview({model:this.model})}return this.preview}});wxApp.FormBuilderControlInfoPreview=wxApp.FormBuilderControlPreview.extend({selector:"#form-builder-info-preview",render:function(){var b=this.model.toJSON();b.innerHTML=b.innerHTML.replace(/\n/g,"<br/>");this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInputView=wxApp.FormBuilderControlView.extend({inputTplSelector:"#form-builder-input",preview:null,firstRender:true,initialize:function(c){c.type=(typeof c.type=="undefined"?"input":c.type);var b=a(this[c.type+"TplSelector"]);this.inputTpl=_.template(b.html())},events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"click .wx-form-builder-send-copy":"setOptionalSendPdf"})},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlInputPreview({model:this.model})}return this.preview},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-label-input").focus()},1);this.firstRender=false}return this},setOptionalSendPdf:function(c){var b=a(c.currentTarget);this.model.set("optionSendPDF",b.is(":checked"))}});wxApp.FormBuilderControlInputPreview=wxApp.FormBuilderControlPreview.extend({selector:"#form-builder-input-preview",render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));if(b.attributes.min){this.$("input").attr("min",b.attributes.min)}if(b.attributes.max){this.$("input").attr("max",b.attributes.max)}if(b.attributes.step){this.$("input").attr("step",b.attributes.step)}if(b.attributes.value){this.$("input").attr("value",b.attributes.value)}return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlView=Backbone.View.extend({tagName:"div",className:"wx-form-builder-row panel",firstRender:true,events:{"keyup .wx-form-builder-label-input":"updateLabel","keyup .wx-form-builder-text-input":"updateText","keyup .wx-form-builder-placeholder-input":"updatePlaceholder","keyup .wx-form-builder-title-input":"updateTitle","blur .wx-form-builder-min-input":"setMin","blur .wx-form-builder-max-input":"setMax","blur .wx-form-builder-value-input":"setValue","blur .wx-form-builder-step-input":"setStep","blur .wx-form-builder-name-input":"setName","click .wx-form-builder-control-checked":"setChecked","click .wx-form-builder-required":"setRequired","click .wx-form-builder-delete":"deleteControl","focus .wx-form-builder-select-option-text":"selectInputText","focus .wx-form-builder-label-input":"selectInputText","focus .wx-form-builder-text-input":"selectInputText","focus .wx-form-builder-input":"selectInputText","click .wx-form-builder-done":"backToMain"},selectInputText:function(b){setTimeout(function(){b.currentTarget.select()},1)},deleteControl:function(){console.log("deleteControl");this.getPreview().remove();this.remove();this.model.destroy();this.backToMain()},backToMain:function(){console.log("backToMain");a('a[href="#panel-new-form-fields"]').click()},updateLabel:function(b){var c=a(b.currentTarget).val();this.model.set("label",c);this.$(".wx-form-builder-label").text(c)},updateTitle:function(b){var c=a(b.currentTarget).val();this.model.set("title",c);this.$(".wx-form-builder-title").text(c)},updateText:function(b){console.log("updateText");var c=a(b.currentTarget).val();this.model.set("text",c)},updatePlaceholder:function(c){var b=a(c.currentTarget);this.model.get("attributes").set("placeholder",b.val());this.model.trigger("change")},getFixedValue:function(d,c){var b;if(typeof d=="string"){b=parseFloat(d).toFixed(c)}else{if(typeof d=="number"){b=d.toFixed(c)}}return b},setMin:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("min",parseFloat(b));this.model.trigger("change")},setMax:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("max",parseFloat(b));this.model.trigger("change")},setValue:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("value",parseFloat(b));this.model.trigger("change")},setStep:function(c){var b=this.getFixedValue(a(c.currentTarget).val(),2);a(c.currentTarget).val(b);this.model.get("attributes").set("step",parseFloat(b));this.model.trigger("change")},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("name",b.val())}this.getInput().attr("name",b.val());this.model.trigger("change")},setAutocomplete:function(b){this.model.get("attributes").set("autocomplete",a(b.currentTarget).val())},setChecked:function(b){console.log("setChecked");this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked");this.model.trigger("change")},setMultiple:function(c){console.log("setMultiple");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("multiple","checked")}else{this.model.get("attributes").unset("multiple")}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},setRequired:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked")}else{this.model.get("attributes").unset("required")}this.model.trigger("change")},getInput:function(){var b=this.$(".wx-form-builder-"+this.model.get("attributes").get("type")+"-input");if(b.length==0){b=this.$(".wx-form-builder-textarea")}return b}});wxApp.FormBuilderControlPreview=Backbone.View.extend({tagName:"div",className:"wx-form-preview-row",selector:"",events:{click:"selectField","sortable-drop":"sortableDrop"},initialize:function(c){var b=a(c.selector||this.selector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));return this},sortableDrop:function(c,b){console.log("sortableDrop",this.model);console.log(b);this.$el.trigger("sortable-update",[this.model,b])},selectField:function(f){f.stopImmediatePropagation();var b=this.model.get("ordinal");a(".wx-form-preview-row").removeClass("wx-active");this.$el.addClass("wx-active");var d=function(){var e=a(".reveal-modal.open").attr("id");a("#"+e+" .wx-form-control-"+b).css("display","none");a("#"+e+" .wx-form-control-"+b).addClass("wx-active");a("#"+e+" .wx-form-control-"+b).slideDown(200)};if(a(".wx-form-builder-row.wx-active").length){var c=a(".wx-form-builder-row.wx-active");c.css("display","block");c.slideUp(200,function(){c.removeClass("wx-active");d()})}else{d()}a('a[href="#panel-field-settings"]').click()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionGroupView=wxApp.FormBuilderControlBaseGroupView.extend({tplSelector:"#form-builder-option-group",className:"wx-form-builder-option-group",firstRender:true,addOne:function(c){var b=new wxApp.FormBuilderControlOptionView({model:c});this.addToView(b,"select")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionView=wxApp.FormBuilderControlView.extend({className:"row",preview:null,events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"keyup .wx-form-builder-select-option-text":"updateOptionText","blur .wx-form-builder-select-option-value":"updateOptionValue","click .wx-form-builder-control-selected":"setSelected"})},initialize:function(){this.selectTpl=_.template(a("#form-builder-select-option").html())},render:function(){var c=this.model.get("innerText").toString();if(c==="[object Object]"){c=this.model.attributes.innerText.innerText}var b=this.model.toJSON();b.innerText=c;this.$el.html(this.selectTpl(b));return this},deleteControl:function(){console.log("deleteControl");this.getPreview().remove();this.remove();this.model.destroy()},setSelected:function(b){console.log("setSelected");this.model.collection.models.forEach(function(c){c.get("attributes").unset("selected")});this.model.get("attributes").set("selected","checked");this.model.trigger("change")},updateOptionText:function(c){var b=a(c.currentTarget);this.model.set({innerText:b.val()})},updateOptionValue:function(c){var b=a(c.currentTarget);if(b.val()!=""){this.model.get("attributes").set("value",b.val())}this.model.trigger("change")},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlOptionPreview({model:this.model})}return this.preview}});wxApp.FormBuilderControlOptionPreview=Backbone.View.extend({tagName:"option",initialize:function(){this.model.bind("change",this.render,this)},render:function(){var b=this.model.get("innerText").toString();if(b==="[object Object]"){b=this.model.attributes.innerText.innerText}this.$el.html(b);this.$el.attr("value",this.model.get("attributes").get("value"));if(this.model.get("attributes").get("selected")){this.$el.attr("selected","selected")}return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlPagebreakView=wxApp.FormBuilderControlView.extend({tplSelector:"#form-builder-pagebreak",preview:null,initialize:function(){var b=a(this.tplSelector);this.inputTpl=_.template(b.html())},render:function(){var c=this.model.toJSON();var b=this.inputTpl(c);this.$el.html(b);return this},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlPreview({model:this.model,selector:"#form-builder-pagebreak-preview"})}return this.preview}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioFieldsetView=wxApp.FormBuilderControlBaseFieldsetView.extend({tplSelector:"#form-builder-radio-fieldset",getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlRadioFieldsetPreview({model:this.model})}return this.preview},addOption:function(b){b.preventDefault();this.model.get("radioGroup").add(new wxApp.FormBuilderControlRadio())},render:function(){wxApp.FormBuilderControlBaseFieldsetView.prototype.render.apply(this);var b=new wxApp.FormBuilderControlRadioGroupView({collection:this.model.get("radioGroup"),previewArea:this.getPreview()});this.$(".wx-form-builder-radio-fieldset").append(b.render().el);return this}});wxApp.FormBuilderControlRadioFieldsetPreview=wxApp.FormBuilderControlBaseFieldsetPreview.extend({selector:"#form-builder-radio-fieldset-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioGroupView=wxApp.FormBuilderControlBaseGroupView.extend({className:"wx-form-builder-radio-group",tplSelector:"#form-builder-radio-group",addOne:function(c){var b=new wxApp.FormBuilderControlRadioView({model:c,type:"radio"});this.addToView(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioView=wxApp.FormBuilderControlBaseView.extend({tplSelector:"#form-builder-radio",deleteControl:function(){console.log("deleteControl");this.getPreview().remove();this.remove();this.model.destroy()},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlRadioPreview({model:this.model})}return this.preview},setChecked:function(b){this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked");this.model.trigger("change")}});wxApp.FormBuilderControlRadioPreview=wxApp.FormBuilderControlBasePreview.extend({selector:"#form-builder-radio-preview"});wxApp.FormBuilderControlTextSliderOptionView=wxApp.FormBuilderControlBaseView.extend({tplSelector:"#form-builder-text-slider-option",render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-title-input").focus()},1);this.firstRender=false}return this},deleteControl:function(){console.log("deleteControl");this.getPreview().remove();this.remove();this.model.destroy()},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlTextSliderOptionPreview({model:this.model})}return this.preview},setChecked:function(b){this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked");this.model.trigger("change")}});wxApp.FormBuilderControlTextSliderOptionPreview=Backbone.View.extend({tagName:"li",selector:"#form-builder-text-slider-option-preview",initialize:function(){var b=a(this.selector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){console.log("Render");var b=this.model.toJSON();this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSelectView=Backbone.View.extend({tagName:"div",className:"wx-form-builder-row panel",tplSelector:"#form-builder-select",preview:null,firstRender:true,events:{"keyup .wx-form-builder-title-input":"updateTitle","click .wx-form-builder-add-option":"addOption","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-delete":"deleteControl","click .wx-form-builder-required":"setRequired","focus .wx-form-builder-title-input":"selectInputText","input .wx-form-builder-name-input":"setName","click .wx-form-builder-done":"backToMain"},selectInputText:function(b){setTimeout(function(){b.currentTarget.select()},1)},initialize:function(){var b=a(this.tplSelector);this.tpl=_.template(b.html())},render:function(){this.$el.html(this.tpl(this.model.toJSON()));var b=new wxApp.FormBuilderControlOptionGroupView({collection:this.model.get("optionGroup"),previewArea:this.getPreview()});this.$(".wx-form-builder-select").append(b.render().el);if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-title-input").focus()},1);this.firstRender=false}return this},deleteControl:function(){this.getPreview().remove();this.remove();this.model.destroy();this.backToMain()},backToMain:function(){console.log("backToMain");a('a[href="#panel-new-form-fields"]').click()},addOption:function(b){b.preventDefault();this.model.get("optionGroup").add(new wxApp.FormBuilderControlOption())},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlSelectPreview({model:this.model})}return this.preview},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.set("name",b.val());this.model.get("attributes").set("name",b.val())}this.model.trigger("change")},setRequired:function(c){console.log("Set Required.");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked");this.getPreview().$(".required").removeClass("hide")}else{this.model.get("attributes").unset("required");this.getPreview().$(".required").addClass("hide")}},updateTitle:function(c){console.log("updateTitle");var b=a(c.currentTarget);this.$(".wx-form-builder-edit-title").text(b.val());this.model.set("title",b.val());this.getPreview().$("label .title").text(b.val())}});wxApp.FormBuilderControlSelectPreview=wxApp.FormBuilderControlPreview.extend({initialize:function(){var b="#form-builder-select-preview";var c=a(b);this.inputTpl=_.template(c.html())},render:function(){var c=this.model.toJSON();this.$el.html(this.inputTpl(c));for(var d=0;d<this.model.get("optionGroup").length;d++){var e=this.model.get("optionGroup").models[d];var b=new wxApp.FormBuilderControlOptionView({model:e});this.$("select").append(b.getPreview().render().el)}return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlDocusignSignatureView=wxApp.FormBuilderControlView.extend({tplSelector:"#form-builder-docusign-signature",preview:null,events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{'change [name="wx-form-builder-docusign-label-option"]':"labelOption"})},labelOption:function(e){var d=this.model.get("labelOption"),c=a(e.currentTarget),i=c.val(),g=i.split("-"),h=g.shift(),f=g.shift(),b=d.fields.indexOf(f);if(c.is(":checked")){d.verb=h;if(b===-1){d.fields.push(f)}}else{if(b!==-1){d.fields.splice(b,1)}if(d.fields.length===0){d.verb=""}}this.model.set("labelOption",d)},initialize:function(){var b=a(this.tplSelector);this.inputTpl=_.template(b.html())},render:function(){var b=this.model.toJSON();b.appendName="";b.appendEmail="";if(b.labelOption.fields.indexOf("email")>-1){b[b.labelOption.verb+"Email"]="checked"}if(b.labelOption.fields.indexOf("name")>-1){b[b.labelOption.verb+"Name"]="checked"}this.$el.html(this.inputTpl(b));if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-label-input").focus()},1);this.firstRender=false}return this},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlDocusignSignaturePreview({model:this.model})}return this.preview}});wxApp.FormBuilderControlDocusignSignaturePreview=wxApp.FormBuilderControlPreview.extend({selector:"#form-builder-docusign-signature-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextareaView=wxApp.FormBuilderControlView.extend({preview:null,initialize:function(){this.inputTpl=_.template(a("#form-builder-textarea").html())},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-label-input").focus().select()},1);this.firstRender=false}return this},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlTextareaPreview({model:this.model})}return this.preview}});wxApp.FormBuilderControlTextareaPreview=wxApp.FormBuilderControlPreview.extend({selector:"#form-builder-textarea-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextRangeView=wxApp.FormBuilderControlView.extend({inputTplSelector:"#form-builder-text-range",preview:null,hasRendered:false,initialize:function(c){c.type=(typeof c.type=="undefined"?"input":c.type);var d=this,b=a(this[c.type+"TplSelector"]);d.inputTpl=_.template(b.html());d.model.get("options").bind("add",d.addOne,d);d.model.get("options").bind("remove",function(){d.getPreview().render()},d)},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlTextRangePreview({model:this.model})}return this.preview},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));this.hasRendered=true;if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-label-input").focus()},1);this.firstRender=false}if(this.model.get("options").length>=1){for(var b=0;b<this.model.get("options").length;b++){var c=this.model.get("options").models[b];this.addOne(c)}}return this},addOne:function(c){if(!this.hasRendered){return}var b=new wxApp.FormBuilderControlTextSliderOptionView({model:c});this.$(".options").append(b.render().el);this.getPreview().render()}});wxApp.FormBuilderControlTextRangePreview=wxApp.FormBuilderControlPreview.extend({selector:"#form-builder-text-range-preview"})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlWeeverSignatureView=wxApp.FormBuilderControlView.extend({tplSelector:"#form-builder-weever-signature",preview:null,initialize:function(){var b=a(this.tplSelector);this.inputTpl=_.template(b.html())},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));if(this.firstRender){setTimeout(function(){this.$(".wx-form-builder-label-input").focus()},1);this.firstRender=false}return this},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderControlWeeverSignaturePreview({model:this.model})}return this.preview}});wxApp.FormBuilderControlWeeverSignaturePreview=wxApp.FormBuilderControlPreview.extend({tagName:"div",className:"wx-form-preview-row",initialize:function(){var b="#form-builder-weever-signature-preview";var c=a(b);this.inputTpl=_.template(c.html());this.model.bind("change",this.render,this)},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderFinishElementView=Backbone.View.extend({className:"wx-form-builder-finish-row",initialize:function(){console.log("finish element view init");var b=a("#form-builder-finish-element");this.template=_.template(b.html());return this},render:function(){console.log("finish element render");console.log(this.model);this.$el.html(this.template(this.model.toJSON()));console.log("finish element render end");return this}});wxApp.FormBuilderFinishView=Backbone.View.extend({events:{"click input[type=radio]":"setIdFieldIndex","blur .wx-form-builder-upload-message":"setUploadMessage"},initialize:function(){console.log("finish view init");this.template=_.template(a("#form-builder-finish").html());console.log(this.model)},render:function(){console.log("finish view render");this.$el.html(this.template({collection:this.model.get("config").formElements}));return this},setUploadMessage:function(b){this.model.get("config").onUpload.message=a(b.currentTarget).val()},setIdFieldIndex:function(b){console.log("setIdFieldIndex");console.log(a(b.currentTarget));this.model.get("config").idFieldIndex=parseInt(a(b.currentTarget).attr("value"));console.log(this.model)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderHierarchicalDropDownListView=wxApp.FormBuilderControlView.extend({inputTplSelector:"#form-builder-hierarchical-drop-down-list",preview:null,events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"change .wx-hdd-levels":"changeLevels","input .wx-form-builder-title":"changeTitle"})},initialize:function(c){var b=a(this.inputTplSelector);this.inputTpl=_.template(b.html())},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderHierarchicalDropDownListPreview({model:this.model})}return this.preview},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));var b=new wxApp.FormBuilderHierarchicalDropDownListOptionsView({collection:this.model.get("options"),level:0,titles:this.model.get("titles"),previewArea:this.getPreview()});this.$(".wx-form-builder-children").append(b.render().el);return this},changeLevels:function(b){var c=a(b.currentTarget).val();c=parseInt(c);this.model.set("levels",c);this.render()},changeTitle:function(b){var d=a(b.currentTarget),e=d.data("level-title"),c=d.val();e=parseInt(e);this.model.get("titles")[e]=c;this.model.trigger("change");this.$(".wx-hdd-add-option-"+e).html("&plus; add new "+c.toLowerCase());this.$(".wx-hdd-legend-"+e).html(c)}});wxApp.FormBuilderHierarchicalDropDownListPreview=wxApp.FormBuilderControlPreview.extend({selector:"#form-builder-hierarchical-drop-down-list-preview",events:function(){return _.extend({},wxApp.FormBuilderControlPreview.prototype.events,{"change .wx-hdd-dropdown-preview":"changeDropDown"})},initialize:function(c,b){wxApp.FormBuilderControlPreview.prototype.initialize.apply(this,arguments);this.model.get("options").bind("change",this.render,this)},render:function(){var c=this,b=c.model.toJSON();c.$el.html(c.inputTpl(b));return c},changeDropDown:function(k){k.preventDefault();k.stopImmediatePropagation();var n=a(k.currentTarget),h=this.model.get("options"),l=parseInt(n.data("level")),b=0;while(b<=l){var e=this.$(".wx-hdd-dropdown-preview-"+b.toString()),j=null;for(var f=0;f<h.length;f++){var g=h.at(f);if(g.get("value")===e.val()){j=g;break}}if(j){h=j.get("children")}b++}var d=this.$(".wx-hdd-dropdown-preview-"+b.toString());d.html("<option>Select One</option>");for(var f=0;f<h.length;f++){var c=h.at(f);d.append(new Option(c.get("text"),c.get("value")))}}});wxApp.FormBuilderHierarchicalDropDownListOptionsView=Backbone.View.extend({className:"wx-hdd-option-group",events:function(){return{"click .wx-hdd-add-option":"addOption"}},initialize:function(b){this.titles=b.titles;this.level=b.level;this.template=_.template(a("#form-builder-hdd-options").html());this.collection.bind("add",this.addOne,this);this.collection.bind("remove",this.render,this);this.previewArea=b.previewArea},render:function(){this.$el.html(this.template({level:this.level,titles:this.titles}));this.$el.css({"padding-left":this.level.toString()+"em"});for(var c=0;c<this.collection.length;c++){var b=this.collection.at(c);this.addOne(b)}return this},addOption:function(c){c.preventDefault();c.stopImmediatePropagation();var b=new wxApp.FormBuilderHierarchicalDropDownListOption();if(this.level!==(this.titles.length-1)){b.get("children").add(new wxApp.FormBuilderHierarchicalDropDownListOption({text:"Option A"}));b.get("children").add(new wxApp.FormBuilderHierarchicalDropDownListOption({text:"Option B"}));b.get("children").add(new wxApp.FormBuilderHierarchicalDropDownListOption({text:"Option C"}))}this.collection.add(b)},addOne:function(c){var b=new wxApp.FormBuilderHierarchicalDropDownListOptionView({model:c,level:this.level,titles:this.titles});this.$(".wx-hdd-options-"+this.level).append(b.render().el)}});wxApp.FormBuilderHierarchicalDropDownListOptionView=Backbone.View.extend({className:"wx-hdd-option",events:function(){return{"input .wx-form-builder-option-text":"updateText","input .wx-form-builder-option-value":"updateValue","click .wx-hdd-delete-option":"deleteOption"}},initialize:function(b){this.titles=b.titles;this.level=b.level;this.template=_.template(a("#form-builder-hdd-option").html())},render:function(){var b=this.model.toJSON();b.level=this.level;b.titles=this.titles;this.$el.html(this.template(b));if(this.titles.length>(this.level+1)){var c=new wxApp.FormBuilderHierarchicalDropDownListOptionsView({collection:this.model.get("children"),level:this.level+1,titles:this.titles});this.$(".wx-form-builder-children").append(c.render().el)}return this},deleteOption:function(c){c.preventDefault();c.stopImmediatePropagation();var b="This will delete this "+this.titles[this.level].toLowerCase();if(this.level<(this.titles.length-1)){b+=" and all of its children"}b+=". Are you sure you wish to continue?";if(confirm(b)){this.model.destroy()}},updateText:function(b){b.stopImmediatePropagation();var c=a(b.currentTarget).val();this.model.set("text",c)},updateValue:function(b){b.stopImmediatePropagation();var c=a(b.currentTarget).val();this.model.set("value",c)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderRepeatableFormView=wxApp.FormBuilderControlView.extend({inputTplSelector:"#form-builder-repeatable-form",preview:null,events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{})},initialize:function(c){var b=a(this.inputTplSelector);this.inputTpl=_.template(b.html())},getPreview:function(){if(this.preview===null){this.preview=new wxApp.FormBuilderRepeatableFormPreview({model:this.model})}return this.preview},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));return this},updateLabel:function(b){var c=a(b.currentTarget).val();this.model.set("label",c);a('.add-element-to-form option[value="'+this.model.get("ordinal")+'"]').html("&mdash; "+c)}});wxApp.FormBuilderRepeatableFormPreview=wxApp.FormBuilderControlPreview.extend({selector:"#form-builder-repeatable-form-preview",firstRender:true,initialize:function(c,b){wxApp.FormBuilderControlPreview.prototype.initialize.apply(this,arguments)},render:function(){var c=this,b=c.model.toJSON();if(c.firstRender||b.formElements.length===0){c.firstRender=false;c.$el.html(c.inputTpl(b))}else{c.$("legend").html(b.label)}return c}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.Share=Backbone.View.extend({el:"#launch_share",initialize:function(){var b=this.model.toJSON();console.log(b);var c=null;if(b.domain.length){c=b.domain[0].domain}this.tpl=_.template(a("#launch-share").html());this.$el.html(this.tpl({domain:c}))}})})(jQuery);(function(a){wxApp.QuizBuilderQuestionView=Backbone.View.extend({tagName:"div",className:"wx-question",selector:"#quiz-question",preview:null,events:{"keyup .wx-question-challenge":"updateChallenge","keyup .wx-question-response":"updateResponse","click .wx-correct-answer":"updateCorrectAnswer","change .wx-challenge-photo":"uploadFile","click .wx-delete-question":"deleteThis"},initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments);var b=a(this.selector);this.inputTpl=_.template(b.html())},render:function(){var b=this.model.toJSON();this.$el.html(this.inputTpl(b));this.$el.attr("data-index",b.ordinal);return this},getPreview:function(){if(this.preview===null){this.preview=new wxApp.QuizBuilderQuestionPreview({model:this.model})}return this.preview},deleteThis:function(b){this.model.destroy()},updateChallenge:function(b){this.model.set("challenge",a(b.currentTarget).val());a(b.currentTarget).removeClass("wx-error")},updateCorrectAnswer:function(c){var b=a(c.currentTarget),d=b.parent().parent().find("input.wx-question-response");this.model.set("answers",[d.val()])},updateResponse:function(d){var c=a(d.currentTarget),b=parseInt(c.data("index"));this.model.get("responses")[b]=c.val();a(d.currentTarget).removeClass("wx-error");this.model.trigger("change")},uploadFile:function(g){console.log("uploadFile");var f=this,d=wx.apiUrl+"/_google_drive/upload",c=wx.pluginUrl+"file-upload.php?upload_path="+wx.uploadPath+"&upload_url="+wx.uploadUrl,h=a(g.currentTarget),b=h.siblings("span");b.html("Saving...");a.ajax(c,{processData:false,iframe:true,files:h,success:function(e){e=e.replace(/(<([^>]+)>)/ig,"");e=JSON.parse(e);f.model.set("imageUrl",e.file_name);b.html("Saved!");setTimeout(function(){b.html("Upload image")},5000)}})}});wxApp.QuizBuilderQuestionPreview=Backbone.View.extend({tagName:"dd",className:"accordion-navigation",selector:"#quiz-question-preview",events:{click:"selectField","sortable-drop":"sortableDrop"},initialize:function(){Backbone.View.prototype.initialize.apply(this,arguments);var b=a(this.selector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){var b=this.model.toJSON(),c=this.$el.hasClass("active");this.$el.html(this.inputTpl(b));this.$el.data("index",b.ordinal);if(c){this.$el.addClass("active");this.$("div.content").addClass("active")}return this},selectField:function(){var c=this,b=c.$el.data("index");a("div.wx-question.active").slideUp(400,function(){a(this).removeClass("active")});a('div.wx-question[data-index="'+b+'"]').addClass("active").slideDown()},sortableDrop:function(c,b){this.$el.trigger("sortable-update",[this.model,b])}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.Advanced=wxApp.StyleBase.extend({el:"#advanced",events:{"click #save_advanced":"saveCss","change #localizations":"saveLanguage","change #font-list":"changeFont"},initialize:function(){this.collection.bind("add",this.addFont,this);this.tpl=_.template(a("#advanced-options").html());this.render()},render:function(){var b=wxApp.config.get("localization");b=b.replace(/"/g,"");wxApp.config.set("localization",b);this.$el.html(this.tpl({config:wxApp.config.toJSON(),design:wxApp.design.toJSON()}));if(this.collection.length){for(var d=0;d<this.collection.length;d++){var c=this.collection.models[d];this.addFont(c)}}},saveCss:function(){var d=this;var c=this.$("#css_styles").val();wxApp.design.get("css").styles=c;var b=JSON.stringify(wxApp.design.get("css"));var e={css:b};wx.makeApiCall("design/set_css",e,function(f){wx.rebuildApp()})},saveLanguage:function(){var c=this;var f="localizations";var b=this.showLoadingGif(f);var e=this.$("#"+f).val();wxApp.config.set("localization",e);var d={localization:e};wx.makeApiCall("config/set_localization",d,function(g){wx.rebuildApp();c.hideLoadingGif(f,b)})},addFont:function(b){b=b.toJSON();var c={value:b.id,text:b.name};if(b.id==wxApp.font){c.selected=true}a("#font-list").append(a("<option>",c))},changeFont:function(){var c=a("#font-list").val();a("#icon-font-preview").slideUp();if(c==="-1"){return}var b=new wxApp.IconFont();b.fetch(c,function(){wxApp.appView.changeFont(b);a("#icon-font-preview").slideDown()});var e=this;var d=this.showLoadingGif("font");wx.makeApiCall("design/set_font_id",{font_id:c},function(f){wx.rebuildApp();e.hideLoadingGif("font",d)})}});wxApp.IconFonts.fetch()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.CustomBranding=wxApp.StyleBase.extend({el:"#custom_branding",events:{"click #save_load_spinner":"saveLoadSpinner","click #save_domain":"saveDomain","click a.domain":"deleteDomain"},initialize:function(){this.tpl=_.template(a("#custom-branding").html());this.render()},render:function(){this.$el.html(this.tpl(this.model.toJSON()))},saveLoadSpinner:function(){if(this.$("#wx-load-spinner").length){var d=this;var f="save_load_spinner";var b=d.showLoadingGif(f);wxApp.design.get("loadspinner").text=this.$("#wx-load-spinner").val();var c=JSON.stringify(wxApp.design.get("loadspinner"));var e={loadspinner:c};wx.makeApiCall("design/set_loadspinner",e,function(g){d.hideLoadGif(f,b)})}},saveDomain:function(){if(!this.$("#wx-domain-map-input").length){return}if(!wxApp.design.get("domain")){wxApp.design.set("domain",[])}var d=this;var f="wx-domain-map-input";var b=a("#"+f);var c=this.showLoadingGif(f);var e=b.val();wxApp.design.get("domain").push({domain:e});this.updateDomains(wxApp.design.get("domain"),function(g){wxApp.customBranding.render();d.hideLoadGif(f,c)})},deleteDomain:function(d){d.preventDefault();var c=a(d.currentTarget).data("id");var b=this.inArray(c,wxApp.design.get("domain"));if(b>-1){wxApp.design.get("domain").splice(b,1);this.updateDomains(wxApp.design.get("domain"),function(e){wxApp.customBranding.render()})}},inArray:function(d,e){var b=-1;for(var c=e.length-1;c>=0;c--){if(e[c].domain===d){b=c;break}}return b},updateDomains:function(b,e){var c=JSON.stringify(b);var d={domain:c};wx.makeApiCall("design/set_domain",d,e)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.InstallIcon=wxApp.StyleBase.extend({el:"#install_icon",events:{"click #save_install_icon":"clickSave","change input[name=switch-install]":"changeSave","change #file_upload":"uploadFile"},initialize:function(){this.tpl=_.template(a("#install-icon").html());this.$el.html(this.tpl(this.model.toJSON()))},clickSave:function(){a("#save_install_icon").html("Saving...");this.performSave(function(b){a("#save_install_icon").html("Saved!").delay(2000).queue(function(){a(this).html("Save")})})},changeSave:function(b){this.performSave(function(c){})},performSave:function(c){var b=a("input[name=switch-install]:checked").attr("id");if(b==="install-on"){b="1"}else{b="0"}wxApp.design.get("install").prompt=b;wxApp.design.get("install").name=a("#title").val();wxApp.design.get("install").icon=wx.cleanUrl(a("#wx-icon_live").attr("src"));this.save(c)},uploadFile:function(d){var c=this,b=wx.pluginUrl+"file-upload.php?upload_path="+wx.uploadPath+"&upload_url="+wx.uploadUrl;a("#save_image").html("Saving...");a.ajax(b,{iframe:true,files:a(d.currentTarget),success:function(e){e=e.replace(/(<([^>]+)>)/ig,"");e=JSON.parse(e);wxApp.design.get("install").icon=e.file_name;c.save(function(f){a("#save_image").html("Saved!").delay(2000).queue(function(){a(this).html("Upload image")});a("#wx-icon_live").attr("src",e.file_name)})}})},save:function(d){var b=JSON.stringify(wxApp.design.get("install"));var c={install:b};wx.makeApiCall("design/set_install",c,d)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.StyleBase=Backbone.View.extend({showLoadingGif:function(c){var b="#"+c+"_loading";a(b).show();return b},hideLoadingGif:function(c,b){this.hideLoadGif(c,b)},hideLoadGif:function(e,c){var d=e+"_done";var b='<label id="'+d+'" class="left inline">Saved.</label>';a(c).before(b);a("#"+d).delay(2000).fadeOut(1000).queue(function(){a(this).remove()});a(c).hide()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.LaunchScreen=Backbone.View.extend({el:"#launch_screen",events:{"change .wx-theme-input":"saveImage","change .file_upload":"uploadFile"},initialize:function(){Backbone.Events.on("image:change",this.saveImage,this);this.tpl=_.template(a("#launch-screen").html());jsonModel=this.model.toJSON();jsonModel.launchscreen.phone=this.fixImageUrl(jsonModel.launchscreen.phone);jsonModel.launchscreen.tablet=this.fixImageUrl(jsonModel.launchscreen.tablet);jsonModel.launchscreen.tablet_landscape=this.fixImageUrl(jsonModel.launchscreen.tablet_landscape);this.$el.html(this.tpl(this.model.toJSON()))},saveImage:function(b){var h=b.attr("id");if(!h){h=b.attr("name")}var f=b.val();if(h==="titlebar_logo_live"){wxApp.design.get("titlebar").image=f;var d=JSON.stringify(wxApp.design.get("titlebar"));var e={titlebar:d};wx.makeApiCall("design/set_titlebar",e,function(i){})}else{if(h==="icon_live"){wxApp.design.get("install").icon=f;var d=JSON.stringify(wxApp.design.get("install"));var e={install:d};wx.makeApiCall("design/set_install",e,function(i){})}else{var c="#wx-"+h;var g="#save_image_"+h;h=h.replace("_load_live","");wxApp.design.get("launchscreen")[h]=f;var d=JSON.stringify(wxApp.design.get("launchscreen"));var e={launchscreen:d};wx.makeApiCall("design/set_launchscreen",e,function(i){a(g).html("Saved!").delay(2000).queue(function(){a(this).html("Upload image")});a(c).attr("src",f)})}}},fixImageUrl:function(b){if(b.indexOf("wp_weeverapps-live/static/images")>0){b=b.replace("wp_weeverapps-live/static/images","weever-apps-20-mobile-web-apps/static/img/launchscreens")}return b},uploadFile:function(f){console.log("uploadFile");var d=this,c=wx.pluginUrl+"file-upload.php?upload_path="+wx.uploadPath+"&upload_url="+wx.uploadUrl,h=a(f.currentTarget),g=h.attr("id").replace("upload_","#save_image_"),b=h.attr("id").replace("upload_","#");a(g).html("Saving...");a.ajax(c,{iframe:true,files:h,success:function(e){e=e.replace(/(<([^>]+)>)/ig,"");e=JSON.parse(e);a(b).val(e.file_name);d.saveImage(a(b))}})}})})(jQuery);wxApp=wxApp||{};(function(c){wxApp.LogoDesign=wxApp.StyleBase.extend({el:"#logo_design",events:{"change input[name=titlebarSource]":"radioChange","click button.postfix":"showPicker","change .logo-design":"logoChange","change #upload_titlebar_logo_live":"uploadFile"},initialize:function(){this.tpl=_.template(c("#logo-design").html());this.$el.html(this.tpl(this.model.toJSON()));Backbone.Events.on("color:change",this.colorChange,this);jscolor.bind()},showPicker:function(e){var d=e.currentTarget;btn=d;var f=c(d).data("color-picker");this.$("#"+f)[0].color.showPicker()},radioChange:function(){switch(c("input:radio[name=titlebarSource]:checked").val()){case"text":c("#logoText").show();c("#logoImage").hide();break;case"image":c("#logoText").hide();c("#logoImage").show();break}this.logoChange(this)},colorChange:function(l){var n=this,i=c(l.valueElement),d=i.attr("id"),o=this.showLoadingGif(d),f=i.val(),k="";if(f.indexOf("#")!==0){f="#"+f}switch(d){case"main_titlebar_color":k=this.updateLogoColor(f,".wx-titlebar","background-color");break;case"main_titlebar_text_color":k=this.updateLogoColor(f,".wx-titlebar .wx-logo","color");break;case"subtab_color":k=this.updateLogoColor(f,".x-tabbar.x-docked-top.wx-subtabpanel-tabbar","background-color");break;case"subtab_text_color":k=this.updateLogoColor(f,".x-tabbar.x-docked-top.wx-subtabpanel-tabbar .x-tab .x-button-label","color");break}wxApp.design.get("css").styles=k;var j=JSON.stringify(wxApp.design.get("css"));var g={css:j};wx.makeApiCall("design/set_css",g,function(e){n.hideLoadGif(d,o);wxApp.advanced.render();wx.rebuildApp()});if(true){var h={action:"ajaxSaveTheme",nonce:c("input#nonce").val()};h[d]=f;c.ajax({type:"POST",url:ajaxurl,data:h,success:function(e){n.hideLoadGif(d,o)},error:function(e,p){alert(p)}})}},logoChange:function(i){var h=this;var d=c(i.currentTarget);var k=d.attr("id");var f=this.showLoadingGif(k);wxApp.design.get("titlebar").html=c("#titlebar_html").val();wxApp.design.get("titlebar").text=c("#titlebar_title").val();wxApp.design.get("titlebar").type=c("input:radio[name=titlebarSource]:checked").val();wxApp.design.get("titlebar").image=c("#titlebar_logo_live").attr("src");var g=JSON.stringify(wxApp.design.get("titlebar"));var j={titlebar:g};this.save(function(e){h.hideLoadGif(k,f);wx.rebuildApp()})},uploadFile:function(h){var g=this,f=wx.pluginUrl+"file-upload.php?upload_path="+wx.uploadPath+"&upload_url="+wx.uploadUrl,j=c(h.currentTarget),i=j.attr("id").replace("upload_","#save_image_"),d=j.attr("id").replace("upload_","#");c(i).html("Saving...");c.ajax(f,{iframe:true,files:j,success:function(e){e=e.replace(/(<([^>]+)>)/ig,"");e=JSON.parse(e);c(d).val(e.file_name);wxApp.design.get("titlebar").image=e.file_name;g.save(function(k){c("#wx-titlebar_logo_live").attr("src",e.file_name);c(i).html("Saved!").delay(2000).queue(function(){c(this).html("Upload image")});wx.rebuildApp()})}})},save:function(f){var d=JSON.stringify(wxApp.design.get("titlebar"));var e={titlebar:d};wx.makeApiCall("design/set_titlebar",e,f)},updateLogoColor:function(n,l,d){var h=wxApp.design.get("css").styles||"";var o=l.replace(".","\\.")+"\\s*\\{";var j=h.search(o);var f=h.indexOf("}",j);if(j===-1||f===-1){h+="\n\n"+l+" {\n"+this.getCssAttribute(d,n)+"}"}else{var i=h.indexOf(d,j);if(i===-1||i>f){var k=this.getCssAttribute(d,n);h=h.substring(0,f)+k+h.substring(f,h.length)}else{var e=h.indexOf(":",i);var g=h.indexOf(";",e);if(g>f){g=f}e++;g++;h=h.substring(0,e)+" "+n+";"+h.substring(g)}}return h},getCssAttribute:function(e,d){return"  "+e+": "+d+";\n"}});var a=false,b=false;wxApp.design=new wxApp.Design();wxApp.design.fetch(function(){wxApp.logoDesign=new wxApp.LogoDesign({model:wxApp.design});wxApp.launchSreen=new wxApp.LaunchScreen({model:wxApp.design});wxApp.installIcon=new wxApp.InstallIcon({model:wxApp.design});wxApp.customBranding=new wxApp.CustomBranding({model:wxApp.design});wxApp.share=new wxApp.Share({model:wxApp.design});a=true;if(b){wxApp.advanced=new wxApp.Advanced({collection:wxApp.IconFonts})}});wxApp.config=new wxApp.Config();wxApp.config.fetch(function(){b=true;if(a){wxApp.advanced=new wxApp.Advanced({collection:wxApp.IconFonts})}wxApp.appToggle=new wxApp.AppStatusToggle({model:wxApp.config})});wxApp.IconFonts.fetch()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.BloggerSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#blogger-subtab-edit-template",setModelFromView:function(b){console.log("Set Model From View");console.log(this.$(".wx-edit-input"));if(this.$(".wx-edit-input")){b.setConfig("blog_url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.CouponSubTabEditView=wxApp.WordpressAddPageSubTabEditView.extend({isCoupon:true,render:function(){wxApp.WordpressAddPageSubTabEditView.prototype.render.apply(this);a("section.post-list").hide();a("section.editor").hide();a("section.coupon").show();a("section.mapper").hide()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.DocuSignSubTabEditView=wxApp.FormBuilderSubTabEditView.extend({baseEditTplSelector:"#formbuilder-subtab-edit-template",initializeEvents:function(){var b=wxApp.FormBuilderSubTabEditView.prototype.events;b=_.extend({},this.genericEvents,b);this.events=_.extend({},b,this.events)},events:{"keyup .wx-form-builder-docusign-password":"passwordKeyUp","blur .wx-form-builder-docusign-returnUrl":"updateReturnUrl","blur .wx-form-builder-pdfheader-title":"updatePdfHeader","blur .wx-form-builder-pdfheader-line1":"updatePdfHeader","blur .wx-form-builder-pdfheader-line2":"updatePdfHeader","blur .wx-form-builder-pdfheader-line3":"updatePdfHeader","click #docusignLogin":"showLogin","click #docusignCreate":"showCreateAccount","click #docusignChangePassword":"showChangePassword","click #wx-docusign-login-button":"login","click #wx-docusign-create-account-button":"createAccount","click #wx-docusign-change-password-button":"changePassword","change .wx-form-builder-docusign-demomode":"toggleDemoMode"},toggleDemoMode:function(b){if(a(b.currentTarget).is(":checked")){this.model.get("config").demomode=true}else{delete this.model.get("config").demomode}},initialize:function(){var c=this,b=arguments;if(typeof c.model.get("docusign")=="undefined"){c.model.set("docusign",{username:"",password:""})}a.ajax({url:ajaxurl+"?action=ajaxDecryptDocusignCredentials",type:"POST",data:{wx_docusign:a.cookie("wx_docusign")},dataType:"json",success:function(d){console.log("success",d);if(!!d){c.model.get("docusign").username=(typeof d.username!="undefined"?d.username:"");c.model.get("docusign").password=(typeof d.password!="undefined"?d.password:"");a(".wx-form-builder-docusign-username").val(c.model.get("docusign").username);a(".wx-form-builder-docusign-password").val(c.model.get("docusign").password)}},error:function(d){console.log("error",d)},complete:function(){}});wxApp.FormBuilderSubTabEditView.prototype.initialize.apply(this,arguments)},validate:function(){var e=false,b="Your form could not be saved! Please ensure you have added a DocuSign&trade; eSignature to your form.",c=this.model.get("config").formElements;c.each(function(g,f){if(g.get("control")==="docusignSignature"){e=true}});if(!e){var d=a(".alert-box.alert .message").html(b);d.parent().slideDown()}return e},getDefaultFormActions:function(){this.model.get("config").formActions=new Backbone.Collection();if(this.model.get("config").advanced){this.addPostAction(null)}this.docusign=this.addDocusignAction(null)},passwordKeyUp:function(b){if(b.keyCode==13){b.preventDefault();this.login()}},updateReturnUrl:function(b){this.docusign.set("returnUrl",a(b.currentTarget).val())},updatePdfHeader:function(c){var b=a(c.currentTarget);if(b.hasClass("wx-form-builder-pdfheader-title")){this.docusign.get("pdfHeader").title=b.val();this.$(".wx-pdf-preview .title").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line1")){this.docusign.get("pdfHeader").line1=b.val();this.$(".wx-pdf-preview .line1").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line2")){this.docusign.get("pdfHeader").line2=b.val();this.$(".wx-pdf-preview .line2").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line3")){this.docusign.get("pdfHeader").line3=b.val();this.$(".wx-pdf-preview .line3").html(b.val())}},showLogin:function(b){b.preventDefault();this.$("#docusignLoginForm").slideDown();this.$("#docusignCreateForm").slideUp();this.$("#docusignChangePassord").slideUp();this.$(".wx-subnav-item").removeClass("active");this.$("#docusignLogin").addClass("active");this.$("#docusignLoginForm .wx-form-builder-docusign-username").focus()},showCreateAccount:function(b){b.preventDefault();this.$("#docusignLoginForm").slideUp();this.$("#docusignCreateForm").slideDown();this.$("#docusignChangePassord").slideUp();this.$(".wx-subnav-item").removeClass("active");this.$("#docusignCreate").addClass("active");this.$("#docusignCreateForm .wx-form-builder-docusign-accountName").focus()},showChangePassword:function(b){b.preventDefault();this.$("#docusignLoginForm").slideUp();this.$("#docusignCreateForm").slideUp();this.$("#docusignChangePassord").slideDown();this.$(".wx-subnav-item").removeClass("active");this.$("#docusignChangePassword").addClass("active");this.$("#docusignChangePassord .wx-form-builder-docusign-username").focus()},login:function(){var e=this,h=e.$("#docusignLoginForm .wx-form-builder-docusign-username").val(),d=e.$("#docusignLoginForm .wx-form-builder-docusign-password").val(),b=this.model.get("config").demomode||false,g=function g(i){console.log(e);e.docusign.set("username",h);e.docusign.set("password",d);a.ajax({url:ajaxurl+"?action=ajaxEncryptDocusignCredentials",type:"POST",data:{username:h,password:d},success:function(j){console.log("success",j);a.cookie("wx_docusign",j,{expires:3650})},error:function(j){console.log("error",j)}});e.$("#login_loading").hide();e.$("#docusignAccountInfo").slideUp();e.$("#wx-login-message").html('You have successfully logged in to your DocuSign account.<a href="#" class="close">&times;</a>');e.$("#docusignOtherInfo").slideDown()},c=function c(i){e.$("#login_loading").hide();e.$(".login.alert-box.alert").text(i.message);e.$(".login.alert-box.alert").slideDown()};e.$(".login.alert-box.alert").slideUp();e.$("#login_loading").show();var f={username:h,password:d};if(b){f.demomode=b}wx.makeApiCall("_docusign/client_login",f,g,c)},createAccount:function(){var d=this;var e=d.validateAccount(),g=function g(h){d.$("#docusignAccountInfo").slideUp();d.$("#wx-login-message").html('Success! DocuSign account created.  You are now logged in.<a href="#" class="close">&times;</a>');d.$("#docusignOtherInfo").slideDown()},b=function b(h){console.log(h);d.$(".account.alert-box.alert").html(h.message);d.$(".account.alert-box.alert").slideDown()};if(e.valid){delete e.valid;delete e.errors;wx.makeApiCall("_docusign/create_account",e,g,b)}else{var f="There were some validation errors. Please correct them and try again.<br/><br/><ul>";for(var c=0;c<e.errors.length;c++){f+="<li>"+e.errors[c]+"</li>"}f+="</ul>";d.$(".account.alert-box.alert").html(f);d.$(".account.alert-box.alert").slideDown();a("html, body").animate({scrollTop:a(".account.alert-box.alert").offset().top},"slow")}},changePassword:function(){var i=this,g=i.$("#docusignChangePassord .wx-form-builder-docusign-username").val(),c=i.$("#docusignChangePassord .wx-form-builder-docusign-old-password").val(),j=i.$("#docusignChangePassord .wx-form-builder-docusign-password").val(),d=i.$("#docusignChangePassord .wx-form-builder-docusign-new-password-again").val(),e=i.$("#docusignChangePassord .wx-form-builder-docusign-forgot-password-q1").val(),h=i.$("#docusignChangePassord .wx-form-builder-docusign-forgot-password-a1").val(),k=function k(l){i.$("#change_password_loading").hide();i.$("#docusignAccountInfo").slideUp();i.$("#wx-login-message").html('Success! DocuSign password updated.  You are now logged in.<a href="#" class="close">&times;</a>');i.$("#docusignOtherInfo").slideDown()},b=function b(l){i.$("#change_password_loading").hide();i.$(".changePassword.alert-box.alert").text(l.message);i.$(".changePassword.alert-box.alert").slideDown()};i.$(".changePassword.alert-box.alert").slideUp();i.$("#change_password_loading").show();if(j!==d){i.$(".changePassword.alert-box.alert").text("Validation Error: Your passwords do not match.")}else{var f={username:g,password:c,newPassword:j,question1:e,answer1:h};wx.makeApiCall("_docusign/change_password",f,k,b)}},validateAccount:function(){var d=this,c={valid:true,errors:[],accountName:d.$(".wx-form-builder-docusign-accountName").val().trim(),username:d.$(".wx-form-builder-docusign-email").val().trim(),email:d.$(".wx-form-builder-docusign-email").val().trim(),title:d.$(".wx-form-builder-docusign-title").val().trim(),firstName:d.$(".wx-form-builder-docusign-firstName").val().trim(),lastName:d.$(".wx-form-builder-docusign-lastName").val().trim(),password:d.$("#docusignCreateForm .wx-form-builder-docusign-password").val(),agreedToTerms:d.$(".wx-docusign-terms-agreement").is(":checked"),docusignConfig:{payBefore:false,envelopes:0}},b=d.$(".wx-form-builder-docusign-password-again").val();if(c.accountName.length===0){c.valid=false;c.errors[c.errors.length]="Company Name is required."}if(c.username.length===0){c.valid=false;c.errors[c.errors.length]="User Name is required."}if(c.email.length===0){c.valid=false;c.errors[c.errors.length]="Email address is required."}else{if(!c.email.match(/.+@.+/)){c.valid=false;c.errors[c.errors.length]="Email address is not valid."}}if(c.firstName.length===0){c.valid=false;c.errors[c.errors.length]="First name is required."}if(c.lastName.length===0){c.valid=false;c.errors[c.errors.length]="Last name is required."}if(c.password.length===0){c.valid=false;c.errors[c.errors.length]="Password is required."}else{if(c.password!==b){c.valid=false;c.errors[c.errors.length]="Passwords must match."}}if(!c.agreedToTerms){c.valid=false;c.errors[c.errors.length]="You must agree to the DocuSign terms and conditions."}if((!a(".wx-docusign-pay-after").is(":checked"))&&(!a(".wx-docusign-pay-before").is(":checked"))){c.valid=false;c.errors[c.errors.length]="You must select a payment option."}else{if(a(".wx-docusign-pay-before").is(":checked")){c.docusignConfig.payBefore=true}c.docusignConfig=JSON.stringify(c.docusignConfig)}return c}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabEditView=Backbone.View.extend({className:"wx-subtab-edit",subTabEditTplSelector:"",baseEditTplSelector:"#subtab-edit-template",feedSampleTplSelector:"#feedsample-template",parentContainerId:false,initialize:function(b){this.initializeEvents();if(this.subTabEditTplSelector){this.subTabEditTpl=_.template(a(this.subTabEditTplSelector).html())}this.baseEditTpl=_.template(a(this.baseEditTplSelector).html());this.feedSampleTpl=_.template(a(this.feedSampleTplSelector).html());this.render();Backbone.Events.on("tab:new",this.destroyView,this);this.model.on("save",this.destroyView,this)},initializeEvents:function(){this.events=this.genericEvents;this.delegateEvents()},genericEvents:{"change .wx-dialog-input":"next","change .wx-social-input":"next","keydown .wx-dialog-input":"hideValidateFeed","keyup .wx-edit-title":"editTitle","click .wx-finish-button":"finish","click .wx-next-button":"next","change .wx-content-radio":"contentChange","click .close-reveal-modal":"close","click .wx-close-reveal-modal":"closeReveal","click .wx-close-button":"closeReveal",close:"close"},render:function(){this.$el.html(this.baseEditTpl(this.model.toJSON()));if(this.subTabEditTpl){this.$(".subtab").html(this.subTabEditTpl(this.model.toJSON()))}this.$el.prepend("<form>");this.$el.append("</form>");this.startValidation();if(this.model.validateFeed){this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide();if(this.model.get("id")!==null){this.next()}}else{this.$(".wx-next-button").hide();if(!this.model.allowTitleEdit){this.$(".wx-edit-title-div").hide()}}var b=this.$el;this.$el.on("opened",function(){b.foundation("reflow");var c=b.height();c-=115;if(c<315){c=315}b.find(".previewTabs div.content").height(c);b.find("input[type=text]:first").focus()});return this},closeReveal:function(){this.$el.foundation("reveal","close")},close:function(){this.undelegateEvents()},startValidation:function(){if(undefined!==this.$("form").validate){this.$("form").validate()}},contentChange:function(b){this.hideValidateFeed()},setParentViewContainerId:function(b){this.parentContainerId=b},finish:function(){if(this.validate()){this.setModelFromView(this.model);this.setTitleFromView(this.model);this.setIconFromView(this.model);this.saveModel();this.$el.foundation("reveal","close")}},validate:function(){return true},next:function(){if(!this.model.validateFeed){return}this.$("#dialog-loader").show();if(undefined!==this.$("form")&&undefined!=this.$("form").validate){var b=this.$("form").validate();if(this.$("form").valid()){this.validateFeed()}else{alert("Error count: "+b.errorList.length)}}else{this.validateFeed()}},saveModel:function(){var b=function(c){if(c){wx.rebuildApp()}else{wx.refreshAppPreview()}};this.model.save(b)},editTitle:function(b){if(a(".wx-validate-feed.panel").length){a(".wx-validate-feed.panel > h3").text(a(b.currentTarget).val())}},setTitleFromView:function(b){if(b.allowTitleEdit&&this.$(".wx-edit-title").val()){b.set("title",this.$(".wx-edit-title").val())}return b},setIconFromView:function(b){var c=this.$('input:radio[name="wx-icon"]:checked').val();if(c){b.set("icon_id",null);b.set("icon",c)}return b},setModelFromView:function(b){},validateFeed:function(){var b=this;var c=this.getModelCopy();this.setModelFromView(c);c.getFeedSample(function(d){b.checkFeedSample(d)})},getModelCopy:function(){var b=a.extend(true,{},this.model);return b},checkFeedSample:function(b){if(typeof b!="undefined"&&b.success&&typeof b.feed!="undefined"){this.$("#dialog-loader").hide();this.$(".wx-feed-error").hide();this.displayFeedSample(b);this.$(".wx-next-button").hide();this.$(".wx-finish-button").show();if(this.model.allowTitleEdit){this.$(".wx-edit-title-div").show()}}else{this.$(".wx-feed-error").show()}},displayFeedSample:function(b){var d=this;this.$(".wx-validate-feed").show();if(!b.feed.length){this.$(".wx-validate-feed").html("No content added yet?")}else{this.$(".wx-validate-feed").html("<ul></ul>");for(var c=0;c<b.feed.length;c++){this.$(".wx-validate-feed ul").append(d.feedSampleTpl(b.feed[c]))}}},hideValidateFeed:function(){this.$(".wx-feed-error").hide();this.$(".wx-validate-feed").html('<div class="panel wx-preview"><h3 class="wx-preview-msg">preview</h3></div>');this.$(".wx-next-button").show();this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide()},destroyView:function(){this.undelegateEvents();this.$el.removeData().unbind()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookAlbumsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookalbums-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookEventsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookevents-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookWallSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookwall-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FlickrSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#flickr-subtab-edit-template",setModelFromView:function(c){var d=this.$(".wx-content-radio:checked").val();c.set("content",d);if(d==="flickrPhotostream"){c.set("layout","carousel")}else{c.set("layout","list")}var b=this.$(".wx-edit-input").val();b=b.replace(/\/$/,"");c.setConfig("url",b);c.setConfig("user_id",b);return c},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderSubTabEditView=wxApp.SubTabEditView.extend({previewPaneClass:"wx-main-preview-form",buildPaneSelector:".form-build-area",baseEditTplSelector:"#formbuilder-subtab-edit-template",hasCalledFinish:false,finishView:null,docusign:null,numberControls:null,initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)},dataCleanupOnFormEdit:function(){this.$(".form-builder-delete-data").show();this.$(".form-builder-step-one").hide()},initialize:function(){this.populateForm();wxApp.SubTabEditView.prototype.initialize.apply(this,arguments)},populateForm:function(){var e=this,b=this.model.get("config"),d;wx.isVisible=false;e.numberControls=new wxApp.FormBuilderCollection();a(document).on("opened.fndtn.reveal","[data-reveal]",function(){a(document).off("opened.fndtn.reveal","[data-reveal]");wx.isVisible=true;a(e.buildPaneSelector).foundation("reflow")});if(b.formElements===undefined){b.formElements=new wxApp.FormBuilderCollection()}else{setTimeout(function(){e.drawAllElements(b.formElements)},100)}if(b.formActions===undefined||b.formActions.length===0){e.getDefaultFormActions()}else{for(var c=0;c<b.formActions.length;c++){var f=b.formActions.at(c);if(f.get("method")==="docusign"){e.docusign=f}else{if(f.get("method")==="email"){var g=this.__getActionByMethod(f.get("method"));g.set("value",f.get("value"))}}}}},drawAllElements:function(d){var e=this;for(var c=0;c<d.length;c++){var b=d.at(c);switch(b.get("control")){case"div":e.addInfoWithProperties(b);break;case"textarea":e.addTextareaWithProperties(b);break;case"radiofieldset":e.addRadioGroupWithProperties(b);break;case"checkboxfieldset":e.addCheckboxGroupWithProperties(b);break;case"select":e.addSelectWithProperties(b);break;case"docusignSignature":e.addDocusignSignatureWithProperties(b);break;case"weeverSignature":e.addWeeverSignatureWithProperties(b);break;case"calculation":e.addCalculationWithProperties(b);break;case"hierarchical-drop-down":e.addHierarchicalDropDownListWithProperties(b);break;case"repeatableform":e.addRepeatableFormWithProperties(b);break;case"pagebreak":e.addPagebreak();break;default:if(b.get("type")==="textSlider"){e.addTextRangeInputWithProperties(b)}else{e.addInput(b)}}}},validate:function(){var f=this,g=[],c="Sorry! Your form could not be saved.";var b=function(){var h=false;if(a(".email-pdf-to-recipients").is(":checked")&&a(".wx-form-builder-action-email").val()==""){g.push({type:"formActions",message:"You requested the form be emailed, however you did not specify an email address."})}if(a(".wx-form-builder-docusign-username").val()||a(".wx-form-builder-docusign-password").val()){if(!(a(".wx-form-builder-docusign-username").val()&&a(".wx-form-builder-docusign-password").val())){g.push({type:"formActions",message:"Please provide both a User Name and Password for DocuSign&trade;."})}}};var e=function(i){var o="rangeAttributes",j=i.get("attributes").get("min"),h=i.get("attributes").get("max"),n=i.get("attributes").get("value"),l=i.get("attributes").get("step");if(i.get("type")=="textSlider"){var k=(h-j+l)/l;n=isNaN(n)?(k/2)-0.5:n;i.get("attributes").set("value",n)}if(isNaN(i.get("attributes").get("min"))){g.push({type:o,message:"The Minimum value is empty on one or more of your Number Sliders."})}if(isNaN(i.get("attributes").get("max"))){g.push({type:o,message:"The Maximum value is empty on one or more of your Number Sliders."})}if(isNaN(i.get("attributes").get("value"))){g.push({type:o,message:"The Starting value is empty on one or more of your Number Sliders."})}if(isNaN(i.get("attributes").get("step"))){g.push({type:o,message:"The Step value is empty on one or more of your Number Sliders."})}};this.model.get("config").formElements.forEach(function(h){if(h.get("control")=="input"&&h.get("attributes").get("type")=="range"){e(h)}});b();if(g.length){g.forEach(function(h){c+="<br><br>"+h.message});var d=a(".alert-box.alert .message").html(c);d.parent().slideDown();return false}return true},getDefaultFormActions:function(){this.model.get("config").formActions=new Backbone.Collection();if((!this.model.get("config").isDocuSign)||this.model.get("advancedMode")){this.addEmailAction(null)}if(this.model.get("advancedMode")){this.addPostAction(null)}},setModelFromView:function(b){for(var c=0;c<b.get("config").formActions.length;c++){var d=b.get("config").formActions.at(c),e=true;if(d.get("method")==="post"||d.get("method")==="email"){if(!d.get("value")){b.get("config").formActions.remove(d);e=false;c--}}else{if((typeof d.get("username")==="undefined")||!d.get("password")){b.get("config").formActions.remove(d);c--}}if(e&&d.get("method")==="post"){d.setUrl()}}return b},events:{"click .wx-form-builder-add-text-input":"addTextInput","click .wx-form-builder-add-password-input":"addPasswordInput","click .wx-form-builder-add-date-input":"addDateInput","click .wx-form-builder-add-datetime-local-input":"addDateTimeLocalInput","click .wx-form-builder-add-email-input":"addEmailInput","click .wx-form-builder-add-file-input":"addFileInput","click .wx-form-builder-add-photo-input":"addPhotoInput","click .wx-form-builder-add-month-input":"addMonthInput","click .wx-form-builder-add-number-input":"addNumberInput","click .wx-form-builder-add-tel-input":"addTelInput","click .wx-form-builder-add-time-input":"addTimeInput","click .wx-form-builder-add-url-input":"addUrlInput","click .wx-form-builder-add-radio-group":"addRadioGroup","click .wx-form-builder-add-checkbox-group":"addCheckboxGroup","click .wx-form-builder-add-textarea":"addTextarea","click .wx-form-builder-add-range-input":"addRangeInput","click .wx-form-builder-add-text-range-input":"addTextRangeInput","click .wx-form-builder-add-select":"addSelect","click .wx-form-builder-add-info":"addInfo","click .wx-form-builder-add-pagebreak":"addPagebreak","click .wx-form-builder-add-docusign-signature":"addDocusignSignature","click .wx-form-builder-add-weever-signature":"addWeeverSignature","click .wx-form-builder-add-calculation":"addCalculation","click .wx-form-builder-add-hierarchical-drop-down-list":"addHierarchicalDropDownList","click .wx-form-builder-add-repeatable-form":"addRepeatableForm","click .wx-submit-button":"showSubmitButtonInfo","keyup .submit-button-text":"updateSubmitButtonText","sortable-update":"sortableUpdate","click .wx-continue-button":"next","click .wx-back-button":"back","click .wx-close-button":"closeConfirmation","click .wx-close-reveal-modal":"closeConfirmation","change .email-pdf-to-recipients":"showHideEmailInfo","change .custom-post":"showHideCustomPostInfo","blur .wx-form-builder-action":"updateAction","change .wx-form-builder-send-current-user-email":"toggleSendEmailAddress","keyup .wx-form-builder-pdfheader-title":"updatePdfHeader","keyup .wx-form-builder-pdfheader-line1":"updatePdfHeader","keyup .wx-form-builder-pdfheader-line2":"updatePdfHeader","keyup .wx-form-builder-pdfheader-line3":"updatePdfHeader","click .radio-mode":"updateMode","click .wx-dd-close-button":"closeReveal","click .wx-form-builder-warning-acknowledged":"acknowledgementReceived","click .wx-form-builder-warning-proceed":"proceed"},updateSubmitButtonText:function(c){var b=a(c.currentTarget);this.model.get("config").submitButtonText=b.val();a(".wx-validate-feed.panel button.wx-submit-button").text(b.val());this.$("span.submit-button-text").text(b.val())},showSubmitButtonInfo:function(d){a(".wx-form-preview-row.wx-active").removeClass("wx-active");a(".wx-submit-button").parent().addClass("wx-active");var c=this,b=c.$(".wx-form-builder-row.wx-active");c.$('a[href="#panel-field-settings"]').click();b.css("display","block");b.slideUp(200,function(){b.removeClass("wx-active");c.$(".wx-button-controls").css("display","none");c.$(".wx-button-controls").addClass("wx-active");c.$(".wx-button-controls").slideDown(200)})},sortableUpdate:function(e,c,b){var d=this.model.get("config").formElements;d.remove(c);d.add(c,{at:b})},finish:function(){var h=false,f=this.model.get("config").formElements,b=function(){this.finishView=new wxApp.FormBuilderFinishView({model:this.model});this.$(this.buildPaneSelector).append(this.finishView.render().el)};var d={};for(var e=0;e<f.length;e++){d=f.at(e);if("input"==d.get("control")&&"file"==d.get("attributes").get("type")){h=true}else{if("textSlider"==d.get("type")){d.get("attributes").set("step",1);d.get("attributes").set("min",0);d.get("attributes").set("max",d.get("options").length-1);for(var c=0;c<d.get("options").length;c++){var g=d.get("options").models[c];if(g.get("attributes").attributes.checked){d.get("attributes").set("value",c);break}}}}}wxApp.SubTabEditView.prototype.finish.apply(this);return;if(!h||typeof this.model.get("config").idFieldIndex=="number"){wxApp.SubTabEditView.prototype.finish.apply(this);return}if(typeof this.model.get("config").idFieldIndex!="number"&&!this.hasCalledFinish){b.apply(this);this.hasCalledFinish=true;return}if(this.hasCalledFinish){this.finishView.remove();b.apply(this)}},addDocusignAction:function(b,c){if(c===undefined){c=new wxApp.FormBuilderAction({method:"docusign"})}this.addCustomAction(c);return c},addEmailAction:function(b,c){if(c===undefined){c=new wxApp.FormBuilderAction({method:"email"})}this.addCustomAction(c);return c},addPostAction:function(b,c){if(c===undefined){c=new wxApp.FormBuilderAction({method:"post"})}this.addCustomAction(c);return c},addCustomAction:function(b){this.model.get("config").formActions.push(b);return b},addInput:function(c){var b=new wxApp.FormBuilderControlInputView({model:c});this.addControl(c,b);return c},addDateInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Date",attributes:{type:"date"}});this.addInput(b)},addDateTimeLocalInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Date / Time",attributes:{type:"datetime-local"}});this.addInput(b)},addEmailInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Email",showPlaceholder:true,multiClass:"",emailOptionClass:"",attributes:{type:"email"}});this.addInput(b)},addFileInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"File upload",multiClass:"",autocompleteClass:"hide",attributes:{type:"file",accept:"image/*"}});this.addInput(b)},addPhotoInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Photo upload",multiClass:"",autocompleteClass:"hide",attributes:{type:"file",accept:"image/*"}});this.addInput(b)},addMonthInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Month",attributes:{type:"month"}});this.addInput(b)},addNumberInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Number",minClass:"",maxClass:"",stepClass:"",valueClass:"",attributes:{type:"number"}});this.addInput(b)},addPasswordInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Password",showPlaceholder:true,attributes:{type:"password"}});this.addInput(b)},addRangeInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Range",minClass:"",maxClass:"",stepClass:"",valueClass:"",attributes:{type:"range",min:"1.00",max:"5.00",value:"3.00",step:"1.00"}});this.addInput(b)},addTextRangeInput:function(c){var b=new wxApp.FormBuilderControlTextRange({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Select One",type:"textSlider",attributes:{type:"range"}});this.addTextRangeInputWithProperties(b)},addTextRangeInputWithProperties:function(c){var b=new wxApp.FormBuilderControlTextRangeView({model:c});this.addControl(c,b);return c},addTelInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Telephone",type:"tel",showPlaceholder:true,attributes:{type:"tel"}});this.addInput(b)},addTextInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Untitled",type:"text",showPlaceholder:true,attributes:{type:"text"}});this.addInput(b)},addTimeInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"Time",attributes:{type:"time"}});this.addInput(b)},addUrlInput:function(c){var b=new wxApp.FormBuilderControlInput({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim(),label:"URL",showPlaceholder:true,attributes:{type:"url"}});this.addInput(b)},addPagebreak:function(c){var d=new wxApp.FormBuilderControlPagebreak();var b=new wxApp.FormBuilderControlPagebreakView({model:d});this.addControl(d,b)},addInfo:function(c){var b=new wxApp.FormBuilderControlInfo({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addInfoWithProperties(b)},addInfoWithProperties:function(c){var b=new wxApp.FormBuilderControlInfoView({model:c});this.addControl(c,b)},addDocusignSignature:function(c){var b=wxApp.FormBuilderControlDocusignSignature({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addDocusignSignatureWithProperties(b)},addDocusignSignatureWithProperties:function(c){var b=new wxApp.FormBuilderControlDocusignSignatureView({model:c});this.addControl(c,b)},addWeeverSignature:function(c){var b=new wxApp.FormBuilderControlWeeverSignature({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addWeeverSignatureWithProperties(b)},addWeeverSignatureWithProperties:function(c){var b=new wxApp.FormBuilderControlWeeverSignatureView({model:c});this.addControl(c,b)},addTextarea:function(b){var c=new wxApp.FormBuilderControlTextarea({controlTitle:a(b.currentTarget).children(".wx-button-label").text().trim()});this.addTextareaWithProperties(c)},addTextareaWithProperties:function(c){var b=new wxApp.FormBuilderControlTextareaView({model:c});this.addControl(c,b)},addRadioGroup:function(c){var b=new wxApp.FormBuilderControlRadioFieldset({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addRadioGroupWithProperties(b)},addRadioGroupWithProperties:function(b){var c=new wxApp.FormBuilderControlRadioFieldsetView({model:b});this.addControl(b,c)},addCheckboxGroup:function(b){var c=new wxApp.FormBuilderControlCheckboxFieldset({controlTitle:a(b.currentTarget).children(".wx-button-label").text().trim()});this.addCheckboxGroupWithProperties(c)},addCheckboxGroupWithProperties:function(b){var c=new wxApp.FormBuilderControlCheckboxFieldsetView({model:b});this.addControl(b,c)},addSelect:function(c){var b=new wxApp.FormBuilderControlSelect({controlTitle:a(c.currentTarget).children(".wx-button-label").text().trim()});this.addSelectWithProperties(b)},addSelectWithProperties:function(b){var c=new wxApp.FormBuilderControlSelectView({model:b});this.addControl(b,c)},addCalculation:function(b){if(this.numberControls.length){var c=new wxApp.FormBuilderCalculator();this.addCalculationWithProperties(c)}else{alert("Please add at least one number field.")}},addCalculationWithProperties:function(c){var b=new wxApp.FormBuilderCalculatorView({model:c,inputs:this.numberControls});this.addControl(c,b)},addHierarchicalDropDownList:function(c){var d={},b=new wxApp.FormBuilderHierarchicalDropDownList(d);this.addHierarchicalDropDownListWithProperties(b)},addHierarchicalDropDownListWithProperties:function(c){var b=new wxApp.FormBuilderHierarchicalDropDownListView({model:c});this.addControl(c,b)},addRepeatableForm:function(c){var b=new wxApp.FormBuilderRepeatableForm({});this.addRepeatableFormWithProperties(b)},addRepeatableFormWithProperties:function(c){var d=this,b=new wxApp.FormBuilderRepeatableFormView({model:c});d.addControl(c,b);d.$(".add-element-to-form").append('<option value="'+c.get("ordinal")+'">&mdash; '+c.get("label")+"</option>");console.log("REPEATABLE",c);if(c.get("formElements")){console.log("drawAllElements",c.get("formElements"));d.$(".add-element-to-form").val(c.get("ordinal"));d.drawAllElements(c.get("formElements"));d.$(".add-element-to-form").val("")}else{d.$(".add-element-to-form").val(c.get("ordinal"))}a(".add-element-ddl-container").show()},addControl:function(n,l){var k=this,c=this.model.get("config"),d=c.formElements,j=n.get("ordinal"),p=c.advanced||false,f=false,o=parseInt(k.$(".add-element-to-form").val()),b="."+this.previewPaneClass;if(o){for(var g=0;g<d.length;g++){var h=d.at(g);if(h.get("ordinal")===o){d=h.get("formElements");b=".subform-"+h.get("ordinal")+"-preview-form";break}}}if(!j){j=k._getLargestOrdinal(c.formElements);n.set("ordinal",++j)}l.$el.removeClass(function(i,q){return(q.match(/\bwx-form-control-\S+/g)||[]).join(" ")});l.$el.addClass("wx-form-control-"+j.toString());n.set("advanced",p);this.$(this.buildPaneSelector).append(l.render().el);a(".wx-form-builder-row.wx-active").removeClass("wx-active").css("display","none");a(".wx-form-preview-row.wx-active").removeClass("wx-active");l.$el.addClass("wx-active").css("display","block");if(wx.isVisible){d.push(n)}if((n.get("attributes")&&n.get("attributes").get("type")==="number")||(n.get("control")==="calculation")){this.numberControls.push(n)}if(wx.isVisible){a(k.buildPaneSelector).foundation("reflow");k.$('a[href="#panel-field-settings"]').click()}var e=l.getPreview().render().$el;a(b).append(e);setTimeout(function(){e.addClass("wx-active")},1)},confirmClosePopup:function(c){c.preventDefault();var b=confirm("Are you sure you want to cancel?  Your changes have not been saved.");if(!b){c.stopImmediatePropagation();return false}},closeConfirmation:function(){var b=confirm("Are you sure you want to cancel?  Your changes have not been saved.");if(b){this.$el.foundation("reveal","close")}},next:function(c){c.preventDefault();if(a(".form-builder-step-one").is(":visible")){a(".form-builder-step-one").slideUp();a(".form-builder-step-two").slideDown();var b=this.__getActionByMethod("email");if(!this.model.get("id")){var d=a(".wx-edit-form-title").val();b.get("pdfHeader").title=d;a(".wx-form-builder-pdfheader-title").val(d);this.$(".wx-pdf-preview .title").html(d)}}else{a(".form-builder-step-two").slideUp();a(".form-builder-step-three").slideDown()}this.$el.foundation("reflow")},back:function(){if(a(".form-builder-step-two").is(":visible")){a(".form-builder-step-one").slideDown();a(".form-builder-step-two").slideUp()}else{a(".form-builder-step-two").slideDown();a(".form-builder-step-three").slideUp()}this.$el.foundation("reflow")},showHideEmailInfo:function(c){var b=a(c.currentTarget).is(":checked");if(b){a(".wx-email-action").slideDown()}else{a(".wx-email-action").slideUp()}},showHideCustomPostInfo:function(c){var b=a(c.currentTarget).is(":checked");if(b){a(".wx-custom-post").slideDown()}else{a(".wx-custom-post").slideUp()}},toggleSendEmailAddress:function(c){var d=this.__getActionByMethod("email"),b=a(c.currentTarget),e=this.$('.wx-email-action input[type="email"]');if(b.is(":checked")){e.val(wx.currentUserEmail);d.set("value",wx.currentUserEmail)}else{e.val("");d.set("value","")}},updatePdfHeader:function(c){var d=this.__getActionByMethod("email"),b=a(c.currentTarget);if(b.hasClass("wx-form-builder-pdfheader-title")){d.get("pdfHeader").title=b.val();this.$(".wx-pdf-preview .title").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line1")){d.get("pdfHeader").line1=b.val();this.$(".wx-pdf-preview .line1").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line2")){d.get("pdfHeader").line2=b.val();this.$(".wx-pdf-preview .line2").html(b.val())}if(b.hasClass("wx-form-builder-pdfheader-line3")){d.get("pdfHeader").line3=b.val();this.$(".wx-pdf-preview .line3").html(b.val())}},updateAction:function(c){console.log("updateAction!");c.preventDefault();var b=a(c.currentTarget),e="email";if(b.hasClass("wx-form-builder-action-post")){e="post"}var d=this.__getActionByMethod(e);d.set("value",b.val())},updateMode:function(c){var d=this.__getActionByMethod("post"),b=a(c.currentTarget);d.set("mode",b.val())},__getActionByMethod:function(e){var d=null;for(var b=0;b<this.model.get("config").formActions.length;b++){var c=this.model.get("config").formActions.models[b];if(c.get("method")===e){d=c;break}}return d},acknowledgementReceived:function(b){if(a(b.currentTarget).is(":checked")){a(".wx-form-builder-warning-proceed").removeClass("disabled")}else{a(".wx-form-builder-warning-proceed").addClass("disabled")}},proceed:function(c){var b=this;c.preventDefault();if(a(c.currentTarget).hasClass("disabled")){return}var d=window.confirm("Are you SURE you want to proceed? All of your existing form submissions will be erased!");if(!d){return}a.ajax({url:wx.apiUrl+"_formbuilder/delete_form_data?tab_id="+this.model.get("id"),success:function(e){b.$(".form-builder-delete-data").slideUp();b.$(".form-builder-step-one").slideDown()},error:function(e,g,f){alert("An unknown error has occurred deleting the data. Please contact support@weeverapps.com.")}})},_getLargestOrdinal:function(e,b){if(!b){b=0}for(var d=0;d<e.length;d++){var c=e.at(d);if(c.get("ordinal")>b){b=c.get("ordinal")}if(c.get("formElements")){b=this._getLargestOrdinal(c.get("formElements"),b)}}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FoursquarePhotosSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#foursquarephotos-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("venue_id",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.GoogleCalendarSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#googlecalendar-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("calendar_id",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};wx.quizApiUrl="http://weeverdev.com:8081/api/v1/";(function(a){wxApp.SubTabView=wxApp.TabView.extend({tagName:"li",className:"wx-ui-row",attributes:function(){return{id:this.model.get("id")+"SubtabID"}},initialize:function(){this.subTabTpl=_.template(a("#subtab-template").html());var b=this;this.model.on("save",function(){b.render()});this.model.on("destroy",function(){b.remove()});this.model.on("tab:move",function(){b.remove()})},events:{"click .wx-edit-link":"editSubTab","click .wx-subtab-delete":"confirmDeleteSubTab","click .wx-subtab-copy":"confirmCopySubTab","click .wx-subtab-start-quiz":"confirmStartQuiz"},render:function(){var c=this;c.$el.html(c.subTabTpl(c.model.toJSON()));c.$el.data("backbone-view",c);if(c.model.get("content")==="quiz"){if(!!window.EventSource){c.$(".wx-quiz-info").html("&mdash; Loading event info.");var e=c.model.getConfig().quiz_id,b=wx.quizApiUrl+"status?id="+e,d=new EventSource(b);d.addEventListener("message",function(g){console.log(g.data);var f=JSON.parse(g.data);if(f.clients==1){c.$(".wx-quiz-info").html("&mdash; One client connected.")}else{c.$(".wx-quiz-info").html("&mdash; "+f.clients+" clients connected.")}},false)}else{console.log("TODO - Take it back to the oldschool.")}}return c},editSubTab:function(d){d.preventDefault();console.log("editSubTab");var c=this.model.getModelName()+"EditView";if("SubTabEditView"!=c&&undefined!==wxApp[c]){var b=new wxApp[c]({model:this.model,el:"#wx-edit-area-"+this.model.get("id")})}else{throw new Error("Invalid edit type "+this.model.get("content")+"--"+c)}},confirmCopySubTab:function(b){b.preventDefault();if(confirm("Are you sure you want to copy this item?")){this.copySubTab()}},copySubTab:function(){var e=this,g=this.model.toJSON();if(typeof g.id!="undefined"){delete g.id}g.title=g.title+" (copy)";var b=this.model.collection.getModelNameByTabData(g),f=new wxApp[b](g);var d=function d(){var h=wxApp.Tabs._byId[e.model.get("parent_id")];if(!h){h=e.model}h.addSubTab(f);wx.rebuildApp();a("#"+e.model.get("parent_id")+"TabID").click()};var c=function c(){e.model.collection.add(f);wx.makeApiCall("tabs/set_parent_id",{tab_id:f.get("id"),parent_id:e.model.get("parent_id")},d)};f.save(c)},confirmStartQuiz:function(b){event.preventDefault();if(confirm("Are you sure you want to start this quiz?")){this.startQuiz()}},startQuiz:function(){var d=this,c=d.model.get("quiz"),b=wx.quizApiUrl+"start?id="+c.get("_id")+"&app_key="+wx.siteKey+"&passphrase="+c.get("settings").passphrase;a.ajax({url:b,type:"GET",success:function(e){console.log(e);alert(e.message)},error:function(e,f){console.log(e);alert("An error occurred while starting this quiz: "+f)}})},confirmDeleteSubTab:function(b){b.preventDefault();if(confirm("Are you sure you want to delete this item?")){this.deleteSubTab()}},deleteSubTab:function(){this.model.destroy();wx.rebuildApp()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.MapSubTabEditView=wxApp.WordpressAddPageSubTabEditView.extend({hasLocation:false,marker:null,map:null,postsCache:null,events:{"click .geolocationadd":"loadGeolocation","click .wx-edit-post":"editPost","click .wx-delete-post":"deletePost","click .wx-back-to-list":"backToList"},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)},editPost:function(d){d.preventDefault();var b=a(d.currentTarget).attr("rel"),c=this.getPost(b);this.showEditor(c.ID,c.post_title,c.post_content,c.lat,c.lng);this.$(".wx-back-to-list").show()},deletePost:function(d){d.preventDefault();var c=this,e=a(d.currentTarget),b=e.attr("rel");e.text("Deleting...");jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ajaxDeletePost",id:b,nonce:a("input#nonce").val()},success:function(f){if(f=="1"){c.$('a[rel="'+b+'"]').parent().slideUp()}},error:function(f,g){alert("error");e.html("&times;")}})},getPost:function(b){var e=null;if(this.postsCache){e=this.postsCache}else{}var d=null;for(var c=0;c<e.length;c++){if(e[c].ID==b){d=e[c]}}return d},backToList:function(b){b.preventDefault();this.showListOfPosts()},render:function(){wxApp.WordpressAddPageSubTabEditView.prototype.render.apply(this);var b=this.model.get("config");if(typeof b==="string"){b=JSON.parse(b)}if(b.items){this.showListOfPosts()}else{this.showEditor()}},setModelFromView:function(d){var g=this.$(".wx-edit-input").val(),e=nicEditors.findEditor(this.editorId).nicInstances[0].getContent(),f={content_type:"map",geolat:this.$("#geolocation-latitude").val(),geolon:this.$("#geolocation-longitude").val()},c=this.$(".wx-post-id").val(),b="";if(c){f.post_id=c}b=this.createPage(g,e,f);b=b.replace(/index\.php.+$/,"index.php?feed=r3s&category_name=map");d.set("title","Map");d.set("content","htmlMap");d.set("published",1);d.set("parent_id",null);d.set("tabLayout","list");d.setConfig("name",g);d.setConfig("type","channel");d.setConfig("url",b);return d},loadGeolocation:function(){if(this.$(".geolocation-address").val()!=""){var b=this.$(".geolocation-address").val();this.geocode(b)}},geocode:function(b){var c=this,d=new google.maps.Geocoder();if(d){d.geocode({address:b},function(f,e){if(e==google.maps.GeocoderStatus.OK){c.placeMarker(f[0].geometry.location);if(!c.hasLocation){c.map.setZoom(16);c.hasLocation=true}}})}},placeMarker:function(b){console.log("PLACING MARKER:",b);console.log("PLACING MARKER:",b.lat());console.log("PLACING MARKER:",b.lng());this.marker.setPosition(b);this.map.setCenter(b);if((b.lat()!="")&&(b.lng()!="")){this.$("#geolocation-latitude").val(b.lat());this.$("#geolocation-longitude").val(b.lng())}},showListOfPosts:function(){var b=this;a("section.post-list").show();a("section.editor").hide();a("section.coupon").hide();a("section.mapper").hide();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ajaxGetMapPosts"},success:function(f){if(typeof f==="string"){f=JSON.parse(f)}b.postsCache=f;a("section.post-list").html("<ul></ul>");for(var e=0;e<f.length;e++){var d=f[e],c=_.template(a("#wordpressaddpage-map-post").html()),g=c(d);a("section.post-list ul").append(g)}},error:function(c,d){alert("error")}})},showEditor:function(d,i,e,g,h){if(!i){i=""}if(!e){e=""}if(!g){g=0}if(!h){g=0}var b=new google.maps.LatLng(g,h),j={zoom:16,center:b,mapTypeId:google.maps.MapTypeId.ROADMAP},c=new google.maps.Map(this.$("#map")[0],j),f=new google.maps.Marker({position:b,map:c,title:"Post Location"});a("section.post-list").hide();a("section.editor").show();a("section.coupon").hide();a("section.mapper").show();this.map=c;this.marker=f;setTimeout(function(){google.maps.event.trigger(c,"resize");c.setCenter(b)},200);this.$(".wx-post-id").val(d);this.$(".wx-edit-input").val(i);this.$("div.nicEdit-main").html(e);this.$(".nicEdit-panelContain").parent().width("509px");this.$(".nicEdit-panelContain").parent().next().width("509px");this.$(".nicEdit-main").width("501px");if(d){this.$(".wx-back-to-list").show()}else{this.$(".wx-back-to-list").hide()}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.PicasaAlbumsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#picasaalbums-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("user_id",this.$(".wx-edit-input").val());b.setConfig("email",this.$(".wx-edit-input").val())}return b}})})(jQuery);(function(a){wxApp.QuizBuilderSubTabEditView=wxApp.SubTabEditView.extend({baseEditTplSelector:"#quizbuilder-subtab-edit-template",questionViews:[],initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)},events:{"click .wx-add-question":"addNewQuestion","click .wx-next":"next","click .wx-back-button":"previous","click .wx-finish":"finish","keyup .wx-edit-passphrase":"updatePassphrase","keyup .wx-edit-title":"updateQuizName","sortable-update":"sortableUpdate"},render:function(){wxApp.SubTabEditView.prototype.render.apply(this,arguments);this.questionViews=[];for(var c=0;c<this.model.get("quiz").get("questions").length;c++){var b=this.model.get("quiz").get("questions").at(c);b.set("ordinal",c);this.addQuestion(b,false)}this.$el.foundation("reflow");if(this.model.id){a(a("#panel-question-list .accordion-navigation a")[0]).click()}},validate:function(){var e=this.model.get("quiz"),f=[];this.$("input").removeClass("wx-error");if(e.get("name").trim().length===0){f.push("Please provide a name for this quiz.");this.$(".wx-edit-title").addClass("wx-error")}if(true){if(e.get("settings").passphrase.trim().length===0){f.push("Please provide a passphrase for this quiz.");this.$(".wx-edit-passphrase").addClass("wx-error")}}if(e.get("questions").length===0){f.push("Please add at last one question.")}else{for(var c=0;c<e.get("questions").length;c++){f=this.validateQuestion(c,f)}}if(f.length){var b="",d=this.$(".alert-box.alert .message");f.forEach(function(g){b+="<br><br>"+g});d.html(b);d.parent().slideDown();return false}return true},validateQuestion:function(d,g){var e=this.questionViews[d].$(".wx-question-challenge");if(e.val().trim().length===0){g.push("Enter a question for Question "+(d+1));e.addClass("wx-error")}for(var c=0;c<this.model.get("quiz").get("questions").at(d).get("responses").length;c++){var b=this.model.get("quiz").get("questions").at(d).get("responses")[c],f=this.questionViews[d].$('input[data-index="'+c+'"]');if(f.val().trim().length===0){g.push("Enter an answer for Question "+(d+1)+", Answer "+(c+1));f.addClass("wx-error")}}if(typeof this.$('[name="answer-'+d+'"]:checked').val()==="undefined"){g.push("Please select the correct answer for Question "+(d+1));this.$('[name="answer-'+d+'"]').addClass("wx-error")}return g},addNewQuestion:function(){var c=this.model.get("quiz").addQuestion(),b=this.addQuestion(c,true);b.getPreview().$("a").click()},addQuestion:function(c,d){var b=new wxApp.QuizBuilderQuestionView({model:c});this.$(".wx-please-add-msg").hide();if(!d){b.$el.css("display","none")}this.$("#panel-question-fields").append(b.render().el);this.$(".accordion").append(b.getPreview().render().el);c.on("destroy",this.questionDeleted,this);this.questionViews.push(b);this.updateSortable();return b},updateSortable:function(){if(this.questionViews.length>=1){a(".accordion").sortable({axis:"y",start:function(b,c){a(".accordion-navigation").removeClass("active");a(".accordion-navigation div.content").removeClass("active")},stop:function(b,c){c.item.trigger("sortable-drop",c.item.index())}})}},sortableUpdate:function(e,c,b){var d=this.model.get("quiz").get("questions");d.remove(c);d.add(c,{at:b})},next:function(){var b=this;b.$(".wx-quiz-builder-step-one").slideUp();b.$(".wx-quiz-builder-step-two").slideDown()},previous:function(){var b=this;b.$(".wx-quiz-builder-step-two").slideUp();b.$(".wx-quiz-builder-step-one").slideDown()},questionDeleted:function(c){var b=this;this.model.get("quiz").get("questions").once("remove",function(d,f,e){b.render()});this.model.get("quiz").get("questions").remove(c)},updatePassphrase:function(b){this.model.get("quiz").get("settings").passphrase=a(b.currentTarget).val()},updateQuizName:function(b){this.model.get("quiz").set("name",a(b.currentTarget).val())}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.r3sSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#r3s-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.RSSSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#rss-subtab-edit-template",setModelFromView:function(c){var b=this.$(".wx-edit-input").val();if(b){c.setConfig("rawUrl",b);if(b.indexOf("_rss2r3s")==-1){b="http://weeverapp.com/api/v2/_rss2r3s/byUrl?url="+encodeURIComponent(b)}c.setConfig("url",b)}return c}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TwitterSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#twitter-subtab-edit-template",contentChange:function(c){wxApp.SubTabEditView.prototype.contentChange.call(this,c);var d="Search Term";var b=this.$(".wx-content-radio:checked").val();if("twitterUser"===b){d="@MyTwitterHandle"}else{if("twitterHashTag"===b){d="#hashtag"}}a("#wx-twitter-input").attr("placeholder",d)},setModelFromView:function(b){var c=this.$(".wx-content-radio:checked").val();if("twitterUser"==c){b.setConfig("screen_name",this.$(".wx-edit-input").val());b.deleteConfig("q")}else{c="twitter";b.setConfig("q",this.$(".wx-edit-input").val());b.deleteConfig("screen_name")}try{b.set("content",c)}catch(d){}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.VimeoSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#vimeo-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressAddPageSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressaddpage-subtab-edit-template",editorId:"",isCoupon:false,events:{"keyup .wx-coupon-title":"updatePreview","keyup .wx-coupon-description":"updatePreview","keyup .wx-coupon-terms":"updatePreview","keyup .wx-coupon-barcode":"updateBarcode"},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)},render:function(){var c=this,b=this.model.get("config").url;if(b){c.loadExistingArticle(b)}wxApp.SubTabEditView.prototype.render.apply(c);c.$("section.post-list").hide();c.$("section.editor").show();c.$("section.coupon").hide();c.$("section.mapper").hide();c.editorId="wx-content-"+Math.floor((Math.random()*1000000)+1).toString();c.$(".wx-content-editor").attr("id",c.editorId);setTimeout(function(){var d=wx.pluginUrl+"file-upload.php?upload_path="+wx.uploadPath+"&upload_url="+wx.uploadUrl;new nicEditor({fullPanel:true,uploadURI:d}).panelInstance(c.editorId)},200)},setModelFromView:function(d){var h="",c="",g="",f="",e="",b;if(a("section.editor").is(":visible")){c=this.$(".wx-edit-input").val();h=nicEditors.findEditor(this.editorId).nicInstances[0].getContent()}if(a("section.coupon").is(":visible")){if(!c){c=this.$(".wx-coupon-title").val()}g=this.$(".wx-coupon-description").val();f=this.$(".wx-coupon-terms").val();e=this.$(".wx-coupon-barcode").val();d.setConfig("description",g);d.setConfig("terms",f);d.setConfig("barcodeText",e)}b=this.createPage(c,h);d.setConfig("name",c);d.setConfig("title",c);d.setConfig("url",b);d.set("parent_id",null);return d},loadExistingArticle:function(b){var c=this;a.getJSON(b,function(f){console.log("loadExistingArticle");console.log(f);if(c.isCoupon){var d=c.model.get("config");if(!!d.barcodeText){c.$(".wx-coupon-barcode").val(c.model.get("config").barcodeText);c.$("#wx_coupon_barcode_preview").html('<img src="'+f.results[0].image+'" />')}}var e=f.results[0].html;e=a("<div/>").html(e).contents();var g=e.find("h1.wx-article-title").html().trim();e.find("h1.wx-article-title").detach();e=a(e.find("div")[0]).html().trim();if(a("div.nicEdit-main")){a("div.nicEdit-main").html(e)}else{c.$(".wx-content-editor").val(e)}c.$(".wx-edit-input").val(g)})},createPage:function(b,e,d){var g="",f={action:"ajaxAddNewContent",name:b,content:e,nonce:a("input#nonce").val()};if(d){for(var c in d){if(d.hasOwnProperty(c)){f[c]=d[c]}}}jQuery.ajax({type:"POST",url:ajaxurl,async:false,data:f,success:function(h){g=h.replace("weever_cartographer0","weever_cartographer")},error:function(h,i){console.log(h);console.log(i)}});return g},updatePreview:function(){var d=a(".wx-coupon-title").val(),c=a(".wx-coupon-description").val(),b=a(".wx-coupon-terms").val();if(d){this.$("#wx_coupon_title_preview").text(d)}if(c){this.$("#wx_coupon_content_preview").text(c)}if(b){this.$("#wx_coupon_conditions_preview").text(b)}},updateBarcode:function(){console.log("updateBarcode");var d=this,c=jQuery("input#nonce").val(),e=this.$(".wx-coupon-barcode").val(),b=this.model;setTimeout(function(){if(e==d.$(".wx-coupon-barcode").val()){console.log(e);jQuery.ajax({type:"POST",url:ajaxurl,async:false,data:{action:"ajaxGetBarcode",text:e,nonce:c},success:function(f){f=JSON.parse(f);console.log(f);if(f.success){var g=f.filename;d.$("#wx_coupon_barcode_preview").html('<img src="'+g+'" />');b.setConfig("url",g)}},error:function(f,g){console.log(f);console.log(g)}})}},500)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressBlogSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressblog-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-blog-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-blog-select")){b.setConfig("url",this.$(".wx-add-wordpress-blog-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressCategorySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresscategory-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-category-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-category-select")){b.setConfig("url",this.$(".wx-add-wordpress-category-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressContactsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresscontacts-subtab-edit-template",initialize:function(){var b=this.model.get("config");if(typeof b.contacts=="string"){b.contacts=JSON.parse(b.contacts);this.model.set("config",b)}wxApp.SubTabEditView.prototype.initialize.apply(this,arguments)},setModelFromView:function(d){var b={};if(this.$(".wx-contact-input-title")){d.set("title",this.$(".wx-contact-input-title").val())}if(this.$(".wx-contact-input-phone")){b.telephone=this.$(".wx-contact-input-phone").val()}if(this.$(".wx-contact-input-email")){b.email_to=this.$(".wx-contact-input-email").val()}if(this.$(".wx-contact-input-address")){b.address=this.$(".wx-contact-input-address").val()}if(this.$(".wx-contact-input-town")){b.town=this.$(".wx-contact-input-town").val()}if(this.$(".wx-contact-input-state")){b.state=this.$(".wx-contact-input-state").val()}if(this.$(".wx-contact-input-country")){b.country=this.$(".wx-contact-input-country").val()}b.googlemaps=(this.$(".wx-contact-input-googlemaps")&&this.$(".wx-contact-input-googlemaps").val()?1:0);b.emailform=(this.$(".wx-contact-input-emailform")&&this.$(".wx-contact-input-emailform").val()?1:0);if(this.$(".wx-contact-input-misc")){b.misc=this.$(".wx-contact-input-misc").val()}if(this.$(".wx-contact-input-image")){b.image=this.$(".wx-contact-input-image").val();b.showimage=(b.image.trim()?1:0)}var c={};var f=[];f.push(b);c.contacts=f;try{d.set("config",c)}catch(g){}return d}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressDirectorySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressdirectory-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-directory-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-directory-select")){b.setConfig("url",this.$(".wx-add-wordpress-directory-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressMapSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressmap-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-map-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-map-select")){b.setConfig("url",this.$(".wx-add-wordpress-map-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressPageSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresspage-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;b=b.replace("?page_id","?wx_page_id");a(".wx-add-wordpress-page-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-page-select")){b.setConfig("url",this.$(".wx-add-wordpress-page-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressProximitySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressproximity-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-proximity-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-proximity-select")){b.setConfig("url",this.$(".wx-add-wordpress-proximity-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressSearchtermSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresssearchterm-subtab-edit-template",render:function(){var c=this.model.get("config").url;var d=c.indexOf("s=");var b=c.substr(d+2);this.model.get("config").search_value=_.unescape(b).replace("%20"," ");wxApp.SubTabEditView.prototype.render.apply(this)},setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-wordpress-siteurl").val()+"&s="+encodeURIComponent(this.$(".wx-edit-input").val()))}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressTagSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresstag-subtab-edit-template",render:function(){wxApp.SubTabEditView.prototype.render.apply(this);var b=this.model.get("config").url;a(".wx-add-wordpress-tag-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-tag-select")){b.setConfig("url",this.$(".wx-add-wordpress-tag-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WufooSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wufoo-subtab-edit-template",render:function(){var c=this.model.get("config").username;if(c){var b="https://"+c+".wufoo.com";this.model.get("config").url=b}wxApp.SubTabEditView.prototype.render.apply(this)},setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}if(this.$(".wx-wufoo-api-key-input")){b.setConfig("apikey",this.$(".wx-wufoo-api-key-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.YoutubeSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#youtube-subtab-edit-template",setModelFromView:function(b){b.set("content",this.$(".wx-content-radio:checked").val());b.setConfig("url",this.$(".wx-edit-input").val());return b},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabsView=Backbone.View.extend({tagName:"ul",className:"list-items-sortable list-items list-sub-items",attributes:function(){return{id:"listItemsSortable"+this.model.get("id")}},initialize:function(){var b=this;this.model.get("subTabs").bind("add",b.addSubTab,b);Backbone.Events.on("tab:dropped",this.cancelSort,this)},events:{},render:function(){this.$el.html("");this.startSortable();if(this.model.getSubTabs().length){var b=this;this.model.getSubTabs().forEach(function(c){b.addSubTab(c)})}return this},addSubTab:function(d){var c=this;var b=new wxApp.SubTabView({model:d});this.$el.append(b.render().el);d.on("destroy",function(){c.deleteSubTab(this)});this.refreshSortable()},startSortable:function(){var b=this;if(undefined!=this.$el.sortable){this.$el.sortable({start:function(c,d){console.log("trigger dragstart");Backbone.Events.trigger("subtab:dragstart")},stop:function(c,d){Backbone.Events.trigger("subtab:dragstop")},update:function(d,e){if(!a(e.item).data("backbone-view")){return}if(wx.setting_parent){return}console.log("update");var c=String(a(this).sortable("toArray").map(function(f){return f.replace("SubtabID","")}));wx.makeApiCall("tabs/sort_tabs",{order:c},function(){wx.rebuildApp();b.setSubTabCollectionOrder(c.split(","));var f=c.split(",")[0];var g=a(e.item).data("backbone-view").model.get("parent_id");if(g!=f){Backbone.Events.trigger("tab:id-update",g,f)}})},helper:"clone",cursor:"move",handle:".wx-subtab-movehandle"})}},setSubTabCollectionOrder:function(b){this.model.get("subTabs").comparator=function(c){return b.indexOf(String(c.get("id")))};this.model.get("subTabs").sort()},refreshSortable:function(){try{if(undefined!=this.$el.sortable){this.$el.sortable("refresh")}}catch(b){}},cancelSort:function(b){},deleteSubTab:function(b){this.model.deleteSubTab(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabsContainerView=Backbone.View.extend({tagName:"div",tabView:false,initialize:function(){var b=this;this.subTabContainerTpl=_.template(a("#subtab-container-template").html());this.subTabsView=new wxApp.SubTabsView({model:this.model});this.subTabsView.on("delete",function(){b.model.destroy();b.remove()});this.containerEditContentTpl=_.template(a("#ContainerEditContent").html());this.containerEditView=new wxApp.ContainerEditView({model:this.model});this.model.on("change",this.render,this)},events:{"click #ContainerEditLink":"openEditModal","click .wx-delete-container":"confirmDelete","click .wx-layout-selector":"selectLayout"},render:function(){this.$el.html(this.subTabContainerTpl(this.model.toJSON()));this.$("#ContainerEditModal").html(this.containerEditContentTpl(this.model.toJSON()));this.$(".adminlist").append(this.subTabsView.render().el);this.$el.attr("id",this.model.get("id")+"Tab");return this},openEditModal:function(){console.log("editing container...");this.containerEditView=new wxApp.ContainerEditView({model:this.model});this.$("#ContainerEditModal").html(this.containerEditView.render().el);this.$(".section-container").foundation("reflow")},selectLayout:function(f){var c=a(f.currentTarget);a(".wx-layout-selector").addClass("secondary");c.removeClass("secondary");var b=c.attr("id");b=b.replace("layout-","");if(b==="classic"){b=null}var d=this;wx.makeApiCall("tabs/set_tabLayout",{tab_id:this.model.get("id"),tabLayout:b},function(){console.log("Layout Saved");d.model.set("tabLayout",b);if(d.model.get("subTabs")&&d.model.get("subTabs").length){for(var g=0;g<d.model.get("subTabs").length;g++){var e=d.model.get("subTabs").at(g);e.set("tabLayout",b)}}wx.rebuildApp()})},confirmDelete:function(b){b.preventDefault();if(confirm("Are you sure you want to delete this item, including all of the sub-tabs?")){this.deleteContainer()}},deleteContainer:function(){this.model.destroy();wx.rebuildApp()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabView=Backbone.View.extend({tagName:"div",className:"wx-tab",subTabsContainerView:false,initialize:function(){this.tabTpl=_.template(a("#tab-template").html());this.model.bind("change",this.rerender,this);this.model.bind("destroy",this.destroyView,this);Backbone.Events.on("tab:id-update",this.updateTabId,this)},events:{click:"editAll"},rerender:function(){this.render()},render:function(){this.$el.html(this.tabTpl(this.model.toJSON()));this.loadIcon();if(undefined!==this.$el.droppable){this.$el.droppable({accept:".list-sub-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer",greedy:true})}this.$el.data("backbone-view",this);this.$el.addClass(this.model.get("id"));this.$el.attr("id",this.model.get("id")+"TabID");if(this.model.get("layout")=="share"){this.$el.addClass("wx-share")}return this},onDrop:function(e,f){console.log("onDrop");var d=a(this).data("backbone-view");var c=a(f.draggable).data("backbone-view");Backbone.Events.trigger("tab:dropped",c.model.get("parent_id"));if(c.model.get("parent_id")!=d.model.get("id")){wx.setting_parent=true;wx.makeApiCall("tabs/set_parent_id",{tab_id:c.model.get("id"),parent_id:d.model.get("id")},function(){wx.rebuildApp();c.model.trigger("tab:move");d.model.addSubTab(c.model);a("#"+d.model.get("id")+"TabID").click();wx.setting_parent=false})}Backbone.Events.trigger("subtab:dragstop");var b=a("style")[a("style").length-1];if(b.innerHTML.indexOf("*{ cursor")==0){b.remove()}},editAll:function(){a('a[href="#panel2"]').click();a(".wx-tab button").addClass("secondary");a("div."+this.model.get("id")+" button").removeClass("secondary");this.subTabsContainerView=new wxApp.SubTabsContainerView({model:this.model});this.subTabsContainerView.tabView=this;a("#editSpace").html(this.subTabsContainerView.render().el)},updateTabId:function(b,c){if(b==this.model.get("id")){this.model.getSubTabs().forEach(function(d){d.set("parent_id",c)});this.model.set("id",c)}},loadIcon:function(){},destroyView:function(){console.log("destroying tab view");if(this.subTabsContainerView){this.subTabsContainerView.remove()}this.remove()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabsView=Backbone.View.extend({el:"#editListTabsSortable",initialize:function(){if(this.collection.length){for(var b=0;b<this.collection.length;b++){this.addOne(this.collection.models[b])}}this.collection.bind("add",this.addOne,this);Backbone.Events.on("tab:new",this.addNewlyCreatedTab,this);this.startSortable();this.startDroppable()},addOne:function(c){var d=this;var b=new wxApp.TabView({model:c});if(d.$("> div:last-child").hasClass("wx-share")&&wxApp.Tabs.loaded){d.$("> div:last-child").before(b.render().el)}else{d.$el.append(b.render().el)}b.subTabsContainerView=new wxApp.SubTabsContainerView({model:c});b.subTabsContainerView.tabView=b;c.on("destroy",function(e){d.removeTabFromCollection(e)})},startSortable:function(){var b=this;if(undefined!=this.$el.sortable){this.$el.sortable({axis:"x",cancel:".wx-nosort",placeholder:"wx-tab",update:function(d,e){var c=a(this).sortable("toArray");c=a.map(c,function(g){var f=g.toLowerCase().replace("tabid","");if(a.isNumeric(f)){return f}else{return null}});wx.makeApiCall("tabs/sort_tabs",{order:String(c)},function(){wx.rebuildApp()});if(a(e.item).attr("rel")!="unpublished"){a(e.item).removeAttr("style")}else{a(e.item).attr("style","float:right;")}}})}},startDroppable:function(){this.$el.droppable({accept:".list-sub-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer"})},onDrop:function(d,e){var c=a(e.draggable).data("backbone-view");Backbone.Events.trigger("tab:dropped",c.model.get("parent_id"));wx.makeApiCall("tabs/set_parent_id",{tab_id:c.model.get("id"),parent_id:0},function(){wx.rebuildApp();c.model.trigger("tab:move");wxApp.tabsView.addNewMainTab(c.model);a("#editListTabsSortable").html("");wxApp.Tabs.fetch(function(){wxApp.tabsView.destroy();wxApp.tabsView=new wxApp.TabsView({collection:wxApp.Tabs});a("#"+c.model.get("id")+"TabID").click()})});Backbone.Events.trigger("subtab:dragstop");var b=a("style")[a("style").length-1];if(b.innerHTML.indexOf("*{ cursor")==0){b.remove()}},addNewlyCreatedTab:function(b){if(b.get("parent_id")){this.addNewSubTab(b)}else{this.addNewMainTab(b)}},addNewMainTab:function(b){var c=new wxApp.Tab(b.getAPIData());c.addSubTab(b);wxApp.Tabs.add(c);if(wxApp.Tabs.length===2){a(document).foundation("joyride","start")}},addNewSubTab:function(b){var c=wxApp.Tabs.get(b.get("parent_id"));if(c){c.addSubTab(b)}else{throw new Error("No main tab with id"+b.get("parent_id"))}},addTabToCollection:function(b){wxApp.Tabs.add(b)},removeTabFromCollection:function(b){wxApp.Tabs.remove(b)}});wxApp.tabsView=new wxApp.TabsView({collection:wxApp.Tabs})})(jQuery);