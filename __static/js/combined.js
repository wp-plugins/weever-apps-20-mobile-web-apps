jQuery(document).ready(function(){jQuery('input[name="switch-x"]').click(function(){if(this.id=="on"){app_enabled=1}else{app_enabled=0}jQuery("#status-loading").show();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ajaxToggleAppStatus",nonce:jQuery("input#nonce").val(),app_enabled:app_enabled},success:function(b){console.log("OK");var a=app_enabled?"online":"offline";a="<b>"+a+"</b>";jQuery("#appStatus").html(a);jQuery("#status-loading").fadeOut()},error:function(a,b){alert(b)}})});jQuery('input[name="switch-tablet"]').click(function(){console.log("Switch tablet.");if(this.id=="on"){tablets_enabled=1}else{tablets_enabled=0}console.log(tablets_enabled);jQuery("#switch-tablet-loading").show();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ajaxToggleTabletStatus",nonce:jQuery("input#nonce").val(),tablets_enabled:tablets_enabled},success:function(b){console.log("Tablet status saved");var a=tablets_enabled?"yes":"no";jQuery("#switch-tablet-loading").fadeOut()},error:function(a,b){alert(b)}})});jQuery("#tabs").tabs();jQuery("#preview-iphone").click(function(){jQuery("#preview-bg").attr("class","iphone");jQuery("#preview-app-dialog-webkit iframe").attr("width","300");jQuery("#preview-app-dialog-webkit iframe").attr("height","520");jQuery("#preview-iphone").attr("class","active");jQuery("#preview-android, #preview-blackberry").attr("class","");jQuery("#preview-app-padding-box").attr("style","padding-top:45px; padding-left: 10px;");jQuery("#preview-app ").attr("style","width: 400px !important; height: 550px !important;")});jQuery("#preview-android").click(function(){jQuery("#preview-bg").attr("class","android");jQuery("#preview-app-dialog-webkit iframe").attr("width","310");jQuery("#preview-app-dialog-webkit iframe").attr("height","505");jQuery("#preview-android").attr("class","active");jQuery("#preview-iphone, #preview-blackberry").attr("class","");jQuery("#preview-app-padding-box").attr("style","padding-top: 68px; padding-left: 0px;");jQuery("#preview-app-dialog-webkit #preview-app ").attr("style","width: 310px; height: 550px;")});jQuery("#preview-blackberry").click(function(){jQuery("#preview-bg").attr("class","blackberry");jQuery("#preview-app-dialog-webkit iframe").attr("width","290");jQuery("#preview-app-dialog-webkit iframe").attr("height","390");jQuery("#preview-blackberry").attr("class","active");jQuery("#preview-iphone, #preview-android").attr("class","");jQuery("#preview-app-dialog-webkit #preview-app ").attr("style","width: 290px; height: 390px;");jQuery("#preview-app-padding-box").attr("style","padding-top: 55px; padding-left: 14px;");jQuery("#preview-app ").attr("style","width: 400px !important; height: 550px !important;")});jQuery("#refresh_preview").on("click",function(){console.log("Refresh Clicked.");wx.refreshAppPreview()});jQuery("#refresh_preview").click(function(){console.log("Refresh Clicked.");wx.refreshAppPreview()})});window.Modernizr=function(al,ak,aj){function G(b){ac.cssText=b}function W(d,c){return G(Y.join(d+";")+(c||""))}function U(d,c){return typeof d===c}function S(d,c){return !!~(""+d).indexOf(c)}function Q(g,c,j){for(var i in g){var h=c[g[i]];if(h!==aj){return j===!1?g[i]:U(h,"function")?h.bind(j||c):h}}return !1}function O(){ah.input=function(g){for(var b=0,a=g.length;b<a;b++){R[g[b]]=g[b] in ab}return R.list&&(R.list=!!ak.createElement("datalist")&&!!al.HTMLDataListElement),R}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),ah.inputtypes=function(b){for(var l=0,k,j,g,c=b.length;l<c;l++){ab.setAttribute("type",j=b[l]),k=ab.type!=="text",k&&(ab.value=aa,ab.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(j)&&ab.style.WebkitAppearance!==aj?(af.appendChild(ab),g=ak.defaultView,k=g.getComputedStyle&&g.getComputedStyle(ab,null).WebkitAppearance!=="textfield"&&ab.offsetHeight!==0,af.removeChild(ab)):/^(search|tel)$/.test(j)||(/^(url|email)$/.test(j)?k=ab.checkValidity&&ab.checkValidity()===!1:k=ab.value!=aa)),T[b[l]]=!!k}return T}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var ai="2.6.2",ah={},ag=!0,af=ak.documentElement,ae="modernizr",ad=ak.createElement(ae),ac=ad.style,ab=ak.createElement("input"),aa=":)",Z={}.toString,Y=" -webkit- -moz- -o- -ms- ".split(" "),X={svg:"http://www.w3.org/2000/svg"},V={},T={},R={},P=[],N=P.slice,M,K=function(v,u,t,s){var r,q,p,o,h=ak.createElement("div"),g=ak.body,b=g||ak.createElement("body");if(parseInt(t,10)){while(t--){p=ak.createElement("div"),p.id=s?s[t]:ae+(t+1),h.appendChild(p)}}return r=["&#173;",'<style id="s',ae,'">',v,"</style>"].join(""),h.id=ae,(g?h:b).innerHTML+=r,b.appendChild(h),g||(b.style.background="",b.style.overflow="hidden",o=af.style.overflow,af.style.overflow="hidden",af.appendChild(b)),q=u(h,v),g?h.parentNode.removeChild(h):(b.parentNode.removeChild(b),af.style.overflow=o),!!q},J=function(a){var g=al.matchMedia||al.msMatchMedia;if(g){return g(a).matches}var e;return K("@media "+a+" { #"+ae+" { position: absolute; } }",function(c){e=(al.getComputedStyle?getComputedStyle(c,null):c.currentStyle)["position"]=="absolute"}),e},I={}.hasOwnProperty,H;!U(I,"undefined")&&!U(I.call,"undefined")?H=function(d,c){return I.call(d,c)}:H=function(d,c){return c in d&&U(d.constructor.prototype[c],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var i=this;if(typeof i!="function"){throw new TypeError}var h=N.call(arguments,1),g=function(){if(this instanceof g){var b=function(){};b.prototype=i.prototype;var d=new b,c=i.apply(d,h.concat(N.call(arguments)));return Object(c)===c?c:d}return i.apply(a,h.concat(N.call(arguments)))};return g}),V.touch=function(){var a;return"ontouchstart" in al||al.DocumentTouch&&ak instanceof DocumentTouch?a=!0:K(["@media (",Y.join("touch-enabled),("),ae,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(b){a=b.offsetTop===9}),a},V.svg=function(){return !!ak.createElementNS&&!!ak.createElementNS(X.svg,"svg").createSVGRect},V.inlinesvg=function(){var b=ak.createElement("div");return b.innerHTML="<svg/>",(b.firstChild&&b.firstChild.namespaceURI)==X.svg},V.svgclippaths=function(){return !!ak.createElementNS&&/SVGClipPath/.test(Z.call(ak.createElementNS(X.svg,"clipPath")))};for(var L in V){H(V,L)&&(M=L.toLowerCase(),ah[M]=V[L](),P.push((ah[M]?"":"no-")+M))}return ah.input||O(),ah.addTest=function(e,c){if(typeof e=="object"){for(var g in e){H(e,g)&&ah.addTest(g,e[g])}}else{e=e.toLowerCase();if(ah[e]!==aj){return ah}c=typeof c=="function"?c():c,typeof ag!="undefined"&&ag&&(af.className+=" "+(c?"":"no-")+e),ah[e]=c}return ah},G(""),ad=ab=null,function(ap,ao){function z(g,e){var i=g.createElement("p"),h=g.getElementsByTagName("head")[0]||g.documentElement;return i.innerHTML="x<style>"+e+"</style>",h.insertBefore(i.lastChild,h.firstChild)}function y(){var b=s.elements;return typeof b=="string"?b.split(" "):b}function x(d){var c=B[d[D]];return c||(c={},C++,d[D]=C,B[C]=c),c}function w(b,h,e){h||(h=ao);if(A){return h.createElement(b)}e||(e=x(h));var d;return e.cache[b]?d=e.cache[b].cloneNode():F.test(b)?d=(e.cache[b]=e.createElem(b)).cloneNode():d=e.createElem(b),d.canHaveChildren&&!am.test(b)?e.frag.appendChild(d):d}function v(b,l){b||(b=ao);if(A){return b.createDocumentFragment()}l=l||x(b);var k=l.frag.cloneNode(),j=0,i=y(),h=i.length;for(;j<h;j++){k.createElement(i[j])}return k}function u(d,c){c.cache||(c.cache={},c.createElem=d.createElement,c.createFrag=d.createDocumentFragment,c.frag=c.createFrag()),d.createElement=function(a){return s.shivMethods?w(a,d,c):c.createElem(a)},d.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+y().join().replace(/\w+/g,function(b){return c.createElem(b),c.frag.createElement(b),'c("'+b+'")'})+");return n}")(s,c.frag)}function t(b){b||(b=ao);var d=x(b);return s.shivCSS&&!E&&!d.hasCSS&&(d.hasCSS=!!z(b,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),A||u(b,d),b}var an=ap.html5||{},am=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,F=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,E,D="_html5shiv",C=0,B={},A;(function(){try{var b=ao.createElement("a");b.innerHTML="<xyz></xyz>",E="hidden" in b,A=b.childNodes.length==1||function(){ao.createElement("a");var c=ao.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()}catch(d){E=!0,A=!0}})();var s={elements:an.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:an.shivCSS!==!1,supportsUnknownElements:A,shivMethods:an.shivMethods!==!1,type:"default",shivDocument:t,createElement:w,createDocumentFragment:v};ap.html5=s,t(ao)}(this,ak),ah._version=ai,ah._prefixes=Y,ah.mq=J,ah.testStyles=K,af.className=af.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(ag?" js "+P.join(" "):""),ah}(this,this.document),function(ad,ac,ab){function aa(b){return"[object Function]"==P.call(b)}function Z(b){return"string"==typeof b}function Y(){}function X(b){return !b||"loaded"==b||"complete"==b||"uninitialized"==b}function W(){var b=O.shift();M=1,b?b.t?R(function(){("c"==b.t?L.injectCss:L.injectJs)(b.s,0,b.a,b.x,b.e,1)},0):(b(),W()):M=0}function V(x,w,v,t,s,q,p){function n(a){if(!g&&X(h.readyState)&&(y.r=g=1,!M&&W(),h.onload=h.onreadystatechange=null,a)){"img"!=x&&R(function(){I.removeChild(h)},50);for(var c in D[w]){D[w].hasOwnProperty(c)&&D[w][c].onload()}}}var p=p||L.errorTimeout,h=ac.createElement(x),g=0,b=0,y={t:v,s:w,e:s,a:q,x:p};1===D[w]&&(b=1,D[w]=[]),"object"==x?h.data=w:(h.src=w,h.type=x),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){n.call(this,b)},O.splice(t,0,y),"img"!=x&&(b||2===D[w]?(I.insertBefore(h,J?null:Q),R(n,p)):D[w].push(h))}function U(g,e,j,i,h){return M=0,e=e||"j",Z(g)?V("c"==e?G:H,g,e,this.i++,j,i,h):(O.splice(this.i++,0,g),1==O.length&&W()),this}function T(){var b=L;return b.loader={load:U,i:0},b}var S=ac.documentElement,R=ad.setTimeout,Q=ac.getElementsByTagName("script")[0],P={}.toString,O=[],M=0,K="MozAppearance" in S.style,J=K&&!!ac.createRange().compareNode,I=J?S:Q.parentNode,S=ad.opera&&"[object Opera]"==P.call(ad.opera),S=!!ac.attachEvent&&!S,H=K?"object":S?"script":"img",G=S?"script":H,F=Array.isArray||function(b){return"[object Array]"==P.call(b)},E=[],D={},C={timeout:function(d,c){return c.length&&(d.timeout=c[0]),d}},N,L;L=function(e){function c(i){var i=i.split("!"),h=E.length,s=i.pop(),r=i.length,s={url:s,origUrl:s,prefixes:i},q,l,j;for(l=0;l<r;l++){j=i[l].split("="),(q=C[j.shift()])&&(s=q(s,j))}for(l=0;l<h;l++){s=E[l](s)}return s}function p(b,u,t,s,r){var q=c(b),l=q.autoCallback;q.url.split(".").pop().split("?").shift(),q.bypass||(u&&(u=aa(u)?u:u[b]||u[s]||u[b.split("/").pop().split("?")[0]]),q.instead?q.instead(b,u,t,s,r):(D[q.url]?q.noexec=!0:D[q.url]=1,t.load(q.url,q.forceCSS||!q.forceJS&&"css"==q.url.split(".").pop().split("?").shift()?"c":ab,q.noexec,q.attrs,q.timeout),(aa(u)||aa(l))&&t.load(function(){T(),u&&u(q.origUrl,r,s),l&&l(q.origUrl,r,s),D[q.url]=2})))}function o(y,x){function w(b,h){if(b){if(Z(b)){h||(t=function(){var i=[].slice.call(arguments);s.apply(this,i),r()}),p(b,t,x,0,v)}else{if(Object(b)===b){for(g in q=function(){var a=0,i;for(i in b){b.hasOwnProperty(i)&&a++}return a}(),b){b.hasOwnProperty(g)&&(!h&&!--q&&(aa(t)?t=function(){var i=[].slice.call(arguments);s.apply(this,i),r()}:t[g]=function(i){return function(){var a=[].slice.call(arguments);i&&i.apply(this,a),r()}}(s[g])),p(b[g],t,x,g,v))}}}}else{!h&&r()}}var v=!!y.test,u=y.load||y.both,t=y.callback||Y,s=t,r=y.complete||Y,q,g;w(v?y.yep:y.nope,!!u),u&&w(u)}var n,k,d=this.yepnope.loader;if(Z(e)){p(e,0,d,0)}else{if(F(e)){for(n=0;n<e.length;n++){k=e[n],Z(k)?p(k,0,d,0):F(k)?L(k):Object(k)===k&&o(k,d)}}else{Object(e)===e&&o(e,d)}}},L.addPrefix=function(d,c){C[d]=c},L.addFilter=function(b){E.push(b)},L.errorTimeout=10000,null==ac.readyState&&ac.addEventListener&&(ac.readyState="loading",ac.addEventListener("DOMContentLoaded",N=function(){ac.removeEventListener("DOMContentLoaded",N,0),ac.readyState="complete"},0)),ad.yepnope=T(),ad.yepnope.executeStack=W,ad.yepnope.injectJs=function(t,s,r,q,p,n){var h=ac.createElement("script"),g,b,q=q||L.errorTimeout;h.src=t;for(b in r){h.setAttribute(b,r[b])}s=n?W:s||Y,h.onreadystatechange=h.onload=function(){!g&&X(h.readyState)&&(g=1,s(),h.onload=h.onreadystatechange=null)},R(function(){g||(g=1,s(1))},q),p?h.onload():Q.parentNode.insertBefore(h,Q)},ad.yepnope.injectCss=function(b,p,o,n,l,k){var n=ac.createElement("link"),h,p=k?W:p||Y;n.href=b,n.rel="stylesheet",n.type="text/css";for(h in o){n.setAttribute(h,o[h])}l||(Q.parentNode.insertBefore(n,Q),R(p,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("ie8compat",function(){return !window.addEventListener&&document.documentMode&&document.documentMode===7});var jscolor={dir:"../wp-content/plugins/wp_weeverapps/static/js/jscolor/",bindClass:"color",binding:true,preloading:true,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=a!==false?a:"jscolor/"}return jscolor.dir},detectDir:function(){var c=location.href;var d=document.getElementsByTagName("base");for(var a=0;a<d.length;a+=1){if(d[a].href){c=d[a].href}}var d=document.getElementsByTagName("script");for(var a=0;a<d.length;a+=1){if(d[a].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(d[a].src)){var g=new jscolor.URI(d[a].src);var b=g.toAbsolute(c);b.path=b.path.replace(/[^\/]+$/,"");b.query=null;b.fragment=null;return b.toString()}}return false},bind:function(){var d=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i");var g=document.getElementsByTagName("input");for(var c=0;c<g.length;c+=1){var b;if(!g[c].color&&g[c].className&&(b=g[c].className.match(d))){var h={};if(b[3]){try{h=(new Function("return ("+b[3]+")"))()}catch(a){}}g[c].color=new jscolor.color(g[c],h)}}},preload:function(){for(var a in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(a)){jscolor.loadImage(a)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=true},loadImage:function(a){if(!jscolor.imgLoaded[a]){jscolor.imgLoaded[a]=new Image();console.log(jscolor.getDir());jscolor.imgLoaded[a].src=jscolor.getDir()+a}},fetchElement:function(a){return typeof a==="string"?document.getElementById(a):a},addEvent:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}},fireEvent:function(a,c){if(!a){return}if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent(c,true,true);a.dispatchEvent(b)}else{if(document.createEventObject){var b=document.createEventObject();a.fireEvent("on"+c,b)}else{if(a["on"+c]){a["on"+c]()}}}},getElementPos:function(c){var d=c,b=c;var a=0,g=0;if(d.offsetParent){do{a+=d.offsetLeft;g+=d.offsetTop}while(d=d.offsetParent)}while((b=b.parentNode)&&b.nodeName.toUpperCase()!=="BODY"){a-=b.scrollLeft;g-=b.scrollTop}return[a,g]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(b){var a=0,c=0;if(!b){b=window.event}if(typeof b.offsetX==="number"){a=b.offsetX;c=b.offsetY}else{if(typeof b.layerX==="number"){a=b.layerX;c=b.layerY}}return{x:a,y:c}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}}}},URI:function(a){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(d){var c=d.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=c[3]?c[2]:null;this.authority=c[5]?c[6]:null;this.path=c[7];this.query=c[9]?c[10]:null;this.fragment=c[12]?c[13]:null;return this};this.toString=function(){var c="";if(this.scheme!==null){c=c+this.scheme+":"}if(this.authority!==null){c=c+"//"+this.authority}if(this.path!==null){c=c+this.path}if(this.query!==null){c=c+"?"+this.query}if(this.fragment!==null){c=c+"#"+this.fragment}return c};this.toAbsolute=function(e){var e=new jscolor.URI(e);var d=this;var c=new jscolor.URI;if(e.scheme===null){return false}if(d.scheme!==null&&d.scheme.toLowerCase()===e.scheme.toLowerCase()){d.scheme=null}if(d.scheme!==null){c.scheme=d.scheme;c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.authority!==null){c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.path===""){c.path=e.path;if(d.query!==null){c.query=d.query}else{c.query=e.query}}else{if(d.path.substr(0,1)==="/"){c.path=b(d.path)}else{if(e.authority!==null&&e.path===""){c.path="/"+d.path}else{c.path=e.path.replace(/[^\/]+$/,"")+d.path}c.path=b(c.path)}c.query=d.query}c.authority=e.authority}c.scheme=e.scheme}c.fragment=d.fragment;return c};function b(e){var c="";while(e){if(e.substr(0,3)==="../"||e.substr(0,2)==="./"){e=e.replace(/^\.+/,"").substr(1)}else{if(e.substr(0,3)==="/./"||e==="/."){e="/"+e.substr(3)}else{if(e.substr(0,4)==="/../"||e==="/.."){e="/"+e.substr(4);c=c.replace(/\/?[^\/]*$/,"")}else{if(e==="."||e===".."){e=""}else{var d=e.match(/^\/?[^\/]*/)[0];e=e.substr(d.length);c=c+d}}}}}return c}if(a){this.parse(a)}},color:function(E,d){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=E;this.styleElement=E;this.onImmediateChange=null;this.onClose=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=10000;for(var u in d){if(d.hasOwnProperty(u)){this[u]=d[u]}}this.hidePicker=function(){if(w()){h()}};this.showPicker=function(){if(!w()){var N=jscolor.getElementPos(E);var K=jscolor.getElementSize(E);var H=jscolor.getViewPos();var P=jscolor.getViewSize();var p=v(this);var O,M,L;switch(this.pickerPosition.toLowerCase()){case"left":O=1;M=0;L=-1;break;case"right":O=1;M=0;L=1;break;case"top":O=0;M=1;L=-1;break;default:O=0;M=1;L=1;break}var J=(K[M]+p[M])/2;if(!this.pickerSmartPosition){var I=[N[O],N[M]+K[M]-J+J*L]}else{var I=[-H[O]+N[O]+p[O]>P[O]?(-H[O]+N[O]+K[O]/2>P[O]/2&&N[O]+K[O]-p[O]>=0?N[O]+K[O]-p[O]:N[O]):N[O],-H[M]+N[M]+K[M]+p[M]-J+J*L>P[M]?(-H[M]+N[M]+K[M]/2>P[M]/2&&N[M]+K[M]-J-J*L>=0?N[M]+K[M]-J-J*L:N[M]+K[M]-J+J*L):(N[M]+K[M]-J+J*L>=0?N[M]+K[M]-J+J*L:N[M]+K[M]-J-J*L)]}l(I[O],I[M])}};this.importColor=function(){if(!a){this.exportColor()}else{if(!this.adjust){if(!this.fromString(a.value,A)){G.style.backgroundImage=G.jscStyle.backgroundImage;G.style.backgroundColor=G.jscStyle.backgroundColor;G.style.color=G.jscStyle.color;this.exportColor(A|F)}}else{if(!this.required&&/^\s*$/.test(a.value)){a.value="";G.style.backgroundImage=G.jscStyle.backgroundImage;G.style.backgroundColor=G.jscStyle.backgroundColor;G.style.color=G.jscStyle.color;this.exportColor(A|F)}else{if(this.fromString(a.value)){}else{this.exportColor()}}}}};this.exportColor=function(p){if(!(p&A)&&a){var H=this.toString();if(this.caps){H=H.toUpperCase()}if(this.hash){H="#"+H}a.value=H}if(!(p&F)&&G){G.style.backgroundImage="none";G.style.backgroundColor="#"+this.toString();G.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000"}if(!(p&x)&&w()){t()}if(!(p&e)&&w()){D()}};this.fromHSV=function(J,I,H,p){if(J!==null){J=Math.max(0,this.minH,Math.min(6,this.maxH,J))}if(I!==null){I=Math.max(0,this.minS,Math.min(1,this.maxS,I))}if(H!==null){H=Math.max(0,this.minV,Math.min(1,this.maxV,H))}this.rgb=i(J===null?this.hsv[0]:(this.hsv[0]=J),I===null?this.hsv[1]:(this.hsv[1]=I),H===null?this.hsv[2]:(this.hsv[2]=H));this.exportColor(p)};this.fromRGB=function(L,K,p,H){if(L!==null){L=Math.max(0,Math.min(1,L))}if(K!==null){K=Math.max(0,Math.min(1,K))}if(p!==null){p=Math.max(0,Math.min(1,p))}var J=B(L===null?this.rgb[0]:L,K===null?this.rgb[1]:K,p===null?this.rgb[2]:p);if(J[0]!==null){this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,J[0]))}if(J[2]!==0){this.hsv[1]=J[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,J[1]))}this.hsv[2]=J[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,J[2]));var I=i(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=I[0];this.rgb[1]=I[1];this.rgb[2]=I[2];this.exportColor(H)};this.fromString=function(I,H){var p=I.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!p){return false}else{if(p[1].length===6){this.fromRGB(parseInt(p[1].substr(0,2),16)/255,parseInt(p[1].substr(2,2),16)/255,parseInt(p[1].substr(4,2),16)/255,H)}else{this.fromRGB(parseInt(p[1].charAt(0)+p[1].charAt(0),16)/255,parseInt(p[1].charAt(1)+p[1].charAt(1),16)/255,parseInt(p[1].charAt(2)+p[1].charAt(2),16)/255,H)}return true}};this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1))};function B(L,K,H){var M=Math.min(Math.min(L,K),H);var I=Math.max(Math.max(L,K),H);var p=I-M;if(p===0){return[null,0,I]}var J=L===M?3+(H-K)/p:(K===M?5+(L-H)/p:1+(K-L)/p);return[J===6?0:J,p/I,I]}function i(K,J,H){if(K===null){return[H,H,H]}var I=Math.floor(K);var L=I%2?K-I:1-(K-I);var p=H*(1-J);var M=H*(1-J*L);switch(I){case 6:case 0:return[H,M,p];case 1:return[M,H,p];case 2:return[p,H,M];case 3:return[p,M,H];case 4:return[M,p,H];case 5:return[H,p,M]}}function h(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB);y()}function l(O,N){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(n.pickerCloseText)};for(var L=0,M=4;L<jscolor.images.sld[1];L+=M){var K=document.createElement("div");K.style.height=M+"px";K.style.fontSize="1px";K.style.lineHeight="0";jscolor.picker.sld.appendChild(K)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var H=jscolor.picker;H.box.onmouseup=H.box.onmouseout=function(){E.focus()};H.box.onmousedown=function(){q=true};H.box.onmousemove=function(p){if(c||r){c&&z(p);r&&j(p);if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}g()}};if("ontouchstart" in window){H.box.addEventListener("touchmove",function(R){var p={offsetX:R.touches[0].pageX-k.X,offsetY:R.touches[0].pageY-k.Y};if(c||r){c&&z(p);r&&j(p);g()}R.stopPropagation();R.preventDefault()},false)}H.padM.onmouseup=H.padM.onmouseout=function(){if(c){c=false;jscolor.fireEvent(a,"change")}};H.padM.onmousedown=function(p){switch(b){case 0:if(n.hsv[2]===0){n.fromHSV(null,null,1)}break;case 1:if(n.hsv[1]===0){n.fromHSV(null,1,null)}break}r=false;c=true;z(p);g()};if("ontouchstart" in window){H.padM.addEventListener("touchstart",function(p){k={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-k.X,offsetY:p.touches[0].pageY-k.Y})})}H.sldM.onmouseup=H.sldM.onmouseout=function(){if(r){r=false;jscolor.fireEvent(a,"change")}};H.sldM.onmousedown=function(p){c=false;r=true;j(p);g()};if("ontouchstart" in window){H.sldM.addEventListener("touchstart",function(p){k={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-k.X,offsetY:p.touches[0].pageY-k.Y})})}var Q=v(n);H.box.style.width=Q[0]+"px";H.box.style.height=Q[1]+"px";H.boxB.style.position="absolute";H.boxB.style.clear="both";H.boxB.style.left=O+"px";H.boxB.style.top=N+"px";H.boxB.style.zIndex=n.pickerZIndex;H.boxB.style.border=n.pickerBorder+"px solid";H.boxB.style.borderColor=n.pickerBorderColor;H.boxB.style.background=n.pickerFaceColor;H.pad.style.width=jscolor.images.pad[0]+"px";H.pad.style.height=jscolor.images.pad[1]+"px";H.padB.style.position="absolute";H.padB.style.left=n.pickerFace+"px";H.padB.style.top=n.pickerFace+"px";H.padB.style.border=n.pickerInset+"px solid";H.padB.style.borderColor=n.pickerInsetColor;H.padM.style.position="absolute";H.padM.style.left="0";H.padM.style.top="0";H.padM.style.width=n.pickerFace+2*n.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";H.padM.style.height=H.box.style.height;H.padM.style.cursor="crosshair";H.sld.style.overflow="hidden";H.sld.style.width=jscolor.images.sld[0]+"px";H.sld.style.height=jscolor.images.sld[1]+"px";H.sldB.style.display=n.slider?"block":"none";H.sldB.style.position="absolute";H.sldB.style.right=n.pickerFace+"px";H.sldB.style.top=n.pickerFace+"px";H.sldB.style.border=n.pickerInset+"px solid";H.sldB.style.borderColor=n.pickerInsetColor;H.sldM.style.display=n.slider?"block":"none";H.sldM.style.position="absolute";H.sldM.style.right="0";H.sldM.style.top="0";H.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+n.pickerFace+2*n.pickerInset+"px";H.sldM.style.height=H.box.style.height;try{H.sldM.style.cursor="pointer"}catch(J){H.sldM.style.cursor="hand"}function P(){var p=n.pickerInsetColor.split(/\s+/);var R=p.length<2?p[0]:p[1]+" "+p[0]+" "+p[0]+" "+p[1];H.btn.style.borderColor=R}H.btn.style.display=n.pickerClosable?"block":"none";H.btn.style.position="absolute";H.btn.style.left=n.pickerFace+"px";H.btn.style.bottom=n.pickerFace+"px";H.btn.style.padding="0 15px";H.btn.style.height="18px";H.btn.style.border=n.pickerInset+"px solid";P();H.btn.style.color=n.pickerButtonColor;H.btn.style.font="12px sans-serif";H.btn.style.textAlign="center";try{H.btn.style.cursor="pointer"}catch(J){H.btn.style.cursor="hand"}H.btn.onmousedown=function(){n.hidePicker()};H.btnS.style.lineHeight=H.btn.style.height;switch(b){case 0:var I="hs.png";break;case 1:var I="hv.png";break}H.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";H.padM.style.backgroundRepeat="no-repeat";H.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";H.sldM.style.backgroundRepeat="no-repeat";H.pad.style.backgroundImage="url('"+jscolor.getDir()+I+"')";H.pad.style.backgroundRepeat="no-repeat";H.pad.style.backgroundPosition="0 0";t();D();jscolor.picker.owner=n;document.getElementsByTagName("body")[0].appendChild(H.boxB)}function v(H){var p=[2*H.pickerInset+2*H.pickerFace+jscolor.images.pad[0]+(H.slider?2*H.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),H.pickerClosable?4*H.pickerInset+3*H.pickerFace+jscolor.images.pad[1]+H.pickerButtonHeight:2*H.pickerInset+2*H.pickerFace+jscolor.images.pad[1]];return p}function t(){switch(b){case 0:var J=1;break;case 1:var J=2;break}var N=Math.round((n.hsv[0]/6)*(jscolor.images.pad[0]-1));var M=Math.round((1-n.hsv[J])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(n.pickerFace+n.pickerInset+N-Math.floor(jscolor.images.cross[0]/2))+"px "+(n.pickerFace+n.pickerInset+M-Math.floor(jscolor.images.cross[1]/2))+"px";var p=jscolor.picker.sld.childNodes;switch(b){case 0:var L=i(n.hsv[0],n.hsv[1],1);for(var H=0;H<p.length;H+=1){p[H].style.backgroundColor="rgb("+(L[0]*(1-H/p.length)*100)+"%,"+(L[1]*(1-H/p.length)*100)+"%,"+(L[2]*(1-H/p.length)*100)+"%)"}break;case 1:var L,O,K=[n.hsv[2],0,0];var H=Math.floor(n.hsv[0]);var I=H%2?n.hsv[0]-H:1-(n.hsv[0]-H);switch(H){case 6:case 0:L=[0,1,2];break;case 1:L=[1,0,2];break;case 2:L=[2,0,1];break;case 3:L=[2,1,0];break;case 4:L=[1,2,0];break;case 5:L=[0,2,1];break}for(var H=0;H<p.length;H+=1){O=1-1/(p.length-1)*H;K[1]=K[0]*(1-O*I);K[2]=K[0]*(1-O);p[H].style.backgroundColor="rgb("+(K[L[0]]*100)+"%,"+(K[L[1]]*100)+"%,"+(K[L[2]]*100)+"%)"}break}}function D(){switch(b){case 0:var p=2;break;case 1:var p=1;break}var H=Math.round((1-n.hsv[p])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(n.pickerFace+n.pickerInset+H-Math.floor(jscolor.images.arrow[1]/2))+"px"}function w(){return jscolor.picker&&jscolor.picker.owner===n}function s(){if(a===E){n.importColor()}if(n.pickerOnfocus){n.hidePicker()}}function o(){if(a!==E){n.importColor()}}function z(I){var H=jscolor.getRelMousePos(I);var p=H.x-n.pickerFace-n.pickerInset;var J=H.y-n.pickerFace-n.pickerInset;switch(b){case 0:n.fromHSV(p*(6/(jscolor.images.pad[0]-1)),1-J/(jscolor.images.pad[1]-1),null,e);break;case 1:n.fromHSV(p*(6/(jscolor.images.pad[0]-1)),null,1-J/(jscolor.images.pad[1]-1),e);break}}function j(H){var p=jscolor.getRelMousePos(H);var I=p.y-n.pickerFace-n.pickerInset;switch(b){case 0:n.fromHSV(null,null,1-I/(jscolor.images.sld[1]-1),x);break;case 1:n.fromHSV(null,1-I/(jscolor.images.sld[1]-1),null,x);break}}function g(){if(n.onImmediateChange){var p;if(typeof n.onImmediateChange==="string"){p=new Function(n.onImmediateChange)}else{p=n.onImmediateChange}p.call(n)}}function y(){if(n.onClose){var p;if(typeof n.onClose==="string"){p=new Function(n.onClose)}else{p=n.onClose}p.call(n)}}var n=this;var b=this.pickerMode.toLowerCase()==="hvs"?1:0;var q=false;var a=jscolor.fetchElement(this.valueElement),G=jscolor.fetchElement(this.styleElement);var c=false,r=false,k={};var A=1<<0,F=1<<1,x=1<<2,e=1<<3;jscolor.addEvent(E,"focus",function(){if(n.pickerOnfocus){n.showPicker()}});jscolor.addEvent(E,"blur",function(){if(!q){window.setTimeout(function(){q||s();q=false},0)}else{q=false}});if(a){var C=function(){n.fromString(a.value,A);g()};jscolor.addEvent(a,"keyup",C);jscolor.addEvent(a,"input",C);jscolor.addEvent(a,"blur",o);a.setAttribute("autocomplete","off")}if(G){G.jscStyle={backgroundImage:G.style.backgroundImage,backgroundColor:G.style.backgroundColor,color:G.style.color}}switch(b){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();(function(a){if(String.prototype.trim===a){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(Array.prototype.reduce===a){Array.prototype.reduce=function(c){if(this===void 0||this===null){throw new TypeError()}var g=Object(this),b=g.length>>>0,e=0,d;if(typeof c!="function"){throw new TypeError()}if(b==0&&arguments.length==1){throw new TypeError()}if(arguments.length>=2){d=arguments[1]}else{do{if(e in g){d=g[e++];break}if(++e>=b){throw new TypeError()}}while(true)}while(e<b){if(e in g){d=c.call(a,d,g[e],e,g)}e++}return d}}})();var Zepto=(function(){var o,v,H,a,Q=[],q=Q.slice,I=Q.filter,i=window.document,O={},R={},s=i.defaultView.getComputedStyle,Z={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},A=/^\s*<(\w+|!)[^>]*>/,l=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,L=/^(?:body|html)$/i,G=["val","css","html","text","data","width","height","offset"],B=["after","prepend","before","append"],w=i.createElement("table"),S=i.createElement("tr"),j={tr:i.createElement("tbody"),tbody:w,thead:w,tfoot:w,td:S,th:S,"*":i.createElement("div")},x=/complete|loaded|interactive/,K=/^\.([\w-]+)$/,z=/^#([\w-]*)$/,N=/^[\w-]+$/,e={},h=e.toString,d={},X,T,J=i.createElement("div");d.matches=function(ag,ac){if(!ag||ag.nodeType!==1){return false}var ae=ag.webkitMatchesSelector||ag.mozMatchesSelector||ag.oMatchesSelector||ag.matchesSelector;if(ae){return ae.call(ag,ac)}var af,ah=ag.parentNode,ad=!ah;if(ad){(ah=J).appendChild(ag)}af=~d.qsa(ah,ac).indexOf(ag);ad&&J.removeChild(ag);return af};function ab(ac){return ac==null?String(ac):e[h.call(ac)]||"object"}function r(ac){return ab(ac)=="function"}function P(ac){return ac!=null&&ac==ac.window}function y(ac){return ac!=null&&ac.nodeType==ac.DOCUMENT_NODE}function M(ac){return ab(ac)=="object"}function aa(ac){return M(ac)&&!P(ac)&&ac.__proto__==Object.prototype}function D(ac){return ac instanceof Array}function E(ac){return typeof ac.length=="number"}function Y(ac){return I.call(ac,function(ad){return ad!=null})}function F(ac){return ac.length>0?H.fn.concat.apply([],ac):ac}X=function(ac){return ac.replace(/-+(.)?/g,function(ad,ae){return ae?ae.toUpperCase():""})};function p(ac){return ac.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}T=function(ac){return I.call(ac,function(ae,ad){return ac.indexOf(ae)==ad})};function U(ac){return ac in R?R[ac]:(R[ac]=new RegExp("(^|\\s)"+ac+"(\\s|$)"))}function g(ac,ad){return(typeof ad=="number"&&!Z[p(ac)])?ad+"px":ad}function V(ae){var ac,ad;if(!O[ae]){ac=i.createElement(ae);i.body.appendChild(ac);ad=s(ac,"").getPropertyValue("display");ac.parentNode.removeChild(ac);ad=="none"&&(ad="block");O[ae]=ad}return O[ae]}function u(ac){return"children" in ac?q.call(ac.children):H.map(ac.childNodes,function(ad){if(ad.nodeType==1){return ad}})}d.fragment=function(ag,ae,af){if(ag.replace){ag=ag.replace(l,"<$1></$2>")}if(ae===o){ae=A.test(ag)&&RegExp.$1}if(!(ae in j)){ae="*"}var ad,ah,ac=j[ae];ac.innerHTML=""+ag;ah=H.each(q.call(ac.childNodes),function(){ac.removeChild(this)});if(aa(af)){ad=H(ah);H.each(af,function(ai,aj){if(G.indexOf(ai)>-1){ad[ai](aj)}else{ad.attr(ai,aj)}})}return ah};d.Z=function(ad,ac){ad=ad||[];ad.__proto__=H.fn;ad.selector=ac||"";return ad};d.isZ=function(ac){return ac instanceof d.Z};d.init=function(ac,ad){if(!ac){return d.Z()}else{if(r(ac)){return H(i).ready(ac)}else{if(d.isZ(ac)){return ac}else{var ae;if(D(ac)){ae=Y(ac)}else{if(M(ac)){ae=[aa(ac)?H.extend({},ac):ac],ac=null}else{if(A.test(ac)){ae=d.fragment(ac.trim(),RegExp.$1,ad),ac=null}else{if(ad!==o){return H(ad).find(ac)}else{ae=d.qsa(i,ac)}}}}return d.Z(ae,ac)}}}};H=function(ac,ad){return d.init(ac,ad)};function n(ae,ad,ac){for(v in ad){if(ac&&(aa(ad[v])||D(ad[v]))){if(aa(ad[v])&&!aa(ae[v])){ae[v]={}}if(D(ad[v])&&!D(ae[v])){ae[v]=[]}n(ae[v],ad[v],ac)}else{if(ad[v]!==o){ae[v]=ad[v]}}}}H.extend=function(ae){var ac,ad=q.call(arguments,1);if(typeof ae=="boolean"){ac=ae;ae=ad.shift()}ad.forEach(function(af){n(ae,af,ac)});return ae};d.qsa=function(ad,ac){var ae;return(y(ad)&&z.test(ac))?((ae=ad.getElementById(RegExp.$1))?[ae]:[]):(ad.nodeType!==1&&ad.nodeType!==9)?[]:q.call(K.test(ac)?ad.getElementsByClassName(RegExp.$1):N.test(ac)?ad.getElementsByTagName(ac):ad.querySelectorAll(ac))};function C(ad,ac){return ac===o?H(ad):H(ad).filter(ac)}H.contains=function(ac,ad){return ac!==ad&&ac.contains(ad)};function t(ae,ad,ac,af){return r(ad)?ad.call(ae,ac,af):ad}function b(ad,ac,ae){ae==null?ad.removeAttribute(ac):ad.setAttribute(ac,ae)}function W(ae,af){var ac=ae.className,ad=ac&&ac.baseVal!==o;if(af===o){return ad?ac.baseVal:ac}ad?(ac.baseVal=af):(ae.className=af)}function k(ad){var ac;try{return ad?ad=="true"||(ad=="false"?false:ad=="null"?null:!isNaN(ac=Number(ad))?ac:/^[\[\{]/.test(ad)?H.parseJSON(ad):ad):ad}catch(ae){return ad}}H.type=ab;H.isFunction=r;H.isWindow=P;H.isArray=D;H.isPlainObject=aa;H.isEmptyObject=function(ad){var ac;for(ac in ad){return false}return true};H.inArray=function(ad,ae,ac){return Q.indexOf.call(ae,ad,ac)};H.camelCase=X;H.trim=function(ac){return ac.trim()};H.uuid=0;H.support={};H.expr={};H.map=function(ag,ah){var af,ac=[],ae,ad;if(E(ag)){for(ae=0;ae<ag.length;ae++){af=ah(ag[ae],ae);if(af!=null){ac.push(af)}}}else{for(ad in ag){af=ah(ag[ad],ad);if(af!=null){ac.push(af)}}}return F(ac)};H.each=function(ae,af){var ad,ac;if(E(ae)){for(ad=0;ad<ae.length;ad++){if(af.call(ae[ad],ad,ae[ad])===false){return ae}}}else{for(ac in ae){if(af.call(ae[ac],ac,ae[ac])===false){return ae}}}return ae};H.grep=function(ac,ad){return I.call(ac,ad)};if(window.JSON){H.parseJSON=JSON.parse}H.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(ad,ac){e["[object "+ac+"]"]=ac.toLowerCase()});H.fn={forEach:Q.forEach,reduce:Q.reduce,push:Q.push,sort:Q.sort,indexOf:Q.indexOf,concat:Q.concat,map:function(ac){return H(H.map(this,function(ae,ad){return ac.call(ae,ad,ae)}))},slice:function(){return H(q.apply(this,arguments))},ready:function(ac){if(x.test(i.readyState)){ac(H)}else{i.addEventListener("DOMContentLoaded",function(){ac(H)},false)}return this},get:function(ac){return ac===o?q.call(this):this[ac>=0?ac:ac+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(this.parentNode!=null){this.parentNode.removeChild(this)}})},each:function(ac){Q.every.call(this,function(ae,ad){return ac.call(ae,ad,ae)!==false});return this},filter:function(ac){if(r(ac)){return this.not(this.not(ac))}return H(I.call(this,function(ad){return d.matches(ad,ac)}))},add:function(ac,ad){return H(T(this.concat(H(ac,ad))))},is:function(ac){return this.length>0&&d.matches(this[0],ac)},not:function(ac){var ad=[];if(r(ac)&&ac.call!==o){this.each(function(af){if(!ac.call(this,af)){ad.push(this)}})}else{var ae=typeof ac=="string"?this.filter(ac):(E(ac)&&r(ac.item))?q.call(ac):H(ac);this.forEach(function(af){if(ae.indexOf(af)<0){ad.push(af)}})}return H(ad)},has:function(ac){return this.filter(function(){return M(ac)?H.contains(this,ac):H(this).find(ac).size()})},eq:function(ac){return ac===-1?this.slice(ac):this.slice(ac,+ac+1)},first:function(){var ac=this[0];return ac&&!M(ac)?ac:H(ac)},last:function(){var ac=this[this.length-1];return ac&&!M(ac)?ac:H(ac)},find:function(ad){var ac,ae=this;if(typeof ad=="object"){ac=H(ad).filter(function(){var af=this;return Q.some.call(ae,function(ag){return H.contains(ag,af)})})}else{if(this.length==1){ac=H(d.qsa(this[0],ad))}else{ac=this.map(function(){return d.qsa(this,ad)})}}return ac},closest:function(ac,ad){var ae=this[0],af=false;if(typeof ac=="object"){af=H(ac)}while(ae&&!(af?af.indexOf(ae)>=0:d.matches(ae,ac))){ae=ae!==ad&&!y(ae)&&ae.parentNode}return H(ae)},parents:function(ac){var ae=[],ad=this;while(ad.length>0){ad=H.map(ad,function(af){if((af=af.parentNode)&&!y(af)&&ae.indexOf(af)<0){ae.push(af);return af}})}return C(ae,ac)},parent:function(ac){return C(T(this.pluck("parentNode")),ac)},children:function(ac){return C(this.map(function(){return u(this)}),ac)},contents:function(){return this.map(function(){return q.call(this.childNodes)})},siblings:function(ac){return C(this.map(function(ad,ae){return I.call(u(ae.parentNode),function(af){return af!==ae})}),ac)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(ac){return H.map(this,function(ad){return ad[ac]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null);if(s(this,"").getPropertyValue("display")=="none"){this.style.display=V(this.nodeName)}})},replaceWith:function(ac){return this.before(ac).remove()},wrap:function(ac){var ad=r(ac);if(this[0]&&!ad){var ae=H(ac).get(0),af=ae.parentNode||this.length>1}return this.each(function(ag){H(this).wrapAll(ad?ac.call(this,ag):af?ae.cloneNode(true):ae)})},wrapAll:function(ac){if(this[0]){H(this[0]).before(ac=H(ac));var ad;while((ad=ac.children()).length){ac=ad.first()}H(ac).append(this)}return this},wrapInner:function(ac){var ad=r(ac);return this.each(function(af){var ae=H(this),ag=ae.contents(),ah=ad?ac.call(this,af):ac;ag.length?ag.wrapAll(ah):ae.append(ah)})},unwrap:function(){this.parent().each(function(){H(this).replaceWith(H(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(true)})},hide:function(){return this.css("display","none")},toggle:function(ac){return this.each(function(){var ad=H(this);(ac===o?ad.css("display")=="none":ac)?ad.show():ad.hide()})},prev:function(ac){return H(this.pluck("previousElementSibling")).filter(ac||"*")},next:function(ac){return H(this.pluck("nextElementSibling")).filter(ac||"*")},html:function(ac){return ac===o?(this.length>0?this[0].innerHTML:null):this.each(function(ad){var ae=this.innerHTML;H(this).empty().append(t(this,ac,ad,ae))})},text:function(ac){return ac===o?(this.length>0?this[0].textContent:null):this.each(function(){this.textContent=ac})},attr:function(ad,ae){var ac;return(typeof ad=="string"&&ae===o)?(this.length==0||this[0].nodeType!==1?o:(ad=="value"&&this[0].nodeName=="INPUT")?this.val():(!(ac=this[0].getAttribute(ad))&&ad in this[0])?this[0][ad]:ac):this.each(function(af){if(this.nodeType!==1){return}if(M(ad)){for(v in ad){b(this,v,ad[v])}}else{b(this,ad,t(this,ae,af,this.getAttribute(ad)))}})},removeAttr:function(ac){return this.each(function(){this.nodeType===1&&b(this,ac)})},prop:function(ac,ad){return(ad===o)?(this[0]&&this[0][ac]):this.each(function(ae){this[ac]=t(this,ad,ae,this[ac])})},data:function(ac,ae){var ad=this.attr("data-"+p(ac),ae);return ad!==null?k(ad):o},val:function(ac){return(ac===o)?(this[0]&&(this[0].multiple?H(this[0]).find("option").filter(function(ad){return this.selected}).pluck("value"):this[0].value)):this.each(function(ad){this.value=t(this,ac,ad,this.value)})},offset:function(ad){if(ad){return this.each(function(af){var ai=H(this),ah=t(this,ad,af,ai.offset()),ae=ai.offsetParent().offset(),ag={top:ah.top-ae.top,left:ah.left-ae.left};if(ai.css("position")=="static"){ag.position="relative"}ai.css(ag)})}if(this.length==0){return null}var ac=this[0].getBoundingClientRect();return{left:ac.left+window.pageXOffset,top:ac.top+window.pageYOffset,width:Math.round(ac.width),height:Math.round(ac.height)}},css:function(ae,ad){if(arguments.length<2&&typeof ae=="string"){return this[0]&&(this[0].style[X(ae)]||s(this[0],"").getPropertyValue(ae))}var ac="";if(ab(ae)=="string"){if(!ad&&ad!==0){this.each(function(){this.style.removeProperty(p(ae))})}else{ac=p(ae)+":"+g(ae,ad)}}else{for(v in ae){if(!ae[v]&&ae[v]!==0){this.each(function(){this.style.removeProperty(p(v))})}else{ac+=p(v)+":"+g(v,ae[v])+";"}}}return this.each(function(){this.style.cssText+=";"+ac})},index:function(ac){return ac?this.indexOf(H(ac)[0]):this.parent().children().indexOf(this[0])},hasClass:function(ac){return Q.some.call(this,function(ad){return this.test(W(ad))},U(ac))},addClass:function(ac){return this.each(function(ad){a=[];var af=W(this),ae=t(this,ac,ad,af);ae.split(/\s+/g).forEach(function(ag){if(!H(this).hasClass(ag)){a.push(ag)}},this);a.length&&W(this,af+(af?" ":"")+a.join(" "))})},removeClass:function(ac){return this.each(function(ad){if(ac===o){return W(this,"")}a=W(this);t(this,ac,ad,a).split(/\s+/g).forEach(function(ae){a=a.replace(U(ae)," ")});W(this,a.trim())})},toggleClass:function(ad,ac){return this.each(function(ae){var ag=H(this),af=t(this,ad,ae,W(this));af.split(/\s+/g).forEach(function(ah){(ac===o?!ag.hasClass(ah):ac)?ag.addClass(ah):ag.removeClass(ah)})})},scrollTop:function(){if(!this.length){return}return("scrollTop" in this[0])?this[0].scrollTop:this[0].scrollY},position:function(){if(!this.length){return}var ae=this[0],ad=this.offsetParent(),af=this.offset(),ac=L.test(ad[0].nodeName)?{top:0,left:0}:ad.offset();af.top-=parseFloat(H(ae).css("margin-top"))||0;af.left-=parseFloat(H(ae).css("margin-left"))||0;ac.top+=parseFloat(H(ad[0]).css("border-top-width"))||0;ac.left+=parseFloat(H(ad[0]).css("border-left-width"))||0;return{top:af.top-ac.top,left:af.left-ac.left}},offsetParent:function(){return this.map(function(){var ac=this.offsetParent||i.body;while(ac&&!L.test(ac.nodeName)&&H(ac).css("position")=="static"){ac=ac.offsetParent}return ac})}};H.fn.detach=H.fn.remove;["width","height"].forEach(function(ac){H.fn[ac]=function(ae){var ag,ad=this[0],af=ac.replace(/./,function(ah){return ah[0].toUpperCase()});if(ae===o){return P(ad)?ad["inner"+af]:y(ad)?ad.documentElement["offset"+af]:(ag=this.offset())&&ag[ac]}else{return this.each(function(ah){ad=H(this);ad.css(ac,t(this,ae,ah,ad[ac]()))})}}});function c(ae,ac){ac(ae);for(var ad in ae.childNodes){c(ae.childNodes[ad],ac)}}B.forEach(function(ae,ad){var ac=ad%2;H.fn[ae]=function(){var af,ag=H.map(arguments,function(aj){af=ab(aj);return af=="object"||af=="array"||aj==null?aj:d.fragment(aj)}),ah,ai=this.length>1;if(ag.length<1){return this}return this.each(function(aj,ak){ah=ac?ak:ak.parentNode;ak=ad==0?ak.nextSibling:ad==1?ak.firstChild:ad==2?ak:null;ag.forEach(function(al){if(ai){al=al.cloneNode(true)}else{if(!ah){return H(al).remove()}}c(ah.insertBefore(al,ak),function(am){if(am.nodeName!=null&&am.nodeName.toUpperCase()==="SCRIPT"&&(!am.type||am.type==="text/javascript")&&!am.src){window["eval"].call(window,am.innerHTML)}})})})};H.fn[ac?ae+"To":"insert"+(ad?"Before":"After")]=function(af){H(af)[ae](this);return this}});d.Z.prototype=H.fn;d.uniq=T;d.deserializeValue=k;H.zepto=d;return H})();window.Zepto=Zepto;"$" in window||(window.$=Zepto);(function(b){function a(d){var h=this.os={},j=this.browser={},r=d.match(/WebKit\/([\d.]+)/),g=d.match(/(Android)\s+([\d.]+)/),s=d.match(/(iPad).*OS\s([\d_]+)/),q=!s&&d.match(/(iPhone\sOS)\s([\d_]+)/),u=d.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),p=u&&d.match(/TouchPad/),o=d.match(/Kindle\/([\d.]+)/),n=d.match(/Silk\/([\d._]+)/),e=d.match(/(BlackBerry).*Version\/([\d.]+)/),l=d.match(/(BB10).*Version\/([\d.]+)/),c=d.match(/(RIM\sTablet\sOS)\s([\d.]+)/),t=d.match(/PlayBook/),i=d.match(/Chrome\/([\d.]+)/)||d.match(/CriOS\/([\d.]+)/),k=d.match(/Firefox\/([\d.]+)/);if(j.webkit=!!r){j.version=r[1]}if(g){h.android=true,h.version=g[2]}if(q){h.ios=h.iphone=true,h.version=q[2].replace(/_/g,".")}if(s){h.ios=h.ipad=true,h.version=s[2].replace(/_/g,".")}if(u){h.webos=true,h.version=u[2]}if(p){h.touchpad=true}if(e){h.blackberry=true,h.version=e[2]}if(l){h.bb10=true,h.version=l[2]}if(c){h.rimtabletos=true,h.version=c[2]}if(t){j.playbook=true}if(o){h.kindle=true,h.version=o[1]}if(n){j.silk=true,j.version=n[1]}if(!n&&h.android&&d.match(/Kindle Fire/)){j.silk=true}if(i){j.chrome=true,j.version=i[1]}if(k){j.firefox=true,j.version=k[1]}h.tablet=!!(s||t||(g&&!d.match(/Mobile/))||(k&&d.match(/Tablet/)));h.phone=!!(!h.tablet&&(g||q||u||e||l||(i&&d.match(/Android/))||(i&&d.match(/CriOS\/([\d.]+)/))||(k&&d.match(/Mobile/))))}a.call(b,navigator.userAgent);b.__detect=a})(Zepto);(function(c){var i=c.zepto.qsa,q={},e=1,l={},v={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function a(x){return x._zid||(x._zid=e++)}function j(y,A,z,x){A=p(A);if(A.ns){var B=u(A.ns)}return(q[a(y)]||[]).filter(function(C){return C&&(!A.e||C.e==A.e)&&(!A.ns||B.test(C.ns))&&(!z||a(C.fn)===a(z))&&(!x||C.sel==x)})}function p(x){var y=(""+x).split(".");return{e:y[0],ns:y.slice(1).sort().join(" ")}}function u(x){return new RegExp("(?:^| )"+x.replace(" "," .* ?")+"(?: |$)")}function t(x,z,y){if(c.type(x)!="string"){c.each(x,y)}else{x.split(/\s/).forEach(function(A){y(A,z)})}}function g(x,y){return x.del&&(x.e=="focus"||x.e=="blur")||!!y}function s(x){return v[x]||x}function n(B,A,C,y,x,z){var E=a(B),D=(q[E]||(q[E]=[]));t(A,C,function(H,G){var F=p(H);F.fn=G;F.sel=y;if(F.e in v){G=function(K){var J=K.relatedTarget;if(!J||(J!==this&&!c.contains(this,J))){return F.fn.apply(this,arguments)}}}F.del=x&&x(G,H);var I=F.del||G;F.proxy=function(K){var J=I.apply(B,[K].concat(K.data));if(J===false){K.preventDefault(),K.stopPropagation()}return J};F.i=D.length;D.push(F);B.addEventListener(s(F.e),F.proxy,g(F,z))})}function w(A,z,B,x,y){var C=a(A);t(z||"",B,function(E,D){j(A,E,D,x).forEach(function(F){delete q[C][F.i];A.removeEventListener(s(F.e),F.proxy,g(F,y))})})}c.event={add:n,remove:w};c.proxy=function(z,y){if(c.isFunction(z)){var x=function(){return z.apply(y,arguments)};x._zid=a(z);return x}else{if(typeof y=="string"){return c.proxy(z[y],z)}else{throw new TypeError("expected function")}}};c.fn.bind=function(x,y){return this.each(function(){n(this,x,y)})};c.fn.unbind=function(x,y){return this.each(function(){w(this,x,y)})};c.fn.one=function(x,y){return this.each(function(A,z){n(this,x,y,null,function(C,B){return function(){var D=C.apply(z,arguments);w(z,B,C);return D}})})};var r=function(){return true},h=function(){return false},d=/^([A-Z]|layer[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function b(z){var y,x={originalEvent:z};for(y in z){if(!d.test(y)&&z[y]!==undefined){x[y]=z[y]}}c.each(k,function(B,A){x[B]=function(){this[A]=r;return z[B].apply(z,arguments)};x[A]=h});return x}function o(y){if(!("defaultPrevented" in y)){y.defaultPrevented=false;var x=y.preventDefault;y.preventDefault=function(){this.defaultPrevented=true;x.call(this)}}}c.fn.delegate=function(x,y,z){return this.each(function(B,A){n(A,y,z,x,function(C){return function(F){var D,E=c(F.target).closest(x,A).get(0);if(E){D=c.extend(b(F),{currentTarget:E,liveFired:A});return C.apply(E,[D].concat([].slice.call(arguments,1)))}}})})};c.fn.undelegate=function(x,y,z){return this.each(function(){w(this,y,z,x)})};c.fn.live=function(x,y){c(document.body).delegate(this.selector,x,y);return this};c.fn.die=function(x,y){c(document.body).undelegate(this.selector,x,y);return this};c.fn.on=function(y,x,z){return !x||c.isFunction(x)?this.bind(y,x||z):this.delegate(x,y,z)};c.fn.off=function(y,x,z){return !x||c.isFunction(x)?this.unbind(y,x||z):this.undelegate(x,y,z)};c.fn.trigger=function(x,y){if(typeof x=="string"||c.isPlainObject(x)){x=c.Event(x)}o(x);x.data=y;return this.each(function(){if("dispatchEvent" in this){this.dispatchEvent(x)}})};c.fn.triggerHandler=function(y,z){var A,x;this.each(function(C,B){A=b(typeof y=="string"?c.Event(y):y);A.data=z;A.target=B;c.each(j(B,y.type||y),function(D,E){x=E.proxy(A);if(A.isImmediatePropagationStopped()){return false}})});return x};("focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error").split(" ").forEach(function(x){c.fn[x]=function(y){return y?this.bind(x,y):this.trigger(x)}});["focus","blur"].forEach(function(x){c.fn[x]=function(y){if(y){this.bind(x,y)}else{this.each(function(){try{this[x]()}catch(z){}})}return this}});c.Event=function(A,z){if(typeof A!="string"){z=A,A=z.type}var B=document.createEvent(l[A]||"Events"),x=true;if(z){for(var y in z){(y=="bubbles")?(x=!!z[y]):(B[y]=z[y])}}B.initEvent(A,x,true,null,null,null,null,null,null,null,null,null,null,null,null);B.isDefaultPrevented=function(){return this.defaultPrevented};return B}})(Zepto);(function($){var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;function triggerAndReturn(context,eventName,data){var event=$.Event(eventName);$(context).trigger(event,data);return !event.defaultPrevented}function triggerGlobal(settings,context,eventName,data){if(settings.global){return triggerAndReturn(context||document,eventName,data)}}$.active=0;function ajaxStart(settings){if(settings.global&&$.active++===0){triggerGlobal(settings,null,"ajaxStart")}}function ajaxStop(settings){if(settings.global&&!(--$.active)){triggerGlobal(settings,null,"ajaxStop")}}function ajaxBeforeSend(xhr,settings){var context=settings.context;if(settings.beforeSend.call(context,xhr,settings)===false||triggerGlobal(settings,context,"ajaxBeforeSend",[xhr,settings])===false){return false}triggerGlobal(settings,context,"ajaxSend",[xhr,settings])}function ajaxSuccess(data,xhr,settings){var context=settings.context,status="success";settings.success.call(context,data,status,xhr);triggerGlobal(settings,context,"ajaxSuccess",[xhr,settings,data]);ajaxComplete(status,xhr,settings)}function ajaxError(error,type,xhr,settings){var context=settings.context;settings.error.call(context,xhr,type,error);triggerGlobal(settings,context,"ajaxError",[xhr,settings,error]);ajaxComplete(type,xhr,settings)}function ajaxComplete(status,xhr,settings){var context=settings.context;settings.complete.call(context,xhr,status);triggerGlobal(settings,context,"ajaxComplete",[xhr,settings]);ajaxStop(settings)}function empty(){}$.ajaxJSONP=function(options){if(!("type" in options)){return $.ajax(options)}var callbackName="jsonp"+(++jsonpID),script=document.createElement("script"),cleanup=function(){clearTimeout(abortTimeout);$(script).remove();delete window[callbackName]},abort=function(type){cleanup();if(!type||type=="timeout"){window[callbackName]=empty}ajaxError(null,type||"abort",xhr,options)},xhr={abort:abort},abortTimeout;if(ajaxBeforeSend(xhr,options)===false){abort("abort");return false}window[callbackName]=function(data){cleanup();ajaxSuccess(data,xhr,options)};script.onerror=function(){abort("error")};script.src=options.url.replace(/=\?/,"="+callbackName);$("head").append(script);if(options.timeout>0){abortTimeout=setTimeout(function(){abort("timeout")},options.timeout)}return xhr};$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:true,xhr:function(){return new window.XMLHttpRequest()},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:false,timeout:0,processData:true,cache:true};function mimeToDataType(mime){if(mime){mime=mime.split(";",2)[0]}return mime&&(mime==htmlType?"html":mime==jsonType?"json":scriptTypeRE.test(mime)?"script":xmlTypeRE.test(mime)&&"xml")||"text"}function appendQuery(url,query){return(url+"&"+query).replace(/[&?]{1,2}/,"?")}function serializeData(options){if(options.processData&&options.data&&$.type(options.data)!="string"){options.data=$.param(options.data,options.traditional)}if(options.data&&(!options.type||options.type.toUpperCase()=="GET")){options.url=appendQuery(options.url,options.data)}}$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings){if(settings[key]===undefined){settings[key]=$.ajaxSettings[key]}}ajaxStart(settings);if(!settings.crossDomain){settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host}if(!settings.url){settings.url=window.location.toString()}serializeData(settings);if(settings.cache===false){settings.url=appendQuery(settings.url,"_="+Date.now())}var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder){if(!hasPlaceholder){settings.url=appendQuery(settings.url,"callback=?")}return $.ajaxJSONP(settings)}var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),abortTimeout;if(!settings.crossDomain){baseHeaders["X-Requested-With"]="XMLHttpRequest"}if(mime){baseHeaders.Accept=mime;if(mime.indexOf(",")>-1){mime=mime.split(",",2)[0]}xhr.overrideMimeType&&xhr.overrideMimeType(mime)}if(settings.contentType||(settings.contentType!==false&&settings.data&&settings.type.toUpperCase()!="GET")){baseHeaders["Content-Type"]=(settings.contentType||"application/x-www-form-urlencoded")}settings.headers=$.extend(baseHeaders,settings.headers||{});xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;clearTimeout(abortTimeout);var result,error=false;if((xhr.status>=200&&xhr.status<300)||xhr.status==304||(xhr.status==0&&protocol=="file:")){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type"));result=xhr.responseText;try{if(dataType=="script"){(1,eval)(result)}else{if(dataType=="xml"){result=xhr.responseXML}else{if(dataType=="json"){result=blankRE.test(result)?null:$.parseJSON(result)}}}}catch(e){error=e}if(error){ajaxError(error,"parsererror",xhr,settings)}else{ajaxSuccess(result,xhr,settings)}}else{ajaxError(null,xhr.status?"error":"abort",xhr,settings)}}};var async="async" in settings?settings.async:true;xhr.open(settings.type,settings.url,async);for(name in settings.headers){xhr.setRequestHeader(name,settings.headers[name])}if(ajaxBeforeSend(xhr,settings)===false){xhr.abort();return false}if(settings.timeout>0){abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty;xhr.abort();ajaxError(null,"timeout",xhr,settings)},settings.timeout)}xhr.send(settings.data?settings.data:null);return xhr};function parseArguments(url,data,success,dataType){var hasData=!$.isFunction(data);return{url:url,data:hasData?data:undefined,success:!hasData?data:$.isFunction(success)?success:undefined,dataType:hasData?dataType||success:success}}$.get=function(url,data,success,dataType){return $.ajax(parseArguments.apply(null,arguments))};$.post=function(url,data,success,dataType){var options=parseArguments.apply(null,arguments);options.type="POST";return $.ajax(options)};$.getJSON=function(url,data,success){var options=parseArguments.apply(null,arguments);options.dataType="json";return $.ajax(options)};$.fn.load=function(url,data,success){if(!this.length){return this}var self=this,parts=url.split(/\s/),selector,options=parseArguments(url,data,success),callback=options.success;if(parts.length>1){options.url=parts[0],selector=parts[1]}options.success=function(response){self.html(selector?$("<div>").html(response.replace(rscript,"")).find(selector):response);callback&&callback.apply(self,arguments)};$.ajax(options);return this};var escape=encodeURIComponent;function serialize(params,obj,traditional,scope){var type,array=$.isArray(obj);$.each(obj,function(key,value){type=$.type(value);if(scope){key=traditional?scope:scope+"["+(array?"":key)+"]"}if(!scope&&array){params.add(value.name,value.value)}else{if(type=="array"||(!traditional&&type=="object")){serialize(params,value,traditional,key)}else{params.add(key,value)}}})}$.param=function(obj,traditional){var params=[];params.add=function(k,v){this.push(escape(k)+"="+escape(v))};serialize(params,obj,traditional);return params.join("&").replace(/%20/g,"+")}})(Zepto);(function(a){a.fn.serializeArray=function(){var b=[],c;a(Array.prototype.slice.call(this.get(0).elements)).each(function(){c=a(this);var d=c.attr("type");if(this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&d!="submit"&&d!="reset"&&d!="button"&&((d!="radio"&&d!="checkbox")||this.checked)){b.push({name:c.attr("name"),value:c.val()})}});return b};a.fn.serialize=function(){var b=[];this.serializeArray().forEach(function(c){b.push(encodeURIComponent(c.name)+"="+encodeURIComponent(c.value))});return b.join("&")};a.fn.submit=function(c){if(c){this.bind("submit",c)}else{if(this.length){var b=a.Event("submit");this.eq(0).trigger(b);if(!b.defaultPrevented){this.get(0).submit()}}}return this}})(Zepto);(function(d,e){var r="",w,g,p,q={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},n=window.document,a=n.createElement("div"),o=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,k,s,j,l,i,v,u,t={};function b(x){return c(x.replace(/([a-z])([A-Z])/,"$1-$2"))}function c(x){return x.toLowerCase()}function h(x){return w?w+x:c(x)}d.each(q,function(y,x){if(a.style[y+"TransitionProperty"]!==e){r="-"+c(y)+"-";w=x;return false}});k=r+"transform";t[s=r+"transition-property"]=t[j=r+"transition-duration"]=t[l=r+"transition-timing-function"]=t[i=r+"animation-name"]=t[v=r+"animation-duration"]=t[u=r+"animation-timing-function"]="";d.fx={off:(w===e&&a.style.transitionProperty===e),speeds:{_default:400,fast:200,slow:600},cssPrefix:r,transitionEnd:h("TransitionEnd"),animationEnd:h("AnimationEnd")};d.fn.animate=function(x,y,z,A){if(d.isPlainObject(y)){z=y.easing,A=y.complete,y=y.duration}if(y){y=(typeof y=="number"?y:(d.fx.speeds[y]||d.fx.speeds._default))/1000}return this.anim(x,y,z,A)};d.fn.anim=function(D,z,y,F){var E,B={},H,C="",A=this,x,G=d.fx.transitionEnd;if(z===e){z=0.4}if(d.fx.off){z=0}if(typeof D=="string"){B[i]=D;B[v]=z+"s";B[u]=(y||"linear");G=d.fx.animationEnd}else{H=[];for(E in D){if(o.test(E)){C+=E+"("+D[E]+") "}else{B[E]=D[E],H.push(b(E))}}if(C){B[k]=C,H.push(k)}if(z>0&&typeof D==="object"){B[s]=H.join(", ");B[j]=z+"s";B[l]=(y||"linear")}}x=function(I){if(typeof I!=="undefined"){if(I.target!==I.currentTarget){return}d(I.target).unbind(G,x)}d(this).css(t);F&&F.call(this)};if(z>0){this.bind(G,x)}this.size()&&this.get(0).clientLeft;this.css(B);if(z<=0){setTimeout(function(){A.each(function(){x.call(this)})},0)}return this};a=null})(Zepto);(function(e,b){var i=window.document,a=i.documentElement,c=e.fn.show,j=e.fn.hide,h=e.fn.toggle;function d(n,o,k,p,q){if(typeof o=="function"&&!q){q=o,o=b}var l={opacity:k};if(p){l.scale=p;n.css(e.fx.cssPrefix+"transform-origin","0 0")}return n.animate(l,o,null,q)}function g(k,l,n,o){return d(k,l,0,n,function(){j.call(e(this));o&&o.call(this)})}e.fn.show=function(k,l){c.call(this);if(k===b){k=0}else{this.css("opacity",0)}return d(this,k,1,"1,1",l)};e.fn.hide=function(k,l){if(k===b){return j.call(this)}else{return g(this,k,"0,0",l)}};e.fn.toggle=function(k,l){if(k===b||typeof k=="boolean"){return h.call(this,k)}else{return this.each(function(){var n=e(this);n[n.css("display")=="none"?"show":"hide"](k,l)})}};e.fn.fadeTo=function(l,k,n){return d(this,l,k,null,n)};e.fn.fadeIn=function(k,n){var l=this.css("opacity");if(l>0){this.css("opacity",0)}else{l=1}return c.call(this).fadeTo(k,l,n)};e.fn.fadeOut=function(k,l){return g(this,k,null,l)};e.fn.fadeToggle=function(k,l){return this.each(function(){var n=e(this);n[(n.css("opacity")==0||n.css("display")=="none")?"fadeIn":"fadeOut"](k,l)})}})(Zepto);(function(c){var a=[],b;c.fn.remove=function(){return this.each(function(){if(this.parentNode){if(this.tagName==="IMG"){a.push(this);this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";if(b){clearTimeout(b)}b=setTimeout(function(){a=[]},60000)}this.parentNode.removeChild(this)}})}})(Zepto);(function(g){var e={},h=g.fn.data,c=g.camelCase,i=g.expando="Zepto"+(+new Date());function a(n,k){var o=n[i],j=o&&e[o];if(k===undefined){return j||b(n)}else{if(j){if(k in j){return j[k]}var l=c(k);if(l in j){return j[l]}}return h.call(g(n),k)}}function b(l,k,n){var o=l[i]||(l[i]=++g.uuid),j=e[o]||(e[o]=d(l));if(k!==undefined){j[c(k)]=n}return j}function d(k){var j={};g.each(k.attributes,function(n,l){if(l.name.indexOf("data-")==0){j[c(l.name.replace("data-",""))]=g.zepto.deserializeValue(l.value)}});return j}g.fn.data=function(j,k){return k===undefined?g.isPlainObject(j)?this.each(function(l,n){g.each(j,function(o,p){b(n,o,p)})}):this.length==0?undefined:a(this[0],j):this.each(function(){b(this,j,k)})};g.fn.removeData=function(j){if(typeof j=="string"){j=j.split(/\s+/)}return this.each(function(){var l=this[i],k=l&&e[l];if(k){g.each(j,function(){delete k[c(this)]})}})}})(Zepto);(function(h){var e=h.zepto,k=e.qsa,i=e.matches;function g(l){l=h(l);return !!(l.width()||l.height())&&l.css("display")!=="none"}var c=h.expr[":"]={visible:function(){if(g(this)){return this}},hidden:function(){if(!g(this)){return this}},selected:function(){if(this.selected){return this}},checked:function(){if(this.checked){return this}},parent:function(){return this.parentNode},first:function(l){if(l===0){return this}},last:function(l,n){if(l===n.length-1){return this}},eq:function(l,n,o){if(l===o){return this}},contains:function(l,n,o){if(h(this).text().indexOf(o)>-1){return this}},has:function(l,n,o){if(e.qsa(this,o).length){return this}}};var b=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),d=/^\s*>/,j="Zepto"+(+new Date());function a(r,q){r=r.replace(/=#\]/g,'="#"]');var p,l,o=b.exec(r);if(o&&o[2] in c){p=c[o[2]],l=o[3];r=o[1];if(l){var n=Number(l);if(isNaN(n)){l=l.replace(/^["']|["']$/g,"")}else{l=n}}}return q(r,p,l)}e.qsa=function(n,l){return a(l,function(s,q,o){try{var r;if(!s&&q){s="*"}else{if(d.test(s)){r=h(n).addClass(j),s="."+j+" "+s}}var p=k(n,s)}catch(t){console.error("error performing selector: %o",l);throw t}finally{if(r){r.removeClass(j)}}return !q?p:e.uniq(h.map(p,function(v,u){return q.call(v,u,p,o)}))})};e.matches=function(n,l){return a(l,function(q,p,o){return(!q||i(n,q))&&(!p||p.call(n,null,o)===n)})}})(Zepto);(function(a){a.fn.end=function(){return this.prevObject||a()};a.fn.andSelf=function(){return this.add(this.prevObject||a())};"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(c){var b=a.fn[c];a.fn[c]=function(){var d=b.apply(this,arguments);d.prevObject=this;return d}})})(Zepto);(function(j){var h={},b,l,i,e=750,a;function c(o){return"tagName" in o?o:o.parentNode}function k(p,o,r,q){var t=Math.abs(p-o),s=Math.abs(r-q);return t>=s?(p-o>0?"Left":"Right"):(r-q>0?"Up":"Down")}function n(){a=null;if(h.last){h.el.trigger("longTap");h={}}}function d(){if(a){clearTimeout(a)}a=null}function g(){if(b){clearTimeout(b)}if(l){clearTimeout(l)}if(i){clearTimeout(i)}if(a){clearTimeout(a)}b=l=i=a=null;h={}}j(document).ready(function(){var o,p;j(document.body).bind("touchstart",function(q){o=Date.now();p=o-(h.last||o);h.el=j(c(q.touches[0].target));b&&clearTimeout(b);h.x1=q.touches[0].pageX;h.y1=q.touches[0].pageY;if(p>0&&p<=250){h.isDoubleTap=true}h.last=o;a=setTimeout(n,e)}).bind("touchmove",function(q){d();h.x2=q.touches[0].pageX;h.y2=q.touches[0].pageY;if(Math.abs(h.x1-h.x2)>10){q.preventDefault()}}).bind("touchend",function(q){d();if((h.x2&&Math.abs(h.x1-h.x2)>30)||(h.y2&&Math.abs(h.y1-h.y2)>30)){i=setTimeout(function(){h.el.trigger("swipe");h.el.trigger("swipe"+(k(h.x1,h.x2,h.y1,h.y2)));h={}},0)}else{if("last" in h){l=setTimeout(function(){var r=j.Event("tap");r.cancelTouch=g;h.el.trigger(r);if(h.isDoubleTap){h.el.trigger("doubleTap");h={}}else{b=setTimeout(function(){b=null;h.el.trigger("singleTap");h={}},250)}},0)}}}).bind("touchcancel",g);j(window).bind("scroll",g)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(o){j.fn[o]=function(p){return this.bind(o,p)}})})(Zepto);if(this.Zepto){(function(c){var a,b;a=function(h,k,j,i,d){var g,e;if(h){e=h[j]();g={width:["left","right"],height:["top","bottom"]};g[j].forEach(function(l){e+=parseInt(h.css("padding-"+l),10);if(i){e+=parseInt(h.css("border-"+l+"-width"),10)}if(d){return e+=parseInt(h.css("margin-"+l),10)}});return e}else{return null}};["width","height"].forEach(function(j){var i,g,h,d,e;i=j.replace(/./,function(k){return k[0].toUpperCase()});(g=c.fn)[d="inner"+i]||(g[d]=function(k){return a(this,i,j,false,k)});return(h=c.fn)[e="outer"+i]||(h[e]=function(k){return a(this,i,j,true,k)})});return(b=c.fn).detach||(b.detach=function(e){var d,g;g=this;if(e!=null){g=g.filter(e)}d=g.clone(true);g.remove();return d})})(Zepto)}var libFuncName=null;if(typeof jQuery==="undefined"&&typeof Zepto==="undefined"&&typeof $==="function"){libFuncName=$}else{if(typeof jQuery==="function"){libFuncName=jQuery}else{if(typeof Zepto==="function"){libFuncName=Zepto}else{throw new TypeError()}}}(function(d,c,a,e){d("head").append('<meta class="foundation-mq-small">');d("head").append('<meta class="foundation-mq-medium">');d("head").append('<meta class="foundation-mq-large">');c.matchMedia=c.matchMedia||(function(k,l){var i,g=k.documentElement,h=g.firstElementChild||g.firstChild,j=k.createElement("body"),n=k.createElement("div");n.id="mq-test-1";n.style.cssText="position:absolute;top:-100em";j.style.background="none";j.appendChild(n);return function(o){n.innerHTML='&shy;<style media="'+o+'"> #mq-test-1 { width: 42px; }</style>';g.insertBefore(j,h);i=n.offsetWidth===42;g.removeChild(j);return{matches:i,media:o}}}(a));if(!Array.prototype.filter){Array.prototype.filter=function(h){if(this==null){throw new TypeError()}var n=Object(this),g=n.length>>>0;if(typeof h!=="function"){return}var l=[],k=arguments[1];for(var j=0;j<g;j++){if(j in n){var o=n[j];if(h&&h.call(k,o,j,n)){l.push(o)}}}return l}}if(!Function.prototype.bind){Function.prototype.bind=function(g){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var k=Array.prototype.slice.call(arguments,1),j=this,h=function(){},i=function(){return j.apply(this instanceof h&&g?this:g,k.concat(Array.prototype.slice.call(arguments)))};h.prototype=this.prototype;i.prototype=new h();return i}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(i){if(this==null){throw new TypeError()}var j=Object(this);var g=j.length>>>0;if(g===0){return -1}var l=0;if(arguments.length>1){l=Number(arguments[1]);if(l!=l){l=0}else{if(l!=0&&l!=Infinity&&l!=-Infinity){l=(l>0||-1)*Math.floor(Math.abs(l))}}}if(l>=g){return -1}var h=l>=0?l:Math.max(g-Math.abs(l),0);for(;h<g;h++){if(h in j&&j[h]===i){return h}}return -1}}d.fn.stop=d.fn.stop||function(){return this};function b(g){if(typeof g==="string"||g instanceof String){g=g.replace(/^['"]+|(;\s?})+|['"]$/g,"")}return g}c.Foundation={name:"Foundation",version:"4.3.2",cache:{},media_queries:{small:b(d(".foundation-mq-small").css("font-family")),medium:b(d(".foundation-mq-medium").css("font-family")),large:b(d(".foundation-mq-large").css("font-family"))},stylesheet:d("<style></style>").appendTo("head")[0].sheet,init:function(r,o,g,s,h,k){var l,p=[r,g,s,h],n=[],k=k||false;if(k){this.nc=k}this.rtl=/rtl/i.test(d("html").attr("dir"));this.scope=r||this.scope;if(o&&typeof o==="string"&&!/reflow/i.test(o)){if(/off/i.test(o)){return this.off()}l=o.split(" ");if(l.length>0){for(var j=l.length-1;j>=0;j--){n.push(this.init_lib(l[j],p))}}}else{if(/reflow/i.test(o)){p[1]="reflow"}for(var q in this.libs){n.push(this.init_lib(q,p))}}if(typeof o==="function"){p.unshift(o)}return this.response_obj(n,p)},response_obj:function(h,j){for(var k=0,g=j.length;k<g;k++){if(typeof j[k]==="function"){return j[k]({errors:h.filter(function(i){if(typeof i==="string"){return i}})})}}return h},init_lib:function(h,g){return this.trap(function(){if(this.libs.hasOwnProperty(h)){this.patch(this.libs[h]);return this.libs[h].init.apply(this.libs[h],g)}else{return function(){}}}.bind(this),h)},trap:function(g,i){if(!this.nc){try{return g()}catch(h){return this.error({name:i,message:"could not be initialized",more:h.name+" "+h.message})}}return g()},patch:function(g){this.fix_outer(g);g.scope=this.scope;g.rtl=this.rtl},inherit:function(k,h){var g=h.split(" ");for(var j=g.length-1;j>=0;j--){if(this.lib_methods.hasOwnProperty(g[j])){this.libs[k.name][g[j]]=this.lib_methods[g[j]]}}},random_str:function(j){var h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");if(!j){j=Math.floor(Math.random()*h.length)}var k="";for(var g=0;g<j;g++){k+=h[Math.floor(Math.random()*h.length)]}return k},libs:{},lib_methods:{set_data:function(g,h){var i=[this.name,+new Date(),Foundation.random_str(5)].join("-");Foundation.cache[i]=h;g.attr("data-"+this.name+"-id",i);return h},get_data:function(g){return Foundation.cache[g.attr("data-"+this.name+"-id")]},remove_data:function(g){if(g){delete Foundation.cache[g.attr("data-"+this.name+"-id")];g.attr("data-"+this.name+"-id","")}else{d("[data-"+this.name+"-id]").each(function(){delete Foundation.cache[d(this).attr("data-"+this.name+"-id")];d(this).attr("data-"+this.name+"-id","")})}},throttle:function(g,h){var i=null;return function(){var k=this,j=arguments;clearTimeout(i);i=setTimeout(function(){g.apply(k,j)},h)}},data_options:function(l){var n={},k,o,j=(l.attr("data-options")||":").split(";"),i=j.length;function h(p){return !isNaN(p-0)&&p!==null&&p!==""&&p!==false&&p!==true}function g(p){if(typeof p==="string"){return d.trim(p)}return p}for(k=i-1;k>=0;k--){o=j[k].split(":");if(/true/i.test(o[1])){o[1]=true}if(/false/i.test(o[1])){o[1]=false}if(h(o[1])){o[1]=parseInt(o[1],10)}if(o.length===2&&o[0].length>0){n[g(o[0])]=g(o[1])}}return n},delay:function(g,h){return setTimeout(g,h)},scrollTo:function(h,k,i){if(i<0){return}var j=k-d(c).scrollTop();var g=j/i*10;this.scrollToTimerCache=setTimeout(function(){if(!isNaN(parseInt(g,10))){c.scrollTo(0,d(c).scrollTop()+g);this.scrollTo(h,k,i-10)}}.bind(this),10)},scrollLeft:function(g){if(!g.length){return}return("scrollLeft" in g[0])?g[0].scrollLeft:g[0].pageXOffset},empty:function(h){if(h.length&&h.length>0){return false}if(h.length&&h.length===0){return true}for(var g in h){if(hasOwnProperty.call(h,g)){return false}}return true},addCustomRule:function(i,h){if(h===e){Foundation.stylesheet.insertRule(i,Foundation.stylesheet.cssRules.length)}else{var g=Foundation.media_queries[h];if(g!==e){Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[h]+"{ "+i+" }")}}}},fix_outer:function(g){g.outerHeight=function(i,h){if(typeof Zepto==="function"){return i.height()}if(typeof h!=="undefined"){return i.outerHeight(h)}return i.outerHeight()};g.outerWidth=function(i,h){if(typeof Zepto==="function"){return i.width()}if(typeof h!=="undefined"){return i.outerWidth(h)}return i.outerWidth()}},error:function(g){return g.name+" "+g.message+"; "+g.more},off:function(){d(this.scope).off(".fndtn");d(c).off(".fndtn");return true},zj:d};d.fn.foundation=function(){var g=Array.prototype.slice.call(arguments,0);return this.each(function(){Foundation.init.apply(Foundation,[this].concat(g));return this})}}(libFuncName,this,this.document));(function(c,b,a,d){Foundation.libs.abide={name:"abide",version:"4.3.3",settings:{live_validate:true,focus_on_invalid:true,timeout:1000,patterns:{alpha:/[a-zA-Z]+/,alpha_numeric:/[a-zA-Z0-9]+/,integer:/-?\d+/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,password:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/,time:/(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,month_day_year:/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/}},timer:null,init:function(g,h,e){if(typeof h==="object"){c.extend(true,this.settings,h)}if(typeof h!=="string"){if(!this.settings.init){this.events()}}else{return this[h].call(this,e)}},events:function(){var g=this,e=c("form[data-abide]",this.scope).attr("novalidate","novalidate");e.on("submit validate",function(i){var h=/ajax/i.test(c(this).attr("data-abide"));return g.validate(c(this).find("input, textarea, select").get(),i,h)});this.settings.init=true;if(!this.settings.live_validate){return}e.find("input, textarea, select").on("blur change",function(h){g.validate([this],h)}).on("keydown",function(h){clearTimeout(g.timer);g.timer=setTimeout(function(){g.validate([this],h)}.bind(this),g.settings.timeout)})},validate:function(n,p,g){var l=this.parse_patterns(n),k=l.length,o=c(n[0]).closest("form"),h=/submit/.test(p.type);for(var j=0;j<k;j++){if(!l[j]&&(h||g)){if(this.settings.focus_on_invalid){n[j].focus()}o.trigger("invalid");c(n[j]).closest("form").attr("data-invalid","");return false}}if(h||g){o.trigger("valid")}o.removeAttr("data-invalid");if(g){return false}return true},parse_patterns:function(h){var j=h.length,e=[];for(var g=j-1;g>=0;g--){e.push(this.pattern(h[g]))}return this.check_validation_and_apply_styles(e)},pattern:function(g){var e=g.getAttribute("type"),i=typeof g.getAttribute("required")==="string";if(this.settings.patterns.hasOwnProperty(e)){return[g,this.settings.patterns[e],i]}var h=g.getAttribute("pattern")||"";if(this.settings.patterns.hasOwnProperty(h)&&h.length>0){return[g,this.settings.patterns[h],i]}else{if(h.length>0){return[g,new RegExp(h),i]}}h=/.*/;return[g,h,i]},check_validation_and_apply_styles:function(h){var k=h.length,g=[];for(var j=k-1;j>=0;j--){var e=h[j][0],n=h[j][2],o=e.value,p=e.type==="radio",l=(n)?(e.value.length>0):true;if(p&&n){g.push(this.valid_radio(e,n))}else{if(h[j][1].test(o)&&l||!n&&e.value.length<1){c(e).removeAttr("data-invalid").parent().removeClass("error");g.push(true)}else{c(e).attr("data-invalid","").parent().addClass("error");g.push(false)}}}return g},valid_radio:function(h,n){var e=h.getAttribute("name"),l=a.getElementsByName(e),k=l.length,j=false;for(var g=0;g<k;g++){if(l[g].checked){j=true}}for(var g=0;g<k;g++){if(j){c(l[g]).removeAttr("data-invalid").parent().removeClass("error")}else{c(l[g]).attr("data-invalid","").parent().addClass("error")}}return j}}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.alerts={name:"alerts",version:"4.3.2",settings:{animation:"fadeOut",speed:300,callback:function(){}},init:function(g,h,e){this.scope=g||this.scope;Foundation.inherit(this,"data_options");if(typeof h==="object"){c.extend(true,this.settings,h)}if(typeof h!=="string"){if(!this.settings.init){this.events()}return this.settings.init}else{return this[h].call(this,e)}},events:function(){var e=this;c(this.scope).on("click.fndtn.alerts","[data-alert] a.close",function(i){var g=c(this).closest("[data-alert]"),h=c.extend({},e.settings,e.data_options(g));i.preventDefault();g[h.animation](h.speed,function(){c(this).remove();h.callback()})});this.settings.init=true},off:function(){c(this.scope).off(".fndtn.alerts")},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.clearing={name:"clearing",version:"4.3.3",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="//:0"><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",init:false,locked:false},init:function(h,i,g){var e=this;Foundation.inherit(this,"set_data get_data remove_data throttle data_options");if(typeof i==="object"){g=c.extend(true,this.settings,i)}if(typeof i!=="string"){c(this.scope).find("ul[data-clearing]").each(function(){var l=c(this),k=k||{},j=l.find("li"),n=e.get_data(l);if(!n&&j.length>0){k.$parent=l.parent();e.set_data(l,c.extend({},e.settings,k,e.data_options(l)));e.assemble(l.find("li"));if(!e.settings.init){e.events().swipe_events()}}});return this.settings.init}else{return this[i].call(this,g)}},events:function(){var e=this;c(this.scope).on("click.fndtn.clearing","ul[data-clearing] li",function(l,k,j){var k=k||c(this),j=j||k,h=k.next("li"),g=e.get_data(k.parent()),i=c(l.target);l.preventDefault();if(!g){e.init()}if(j.hasClass("visible")&&k[0]===j[0]&&h.length>0&&e.is_open(k)){j=h;i=j.find("img")}e.open(i,k,j);e.update_paddles(j)}).on("click.fndtn.clearing",".clearing-main-next",function(g){this.nav(g,"next")}.bind(this)).on("click.fndtn.clearing",".clearing-main-prev",function(g){this.nav(g,"prev")}.bind(this)).on("click.fndtn.clearing",this.settings.close_selectors,function(g){Foundation.libs.clearing.close(g,this)}).on("keydown.fndtn.clearing",function(g){this.keydown(g)}.bind(this));c(b).on("resize.fndtn.clearing",function(){this.resize()}.bind(this));this.settings.init=true;return this},swipe_events:function(){var e=this;c(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(h){if(!h.touches){h=h.originalEvent}var g={start_page_x:h.touches[0].pageX,start_page_y:h.touches[0].pageY,start_time:(new Date()).getTime(),delta_x:0,is_scrolling:d};c(this).data("swipe-transition",g);h.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(i){if(!i.touches){i=i.originalEvent}if(i.touches.length>1||i.scale&&i.scale!==1){return}var g=c(this).data("swipe-transition");if(typeof g==="undefined"){g={}}g.delta_x=i.touches[0].pageX-g.start_page_x;if(typeof g.is_scrolling==="undefined"){g.is_scrolling=!!(g.is_scrolling||Math.abs(g.delta_x)<Math.abs(i.touches[0].pageY-g.start_page_y))}if(!g.is_scrolling&&!g.active){i.preventDefault();var h=(g.delta_x<0)?"next":"prev";g.active=true;e.nav(i,h)}}).on("touchend.fndtn.clearing",".visible-img",function(g){c(this).data("swipe-transition",{});g.stopPropagation()})},assemble:function(l){var h=l.parent();h.after('<div id="foundationClearingHolder"></div>');var g=c("#foundationClearingHolder"),i=this.get_data(h),e=h.detach(),j={grid:'<div class="carousel">'+this.outerHTML(e[0])+"</div>",viewing:i.templates.viewing},k='<div class="clearing-assembled"><div>'+j.viewing+j.grid+"</div></div>";return g.after(k).remove()},open:function(i,l,k){var g=k.closest(".clearing-assembled"),e=g.find("div").first(),h=e.find(".visible-img"),j=h.find("img").not(i);if(!this.locked()){h.trigger("open.fndtn.clearing",i.attr("id"));j.attr("src",this.load(i)).css("visibility","hidden");this.loaded(j,function(){j.css("visibility","visible");g.addClass("clearing-blackout");e.addClass("clearing-container");h.show();this.fix_height(k).caption(h.find(".clearing-caption"),i).center(j).shift(l,k,function(){k.siblings().removeClass("visible");k.addClass("visible")});h.trigger("opened.fndtn.clearing")}.bind(this))}},close:function(k,j){k.preventDefault();var h=(function(e){if(/blackout/.test(e.selector)){return e}else{return e.closest(".clearing-blackout")}}(c(j))),g,i;if(j===k.target&&h){g=h.find("div").first();i=g.find(".visible-img");i.trigger("close.fndtn.clearing");this.settings.prev_index=0;h.find("ul[data-clearing]").attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout");g.removeClass("clearing-container");i.hide();i.trigger("closed.fndtn.clearing")}return false},is_open:function(e){return e.parent().prop("style").length>0},keydown:function(h){var g=c(".clearing-blackout").find("ul[data-clearing]");if(h.which===39){this.go(g,"next")}if(h.which===37){this.go(g,"prev")}if(h.which===27){c("a.clearing-close").trigger("click")}},nav:function(i,h){var g=c(".clearing-blackout").find("ul[data-clearing]");i.preventDefault();this.go(g,h)},resize:function(){var e=c(".clearing-blackout .visible-img").find("img");if(e.length){this.center(e);e.trigger("resized.fndtn.clearing")}},fix_height:function(h){var g=h.parent().children(),e=this;g.each(function(){var i=c(this),j=i.find("img");if(i.height()>e.outerHeight(j)){i.addClass("fix-height")}}).closest("ul").width(g.length*100+"%");return this},update_paddles:function(g){var e=g.closest(".carousel").siblings(".visible-img");if(g.next().length>0){e.find(".clearing-main-next").removeClass("disabled")}else{e.find(".clearing-main-next").addClass("disabled")}if(g.prev().length>0){e.find(".clearing-main-prev").removeClass("disabled")}else{e.find(".clearing-main-prev").addClass("disabled")}},center:function(e){if(!this.rtl){e.css({marginLeft:-(this.outerWidth(e)/2),marginTop:-(this.outerHeight(e)/2)})}else{e.css({marginRight:-(this.outerWidth(e)/2),marginTop:-(this.outerHeight(e)/2)})}return this},load:function(g){if(g[0].nodeName==="A"){var e=g.attr("href")}else{var e=g.parent().attr("href")}this.preload(g);if(e){return e}return g.attr("src")},preload:function(e){this.img(e.closest("li").next()).img(e.closest("li").prev())},loaded:function(h,i){function e(){i()}function g(){this.one("load",e);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var k=this.attr("src"),j=k.match(/\?/)?"&":"?";j+="random="+(new Date()).getTime();this.attr("src",k+j)}}if(!h.attr("src")){e();return}if(h[0].complete||h[0].readyState===4){e()}else{g.call(h)}},img:function(e){if(e.length){var g=new Image(),h=e.find("a");if(h.length){g.src=h.attr("href")}else{g.src=e.find("img").attr("src")}}return this},caption:function(e,h){var g=h.data("caption");if(g){e.html(g).show()}else{e.text("").hide()}return this},go:function(e,i){var h=e.find(".visible"),g=h[i]();if(g.length){g.find("img").trigger("click",[h,g]).trigger("change.fndtn.clearing")}},shift:function(i,j,o){var k=j.parent(),h=this.settings.prev_index||j.index(),l=this.direction(k,i,j),g=parseInt(k.css("left"),10),e=this.outerWidth(j),n;if(j.index()!==h&&!/skip/.test(l)){if(/left/.test(l)){this.lock();k.animate({left:g+e},300,this.unlock())}else{if(/right/.test(l)){this.lock();k.animate({left:g-e},300,this.unlock())}}}else{if(/skip/.test(l)){n=j.index()-this.settings.up_count;this.lock();if(n>0){k.animate({left:-(n*e)},300,this.unlock())}else{k.animate({left:0},300,this.unlock())}}}o()},direction:function(i,k,j){var h=i.find("li"),g=this.outerWidth(h)+(this.outerWidth(h)/4),l=Math.floor(this.outerWidth(c(".clearing-container"))/g)-1,n=h.index(j),e;this.settings.up_count=l;if(this.adjacent(this.settings.prev_index,n)){if((n>l)&&n>this.settings.prev_index){e="right"}else{if((n>l-1)&&n<=this.settings.prev_index){e="left"}else{e=false}}}else{e="skip"}this.settings.prev_index=n;return e},adjacent:function(h,g){for(var e=g+1;e>=g-1;e--){if(e===h){return true}}return false},lock:function(){this.settings.locked=true},unlock:function(){this.settings.locked=false},locked:function(){return this.settings.locked},outerHTML:function(e){return e.outerHTML||new XMLSerializer().serializeToString(e)},off:function(){c(this.scope).off(".fndtn.clearing");c(b).off(".fndtn.clearing");this.remove_data();this.settings.init=false},reflow:function(){this.init()}}}(Foundation.zj,this,this.document));
/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 *
 * Modified to work with Zepto.js by ZURB
 */
(function(g,b,h){var a=/\+/g;function e(i){return i}function c(i){return decodeURIComponent(i.replace(a," "))}var d=g.cookie=function(r,q,w){if(q!==h){w=g.extend({},d.defaults,w);if(q===null){w.expires=-1}if(typeof w.expires==="number"){var s=w.expires,v=w.expires=new Date();v.setDate(v.getDate()+s)}q=d.json?JSON.stringify(q):String(q);return(b.cookie=[encodeURIComponent(r),"=",d.raw?q:encodeURIComponent(q),w.expires?"; expires="+w.expires.toUTCString():"",w.path?"; path="+w.path:"",w.domain?"; domain="+w.domain:"",w.secure?"; secure":""].join(""))}var j=d.raw?e:c;var u=b.cookie.split("; ");for(var p=0,n=u.length;p<n;p++){var o=u[p].split("=");if(j(o.shift())===r){var k=j(o.join("="));return d.json?JSON.parse(k):k}}return null};d.defaults={};g.removeCookie=function(j,i){if(g.cookie(j)!==null){g.cookie(j,null,i);return true}return false}})(Foundation.zj,document);(function(c,b,a,d){Foundation.libs.dropdown={name:"dropdown",version:"4.3.2",settings:{activeClass:"open",is_hover:false,opened:function(){},closed:function(){}},init:function(g,h,e){this.scope=g||this.scope;Foundation.inherit(this,"throttle scrollLeft data_options");if(typeof h==="object"){c.extend(true,this.settings,h)}if(typeof h!=="string"){if(!this.settings.init){this.events()}return this.settings.init}else{return this[h].call(this,e)}},events:function(){var e=this;c(this.scope).on("click.fndtn.dropdown","[data-dropdown]",function(h){var g=c.extend({},e.settings,e.data_options(c(this)));h.preventDefault();if(!g.is_hover){e.toggle(c(this))}}).on("mouseenter","[data-dropdown]",function(h){var g=c.extend({},e.settings,e.data_options(c(this)));if(g.is_hover){e.toggle(c(this))}}).on("mouseleave","[data-dropdown-content]",function(i){var h=c('[data-dropdown="'+c(this).attr("id")+'"]'),g=c.extend({},e.settings,e.data_options(h));if(g.is_hover){e.close.call(e,c(this))}}).on("opened.fndtn.dropdown","[data-dropdown-content]",this.settings.opened).on("closed.fndtn.dropdown","[data-dropdown-content]",this.settings.closed);c(a).on("click.fndtn.dropdown",function(h){var g=c(h.target).closest("[data-dropdown-content]");if(c(h.target).data("dropdown")||c(h.target).parent().data("dropdown")){return}if(!(c(h.target).data("revealId"))&&(g.length>0&&(c(h.target).is("[data-dropdown-content]")||c.contains(g.first()[0],h.target)))){h.stopPropagation();return}e.close.call(e,c("[data-dropdown-content]"))});c(b).on("resize.fndtn.dropdown",e.throttle(function(){e.resize.call(e)},50)).trigger("resize");this.settings.init=true},close:function(g){var e=this;g.each(function(){if(c(this).hasClass(e.settings.activeClass)){c(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(e.settings.activeClass);c(this).trigger("closed")}})},open:function(g,e){this.css(g.addClass(this.settings.activeClass),e);g.trigger("opened")},toggle:function(e){var g=c("#"+e.data("dropdown"));if(g.length===0){return}this.close.call(this,c("[data-dropdown-content]").not(g));if(g.hasClass(this.settings.activeClass)){this.close.call(this,g)}else{this.close.call(this,c("[data-dropdown-content]"));this.open.call(this,g,e)}},resize:function(){var g=c("[data-dropdown-content].open"),e=c("[data-dropdown='"+g.attr("id")+"']");if(g.length&&e.length){this.css(g,e)}},css:function(j,i){var g=j.offsetParent();var e=i.offset();e.top-=g.offset().top;e.left-=g.offset().left;if(this.small()){j.css({position:"absolute",width:"95%","max-width":"none",top:e.top+this.outerHeight(i)});j.css(Foundation.rtl?"right":"left","2.5%")}else{if(!Foundation.rtl&&c(b).width()>this.outerWidth(j)+i.offset().left&&!this.data_options(i).align_right){var h=e.left;if(j.hasClass("right")){j.removeClass("right")}}else{if(!j.hasClass("right")){j.addClass("right")}var h=e.left-(this.outerWidth(j)-this.outerWidth(i))}j.attr("style","").css({position:"absolute",top:e.top+this.outerHeight(i),left:h})}return j},small:function(){return c(b).width()<768||c("html").hasClass("lt-ie9")},off:function(){c(this.scope).off(".fndtn.dropdown");c("html, body").off(".fndtn.dropdown");c(b).off(".fndtn.dropdown");c("[data-dropdown-content]").off(".fndtn.dropdown");this.settings.init=false},reflow:function(){}}}(Foundation.zj,this,this.document));(function(d,c,a,e){Foundation.libs.forms={name:"forms",version:"4.3.2",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(h,i,g){if(typeof i==="object"){d.extend(true,this.settings,i)}if(typeof i!=="string"){if(!this.settings.init){this.events()}this.assemble();return this.settings.init}else{return this[i].call(this,g)}},assemble:function(){var g=this;d('form.custom input[type="radio"],[type="checkbox"]',d(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(function(h,i){g.set_custom_markup(i)}).change(function(){g.set_custom_markup(this)});d("form.custom select",d(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var g=this;d(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(h){h.preventDefault();h.stopPropagation();g.toggle_checkbox(d(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(h){h.preventDefault();h.stopPropagation();g.toggle_radio(d(this))}).on("change.fndtn.forms","form.custom select",function(i,h){if(d(this).is('[data-customforms="disabled"]')){return}g.refresh_custom_select(d(this),h)}).on("click.fndtn.forms","form.custom label",function(j){if(d(j.target).is("label")){var h=d("#"+g.escape(d(this).attr("for"))).not('[data-customforms="disabled"]'),k,i;if(h.length!==0){if(h.attr("type")==="checkbox"){j.preventDefault();k=d(this).find("span.custom.checkbox");if(k.length===0){k=h.add(this).siblings("span.custom.checkbox").first()}g.toggle_checkbox(k)}else{if(h.attr("type")==="radio"){j.preventDefault();i=d(this).find("span.custom.radio");if(i.length===0){i=h.add(this).siblings("span.custom.radio").first()}g.toggle_radio(i)}}}}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return false}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(k){var j=d(this),i=j.closest("div.custom.dropdown"),h=b(i,"select");if(!i.hasClass("open")){d(g.scope).trigger("click")}k.preventDefault();if(false===h.is(":disabled")){i.toggleClass("open");if(i.hasClass("open")){d(g.scope).on("click.fndtn.forms.customdropdown",function(){i.removeClass("open");d(g.scope).off(".fndtn.forms.customdropdown")})}else{d(g.scope).on(".fndtn.forms.customdropdown")}return false}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(o){var n=d(this),j=n.closest("div.custom.dropdown"),k=b(j,"select"),i=0;o.preventDefault();o.stopPropagation();if(!d(this).hasClass("disabled")){d("div.dropdown").not(j).removeClass("open");var h=n.closest("ul").find("li.selected");h.removeClass("selected");n.addClass("selected");j.removeClass("open").find("a.current").text(n.text());n.closest("ul").find("li").each(function(p){if(n[0]===this){i=p}});k[0].selectedIndex=i;k.data("prevalue",h.html());if(typeof(a.createEvent)!="undefined"){var l=a.createEvent("HTMLEvents");l.initEvent("change",true,true);k[0].dispatchEvent(l)}else{k[0].fireEvent("onchange")}}});d(c).on("keydown",function(k){var q=a.activeElement,o=Foundation.libs.forms,p=d(".custom.dropdown"),n=b(p,"select"),j=d("input,select,textarea,button");if(p.length>0&&p.hasClass("open")){k.preventDefault();if(k.which===9){d(j[d(j).index(n)+1]).focus();p.removeClass("open")}if(k.which===13){p.find("li.selected").trigger("click")}if(k.which===27){p.removeClass("open")}if(k.which>=65&&k.which<=90){var i=o.go_to(p,k.which),l=p.find("li.selected");if(i){l.removeClass("selected");o.scrollTo(i.addClass("selected"),300)}}if(k.which===38){var l=p.find("li.selected"),h=l.prev(":not(.disabled)");if(h.length>0){h.parent()[0].scrollTop=h.parent().scrollTop()-o.outerHeight(h);l.removeClass("selected");h.addClass("selected")}}else{if(k.which===40){var l=p.find("li.selected"),i=l.next(":not(.disabled)");if(i.length>0){i.parent()[0].scrollTop=i.parent().scrollTop()+o.outerHeight(i);l.removeClass("selected");i.addClass("selected")}}}}});d(c).on("keyup",function(i){var h=a.activeElement,j=d(".custom.dropdown");if(h===j.find(".current")[0]){j.find(".selector").focus().click()}});this.settings.init=true},go_to:function(n,l){var h=n.find("li"),k=h.length;if(k>0){for(var j=0;j<k;j++){var g=h.eq(j).text().charAt(0).toLowerCase();if(g===String.fromCharCode(l).toLowerCase()){return h.eq(j)}}}},scrollTo:function(j,k){if(k<0){return}var i=j.parent();var h=this.outerHeight(j);var l=(h*(j.index()))-i.scrollTop();var g=l/k*10;this.scrollToTimerCache=setTimeout(function(){if(!isNaN(parseInt(g,10))){i[0].scrollTop=i.scrollTop()+g;this.scrollTo(j,k-10)}}.bind(this),10)},set_custom_markup:function(i){var j=d(i),h=j.attr("type"),g=j.next("span.custom."+h);if(!j.parent().hasClass("switch")){j.addClass("hidden-field")}if(g.length===0){g=d('<span class="custom '+h+'"></span>').insertAfter(j)}g.toggleClass("checked",j.is(":checked"));g.toggleClass("disabled",j.is(":disabled"))},append_custom_select:function(t,i){var w=Foundation.libs.forms,p=d(i),o=p.next("div.custom.dropdown"),q=o.find("ul"),r=o.find(".current"),v=o.find(".selector"),n=p.find("option"),j=n.filter(":selected"),l=p.attr("class")?p.attr("class").split(" "):[],u=0,s="",h,g=false;if(o.length===0){var k=p.hasClass("small")?"small":p.hasClass("medium")?"medium":p.hasClass("large")?"large":p.hasClass("expand")?"expand":"";o=d('<div class="'+["custom","dropdown",k].concat(l).filter(function(z,y,x){if(z===""){return false}return x.indexOf(z)===y}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>');v=o.find(".selector");q=o.find("ul");s=n.map(function(){var x=d(this).attr("class")?d(this).attr("class"):"";return"<li class='"+x+"'>"+d(this).html()+"</li>"}).get().join("");q.append(s);g=o.prepend('<a href="#" class="current">'+(j.html()||"")+"</a>").find(".current");p.after(o).addClass("hidden-field")}else{s=n.map(function(){return"<li>"+d(this).html()+"</li>"}).get().join("");q.html("").append(s)}w.assign_id(p,o);o.toggleClass("disabled",p.is(":disabled"));h=q.find("li");w.cache[o.data("id")]=h.length;n.each(function(x){if(this.selected){h.eq(x).addClass("selected");if(g){g.html(d(this).html())}}if(d(this).is(":disabled")){h.eq(x).addClass("disabled")}});if(!o.is(".small, .medium, .large, .expand")){o.addClass("open");var w=Foundation.libs.forms;w.hidden_fix.adjust(q);u=(w.outerWidth(h)>u)?w.outerWidth(h):u;Foundation.libs.forms.hidden_fix.reset();o.removeClass("open")}},assign_id:function(g,i){var h=[+new Date(),Foundation.random_str(5)].join("-");g.attr("data-id",h);i.attr("data-id",h)},refresh_custom_select:function(h,i){var p=this;var n=0,k=h.next(),j=h.find("option"),l=k.find("ul"),g=k.find("li");if(j.length!==this.cache[k.data("id")]||i){l.html("");var o="";j.each(function(){var s=d(this),r=s.html(),q=this.selected;o+='<li class="'+(q?" selected ":"")+(s.is(":disabled")?" disabled ":"")+'">'+r+"</li>";if(q){k.find(".current").html(r)}});l.html(o);k.removeAttr("style");l.removeAttr("style");k.find("li").each(function(){k.addClass("open");if(p.outerWidth(d(this))>n){n=p.outerWidth(d(this))}k.removeClass("open")});g=k.find("li");this.cache[k.data("id")]=g.length}},refresh_custom_selection:function(g){var h=d("option:selected",g).text();d("a.current",g.next()).text(h)},toggle_checkbox:function(g){var i=g.prev(),h=i[0];if(false===i.is(":disabled")){h.checked=((h.checked)?false:true);g.toggleClass("checked");i.trigger("change")}},toggle_radio:function(g){var j=g.prev(),i=j.closest("form.custom"),h=j[0];if(false===j.is(":disabled")){i.find('input[type="radio"][name="'+this.escape(j.attr("name"))+'"]').next().not(g).removeClass("checked");if(!g.hasClass("checked")){g.toggleClass("checked")}h.checked=g.hasClass("checked");j.trigger("change")}},escape:function(g){if(!g){return""}return g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(h){var g=this;g.hidden=h.parents();g.hidden=g.hidden.add(h).filter(":hidden");g.hidden.each(function(){var i=d(this);g.tmp.push(i.attr("style"));i.css({visibility:"hidden",display:"block"})})},reset:function(){var g=this;g.hidden.each(function(j){var h=d(this),k=g.tmp[j];if(k===e){h.removeAttr("style")}else{h.attr("style",k)}});g.tmp=[];g.hidden=null}},off:function(){d(this.scope).off(".fndtn.forms")},reflow:function(){}};var b=function(h,g){var h=h.prev();while(h.length){if(h.is(g)){return h}h=h.prev()}return d()}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.interchange={name:"interchange",version:"4.2.4",cache:{},images_loaded:false,settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(g,h){if(/IMG/.test(g[0].nodeName)){var e=g[0].src;if(new RegExp(h,"i").test(e)){return}g[0].src=h;return g.trigger("replace",[g[0].src,e])}}}},init:function(g,h,e){Foundation.inherit(this,"throttle");if(typeof h==="object"){c.extend(true,this.settings,h)}this.events();this.images();if(typeof h!=="string"){return this.settings.init}else{return this[h].call(this,e)}},events:function(){var e=this;c(b).on("resize.fndtn.interchange",e.throttle(function(){e.resize.call(e)},50))},resize:function(){var e=this.cache;if(!this.images_loaded){setTimeout(c.proxy(this.resize,this),50);return}for(var g in e){if(e.hasOwnProperty(g)){var h=this.results(g,e[g]);if(h){this.settings.directives[h.scenario[1]](h.el,h.scenario[0])}}}},results:function(j,n){var k=n.length;if(k>0){var h=c('[data-uuid="'+j+'"]');for(var e=k-1;e>=0;e--){var g,l=n[e][2];if(this.settings.named_queries.hasOwnProperty(l)){g=matchMedia(this.settings.named_queries[l])}else{g=matchMedia(l)}if(g.matches){return{el:h,scenario:n[e]}}}}return false},images:function(e){if(typeof this.cached_images==="undefined"||e){return this.update_images()}return this.cached_images},update_images:function(){var e=a.getElementsByTagName("img"),k=e.length,j=0,h="data-"+this.settings.load_attr;this.cached_images=[];this.images_loaded=false;for(var g=k-1;g>=0;g--){this.loaded(c(e[g]),function(i){j++;if(i){var l=i.getAttribute(h)||"";if(l.length>0){this.cached_images.push(i)}}if(j===k){this.images_loaded=true;this.enhance()}}.bind(this))}return"deferred"},loaded:function(h,i){function e(){i(h[0])}function g(){this.one("load",e);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var k=this.attr("src"),j=k.match(/\?/)?"&":"?";j+="random="+(new Date()).getTime();this.attr("src",k+j)}}if(!h.attr("src")){e();return}if(h[0].complete||h[0].readyState===4){e()}else{g.call(h)}},enhance:function(){var g=this.images().length;for(var e=g-1;e>=0;e--){this._object(c(this.images()[e]))}return c(b).trigger("resize")},parse_params:function(g,h,e){return[this.trim(g),this.convert_directive(h),this.trim(e)]},convert_directive:function(g){var e=this.trim(g);if(e.length>0){return e}return"replace"},_object:function(j){var l=this.parse_data_attr(j),o=[],k=l.length;if(k>0){for(var h=k-1;h>=0;h--){var g=l[h].split(/\((.*?)(\))$/);if(g.length>1){var e=g[0].split(","),n=this.parse_params(e[0],e[1],g[1]);o.push(n)}}}return this.store(j,o)},uuid:function(g){var h=g||"-";function e(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(e()+e()+h+e()+h+e()+h+e()+h+e()+e()+e())},store:function(g,i){var e=this.uuid(),h=g.data("uuid");if(h){return this.cache[h]}g.attr("data-uuid",e);return this.cache[e]=i},trim:function(e){if(typeof e==="string"){return c.trim(e)}return e},parse_data_attr:function(j){var g=j.data(this.settings.load_attr).split(/\[(.*?)\]/),k=g.length,e=[];for(var h=k-1;h>=0;h--){if(g[h].replace(/[\W\d]+/,"").length>4){e.push(g[h])}}return e},reflow:function(){this.images(true)}}}(Foundation.zj,this,this.document));(function(c,b,a,e){var d=d||false;Foundation.libs.joyride={name:"joyride",version:"4.3.2",defaults:{expose:false,modal:false,tipLocation:"bottom",nubPosition:"auto",scrollSpeed:300,timer:0,startTimerOnClick:true,startOffset:0,nextButton:true,tipAnimation:"fade",pauseAfter:[],exposed:[],tipAnimationFadeSpeed:300,cookieMonster:false,cookieName:"joyride",cookieDomain:false,cookieExpires:365,tipContainer:"body",postRideCallback:function(){},postStepCallback:function(){},preStepCallback:function(){},preRideCallback:function(){},postExposeCallback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'},exposeAddClass:""},settings:{},init:function(h,i,g){this.scope=h||this.scope;Foundation.inherit(this,"throttle data_options scrollTo scrollLeft delay");if(typeof i==="object"){c.extend(true,this.settings,this.defaults,i)}else{c.extend(true,this.settings,this.defaults,g)}if(typeof i!=="string"){if(!this.settings.init){this.events()}return this.settings.init}else{return this[i].call(this,g)}},events:function(){var g=this;c(this.scope).on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(h){h.preventDefault();if(this.settings.$li.next().length<1){this.end()}else{if(this.settings.timer>0){clearTimeout(this.settings.automate);this.hide();this.show();this.startTimer()}else{this.hide();this.show()}}}.bind(this)).on("click.joyride",".joyride-close-tip",function(h){h.preventDefault();this.end()}.bind(this));c(b).on("resize.fndtn.joyride",g.throttle(function(){if(c("[data-joyride]").length>0&&g.settings.$next_tip){if(g.settings.exposed.length>0){var h=c(g.settings.exposed);h.each(function(){var i=c(this);g.un_expose(i);g.expose(i)})}if(g.is_phone()){g.pos_phone()}else{g.pos_default(false,true)}}},100));this.settings.init=true},start:function(){var h=this,j=c(this.scope).find("[data-joyride]"),g=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],i=g.length;if(!this.settings.init){this.events()}this.settings.$content_el=j;this.settings.$body=c(this.settings.tipContainer);this.settings.body_offset=c(this.settings.tipContainer).position();this.settings.$tip_content=this.settings.$content_el.find("> li");this.settings.paused=false;this.settings.attempts=0;this.settings.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]};if(typeof c.cookie!=="function"){this.settings.cookieMonster=false}if(!this.settings.cookieMonster||this.settings.cookieMonster&&c.cookie(this.settings.cookieName)===null){this.settings.$tip_content.each(function(k){var n=c(this);c.extend(true,h.settings,h.data_options(n));for(var l=i-1;l>=0;l--){h.settings[g[l]]=parseInt(h.settings[g[l]],10)}h.create({$li:n,index:k})});if(!this.settings.startTimerOnClick&&this.settings.timer>0){this.show("init");this.startTimer()}else{this.show("init")}}},resume:function(){this.set_li();this.show()},tip_template:function(h){var i,g;h.tip_class=h.tip_class||"";i=c(this.settings.template.tip).addClass(h.tip_class);g=c.trim(c(h.li).html())+this.button_text(h.button_text)+this.settings.template.link+this.timer_instance(h.index);i.append(c(this.settings.template.wrapper));i.first().attr("data-index",h.index);c(".joyride-content-wrapper",i).append(g);return i[0]},timer_instance:function(h){var g;if((h===0&&this.settings.startTimerOnClick&&this.settings.timer>0)||this.settings.timer===0){g=""}else{g=this.outerHTML(c(this.settings.template.timer)[0])}return g},button_text:function(g){if(this.settings.nextButton){g=c.trim(g)||"Next";g=this.outerHTML(c(this.settings.template.button).append(g)[0])}else{g=""}return g},create:function(i){var h=i.$li.attr("data-button")||i.$li.attr("data-text"),g=i.$li.attr("class"),j=c(this.tip_template({tip_class:g,index:i.index,button_text:h,li:i.$li}));c(this.settings.tipContainer).append(j)},show:function(h){var g=null;if(this.settings.$li===e||(c.inArray(this.settings.$li.index(),this.settings.pauseAfter)===-1)){if(this.settings.paused){this.settings.paused=false}else{this.set_li(h)}this.settings.attempts=0;if(this.settings.$li.length&&this.settings.$target.length>0){if(h){this.settings.preRideCallback(this.settings.$li.index(),this.settings.$next_tip);if(this.settings.modal){this.show_modal()}}this.settings.preStepCallback(this.settings.$li.index(),this.settings.$next_tip);if(this.settings.modal&&this.settings.expose){this.expose()}this.settings.tipSettings=c.extend(this.settings,this.data_options(this.settings.$li));this.settings.timer=parseInt(this.settings.timer,10);this.settings.tipSettings.tipLocationPattern=this.settings.tipLocationPatterns[this.settings.tipSettings.tipLocation];if(!/body/i.test(this.settings.$target.selector)){this.scroll_to()}if(this.is_phone()){this.pos_phone(true)}else{this.pos_default(true)}g=this.settings.$next_tip.find(".joyride-timer-indicator");if(/pop/i.test(this.settings.tipAnimation)){g.width(0);if(this.settings.timer>0){this.settings.$next_tip.show();this.delay(function(){g.animate({width:g.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)}else{this.settings.$next_tip.show()}}else{if(/fade/i.test(this.settings.tipAnimation)){g.width(0);if(this.settings.timer>0){this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed).show();this.delay(function(){g.animate({width:g.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)}else{this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed)}}}this.settings.$current_tip=this.settings.$next_tip}else{if(this.settings.$li&&this.settings.$target.length<1){this.show()}else{this.end()}}}else{this.settings.paused=true}},is_phone:function(){if(d){return d.mq("only screen and (max-width: 767px)")||c(".lt-ie9").length>0}return(c(b).width()<767)},hide:function(){if(this.settings.modal&&this.settings.expose){this.un_expose()}if(!this.settings.modal){c(".joyride-modal-bg").hide()}this.settings.$current_tip.css("visibility","hidden");setTimeout(c.proxy(function(){this.hide();this.css("visibility","visible")},this.settings.$current_tip),0);this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(g){if(g){this.settings.$li=this.settings.$tip_content.eq(this.settings.startOffset);this.set_next_tip();this.settings.$current_tip=this.settings.$next_tip}else{this.settings.$li=this.settings.$li.next();this.set_next_tip()}this.set_target()},set_next_tip:function(){this.settings.$next_tip=c(".joyride-tip-guide[data-index='"+this.settings.$li.index()+"']");this.settings.$next_tip.data("closed","")},set_target:function(){var g=this.settings.$li.attr("data-class"),i=this.settings.$li.attr("data-id"),h=function(){if(i){return c(a.getElementById(i))}else{if(g){return c("."+g).first()}else{return c("body")}}};this.settings.$target=h()},scroll_to:function(){var h,g;h=c(b).height()/2;g=Math.ceil(this.settings.$target.offset().top-h+this.outerHeight(this.settings.$next_tip));if(g>0){this.scrollTo(c("html, body"),g,this.settings.scrollSpeed)}},paused:function(){return(c.inArray((this.settings.$li.index()+1),this.settings.pauseAfter)===-1)},restart:function(){this.hide();this.settings.$li=e;this.show("init")},pos_default:function(p,l){var o=Math.ceil(c(b).height()/2),n=this.settings.$next_tip.offset(),j=this.settings.$next_tip.find(".joyride-nub"),g=Math.ceil(this.outerWidth(j)/2),k=Math.ceil(this.outerHeight(j)/2),i=p||false;if(i){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(typeof l==="undefined"){l=false}if(!/body/i.test(this.settings.$target.selector)){if(this.bottom()){var h=this.settings.$target.offset().left;if(Foundation.rtl){h=this.settings.$target.offset().width-this.settings.$next_tip.width()+h}this.settings.$next_tip.css({top:(this.settings.$target.offset().top+k+this.outerHeight(this.settings.$target)),left:h});this.nub_position(j,this.settings.tipSettings.nubPosition,"top")}else{if(this.top()){var h=this.settings.$target.offset().left;if(Foundation.rtl){h=this.settings.$target.offset().width-this.settings.$next_tip.width()+h}this.settings.$next_tip.css({top:(this.settings.$target.offset().top-this.outerHeight(this.settings.$next_tip)-k),left:h});this.nub_position(j,this.settings.tipSettings.nubPosition,"bottom")}else{if(this.right()){this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:(this.outerWidth(this.settings.$target)+this.settings.$target.offset().left+g)});this.nub_position(j,this.settings.tipSettings.nubPosition,"left")}else{if(this.left()){this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:(this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-g)});this.nub_position(j,this.settings.tipSettings.nubPosition,"right")}}}}if(!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tipSettings.tipLocationPattern.length){j.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");this.settings.tipSettings.tipLocation=this.settings.tipSettings.tipLocationPattern[this.settings.attempts];this.settings.attempts++;this.pos_default()}}else{if(this.settings.$li.length){this.pos_modal(j)}}if(i){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_phone:function(l){var k=this.outerHeight(this.settings.$next_tip),j=this.settings.$next_tip.offset(),i=this.outerHeight(this.settings.$target),h=c(".joyride-nub",this.settings.$next_tip),n=Math.ceil(this.outerHeight(h)/2),g=l||false;h.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");if(g){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(!/body/i.test(this.settings.$target.selector)){if(this.top()){this.settings.$next_tip.offset({top:this.settings.$target.offset().top-k-n});h.addClass("bottom")}else{this.settings.$next_tip.offset({top:this.settings.$target.offset().top+i+n});h.addClass("top")}}else{if(this.settings.$li.length){this.pos_modal(h)}}if(g){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_modal:function(g){this.center();g.hide();this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var g=c(".joyride-modal-bg");if(g.length<1){c("body").append(this.settings.template.modal).show()}if(/pop/i.test(this.settings.tipAnimation)){g.show()}else{g.fadeIn(this.settings.tipAnimationFadeSpeed)}}},expose:function(){var h,k,j,l,g,i="expose-"+Math.floor(Math.random()*10000);if(arguments.length>0&&arguments[0] instanceof c){j=arguments[0]}else{if(this.settings.$target&&!/body/i.test(this.settings.$target.selector)){j=this.settings.$target}else{return false}}if(j.length<1){if(b.console){console.error("element not valid",j)}return false}h=c(this.settings.template.expose);this.settings.$body.append(h);h.css({top:j.offset().top,left:j.offset().left,width:this.outerWidth(j,true),height:this.outerHeight(j,true)});k=c(this.settings.template.exposeCover);l={zIndex:j.css("z-index"),position:j.css("position")};g=j.attr("class")==null?"":j.attr("class");j.css("z-index",parseInt(h.css("z-index"))+1);if(l.position=="static"){j.css("position","relative")}j.data("expose-css",l);j.data("orig-class",g);j.attr("class",g+" "+this.settings.exposeAddClass);k.css({top:j.offset().top,left:j.offset().left,width:this.outerWidth(j,true),height:this.outerHeight(j,true)});this.settings.$body.append(k);h.addClass(i);k.addClass(i);j.data("expose",i);this.settings.postExposeCallback(this.settings.$li.index(),this.settings.$next_tip,j);this.add_exposed(j)},un_expose:function(){var g,k,i,l,h,j=false;if(arguments.length>0&&arguments[0] instanceof c){k=arguments[0]}else{if(this.settings.$target&&!/body/i.test(this.settings.$target.selector)){k=this.settings.$target}else{return false}}if(k.length<1){if(b.console){console.error("element not valid",k)}return false}g=k.data("expose");i=c("."+g);if(arguments.length>1){j=arguments[1]}if(j===true){c(".joyride-expose-wrapper,.joyride-expose-cover").remove()}else{i.remove()}l=k.data("expose-css");if(l.zIndex=="auto"){k.css("z-index","")}else{k.css("z-index",l.zIndex)}if(l.position!=k.css("position")){if(l.position=="static"){k.css("position","")}else{k.css("position",l.position)}}h=k.data("orig-class");k.attr("class",h);k.removeData("orig-classes");k.removeData("expose");k.removeData("expose-z-index");this.remove_exposed(k)},add_exposed:function(g){this.settings.exposed=this.settings.exposed||[];if(g instanceof c||typeof g==="object"){this.settings.exposed.push(g[0])}else{if(typeof g=="string"){this.settings.exposed.push(g)}}},remove_exposed:function(j){var h,k;if(j instanceof c){h=j[0]}else{if(typeof j=="string"){h=j}}this.settings.exposed=this.settings.exposed||[];k=this.settings.exposed.length;for(var g=0;g<k;g++){if(this.settings.exposed[g]==h){this.settings.exposed.splice(g,1);return}}},center:function(){var g=c(b);this.settings.$next_tip.css({top:(((g.height()-this.outerHeight(this.settings.$next_tip))/2)+g.scrollTop()),left:(((g.width()-this.outerWidth(this.settings.$next_tip))/2)+this.scrollLeft(g))});return true},bottom:function(){return/bottom/i.test(this.settings.tipSettings.tipLocation)},top:function(){return/top/i.test(this.settings.tipSettings.tipLocation)},right:function(){return/right/i.test(this.settings.tipSettings.tipLocation)},left:function(){return/left/i.test(this.settings.tipSettings.tipLocation)},corners:function(k){var g=c(b),o=g.height()/2,l=Math.ceil(this.settings.$target.offset().top-o+this.settings.$next_tip.outerHeight()),j=g.width()+this.scrollLeft(g),i=g.height()+l,h=g.height()+g.scrollTop(),n=g.scrollTop();if(l<n){if(l<0){n=0}else{n=l}}if(i>h){h=i}return[k.offset().top<n,j<k.offset().left+k.outerWidth(),h<k.offset().top+k.outerHeight(),this.scrollLeft(g)>k.offset().left]},visible:function(g){var h=g.length;while(h--){if(g[h]){return false}}return true},nub_position:function(g,i,h){if(i==="auto"){g.addClass(h)}else{g.addClass(i)}},startTimer:function(){if(this.settings.$li.length){this.settings.automate=setTimeout(function(){this.hide();this.show();this.startTimer()}.bind(this),this.settings.timer)}else{clearTimeout(this.settings.automate)}},end:function(){if(this.settings.cookieMonster){c.cookie(this.settings.cookieName,"ridden",{expires:this.settings.cookieExpires,domain:this.settings.cookieDomain})}if(this.settings.timer>0){clearTimeout(this.settings.automate)}if(this.settings.modal&&this.settings.expose){this.un_expose()}this.settings.$next_tip.data("closed",true);c(".joyride-modal-bg").hide();this.settings.$current_tip.hide();this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip);this.settings.postRideCallback(this.settings.$li.index(),this.settings.$current_tip);c(".joyride-tip-guide").remove()},outerHTML:function(g){return g.outerHTML||new XMLSerializer().serializeToString(g)},off:function(){c(this.scope).off(".joyride");c(b).off(".joyride");c(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride");c(".joyride-tip-guide, .joyride-modal-bg").remove();clearTimeout(this.settings.automate);this.settings={}},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.magellan={name:"magellan",version:"4.3.2",settings:{activeClass:"active",threshold:0},init:function(g,h,e){this.scope=g||this.scope;Foundation.inherit(this,"data_options");if(typeof h==="object"){c.extend(true,this.settings,h)}if(typeof h!=="string"){if(!this.settings.init){this.fixed_magellan=c("[data-magellan-expedition]");this.set_threshold();this.last_destination=c("[data-magellan-destination]").last();this.events()}return this.settings.init}else{return this[h].call(this,e)}},events:function(){var e=this;c(this.scope).on("arrival.fndtn.magellan","[data-magellan-arrival]",function(j){var h=c(this),i=h.closest("[data-magellan-expedition]"),g=i.attr("data-magellan-active-class")||e.settings.activeClass;h.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(h).removeClass(g);h.addClass(g)});this.fixed_magellan.on("update-position.fndtn.magellan",function(){var g=c(this)}).trigger("update-position");c(b).on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var g=c(b).scrollTop();e.fixed_magellan.each(function(){var i=c(this);if(typeof i.data("magellan-top-offset")==="undefined"){i.data("magellan-top-offset",i.offset().top)}if(typeof i.data("magellan-fixed-position")==="undefined"){i.data("magellan-fixed-position",false)}var j=(g+e.settings.threshold)>i.data("magellan-top-offset");var h=i.attr("data-magellan-top-offset");if(i.data("magellan-fixed-position")!=j){i.data("magellan-fixed-position",j);if(j){i.addClass("fixed");i.css({position:"fixed",top:0})}else{i.removeClass("fixed");i.css({position:"",top:""})}if(j&&typeof h!="undefined"&&h!=false){i.css({position:"fixed",top:h+"px"})}}})});if(this.last_destination.length>0){c(b).on("scroll.fndtn.magellan",function(i){var h=c(b).scrollTop(),g=h+c(b).height(),j=Math.ceil(e.last_destination.offset().top);c("[data-magellan-destination]").each(function(){var n=c(this),l=n.attr("data-magellan-destination"),k=n.offset().top-h;if(k<=e.settings.threshold){c("[data-magellan-arrival='"+l+"']").trigger("arrival")}if(g>=c(e.scope).height()&&j>h&&j<g){c("[data-magellan-arrival]").last().trigger("arrival")}})})}this.settings.init=true},set_threshold:function(){if(typeof this.settings.threshold!=="number"){this.settings.threshold=(this.fixed_magellan.length>0)?this.outerHeight(this.fixed_magellan,true):0}},off:function(){c(this.scope).off(".fndtn.magellan");c(b).off(".fndtn.magellan")},reflow:function(){}}}(Foundation.zj,this,this.document));var libFuncName=null;if(typeof jQuery=="undefined"&&typeof Zepto=="undefined"&&typeof $=="function"){libFuncName=$}else{if(typeof jQuery=="function"){libFuncName=jQuery}else{if(typeof Zepto!="function"){throw new TypeError}libFuncName=Zepto}}(function(c,a,d,b){c("head").append('<meta class="foundation-mq-small">'),c("head").append('<meta class="foundation-mq-medium">'),c("head").append('<meta class="foundation-mq-large">'),a.matchMedia=a.matchMedia||function(l,h){var q,k=l.documentElement,g=k.firstElementChild||k.firstChild,j=l.createElement("body"),p=l.createElement("div");return p.id="mq-test-1",p.style.cssText="position:absolute;top:-100em",j.style.background="none",j.appendChild(p),function(i){return p.innerHTML='&shy;<style media="'+i+'"> #mq-test-1 { width: 42px; }</style>',k.insertBefore(j,g),q=p.offsetWidth===42,k.removeChild(j),{matches:q,media:i}}}(d),Array.prototype.filter||(Array.prototype.filter=function(l){if(this==null){throw new TypeError}var h=Object(this),q=h.length>>>0;if(typeof l!="function"){return}var k=[],g=arguments[1];for(var j=0;j<q;j++){if(j in h){var p=h[j];l&&l.call(g,p,j,h)&&k.push(p)}}return k}),Function.prototype.bind||(Function.prototype.bind=function(k){if(typeof this!="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var h=Array.prototype.slice.call(arguments,1),l=this,j=function(){},g=function(){return l.apply(this instanceof j&&k?this:k,h.concat(Array.prototype.slice.call(arguments)))};return j.prototype=this.prototype,g.prototype=new j,g}),Array.prototype.indexOf||(Array.prototype.indexOf=function(k){if(this==null){throw new TypeError}var h=Object(this),l=h.length>>>0;if(l===0){return -1}var j=0;arguments.length>1&&(j=Number(arguments[1]),j!=j?j=0:j!=0&&j!=Infinity&&j!=-Infinity&&(j=(j>0||-1)*Math.floor(Math.abs(j))));if(j>=l){return -1}var g=j>=0?j:Math.max(l-Math.abs(j),0);for(;g<l;g++){if(g in h&&h[g]===k){return g}}return -1}),c.fn.stop=c.fn.stop||function(){return this},a.Foundation={name:"Foundation",version:"4.3.2",cache:{},media_queries:{small:c(".foundation-mq-small").css("font-family").replace(/\'/g,""),medium:c(".foundation-mq-medium").css("font-family").replace(/\'/g,""),large:c(".foundation-mq-large").css("font-family").replace(/\'/g,"")},stylesheet:c("<style></style>").appendTo("head")[0].sheet,init:function(x,h,e,k,y,g){var w,v=[x,e,k,y],p=[],g=g||!1;g&&(this.nc=g),this.rtl=/rtl/i.test(c("html").attr("dir")),this.scope=x||this.scope;if(h&&typeof h=="string"&&!/reflow/i.test(h)){if(/off/i.test(h)){return this.off()}w=h.split(" ");if(w.length>0){for(var j=w.length-1;j>=0;j--){p.push(this.init_lib(w[j],v))}}}else{/reflow/i.test(h)&&(v[1]="reflow");for(var q in this.libs){p.push(this.init_lib(q,v))}}return typeof h=="function"&&v.unshift(h),this.response_obj(p,v)},response_obj:function(i,g){for(var j=0,h=g.length;j<h;j++){if(typeof g[j]=="function"){return g[j]({errors:i.filter(function(k){if(typeof k=="string"){return k}})})}}return i},init_lib:function(h,g){return this.trap(function(){return this.libs.hasOwnProperty(h)?(this.patch(this.libs[h]),this.libs[h].init.apply(this.libs[h],g)):function(){}}.bind(this),h)},trap:function(h,g){if(!this.nc){try{return h()}catch(i){return this.error({name:g,message:"could not be initialized",more:i.name+" "+i.message})}}return h()},patch:function(g){this.fix_outer(g),g.scope=this.scope,g.rtl=this.rtl},inherit:function(i,g){var j=g.split(" ");for(var h=j.length-1;h>=0;h--){this.lib_methods.hasOwnProperty(j[h])&&(this.libs[i.name][j[h]]=this.lib_methods[j[h]])}},random_str:function(i){var g="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");i||(i=Math.floor(Math.random()*g.length));var j="";for(var h=0;h<i;h++){j+=g[Math.floor(Math.random()*g.length)]}return j},libs:{},lib_methods:{set_data:function(h,g){var i=[this.name,+(new Date),Foundation.random_str(5)].join("-");return Foundation.cache[i]=g,h.attr("data-"+this.name+"-id",i),g},get_data:function(g){return Foundation.cache[g.attr("data-"+this.name+"-id")]},remove_data:function(e){e?(delete Foundation.cache[e.attr("data-"+this.name+"-id")],e.attr("data-"+this.name+"-id","")):c("[data-"+this.name+"-id]").each(function(){delete Foundation.cache[c(this).attr("data-"+this.name+"-id")],c(this).attr("data-"+this.name+"-id","")})},throttle:function(h,g){var i=null;return function(){var j=this,e=arguments;clearTimeout(i),i=setTimeout(function(){h.apply(j,e)},g)}},data_options:function(j){function g(i){return !isNaN(i-0)&&i!==null&&i!==""&&i!==!1&&i!==!0}function e(i){return typeof i=="string"?c.trim(i):i}var q={},l,h,k=(j.attr("data-options")||":").split(";"),p=k.length;for(l=p-1;l>=0;l--){h=k[l].split(":"),/true/i.test(h[1])&&(h[1]=!0),/false/i.test(h[1])&&(h[1]=!1),g(h[1])&&(h[1]=parseInt(h[1],10)),h.length===2&&h[0].length>0&&(q[e(h[0])]=e(h[1]))}return q},delay:function(h,g){return setTimeout(h,g)},scrollTo:function(k,h,e){if(e<0){return}var g=h-c(a).scrollTop(),j=g/e*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(j,10))||(a.scrollTo(0,c(a).scrollTop()+j),this.scrollTo(k,h,e-10))}.bind(this),10)},scrollLeft:function(g){if(!g.length){return}return"scrollLeft" in g[0]?g[0].scrollLeft:g[0].pageXOffset},empty:function(h){if(h.length&&h.length>0){return !1}if(h.length&&h.length===0){return !0}for(var g in h){if(hasOwnProperty.call(h,g)){return !1}}return !0},addCustomRule:function(h,g){if(g===b){Foundation.stylesheet.insertRule(h,Foundation.stylesheet.cssRules.length)}else{var i=Foundation.media_queries[g];i!==b&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[g]+"{ "+h+" }")}}},fix_outer:function(g){g.outerHeight=function(i,h){return typeof Zepto=="function"?i.height():typeof h!="undefined"?i.outerHeight(h):i.outerHeight()},g.outerWidth=function(i,h){return typeof Zepto=="function"?i.width():typeof h!="undefined"?i.outerWidth(h):i.outerWidth()}},error:function(g){return g.name+" "+g.message+"; "+g.more},off:function(){return c(this.scope).off(".fndtn"),c(a).off(".fndtn"),!0},zj:c},c.fn.foundation=function(){var g=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(g)),this})}})(libFuncName,this,this.document),function(c,a,d,b){Foundation.libs.alerts={name:"alerts",version:"4.3.2",settings:{animation:"fadeOut",speed:300,callback:function(){}},init:function(e,h,g){return this.scope=e||this.scope,Foundation.inherit(this,"data_options"),typeof h=="object"&&c.extend(!0,this.settings,h),typeof h!="string"?(this.settings.init||this.events(),this.settings.init):this[h].call(this,g)},events:function(){var e=this;c(this.scope).on("click.fndtn.alerts","[data-alert] a.close",function(j){var h=c(this).closest("[data-alert]"),g=c.extend({},e.settings,e.data_options(h));j.preventDefault(),h[g.animation](g.speed,function(){c(this).remove(),g.callback()})}),this.settings.init=!0},off:function(){c(this.scope).off(".fndtn.alerts")},reflow:function(){}}}(Foundation.zj,this,this.document),function(c,a,d,b){Foundation.libs.clearing={name:"clearing",version:"4.3.2",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="//:0"><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close",init:!1,locked:!1},init:function(g,j,h){var e=this;return Foundation.inherit(this,"set_data get_data remove_data throttle data_options"),typeof j=="object"&&(h=c.extend(!0,this.settings,j)),typeof j!="string"?(c(this.scope).find("ul[data-clearing]").each(function(){var i=c(this),o=o||{},l=i.find("li"),k=e.get_data(i);!k&&l.length>0&&(o.$parent=i.parent(),e.set_data(i,c.extend({},e.settings,o,e.data_options(i))),e.assemble(i.find("li")),e.settings.init||e.events().swipe_events())}),this.settings.init):this[j].call(this,h)},events:function(){var e=this;return c(this.scope).on("click.fndtn.clearing","ul[data-clearing] li",function(j,l,h){var l=l||c(this),h=h||l,k=l.next("li"),n=e.get_data(l.parent()),g=c(j.target);j.preventDefault(),n||e.init(),h.hasClass("visible")&&l[0]===h[0]&&k.length>0&&e.is_open(l)&&(h=k,g=h.find("img")),e.open(g,l,h),e.update_paddles(h)}).on("click.fndtn.clearing",".clearing-main-next",function(g){this.nav(g,"next")}.bind(this)).on("click.fndtn.clearing",".clearing-main-prev",function(g){this.nav(g,"prev")}.bind(this)).on("click.fndtn.clearing",this.settings.close_selectors,function(g){Foundation.libs.clearing.close(g,this)}).on("keydown.fndtn.clearing",function(g){this.keydown(g)}.bind(this)),c(a).on("resize.fndtn.clearing",function(){this.resize()}.bind(this)),this.settings.init=!0,this},swipe_events:function(){var e=this;c(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(g){g.touches||(g=g.originalEvent);var h={start_page_x:g.touches[0].pageX,start_page_y:g.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:b};c(this).data("swipe-transition",h),g.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(j){j.touches||(j=j.originalEvent);if(j.touches.length>1||j.scale&&j.scale!==1){return}var h=c(this).data("swipe-transition");typeof h=="undefined"&&(h={}),h.delta_x=j.touches[0].pageX-h.start_page_x,typeof h.is_scrolling=="undefined"&&(h.is_scrolling=!!(h.is_scrolling||Math.abs(h.delta_x)<Math.abs(j.touches[0].pageY-h.start_page_y)));if(!h.is_scrolling&&!h.active){j.preventDefault();var g=h.delta_x<0?"next":"prev";h.active=!0,e.nav(j,g)}}).on("touchend.fndtn.clearing",".visible-img",function(g){c(this).data("swipe-transition",{}),g.stopPropagation()})},assemble:function(h){var p=h.parent();p.after('<div id="foundationClearingHolder"></div>');var k=c("#foundationClearingHolder"),g=this.get_data(p),j=p.detach(),l={grid:'<div class="carousel">'+this.outerHTML(j[0])+"</div>",viewing:g.templates.viewing},e='<div class="clearing-assembled"><div>'+l.viewing+l.grid+"</div></div>";return k.after(e).remove()},open:function(l,h,q){var k=q.closest(".clearing-assembled"),g=k.find("div").first(),j=g.find(".visible-img"),p=j.find("img").not(l);this.locked()||(p.attr("src",this.load(l)).css("visibility","hidden"),this.loaded(p,function(){p.css("visibility","visible"),k.addClass("clearing-blackout"),g.addClass("clearing-container"),j.show(),this.fix_height(q).caption(j.find(".clearing-caption"),l).center(p).shift(h,q,function(){q.siblings().removeClass("visible"),q.addClass("visible")})}.bind(this)))},close:function(g,k){g.preventDefault();var j=function(i){return/blackout/.test(i.selector)?i:i.closest(".clearing-blackout")}(c(k)),e,h;return k===g.target&&j&&(e=j.find("div").first(),h=e.find(".visible-img"),this.settings.prev_index=0,j.find("ul[data-clearing]").attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),e.removeClass("clearing-container"),h.hide()),!1},is_open:function(g){return g.parent().prop("style").length>0},keydown:function(e){var g=c(".clearing-blackout").find("ul[data-clearing]");e.which===39&&this.go(g,"next"),e.which===37&&this.go(g,"prev"),e.which===27&&c("a.clearing-close").trigger("click")},nav:function(e,h){var g=c(".clearing-blackout").find("ul[data-clearing]");e.preventDefault(),this.go(g,h)},resize:function(){var e=c(".clearing-blackout .visible-img").find("img");e.length&&this.center(e)},fix_height:function(e){var h=e.parent().children(),g=this;return h.each(function(){var i=c(this),j=i.find("img");i.height()>g.outerHeight(j)&&i.addClass("fix-height")}).closest("ul").width(h.length*100+"%"),this},update_paddles:function(h){var g=h.closest(".carousel").siblings(".visible-img");h.next().length>0?g.find(".clearing-main-next").removeClass("disabled"):g.find(".clearing-main-next").addClass("disabled"),h.prev().length>0?g.find(".clearing-main-prev").removeClass("disabled"):g.find(".clearing-main-prev").addClass("disabled")},center:function(g){return this.rtl?g.css({marginRight:-(this.outerWidth(g)/2),marginTop:-(this.outerHeight(g)/2)}):g.css({marginLeft:-(this.outerWidth(g)/2),marginTop:-(this.outerHeight(g)/2)}),this},load:function(h){if(h[0].nodeName==="A"){var g=h.attr("href")}else{var g=h.parent().attr("href")}return this.preload(h),g?g:h.attr("src")},preload:function(g){this.img(g.closest("li").next()).img(g.closest("li").prev())},loaded:function(i,g){function j(){g()}function h(){this.one("load",j);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var l=this.attr("src"),k=l.match(/\?/)?"&":"?";k+="random="+(new Date).getTime(),this.attr("src",l+k)}}if(!i.attr("src")){j();return}i[0].complete||i[0].readyState===4?j():h.call(i)},img:function(h){if(h.length){var g=new Image,i=h.find("a");i.length?g.src=i.attr("href"):g.src=h.find("img").attr("src")}return this},caption:function(h,g){var i=g.data("caption");return i?h.html(i).show():h.text("").hide(),this},go:function(i,g){var j=i.find(".visible"),h=j[g]();h.length&&h.find("img").trigger("click",[j,h])},shift:function(l,v,j){var g=v.parent(),k=this.settings.prev_index||v.index(),w=this.direction(g,l,v),h=parseInt(g.css("left"),10),q=this.outerWidth(v),p;v.index()!==k&&!/skip/.test(w)?/left/.test(w)?(this.lock(),g.animate({left:h+q},300,this.unlock())):/right/.test(w)&&(this.lock(),g.animate({left:h-q},300,this.unlock())):/skip/.test(w)&&(p=v.index()-this.settings.up_count,this.lock(),p>0?g.animate({left:-(p*q)},300,this.unlock()):g.animate({left:0},300,this.unlock())),j()},direction:function(j,q,l){var h=j.find("li"),k=this.outerWidth(h)+this.outerWidth(h)/4,p=Math.floor(this.outerWidth(c(".clearing-container"))/k)-1,g=h.index(l),e;return this.settings.up_count=p,this.adjacent(this.settings.prev_index,g)?g>p&&g>this.settings.prev_index?e="right":g>p-1&&g<=this.settings.prev_index?e="left":e=!1:e="skip",this.settings.prev_index=g,e},adjacent:function(h,g){for(var i=g+1;i>=g-1;i--){if(i===h){return !0}}return !1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},outerHTML:function(g){return g.outerHTML||(new XMLSerializer).serializeToString(g)},off:function(){c(this.scope).off(".fndtn.clearing"),c(a).off(".fndtn.clearing"),this.remove_data(),this.settings.init=!1},reflow:function(){this.init()}}}(Foundation.zj,this,this.document),function(g,b,j){function a(i){return i}function c(i){return decodeURIComponent(i.replace(d," "))}var d=/\+/g,h=g.cookie=function(e,y,w){if(y!==j){w=g.extend({},h.defaults,w),y===null&&(w.expires=-1);if(typeof w.expires=="number"){var q=w.expires,n=w.expires=new Date;n.setDate(n.getDate()+q)}return y=h.json?JSON.stringify(y):String(y),b.cookie=[encodeURIComponent(e),"=",h.raw?y:encodeURIComponent(y),w.expires?"; expires="+w.expires.toUTCString():"",w.path?"; path="+w.path:"",w.domain?"; domain="+w.domain:"",w.secure?"; secure":""].join("")}var t=h.raw?a:c,o=b.cookie.split("; ");for(var i=0,s=o.length;i<s;i++){var x=o[i].split("=");if(t(x.shift())===e){var k=t(x.join("="));return h.json?JSON.parse(k):k}}return null};h.defaults={},g.removeCookie=function(e,i){return g.cookie(e)!==null?(g.cookie(e,null,i),!0):!1}}(Foundation.zj,document),function(c,a,d,b){Foundation.libs.dropdown={name:"dropdown",version:"4.3.2",settings:{activeClass:"open",is_hover:!1,opened:function(){},closed:function(){}},init:function(e,h,g){return this.scope=e||this.scope,Foundation.inherit(this,"throttle scrollLeft data_options"),typeof h=="object"&&c.extend(!0,this.settings,h),typeof h!="string"?(this.settings.init||this.events(),this.settings.init):this[h].call(this,g)},events:function(){var e=this;c(this.scope).on("click.fndtn.dropdown","[data-dropdown]",function(g){var h=c.extend({},e.settings,e.data_options(c(this)));g.preventDefault(),h.is_hover||e.toggle(c(this))}).on("mouseenter","[data-dropdown]",function(g){var h=c.extend({},e.settings,e.data_options(c(this)));h.is_hover&&e.toggle(c(this))}).on("mouseleave","[data-dropdown-content]",function(h){var j=c('[data-dropdown="'+c(this).attr("id")+'"]'),g=c.extend({},e.settings,e.data_options(j));g.is_hover&&e.close.call(e,c(this))}).on("opened.fndtn.dropdown","[data-dropdown-content]",this.settings.opened).on("closed.fndtn.dropdown","[data-dropdown-content]",this.settings.closed),c(d).on("click.fndtn.dropdown",function(g){var h=c(g.target).closest("[data-dropdown-content]");if(c(g.target).data("dropdown")||c(g.target).parent().data("dropdown")){return}if(!c(g.target).data("revealId")&&h.length>0&&(c(g.target).is("[data-dropdown-content]")||c.contains(h.first()[0],g.target))){g.stopPropagation();return}e.close.call(e,c("[data-dropdown-content]"))}),c(a).on("resize.fndtn.dropdown",e.throttle(function(){e.resize.call(e)},50)).trigger("resize"),this.settings.init=!0},close:function(e){var g=this;e.each(function(){c(this).hasClass(g.settings.activeClass)&&(c(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(g.settings.activeClass),c(this).trigger("closed"))})},open:function(h,g){this.css(h.addClass(this.settings.activeClass),g),h.trigger("opened")},toggle:function(e){var g=c("#"+e.data("dropdown"));if(g.length===0){return}this.close.call(this,c("[data-dropdown-content]").not(g)),g.hasClass(this.settings.activeClass)?this.close.call(this,g):(this.close.call(this,c("[data-dropdown-content]")),this.open.call(this,g,e))},resize:function(){var e=c("[data-dropdown-content].open"),g=c("[data-dropdown='"+e.attr("id")+"']");e.length&&g.length&&this.css(e,g)},css:function(k,h){var e=k.offsetParent(),g=h.offset();g.top-=e.offset().top,g.left-=e.offset().left;if(this.small()){k.css({position:"absolute",width:"95%","max-width":"none",top:g.top+this.outerHeight(h)}),k.css(Foundation.rtl?"right":"left","2.5%")}else{if(!Foundation.rtl&&c(a).width()>this.outerWidth(k)+h.offset().left&&!this.data_options(h).align_right){var j=g.left;k.hasClass("right")&&k.removeClass("right")}else{k.hasClass("right")||k.addClass("right");var j=g.left-(this.outerWidth(k)-this.outerWidth(h))}k.attr("style","").css({position:"absolute",top:g.top+this.outerHeight(h),left:j})}return k},small:function(){return c(a).width()<768||c("html").hasClass("lt-ie9")},off:function(){c(this.scope).off(".fndtn.dropdown"),c("html, body").off(".fndtn.dropdown"),c(a).off(".fndtn.dropdown"),c("[data-dropdown-content]").off(".fndtn.dropdown"),this.settings.init=!1},reflow:function(){}}}(Foundation.zj,this,this.document),function(d,b,g,c){Foundation.libs.forms={name:"forms",version:"4.3.2",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(e,i,h){return typeof i=="object"&&d.extend(!0,this.settings,i),typeof i!="string"?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[i].call(this,h)},assemble:function(){var e=this;d('form.custom input[type="radio"],[type="checkbox"]',d(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(function(h,i){e.set_custom_markup(i)}).change(function(){e.set_custom_markup(this)}),d("form.custom select",d(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var e=this;d(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(h){h.preventDefault(),h.stopPropagation(),e.toggle_checkbox(d(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(h){h.preventDefault(),h.stopPropagation(),e.toggle_radio(d(this))}).on("change.fndtn.forms","form.custom select",function(h,i){if(d(this).is('[data-customforms="disabled"]')){return}e.refresh_custom_select(d(this),i)}).on("click.fndtn.forms","form.custom label",function(j){if(d(j.target).is("label")){var l=d("#"+e.escape(d(this).attr("for"))).not('[data-customforms="disabled"]'),h,k;l.length!==0&&(l.attr("type")==="checkbox"?(j.preventDefault(),h=d(this).find("span.custom.checkbox"),h.length===0&&(h=l.add(this).siblings("span.custom.checkbox").first()),e.toggle_checkbox(h)):l.attr("type")==="radio"&&(j.preventDefault(),k=d(this).find("span.custom.radio"),k.length===0&&(k=l.add(this).siblings("span.custom.radio").first()),e.toggle_radio(k)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return !1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(h){var k=d(this),i=k.closest("div.custom.dropdown"),j=a(i,"select");i.hasClass("open")||d(e.scope).trigger("click"),h.preventDefault();if(!1===j.is(":disabled")){return i.toggleClass("open"),i.hasClass("open")?d(e.scope).on("click.fndtn.forms.customdropdown",function(){i.removeClass("open"),d(e.scope).off(".fndtn.forms.customdropdown")}):d(e.scope).on(".fndtn.forms.customdropdown"),!1}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(j){var l=d(this),k=l.closest("div.custom.dropdown"),p=a(k,"select"),i=0;j.preventDefault(),j.stopPropagation();if(!d(this).hasClass("disabled")){d("div.dropdown").not(k).removeClass("open");var h=l.closest("ul").find("li.selected");h.removeClass("selected"),l.addClass("selected"),k.removeClass("open").find("a.current").text(l.text()),l.closest("ul").find("li").each(function(o){l[0]===this&&(i=o)}),p[0].selectedIndex=i,p.data("prevalue",h.html());if(typeof g.createEvent!="undefined"){var n=g.createEvent("HTMLEvents");n.initEvent("change",!0,!0),p[0].dispatchEvent(n)}else{p[0].fireEvent("onchange")}}}),d(b).on("keydown",function(v){var h=g.activeElement,w=Foundation.libs.forms,i=d(".custom.dropdown"),q=a(i,"select"),p=d("input,select,textarea,button");if(i.length>0&&i.hasClass("open")){v.preventDefault(),v.which===9&&(d(p[d(p).index(q)+1]).focus(),i.removeClass("open")),v.which===13&&i.find("li.selected").trigger("click"),v.which===27&&i.removeClass("open");if(v.which>=65&&v.which<=90){var k=w.go_to(i,v.which),j=i.find("li.selected");k&&(j.removeClass("selected"),w.scrollTo(k.addClass("selected"),300))}if(v.which===38){var j=i.find("li.selected"),n=j.prev(":not(.disabled)");n.length>0&&(n.parent()[0].scrollTop=n.parent().scrollTop()-w.outerHeight(n),j.removeClass("selected"),n.addClass("selected"))}else{if(v.which===40){var j=i.find("li.selected"),k=j.next(":not(.disabled)");k.length>0&&(k.parent()[0].scrollTop=k.parent().scrollTop()+w.outerHeight(k),j.removeClass("selected"),k.addClass("selected"))}}}}),d(b).on("keyup",function(j){var k=g.activeElement,h=d(".custom.dropdown");k===h.find(".current")[0]&&h.find(".selector").focus().click()}),this.settings.init=!0},go_to:function(o,j){var p=o.find("li"),l=p.length;if(l>0){for(var h=0;h<l;h++){var k=p.eq(h).text().charAt(0).toLowerCase();if(k===String.fromCharCode(j).toLowerCase()){return p.eq(h)}}}},scrollTo:function(o,j){if(j<0){return}var p=o.parent(),l=this.outerHeight(o),h=l*o.index()-p.scrollTop(),k=h/j*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(k,10))||(p[0].scrollTop=p.scrollTop()+k,this.scrollTo(o,j-10))}.bind(this),10)},set_custom_markup:function(h){var k=d(h),j=k.attr("type"),e=k.next("span.custom."+j);k.parent().hasClass("switch")||k.addClass("hidden-field"),e.length===0&&(e=d('<span class="custom '+j+'"></span>').insertAfter(k)),e.toggleClass("checked",k.is(":checked")),e.toggleClass("disabled",k.is(":disabled"))},append_custom_select:function(G,q){var e=Foundation.libs.forms,y=d(q),H=y.next("div.custom.dropdown"),k=H.find("ul"),F=H.find(".current"),D=H.find(".selector"),A=y.find("option"),x=A.filter(":selected"),C=y.attr("class")?y.attr("class").split(" "):[],z=0,j="",B,E=!1;if(H.length===0){var w=y.hasClass("small")?"small":y.hasClass("medium")?"medium":y.hasClass("large")?"large":y.hasClass("expand")?"expand":"";H=d('<div class="'+["custom","dropdown",w].concat(C).filter(function(i,h,l){return i===""?!1:l.indexOf(i)===h}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),D=H.find(".selector"),k=H.find("ul"),j=A.map(function(){var h=d(this).attr("class")?d(this).attr("class"):"";return"<li class='"+h+"'>"+d(this).html()+"</li>"}).get().join(""),k.append(j),E=H.prepend('<a href="#" class="current">'+(x.html()||"")+"</a>").find(".current"),y.after(H).addClass("hidden-field")}else{j=A.map(function(){return"<li>"+d(this).html()+"</li>"}).get().join(""),k.html("").append(j)}e.assign_id(y,H),H.toggleClass("disabled",y.is(":disabled")),B=k.find("li"),e.cache[H.data("id")]=B.length,A.each(function(h){this.selected&&(B.eq(h).addClass("selected"),E&&E.html(d(this).html())),d(this).is(":disabled")&&B.eq(h).addClass("disabled")});if(!H.is(".small, .medium, .large, .expand")){H.addClass("open");var e=Foundation.libs.forms;e.hidden_fix.adjust(k),z=e.outerWidth(B)>z?e.outerWidth(B):z,Foundation.libs.forms.hidden_fix.reset(),H.removeClass("open")}},assign_id:function(i,h){var j=[+(new Date),Foundation.random_str(5)].join("-");i.attr("data-id",j),h.attr("data-id",j)},refresh_custom_select:function(v,j){var e=this,k=0,w=v.next(),h=v.find("option"),q=w.find("ul"),p=w.find("li");if(h.length!==this.cache[w.data("id")]||j){q.html("");var l="";h.each(function(){var i=d(this),s=i.html(),o=this.selected;l+='<li class="'+(o?" selected ":"")+(i.is(":disabled")?" disabled ":"")+'">'+s+"</li>",o&&w.find(".current").html(s)}),q.html(l),w.removeAttr("style"),q.removeAttr("style"),w.find("li").each(function(){w.addClass("open"),e.outerWidth(d(this))>k&&(k=e.outerWidth(d(this))),w.removeClass("open")}),p=w.find("li"),this.cache[w.data("id")]=p.length}},refresh_custom_selection:function(e){var h=d("option:selected",e).text();d("a.current",e.next()).text(h)},toggle_checkbox:function(i){var h=i.prev(),j=h[0];!1===h.is(":disabled")&&(j.checked=j.checked?!1:!0,i.toggleClass("checked"),h.trigger("change"))},toggle_radio:function(j){var h=j.prev(),k=h.closest("form.custom"),i=h[0];!1===h.is(":disabled")&&(k.find('input[type="radio"][name="'+this.escape(h.attr("name"))+'"]').next().not(j).removeClass("checked"),j.hasClass("checked")||j.toggleClass("checked"),i.checked=j.hasClass("checked"),h.trigger("change"))},escape:function(h){return h?h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(e){var h=this;h.hidden=e.parents(),h.hidden=h.hidden.add(e).filter(":hidden"),h.hidden.each(function(){var i=d(this);h.tmp.push(i.attr("style")),i.css({visibility:"hidden",display:"block"})})},reset:function(){var e=this;e.hidden.each(function(k){var h=d(this),j=e.tmp[k];j===c?h.removeAttr("style"):h.attr("style",j)}),e.tmp=[],e.hidden=null}},off:function(){d(this.scope).off(".fndtn.forms")},reflow:function(){}};var a=function(e,h){var e=e.prev();while(e.length){if(e.is(h)){return e}e=e.prev()}return d()}}(Foundation.zj,this,this.document),function(d,b,g,c){var a=a||!1;Foundation.libs.joyride={name:"joyride",version:"4.3.2",defaults:{expose:!1,modal:!1,tipLocation:"bottom",nubPosition:"auto",scrollSpeed:300,timer:0,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],exposed:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookieExpires:365,tipContainer:"body",postRideCallback:function(){},postStepCallback:function(){},preStepCallback:function(){},preRideCallback:function(){},postExposeCallback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'},exposeAddClass:""},settings:{},init:function(e,i,h){return this.scope=e||this.scope,Foundation.inherit(this,"throttle data_options scrollTo scrollLeft delay"),typeof i=="object"?d.extend(!0,this.settings,this.defaults,i):d.extend(!0,this.settings,this.defaults,h),typeof i!="string"?(this.settings.init||this.events(),this.settings.init):this[i].call(this,h)},events:function(){var e=this;d(this.scope).on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(h){h.preventDefault(),this.settings.$li.next().length<1?this.end():this.settings.timer>0?(clearTimeout(this.settings.automate),this.hide(),this.show(),this.startTimer()):(this.hide(),this.show())}.bind(this)).on("click.joyride",".joyride-close-tip",function(h){h.preventDefault(),this.end()}.bind(this)),d(b).on("resize.fndtn.joyride",e.throttle(function(){if(d("[data-joyride]").length>0&&e.settings.$next_tip){if(e.settings.exposed.length>0){var h=d(e.settings.exposed);h.each(function(){var i=d(this);e.un_expose(i),e.expose(i)})}e.is_phone()?e.pos_phone():e.pos_default(!1,!0)}},100)),this.settings.init=!0},start:function(){var h=this,k=d(this.scope).find("[data-joyride]"),j=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],e=j.length;this.settings.init||this.events(),this.settings.$content_el=k,this.settings.$body=d(this.settings.tipContainer),this.settings.body_offset=d(this.settings.tipContainer).position(),this.settings.$tip_content=this.settings.$content_el.find("> li"),this.settings.paused=!1,this.settings.attempts=0,this.settings.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},typeof d.cookie!="function"&&(this.settings.cookieMonster=!1);if(!this.settings.cookieMonster||this.settings.cookieMonster&&d.cookie(this.settings.cookieName)===null){this.settings.$tip_content.each(function(p){var i=d(this);d.extend(!0,h.settings,h.data_options(i));for(var l=e-1;l>=0;l--){h.settings[j[l]]=parseInt(h.settings[j[l]],10)}h.create({$li:i,index:p})}),!this.settings.startTimerOnClick&&this.settings.timer>0?(this.show("init"),this.startTimer()):this.show("init")}},resume:function(){this.set_li(),this.show()},tip_template:function(e){var i,h;return e.tip_class=e.tip_class||"",i=d(this.settings.template.tip).addClass(e.tip_class),h=d.trim(d(e.li).html())+this.button_text(e.button_text)+this.settings.template.link+this.timer_instance(e.index),i.append(d(this.settings.template.wrapper)),i.first().attr("data-index",e.index),d(".joyride-content-wrapper",i).append(h),i[0]},timer_instance:function(e){var h;return e===0&&this.settings.startTimerOnClick&&this.settings.timer>0||this.settings.timer===0?h="":h=this.outerHTML(d(this.settings.template.timer)[0]),h},button_text:function(e){return this.settings.nextButton?(e=d.trim(e)||"Next",e=this.outerHTML(d(this.settings.template.button).append(e)[0])):e="",e},create:function(h){var k=h.$li.attr("data-button")||h.$li.attr("data-text"),j=h.$li.attr("class"),e=d(this.tip_template({tip_class:j,index:h.index,button_text:k,li:h.$li}));d(this.settings.tipContainer).append(e)},show:function(e){var h=null;this.settings.$li===c||d.inArray(this.settings.$li.index(),this.settings.pauseAfter)===-1?(this.settings.paused?this.settings.paused=!1:this.set_li(e),this.settings.attempts=0,this.settings.$li.length&&this.settings.$target.length>0?(e&&(this.settings.preRideCallback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.show_modal()),this.settings.preStepCallback(this.settings.$li.index(),this.settings.$next_tip),this.settings.modal&&this.settings.expose&&this.expose(),this.settings.tipSettings=d.extend(this.settings,this.data_options(this.settings.$li)),this.settings.timer=parseInt(this.settings.timer,10),this.settings.tipSettings.tipLocationPattern=this.settings.tipLocationPatterns[this.settings.tipSettings.tipLocation],/body/i.test(this.settings.$target.selector)||this.scroll_to(),this.is_phone()?this.pos_phone(!0):this.pos_default(!0),h=this.settings.$next_tip.find(".joyride-timer-indicator"),/pop/i.test(this.settings.tipAnimation)?(h.width(0),this.settings.timer>0?(this.settings.$next_tip.show(),this.delay(function(){h.animate({width:h.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)):this.settings.$next_tip.show()):/fade/i.test(this.settings.tipAnimation)&&(h.width(0),this.settings.timer>0?(this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed).show(),this.delay(function(){h.animate({width:h.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)):this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed)),this.settings.$current_tip=this.settings.$next_tip):this.settings.$li&&this.settings.$target.length<1?this.show():this.end()):this.settings.paused=!0},is_phone:function(){return a?a.mq("only screen and (max-width: 767px)")||d(".lt-ie9").length>0:d(b).width()<767},hide:function(){this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.modal||d(".joyride-modal-bg").hide(),this.settings.$current_tip.css("visibility","hidden"),setTimeout(d.proxy(function(){this.hide(),this.css("visibility","visible")},this.settings.$current_tip),0),this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip)},set_li:function(h){h?(this.settings.$li=this.settings.$tip_content.eq(this.settings.startOffset),this.set_next_tip(),this.settings.$current_tip=this.settings.$next_tip):(this.settings.$li=this.settings.$li.next(),this.set_next_tip()),this.set_target()},set_next_tip:function(){this.settings.$next_tip=d(".joyride-tip-guide[data-index='"+this.settings.$li.index()+"']"),this.settings.$next_tip.data("closed","")},set_target:function(){var h=this.settings.$li.attr("data-class"),j=this.settings.$li.attr("data-id"),e=function(){return j?d(g.getElementById(j)):h?d("."+h).first():d("body")};this.settings.$target=e()},scroll_to:function(){var h,e;h=d(b).height()/2,e=Math.ceil(this.settings.$target.offset().top-h+this.outerHeight(this.settings.$next_tip)),e>0&&this.scrollTo(d("html, body"),e,this.settings.scrollSpeed)},paused:function(){return d.inArray(this.settings.$li.index()+1,this.settings.pauseAfter)===-1},restart:function(){this.hide(),this.settings.$li=c,this.show("init")},pos_default:function(j,e){var p=Math.ceil(d(b).height()/2),w=this.settings.$next_tip.offset(),h=this.settings.$next_tip.find(".joyride-nub"),v=Math.ceil(this.outerWidth(h)/2),t=Math.ceil(this.outerHeight(h)/2),q=j||!1;q&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),typeof e=="undefined"&&(e=!1);if(!/body/i.test(this.settings.$target.selector)){if(this.bottom()){var k=this.settings.$target.offset().left;Foundation.rtl&&(k=this.settings.$target.offset().width-this.settings.$next_tip.width()+k),this.settings.$next_tip.css({top:this.settings.$target.offset().top+t+this.outerHeight(this.settings.$target),left:k}),this.nub_position(h,this.settings.tipSettings.nubPosition,"top")}else{if(this.top()){var k=this.settings.$target.offset().left;Foundation.rtl&&(k=this.settings.$target.offset().width-this.settings.$next_tip.width()+k),this.settings.$next_tip.css({top:this.settings.$target.offset().top-this.outerHeight(this.settings.$next_tip)-t,left:k}),this.nub_position(h,this.settings.tipSettings.nubPosition,"bottom")}else{this.right()?(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.outerWidth(this.settings.$target)+this.settings.$target.offset().left+v}),this.nub_position(h,this.settings.tipSettings.nubPosition,"left")):this.left()&&(this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-v}),this.nub_position(h,this.settings.tipSettings.nubPosition,"right"))}}!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tipSettings.tipLocationPattern.length&&(h.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),this.settings.tipSettings.tipLocation=this.settings.tipSettings.tipLocationPattern[this.settings.attempts],this.settings.attempts++,this.pos_default())}else{this.settings.$li.length&&this.pos_modal(h)}q&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_phone:function(j){var q=this.outerHeight(this.settings.$next_tip),l=this.settings.$next_tip.offset(),h=this.outerHeight(this.settings.$target),k=d(".joyride-nub",this.settings.$next_tip),p=Math.ceil(this.outerHeight(k)/2),e=j||!1;k.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),e&&(this.settings.$next_tip.css("visibility","hidden"),this.settings.$next_tip.show()),/body/i.test(this.settings.$target.selector)?this.settings.$li.length&&this.pos_modal(k):this.top()?(this.settings.$next_tip.offset({top:this.settings.$target.offset().top-q-p}),k.addClass("bottom")):(this.settings.$next_tip.offset({top:this.settings.$target.offset().top+h+p}),k.addClass("top")),e&&(this.settings.$next_tip.hide(),this.settings.$next_tip.css("visibility","visible"))},pos_modal:function(h){this.center(),h.hide(),this.show_modal()},show_modal:function(){if(!this.settings.$next_tip.data("closed")){var e=d(".joyride-modal-bg");e.length<1&&d("body").append(this.settings.template.modal).show(),/pop/i.test(this.settings.tipAnimation)?e.show():e.fadeIn(this.settings.tipAnimationFadeSpeed)}},expose:function(){var p,k,h,j,l,e="expose-"+Math.floor(Math.random()*10000);if(arguments.length>0&&arguments[0] instanceof d){h=arguments[0]}else{if(!this.settings.$target||!!/body/i.test(this.settings.$target.selector)){return !1}h=this.settings.$target}if(h.length<1){return b.console&&console.error("element not valid",h),!1}p=d(this.settings.template.expose),this.settings.$body.append(p),p.css({top:h.offset().top,left:h.offset().left,width:this.outerWidth(h,!0),height:this.outerHeight(h,!0)}),k=d(this.settings.template.exposeCover),j={zIndex:h.css("z-index"),position:h.css("position")},l=h.attr("class")==null?"":h.attr("class"),h.css("z-index",parseInt(p.css("z-index"))+1),j.position=="static"&&h.css("position","relative"),h.data("expose-css",j),h.data("orig-class",l),h.attr("class",l+" "+this.settings.exposeAddClass),k.css({top:h.offset().top,left:h.offset().left,width:this.outerWidth(h,!0),height:this.outerHeight(h,!0)}),this.settings.$body.append(k),p.addClass(e),k.addClass(e),h.data("expose",e),this.settings.postExposeCallback(this.settings.$li.index(),this.settings.$next_tip,h),this.add_exposed(h)},un_expose:function(){var p,k,h,j,l,e=!1;if(arguments.length>0&&arguments[0] instanceof d){k=arguments[0]}else{if(!this.settings.$target||!!/body/i.test(this.settings.$target.selector)){return !1}k=this.settings.$target}if(k.length<1){return b.console&&console.error("element not valid",k),!1}p=k.data("expose"),h=d("."+p),arguments.length>1&&(e=arguments[1]),e===!0?d(".joyride-expose-wrapper,.joyride-expose-cover").remove():h.remove(),j=k.data("expose-css"),j.zIndex=="auto"?k.css("z-index",""):k.css("z-index",j.zIndex),j.position!=k.css("position")&&(j.position=="static"?k.css("position",""):k.css("position",j.position)),l=k.data("orig-class"),k.attr("class",l),k.removeData("orig-classes"),k.removeData("expose"),k.removeData("expose-z-index"),this.remove_exposed(k)},add_exposed:function(e){this.settings.exposed=this.settings.exposed||[],e instanceof d||typeof e=="object"?this.settings.exposed.push(e[0]):typeof e=="string"&&this.settings.exposed.push(e)},remove_exposed:function(h){var k,j;h instanceof d?k=h[0]:typeof h=="string"&&(k=h),this.settings.exposed=this.settings.exposed||[],j=this.settings.exposed.length;for(var e=0;e<j;e++){if(this.settings.exposed[e]==k){this.settings.exposed.splice(e,1);return}}},center:function(){var e=d(b);return this.settings.$next_tip.css({top:(e.height()-this.outerHeight(this.settings.$next_tip))/2+e.scrollTop(),left:(e.width()-this.outerWidth(this.settings.$next_tip))/2+this.scrollLeft(e)}),!0},bottom:function(){return/bottom/i.test(this.settings.tipSettings.tipLocation)},top:function(){return/top/i.test(this.settings.tipSettings.tipLocation)},right:function(){return/right/i.test(this.settings.tipSettings.tipLocation)},left:function(){return/left/i.test(this.settings.tipSettings.tipLocation)},corners:function(t){var l=d(b),j=l.height()/2,k=Math.ceil(this.settings.$target.offset().top-j+this.settings.$next_tip.outerHeight()),q=l.width()+this.scrollLeft(l),h=l.height()+k,e=l.height()+l.scrollTop(),p=l.scrollTop();return k<p&&(k<0?p=0:p=k),h>e&&(e=h),[t.offset().top<p,q<t.offset().left+t.outerWidth(),e<t.offset().top+t.outerHeight(),this.scrollLeft(l)>t.offset().left]},visible:function(i){var h=i.length;while(h--){if(i[h]){return !1}}return !0},nub_position:function(i,h,j){h==="auto"?i.addClass(j):i.addClass(h)},startTimer:function(){this.settings.$li.length?this.settings.automate=setTimeout(function(){this.hide(),this.show(),this.startTimer()}.bind(this),this.settings.timer):clearTimeout(this.settings.automate)},end:function(){this.settings.cookieMonster&&d.cookie(this.settings.cookieName,"ridden",{expires:this.settings.cookieExpires,domain:this.settings.cookieDomain}),this.settings.timer>0&&clearTimeout(this.settings.automate),this.settings.modal&&this.settings.expose&&this.un_expose(),this.settings.$next_tip.data("closed",!0),d(".joyride-modal-bg").hide(),this.settings.$current_tip.hide(),this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip),this.settings.postRideCallback(this.settings.$li.index(),this.settings.$current_tip),d(".joyride-tip-guide").remove()},outerHTML:function(h){return h.outerHTML||(new XMLSerializer).serializeToString(h)},off:function(){d(this.scope).off(".joyride"),d(b).off(".joyride"),d(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),d(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(this.settings.automate),this.settings={}},reflow:function(){}}}(Foundation.zj,this,this.document),function(c,a,d,b){Foundation.libs.magellan={name:"magellan",version:"4.3.2",settings:{activeClass:"active",threshold:0},init:function(e,h,g){return this.scope=e||this.scope,Foundation.inherit(this,"data_options"),typeof h=="object"&&c.extend(!0,this.settings,h),typeof h!="string"?(this.settings.init||(this.fixed_magellan=c("[data-magellan-expedition]"),this.set_threshold(),this.last_destination=c("[data-magellan-destination]").last(),this.events()),this.settings.init):this[h].call(this,g)},events:function(){var e=this;c(this.scope).on("arrival.fndtn.magellan","[data-magellan-arrival]",function(h){var k=c(this),g=k.closest("[data-magellan-expedition]"),j=g.attr("data-magellan-active-class")||e.settings.activeClass;k.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(k).removeClass(j),k.addClass(j)}),this.fixed_magellan.on("update-position.fndtn.magellan",function(){var g=c(this)}).trigger("update-position"),c(a).on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var g=c(a).scrollTop();e.fixed_magellan.each(function(){var j=c(this);typeof j.data("magellan-top-offset")=="undefined"&&j.data("magellan-top-offset",j.offset().top),typeof j.data("magellan-fixed-position")=="undefined"&&j.data("magellan-fixed-position",!1);var h=g+e.settings.threshold>j.data("magellan-top-offset"),k=j.attr("data-magellan-top-offset");j.data("magellan-fixed-position")!=h&&(j.data("magellan-fixed-position",h),h?(j.addClass("fixed"),j.css({position:"fixed",top:0})):(j.removeClass("fixed"),j.css({position:"",top:""})),h&&typeof k!="undefined"&&k!=0&&j.css({position:"fixed",top:k+"px"}))})}),this.last_destination.length>0&&c(a).on("scroll.fndtn.magellan",function(j){var g=c(a).scrollTop(),h=g+c(a).height(),k=Math.ceil(e.last_destination.offset().top);c("[data-magellan-destination]").each(function(){var l=c(this),n=l.attr("data-magellan-destination"),i=l.offset().top-g;i<=e.settings.threshold&&c("[data-magellan-arrival='"+n+"']").trigger("arrival"),h>=c(e.scope).height()&&k>g&&k<h&&c("[data-magellan-arrival]").last().trigger("arrival")})}),this.settings.init=!0},set_threshold:function(){typeof this.settings.threshold!="number"&&(this.settings.threshold=this.fixed_magellan.length>0?this.outerHeight(this.fixed_magellan,!0):0)},off:function(){c(this.scope).off(".fndtn.magellan"),c(a).off(".fndtn.magellan")},reflow:function(){}}}(Foundation.zj,this,this.document),function(h,l,d,b){var g=function(){},p=function(o,B){if(o.hasClass(B.slides_container_class)){return this}var t=this,n,w=o,q,a,u,A=0,e,r,z=!1,x=!1;w.children().first().addClass(B.active_slide_class),t.update_slide_number=function(i){B.slide_number&&(q.find("span:first").text(parseInt(i)+1),q.find("span:last").text(w.children().length)),B.bullets&&(a.children().removeClass(B.bullets_active_class),h(a.children().get(i)).addClass(B.bullets_active_class))},t.update_active_link=function(i){var s=h('a[data-orbit-link="'+w.children().eq(i).attr("data-orbit-slide")+'"]');s.parents("ul").find("[data-orbit-link]").removeClass(B.bullets_active_class),s.addClass(B.bullets_active_class)},t.build_markup=function(){w.wrap('<div class="'+B.container_class+'"></div>'),n=w.parent(),w.addClass(B.slides_container_class),B.navigation_arrows&&(n.append(h('<a href="#"><span></span></a>').addClass(B.prev_class)),n.append(h('<a href="#"><span></span></a>').addClass(B.next_class))),B.timer&&(u=h("<div>").addClass(B.timer_container_class),u.append("<span>"),u.append(h("<div>").addClass(B.timer_progress_class)),u.addClass(B.timer_paused_class),n.append(u)),B.slide_number&&(q=h("<div>").addClass(B.slide_number_class),q.append("<span></span> "+B.slide_number_text+" <span></span>"),n.append(q)),B.bullets&&(a=h("<ol>").addClass(B.bullets_container_class),n.append(a),w.children().each(function(i,v){var s=h("<li>").attr("data-orbit-slide",i);a.append(s)})),B.stack_on_small&&n.addClass(B.stack_on_small_class),t.update_slide_number(0),t.update_active_link(0)},t._goto=function(D,G){if(D===A){return !1}typeof r=="object"&&r.restart();var E=w.children(),C="next";z=!0,D<A&&(C="prev"),D>=E.length?D=0:D<0&&(D=E.length-1);var F=h(E.get(A)),y=h(E.get(D));F.css("zIndex",2),F.removeClass(B.active_slide_class),y.css("zIndex",4).addClass(B.active_slide_class),w.trigger("orbit:before-slide-change"),B.before_slide_change(),t.update_active_link(D);var v=function(){var i=function(){A=D,z=!1,G===!0&&(r=t.create_timer(),r.start()),t.update_slide_number(A),w.trigger("orbit:after-slide-change",[{slide_number:A,total_slides:E.length}]),B.after_slide_change(A,E.length)};w.height()!=y.height()&&B.variable_height?w.animate({height:y.height()},250,"linear",i):i()};if(E.length===1){return v(),!1}var s=function(){C==="next"&&e.next(F,y,v),C==="prev"&&e.prev(F,y,v)};y.height()>w.height()&&B.variable_height?w.animate({height:y.height()},250,"linear",s):s()},t.next=function(i){i.stopImmediatePropagation(),i.preventDefault(),t._goto(A+1)},t.prev=function(i){i.stopImmediatePropagation(),i.preventDefault(),t._goto(A-1)},t.link_custom=function(i){i.preventDefault();var v=h(this).attr("data-orbit-link");if(typeof v=="string"&&(v=h.trim(v))!=""){var s=n.find("[data-orbit-slide="+v+"]");s.index()!=-1&&t._goto(s.index())}},t.link_bullet=function(i){var s=h(this).attr("data-orbit-slide");typeof s=="string"&&(s=h.trim(s))!=""&&t._goto(parseInt(s))},t.timer_callback=function(){t._goto(A+1,!0)},t.compute_dimensions=function(){var i=h(w.children().get(A)),s=i.height();B.variable_height||w.children().each(function(){h(this).height()>s&&(s=h(this).height())}),w.height(s)},t.create_timer=function(){var i=new c(n.find("."+B.timer_container_class),B,t.timer_callback);return i},t.stop_timer=function(){typeof r=="object"&&r.stop()},t.toggle_timer=function(){var i=n.find("."+B.timer_container_class);i.hasClass(B.timer_paused_class)?(typeof r=="undefined"&&(r=t.create_timer()),r.start()):typeof r=="object"&&r.stop()},t.init=function(){t.build_markup(),B.timer&&(r=t.create_timer(),r.start()),e=new j(B,w),B.animation==="slide"&&(e=new k(B,w)),n.on("click","."+B.next_class,t.next),n.on("click","."+B.prev_class,t.prev),n.on("click","[data-orbit-slide]",t.link_bullet),n.on("click",t.toggle_timer),B.swipe&&n.on("touchstart.fndtn.orbit",function(s){s.touches||(s=s.originalEvent);var i={start_page_x:s.touches[0].pageX,start_page_y:s.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:b};n.data("swipe-transition",i),s.stopPropagation()}).on("touchmove.fndtn.orbit",function(s){s.touches||(s=s.originalEvent);if(s.touches.length>1||s.scale&&s.scale!==1){return}var i=n.data("swipe-transition");typeof i=="undefined"&&(i={}),i.delta_x=s.touches[0].pageX-i.start_page_x,typeof i.is_scrolling=="undefined"&&(i.is_scrolling=!!(i.is_scrolling||Math.abs(i.delta_x)<Math.abs(s.touches[0].pageY-i.start_page_y)));if(!i.is_scrolling&&!i.active){s.preventDefault();var v=i.delta_x<0?A+1:A-1;i.active=!0,t._goto(v)}}).on("touchend.fndtn.orbit",function(i){n.data("swipe-transition",{}),i.stopPropagation()}),n.on("mouseenter.fndtn.orbit",function(i){B.timer&&B.pause_on_hover&&t.stop_timer()}).on("mouseleave.fndtn.orbit",function(i){B.timer&&B.resume_on_mouseout&&r.start()}),h(d).on("click","[data-orbit-link]",t.link_custom),h(l).on("resize",t.compute_dimensions),h(l).on("load",t.compute_dimensions),h(l).on("load",function(){n.prev(".preloader").css("display","none")}),w.trigger("orbit:ready")},t.init()},c=function(y,B,w){var q=this,x=B.timer_speed,C=y.find("."+B.timer_progress_class),v,A,z=-1;this.update_progress=function(i){var a=C.clone();a.attr("style",""),a.css("width",i+"%"),C.replaceWith(a),C=a},this.restart=function(){clearTimeout(A),y.addClass(B.timer_paused_class),z=-1,q.update_progress(0)},this.start=function(){if(!y.hasClass(B.timer_paused_class)){return !0}z=z===-1?x:z,y.removeClass(B.timer_paused_class),v=(new Date).getTime(),C.animate({width:"100%"},z,"linear"),A=setTimeout(function(){q.restart(),w()},z),y.trigger("orbit:timer-started")},this.stop=function(){if(y.hasClass(B.timer_paused_class)){return !0}clearTimeout(A),y.addClass(B.timer_paused_class);var e=(new Date).getTime();z-=e-v;var a=100-z/x*100;q.update_progress(a),y.trigger("orbit:timer-stopped")}},k=function(e,w){var u=e.animation_speed,a=h("html[dir=rtl]").length===1,q=a?"marginRight":"marginLeft",v={};v[q]="0%",this.next=function(o,i,r){i.animate(v,u,"linear",function(){o.css(q,"100%"),r()})},this.prev=function(o,i,r){i.css(q,"-100%"),i.animate(v,u,"linear",function(){o.css(q,"100%"),r()})}},j=function(e,u){var q=e.animation_speed,a=h("html[dir=rtl]").length===1,o=a?"marginRight":"marginLeft";this.next=function(r,i,s){i.css({margin:"0%",opacity:"0.01"}),i.animate({opacity:"1"},q,"linear",function(){r.css("margin","100%"),s()})},this.prev=function(r,i,s){i.css({margin:"0%",opacity:"0.01"}),i.animate({opacity:"1"},q,"linear",function(){r.css("margin","100%"),s()})}};Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"4.3.2",settings:{animation:"slide",timer_speed:10000,pause_on_hover:!0,resume_on_mouseout:!1,animation_speed:500,stack_on_small:!1,navigation_arrows:!0,slide_number:!0,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:!0,timer:!0,variable_height:!1,swipe:!0,before_slide_change:g,after_slide_change:g},init:function(q,w,s){var e=this;Foundation.inherit(e,"data_options"),typeof w=="object"&&h.extend(!0,e.settings,w);if(h(q).is("[data-orbit]")){var v=h(q),a=e.data_options(v);new p(v,h.extend({},e.settings,a))}h("[data-orbit]",q).each(function(i,y){var u=h(y),x=e.data_options(u);new p(u,h.extend({},e.settings,x))})}}}(Foundation.zj,this,this.document),function(c,a,d,b){Foundation.libs.reveal={name:"reveal",version:"4.3.2",locked:!1,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:!0,closeOnEsc:!0,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:c(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,h,g){return Foundation.inherit(this,"data_options delay"),typeof h=="object"?c.extend(!0,this.settings,h):typeof g!="undefined"&&c.extend(!0,this.settings,g),typeof h!="string"?(this.events(),this.settings.init):this[h].call(this,g)},events:function(){var e=this;return c(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(k){k.preventDefault();if(!e.locked){var j=c(this),g=j.data("reveal-ajax");e.locked=!0;if(typeof g=="undefined"){e.open.call(e,j)}else{var h=g===!0?j.attr("href"):g;e.open.call(e,j,{url:h})}}}).on("click.fndtn.reveal touchend",this.close_targets(),function(j){j.preventDefault();if(!e.locked){var h=c.extend({},e.settings,e.data_options(c(".reveal-modal.open"))),g=c(j.target)[0]===c("."+h.bgClass)[0];if(g&&!h.closeOnBackgroundClick){return}e.locked=!0,e.close.call(e,g?c(".reveal-modal.open"):c(this).closest(".reveal-modal"))}}),c(this.scope).hasClass("reveal-modal")?c(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):c(this.scope).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video),c("body").bind("keyup.reveal",function(j){var h=c(".reveal-modal.open"),g=c.extend({},e.settings,e.data_options(h));j.which===27&&g.closeOnEsc&&h.foundation("reveal","close")}),!0},open:function(g,l){if(g){if(typeof g.selector!="undefined"){var j=c("#"+g.data("reveal-id"))}else{var j=c(this.scope);l=g}}else{var j=c(this.scope)}if(!j.hasClass("open")){var e=c(".reveal-modal.open");typeof j.data("css-top")=="undefined"&&j.data("css-top",parseInt(j.css("top"),10)).data("offset",this.cache_offset(j)),j.trigger("open"),e.length<1&&this.toggle_bg();if(typeof l=="undefined"||!l.url){this.hide(e,this.settings.css.close),this.show(j,this.settings.css.open)}else{var h=this,k=typeof l.success!="undefined"?l.success:null;c.extend(l,{success:function(o,p,i){c.isFunction(k)&&k(o,p,i),j.html(o),c(j).foundation("section","reflow"),h.hide(e,h.settings.css.close),h.show(j,h.settings.css.open)}}),c.ajax(l)}}},close:function(e){var e=e&&e.length?e:c(this.scope),g=c(".reveal-modal.open");g.length>0&&(this.locked=!0,e.trigger("close"),this.toggle_bg(),this.hide(g,this.settings.css.close))},close_targets:function(){var g="."+this.settings.dismissModalClass;return this.settings.closeOnBackgroundClick?g+", ."+this.settings.bgClass:g},toggle_bg:function(){c("."+this.settings.bgClass).length===0&&(this.settings.bg=c("<div />",{"class":this.settings.bgClass}).appendTo("body")),this.settings.bg.filter(":visible").length>0?this.hide(this.settings.bg):this.show(this.settings.bg)},show:function(j,h){if(h){if(j.parent("body").length===0){var e=j.wrap('<div style="display: none;" />').parent();j.on("closed.fndtn.reveal.wrapped",function(){j.detach().appendTo(e),j.unwrap().unbind("closed.fndtn.reveal.wrapped")}),j.detach().appendTo("body")}if(/pop/i.test(this.settings.animation)){h.top=c(a).scrollTop()-j.data("offset")+"px";var g={top:c(a).scrollTop()+j.data("css-top")+"px",opacity:1};return this.delay(function(){return j.css(h).animate(g,this.settings.animationSpeed,"linear",function(){this.locked=!1,j.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var g={opacity:1};return this.delay(function(){return j.css(h).animate(g,this.settings.animationSpeed,"linear",function(){this.locked=!1,j.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return j.css(h).show().css({opacity:1}).addClass("open").trigger("opened")}return/fade/i.test(this.settings.animation)?j.fadeIn(this.settings.animationSpeed/2):j.show()},hide:function(h,g){if(g){if(/pop/i.test(this.settings.animation)){var e={top:-c(a).scrollTop()-h.data("offset")+"px",opacity:0};return this.delay(function(){return h.animate(e,this.settings.animationSpeed,"linear",function(){this.locked=!1,h.css(g).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var e={opacity:0};return this.delay(function(){return h.animate(e,this.settings.animationSpeed,"linear",function(){this.locked=!1,h.css(g).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return h.hide().css(g).removeClass("open").trigger("closed")}return/fade/i.test(this.settings.animation)?h.fadeOut(this.settings.animationSpeed/2):h.hide()},close_video:function(e){var h=c(this).find(".flex-video"),g=h.find("iframe");g.length>0&&(g.attr("data-src",g[0].src),g.attr("src","about:blank"),h.hide())},open_video:function(g){var k=c(this).find(".flex-video"),e=k.find("iframe");if(e.length>0){var h=e.attr("data-src");if(typeof h=="string"){e[0].src=e.attr("data-src")}else{var j=e[0].src;e[0].src=b,e[0].src=j}k.show()}},cache_offset:function(h){var g=h.show().height()+parseInt(h.css("top"),10);return h.hide(),g},off:function(){c(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(Foundation.zj,this,this.document),function(b,a,c){Foundation.libs.section={name:"section",version:"4.3.2",settings:{deep_linking:!1,small_breakpoint:768,one_up:!0,multi_expand:!1,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",resized_data_attr:"data-section-resized",small_style_data_attr:"data-section-small-style",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',active_class:"active",callback:function(){}},init:function(e,h,g){var d=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),typeof h=="object"&&b.extend(!0,d.settings,h),typeof h!="string"?(this.events(),!0):this[h].call(this,g)},events:function(){var d=this,k=[],x=d.settings.section_selector,g=d.settings.region_selector.split(","),w=d.settings.title_selector.split(",");for(var v=0,q=g.length;v<q;v++){var j=g[v];for(var t=0,n=w.length;t<n;t++){var e=x+">"+j+">"+w[t];k.push(e+" a"),k.push(e)}}b(d.scope).on("click.fndtn.section",k.join(","),function(h){var i=b(this).closest(d.settings.title_selector);d.close_navs(i),i.siblings(d.settings.content_selector).length>0&&d.toggle_active.call(i[0],h)}),b(a).on("resize.fndtn.section",d.throttle(function(){d.resize()},30)).on("hashchange.fndtn.section",d.set_active_from_hash),b(c).on("click.fndtn.section",function(h){if(h.isPropagationStopped&&h.isPropagationStopped()){return}if(h.target===c){return}d.close_navs(b(h.target).closest(d.settings.title_selector))}),b(a).triggerHandler("resize.fndtn.section"),b(a).triggerHandler("hashchange.fndtn.section")},close_navs:function(e){var h=Foundation.libs.section,g=b(h.settings.nav_selector).filter(function(){return !b.extend({},h.settings,h.data_options(b(this))).one_up});if(e.length>0){var d=e.parent().parent();if(h.is_horizontal_nav(d)||h.is_vertical_nav(d)){g=g.filter(function(){return this!==d[0]})}}g.children(h.settings.region_selector).removeClass(h.settings.active_class)},toggle_active:function(h){var p=b(this),k=Foundation.libs.section,g=p.parent(),j=p.siblings(k.settings.content_selector),l=g.parent(),e=b.extend({},k.settings,k.data_options(l)),d=l.children(k.settings.region_selector).filter("."+k.settings.active_class);!e.deep_linking&&j.length>0&&h.preventDefault(),h.stopPropagation();if(!g.hasClass(k.settings.active_class)){if(!k.is_accordion(l)||k.is_accordion(l)&&!k.settings.multi_expand){d.removeClass(k.settings.active_class),d.trigger("closed.fndtn.section")}g.addClass(k.settings.active_class),k.resize(g.find(k.settings.section_selector).not("["+k.settings.resized_data_attr+"]"),!0),g.trigger("opened.fndtn.section")}else{if(g.hasClass(k.settings.active_class)&&k.is_accordion(l)||!e.one_up&&(k.small(l)||k.is_vertical_nav(l)||k.is_horizontal_nav(l)||k.is_accordion(l))){g.removeClass(k.settings.active_class),g.trigger("closed.fndtn.section")}}e.callback(l)},check_resize_timer:null,resize:function(e,k){var h=Foundation.libs.section,d=b(h.settings.section_selector),g=h.small(d),j=function(l,i){return !h.is_accordion(l)&&!l.is("["+h.settings.resized_data_attr+"]")&&(!g||h.is_horizontal_tabs(l))&&i===(l.css("display")==="none"||!l.parent().is(":visible"))};e=e||b(h.settings.section_selector),clearTimeout(h.check_resize_timer),g||e.removeAttr(h.settings.small_style_data_attr),e.filter(function(){return j(b(this),!1)}).each(function(){var B=b(this),v=B.children(h.settings.region_selector),C=v.children(h.settings.title_selector),q=v.children(h.settings.content_selector),A=0;if(k&&B.children(h.settings.region_selector).filter("."+h.settings.active_class).length==0){var z=b.extend({},h.settings,h.data_options(B));!z.deep_linking&&(z.one_up||!h.is_horizontal_nav(B)&&!h.is_vertical_nav(B)&&!h.is_accordion(B))&&v.filter(":visible").first().addClass(h.settings.active_class)}if(h.is_horizontal_tabs(B)||h.is_auto(B)){var x=0;C.each(function(){var i=b(this);if(i.is(":visible")){i.css(h.rtl?"right":"left",x);var l=parseInt(i.css("border-"+(h.rtl?"left":"right")+"-width"),10);l.toString()==="Nan"&&(l=0),x+=h.outerWidth(i)-l,A=Math.max(A,h.outerHeight(i))}}),C.css("height",A),v.each(function(){var o=b(this),p=o.children(h.settings.content_selector),l=parseInt(p.css("border-top-width"),10);l.toString()==="Nan"&&(l=0),o.css("padding-top",A-l)}),B.css("min-height",A)}else{if(h.is_horizontal_nav(B)){var r=!0;C.each(function(){A=Math.max(A,h.outerHeight(b(this)))}),v.each(function(){var i=b(this);i.css("margin-left","-"+(r?B:i.children(h.settings.title_selector)).css("border-left-width")),r=!1}),v.css("margin-top","-"+B.css("border-top-width")),C.css("height",A),q.css("top",A),B.css("min-height",A)}else{if(h.is_vertical_tabs(B)){var y=0;C.each(function(){var i=b(this);if(i.is(":visible")){i.css("top",y);var l=parseInt(i.css("border-top-width"),10);l.toString()==="Nan"&&(l=0),y+=h.outerHeight(i)-l}}),q.css("min-height",y+1)}else{if(h.is_vertical_nav(B)){var w=0,n=!0;C.each(function(){w=Math.max(w,h.outerWidth(b(this)))}),v.each(function(){var i=b(this);i.css("margin-top","-"+(n?B:i.children(h.settings.title_selector)).css("border-top-width")),n=!1}),C.css("width",w),q.css(h.rtl?"right":"left",w),B.css("width",w)}}}}B.attr(h.settings.resized_data_attr,!0)}),b(h.settings.section_selector).filter(function(){return j(b(this),!0)}).length>0&&(h.check_resize_timer=setTimeout(function(){h.resize(e.filter(function(){return j(b(this),!1)}),!0)},700)),g&&e.attr(h.settings.small_style_data_attr,!0)},is_vertical_nav:function(d){return/vertical-nav/i.test(d.data("section"))},is_horizontal_nav:function(d){return/horizontal-nav/i.test(d.data("section"))},is_accordion:function(d){return/accordion/i.test(d.data("section"))},is_horizontal_tabs:function(d){return/^tabs$/i.test(d.data("section"))},is_vertical_tabs:function(d){return/vertical-tabs/i.test(d.data("section"))},is_auto:function(g){var d=g.data("section");return d===""||/auto/i.test(d)},set_active_from_hash:function(){var h=Foundation.libs.section,g=a.location.hash.substring(1),d=b(h.settings.section_selector),e;d.each(function(){var k=b(this),j=k.children(h.settings.region_selector);j.each(function(){var l=b(this),n=l.children(h.settings.content_selector).data("slug");if((new RegExp(n,"i")).test(g)){return e=k,!1}});if(e!=null){return !1}}),e!=null&&d.each(function(){if(e==b(this)){var n=b(this),l=b.extend({},h.settings,h.data_options(n)),p=n.children(h.settings.region_selector),k=l.deep_linking&&g.length>0,j=!1;p.each(function(){var q=b(this);if(j){q.removeClass(h.settings.active_class)}else{if(k){var o=q.children(h.settings.content_selector).data("slug");o&&(new RegExp(o,"i")).test(g)?(q.hasClass(h.settings.active_class)||q.addClass(h.settings.active_class),j=!0):q.removeClass(h.settings.active_class)}else{q.hasClass(h.settings.active_class)&&(j=!0)}}}),!j&&(l.one_up||!h.is_horizontal_nav(n)&&!h.is_vertical_nav(n)&&!h.is_accordion(n))&&p.filter(":visible").first().addClass(h.settings.active_class)}})},reflow:function(){var d=Foundation.libs.section;b(d.settings.section_selector).removeAttr(d.settings.resized_data_attr),d.throttle(function(){d.resize()},30)()},small:function(d){var e=b.extend({},this.settings,this.data_options(d));return this.is_horizontal_tabs(d)?!1:d&&this.is_accordion(d)?!0:b("html").hasClass("lt-ie9")?!0:b("html").hasClass("ie8compat")?!0:b(this.scope).width()<e.small_breakpoint},off:function(){b(this.scope).off(".fndtn.section"),b(a).off(".fndtn.section"),b(c).off(".fndtn.section")}},b.fn.reflow_section=function(g){var d=this,h=Foundation.libs.section;return d.removeAttr(h.settings.resized_data_attr),h.throttle(function(){h.resize(d,g)},30)(),this}}(Foundation.zj,window,document),function(c,a,d,b){Foundation.libs.tooltips={name:"tooltips",version:"4.3.2",settings:{selector:".has-tip",additionalInheritableClasses:[],tooltipClass:".tooltip",touchCloseText:"tap to close",appendTo:"body","disable-for-touch":!1,tipTemplate:function(h,g){return'<span data-selector="'+h+'" class="'+Foundation.libs.tooltips.settings.tooltipClass.substring(1)+'">'+g+'<span class="nub"></span></span>'}},cache:{},init:function(g,j,h){Foundation.inherit(this,"data_options");var e=this;typeof j=="object"?c.extend(!0,this.settings,j):typeof h!="undefined"&&c.extend(!0,this.settings,h);if(typeof j=="string"){return this[j].call(this,h)}Modernizr.touch?c(this.scope).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(i){var k=c.extend({},e.settings,e.data_options(c(this)));k["disable-for-touch"]||(i.preventDefault(),c(k.tooltipClass).hide(),e.showOrCreateTip(c(this)))}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltipClass,function(i){i.preventDefault(),c(this).fadeOut(150)}):c(this.scope).on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(i){var k=c(this);/enter|over/i.test(i.type)?e.showOrCreateTip(k):(i.type==="mouseout"||i.type==="mouseleave")&&e.hide(k)})},showOrCreateTip:function(h){var g=this.getTip(h);return g&&g.length>0?this.show(h):this.create(h)},getTip:function(e){var h=this.selector(e),g=null;return h&&(g=c('span[data-selector="'+h+'"]'+this.settings.tooltipClass)),typeof g=="object"?g:!1},selector:function(h){var g=h.attr("id"),i=h.attr("data-tooltip")||h.attr("data-selector");return(g&&g.length<1||!g)&&typeof i!="string"&&(i="tooltip"+Math.random().toString(36).substring(7),h.attr("data-selector",i)),g&&g.length>0?g:i},create:function(e){var h=c(this.settings.tipTemplate(this.selector(e),c("<div></div>").html(e.attr("title")).html())),g=this.inheritable_classes(e);h.addClass(g).appendTo(this.settings.appendTo),Modernizr.touch&&h.append('<span class="tap-to-close">'+this.settings.touchCloseText+"</span>"),e.removeAttr("title").attr("title",""),this.show(e)},reposition:function(h,e,k){var w,g,v,t,p,j;e.css("visibility","hidden").show(),w=h.data("width"),g=e.children(".nub"),v=this.outerHeight(g),t=this.outerHeight(g),j=function(y,o,z,x,l,u){return y.css({top:o?o:"auto",bottom:x?x:"auto",left:l?l:"auto",right:z?z:"auto",width:u?u:"auto"}).end()},j(e,h.offset().top+this.outerHeight(h)+10,"auto","auto",h.offset().left,w);if(c(a).width()<767){j(e,h.offset().top+this.outerHeight(h)+10,"auto","auto",12.5,c(this.scope).width()),e.addClass("tip-override"),j(g,-v,"auto","auto",h.offset().left)}else{var q=h.offset().left;Foundation.rtl&&(q=h.offset().left+h.offset().width-this.outerWidth(e)),j(e,h.offset().top+this.outerHeight(h)+10,"auto","auto",q,w),e.removeClass("tip-override"),k&&k.indexOf("tip-top")>-1?j(e,h.offset().top-this.outerHeight(e),"auto","auto",q,w).removeClass("tip-override"):k&&k.indexOf("tip-left")>-1?j(e,h.offset().top+this.outerHeight(h)/2-v*2.5,"auto","auto",h.offset().left-this.outerWidth(e)-v,w).removeClass("tip-override"):k&&k.indexOf("tip-right")>-1&&j(e,h.offset().top+this.outerHeight(h)/2-v*2.5,"auto","auto",h.offset().left+this.outerWidth(h)+v,w).removeClass("tip-override")}e.css("visibility","visible").hide()},inheritable_classes:function(g){var j=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additionalInheritableClasses),h=g.attr("class"),e=h?c.map(h.split(" "),function(i,k){if(c.inArray(i,j)!==-1){return i}}).join(" "):"";return c.trim(e)},show:function(h){var g=this.getTip(h);this.reposition(h,g,h.attr("class")),g.fadeIn(150)},hide:function(h){var g=this.getTip(h);g.fadeOut(150)},reload:function(){var e=c(this);return e.data("fndtn-tooltips")?e.foundationTooltips("destroy").foundationTooltips("init"):e.foundationTooltips("init")},off:function(){c(this.scope).off(".fndtn.tooltip"),c(this.settings.tooltipClass).each(function(e){c("[data-tooltip]").get(e).attr("title",c(this).text())}).remove()},reflow:function(){}}}(Foundation.zj,this,this.document),function(c,a,d,b){Foundation.libs.topbar={name:"topbar",version:"4.3.2",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",is_hover:!0,mobile_show_parent_link:!1,scrolltop:!0,init:!1},init:function(j,h,e){Foundation.inherit(this,"data_options addCustomRule");var g=this;return typeof h=="object"?c.extend(!0,this.settings,h):typeof e!="undefined"&&c.extend(!0,this.settings,e),typeof h!="string"?(c(".top-bar, [data-topbar]").each(function(){c.extend(!0,g.settings,g.data_options(c(this))),g.settings.$w=c(a),g.settings.$topbar=c(this),g.settings.$section=g.settings.$topbar.find("section"),g.settings.$titlebar=g.settings.$topbar.children("ul").first(),g.settings.$topbar.data("index",0);var k=g.settings.$topbar.parent();k.hasClass("fixed")||k.hasClass(g.settings.stickyClass)?(g.settings.$topbar.data("height",g.outerHeight(k)),g.settings.$topbar.data("stickyoffset",k.offset().top)):g.settings.$topbar.data("height",g.outerHeight(g.settings.$topbar));var i=c("<div class='top-bar-js-breakpoint'/>").insertAfter(g.settings.$topbar);g.settings.breakPoint=i.width(),i.remove(),g.assemble(),g.settings.is_hover&&g.settings.$topbar.find(".has-dropdown").addClass("not-click"),g.addCustomRule(".f-topbar-fixed { padding-top: "+g.settings.$topbar.data("height")+"px }"),g.settings.$topbar.parent().hasClass("fixed")&&c("body").addClass("f-topbar-fixed")}),g.settings.init||this.events(),this.settings.init):this[h].call(this,e)},toggle:function(){var h=this,g=c(".top-bar, [data-topbar]"),e=g.find("section, .section");h.breakpoint()&&(h.rtl?(e.css({right:"0%"}),e.find(">.name").css({right:"100%"})):(e.css({left:"0%"}),e.find(">.name").css({left:"100%"})),e.find("li.moved").removeClass("moved"),g.data("index",0),g.toggleClass("expanded").css("height","")),h.settings.scrolltop?g.hasClass("expanded")?g.parent().hasClass("fixed")&&(h.settings.scrolltop?(g.parent().removeClass("fixed"),g.addClass("fixed"),c("body").removeClass("f-topbar-fixed"),a.scrollTo(0,0)):g.parent().removeClass("expanded")):g.hasClass("fixed")&&(g.parent().addClass("fixed"),g.removeClass("fixed"),c("body").addClass("f-topbar-fixed")):(g.parent().hasClass(h.settings.stickyClass)&&g.parent().addClass("fixed"),g.parent().hasClass("fixed")&&(g.hasClass("expanded")?(g.addClass("fixed"),g.parent().addClass("expanded")):(g.removeClass("fixed"),g.parent().removeClass("expanded"),h.updateStickyPositioning())))},timer:null,events:function(){var e=this;c(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(g){g.preventDefault(),e.toggle()}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(h){var l=c(this),g=c(h.target),j=l.closest("[data-topbar], .top-bar"),k=j.data("topbar");if(g.data("revealId")){e.toggle();return}if(e.breakpoint()){return}if(e.settings.is_hover&&!Modernizr.touch){return}h.stopImmediatePropagation(),g[0].nodeName==="A"&&g.parent().hasClass("has-dropdown")&&h.preventDefault(),l.hasClass("hover")?(l.removeClass("hover").find("li").removeClass("hover"),l.parents("li.hover").removeClass("hover")):l.addClass("hover")}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(p){if(e.breakpoint()&&c(a).width()!=e.settings.breakPoint){p.preventDefault();var j=c(this),k=j.closest(".top-bar, [data-topbar]"),l=k.find("section, .section"),h=j.next(".dropdown").outerHeight(),g=j.closest("li");k.data("index",k.data("index")+1),g.addClass("moved"),e.rtl?(l.css({right:-(100*k.data("index"))+"%"}),l.find(">.name").css({right:100*k.data("index")+"%"})):(l.css({left:-(100*k.data("index"))+"%"}),l.find(">.name").css({left:100*k.data("index")+"%"})),k.css("height",e.outerHeight(j.siblings("ul"),!0)+e.settings.$topbar.data("height"))}}),c(a).on("resize.fndtn.topbar",function(){if(typeof e.settings.$topbar=="undefined"){return}var h=e.settings.$topbar.parent("."+this.settings.stickyClass),g;if(!e.breakpoint()){var j=e.settings.$topbar.hasClass("expanded");c(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover"),j&&e.toggle()}h.length>0&&(h.hasClass("fixed")?(h.removeClass("fixed"),g=h.offset().top,c(d.body).hasClass("f-topbar-fixed")&&(g-=e.settings.$topbar.data("height")),e.settings.$topbar.data("stickyoffset",g),h.addClass("fixed")):(g=h.offset().top,e.settings.$topbar.data("stickyoffset",g)))}.bind(this)),c("body").on("click.fndtn.topbar",function(g){var h=c(g.target).closest("li").closest("li.hover");if(h.length>0){return}c(".top-bar li, [data-topbar] li").removeClass("hover")}),c(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(j){j.preventDefault();var p=c(this),h=p.closest(".top-bar, [data-topbar]"),k=h.find("section, .section"),l=p.closest("li.moved"),g=l.parent();h.data("index",h.data("index")-1),e.rtl?(k.css({right:-(100*h.data("index"))+"%"}),k.find(">.name").css({right:100*h.data("index")+"%"})):(k.css({left:-(100*h.data("index"))+"%"}),k.find(">.name").css({left:100*h.data("index")+"%"})),h.data("index")===0?h.css("height",""):h.css("height",e.outerHeight(g,!0)+e.settings.$topbar.data("height")),setTimeout(function(){l.removeClass("moved")},300)})},breakpoint:function(){return c(d).width()<=this.settings.breakPoint||c("html").hasClass("lt-ie9")},assemble:function(){var e=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var k=c(this),j=k.siblings(".dropdown"),g=k.attr("href");if(e.settings.mobile_show_parent_link&&g&&g.length>1){var h=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+g+'">'+k.text()+"</a></li>")}else{var h=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li>')}e.settings.custom_back_text==1?h.find("h5>a").html(e.settings.back_text):h.find("h5>a").html("&laquo; "+k.html()),j.prepend(h)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},height:function(e){var h=0,g=this;return e.find("> li").each(function(){h+=g.outerHeight(c(this),!0)}),h},sticky:function(){var g=c(a),e=this;g.scroll(function(){e.updateStickyPositioning()})},updateStickyPositioning:function(){var h="."+this.settings.stickyClass,g=c(a);if(c(h).length>0){var e=this.settings.$topbar.data("stickyoffset");c(h).hasClass("expanded")||(g.scrollTop()>e?c(h).hasClass("fixed")||(c(h).addClass("fixed"),c("body").addClass("f-topbar-fixed")):g.scrollTop()<=e&&c(h).hasClass("fixed")&&(c(h).removeClass("fixed"),c("body").removeClass("f-topbar-fixed")))}},off:function(){c(this.scope).off(".fndtn.topbar"),c(a).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document),function(c,a,d,b){Foundation.libs.interchange={name:"interchange",version:"4.2.4",cache:{},images_loaded:!1,settings:{load_attr:"interchange",named_queries:{"default":"only screen and (min-width: 1px)",small:"only screen and (min-width: 768px)",medium:"only screen and (min-width: 1280px)",large:"only screen and (min-width: 1440px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(h,g){if(/IMG/.test(h[0].nodeName)){var i=h[0].src;if((new RegExp(g,"i")).test(i)){return}return h[0].src=g,h.trigger("replace",[h[0].src,i])}}}},init:function(e,h,g){return Foundation.inherit(this,"throttle"),typeof h=="object"&&c.extend(!0,this.settings,h),this.events(),this.images(),typeof h!="string"?this.settings.init:this[h].call(this,g)},events:function(){var e=this;c(a).on("resize.fndtn.interchange",e.throttle(function(){e.resize.call(e)},50))},resize:function(){var e=this.cache;if(!this.images_loaded){setTimeout(c.proxy(this.resize,this),50);return}for(var h in e){if(e.hasOwnProperty(h)){var g=this.results(h,e[h]);g&&this.settings.directives[g.scenario[1]](g.el,g.scenario[0])}}},results:function(h,p){var k=p.length;if(k>0){var g=c('[data-uuid="'+h+'"]');for(var j=k-1;j>=0;j--){var l,e=p[j][2];this.settings.named_queries.hasOwnProperty(e)?l=matchMedia(this.settings.named_queries[e]):l=matchMedia(e);if(l.matches){return{el:g,scenario:p[j]}}}}return !1},images:function(g){return typeof this.cached_images=="undefined"||g?this.update_images():this.cached_images},update_images:function(){var g=d.getElementsByTagName("img"),j=g.length,e=0,h="data-"+this.settings.load_attr;this.cached_images=[],this.images_loaded=!1;for(var k=j-1;k>=0;k--){this.loaded(c(g[k]),function(l){e++;if(l){var i=l.getAttribute(h)||"";i.length>0&&this.cached_images.push(l)}e===j&&(this.images_loaded=!0,this.enhance())}.bind(this))}return"deferred"},loaded:function(i,g){function j(){g(i[0])}function h(){this.one("load",j);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var l=this.attr("src"),k=l.match(/\?/)?"&":"?";k+="random="+(new Date).getTime(),this.attr("src",l+k)}}if(!i.attr("src")){j();return}i[0].complete||i[0].readyState===4?j():h.call(i)},enhance:function(){var g=this.images().length;for(var e=g-1;e>=0;e--){this._object(c(this.images()[e]))}return c(a).trigger("resize")},parse_params:function(h,g,i){return[this.trim(h),this.convert_directive(g),this.trim(i)]},convert_directive:function(h){var g=this.trim(h);return g.length>0?g:"replace"},_object:function(p){var j=this.parse_data_attr(p),v=[],l=j.length;if(l>0){for(var h=l-1;h>=0;h--){var k=j[h].split(/\((.*?)(\))$/);if(k.length>1){var q=k[0].split(","),g=this.parse_params(q[0],q[1],k[1]);v.push(g)}}}return this.store(p,v)},uuid:function(h){function i(){return((1+Math.random())*65536|0).toString(16).substring(1)}var g=h||"-";return i()+i()+g+i()+g+i()+g+i()+g+i()+i()+i()},store:function(i,g){var j=this.uuid(),h=i.data("uuid");return h?this.cache[h]:(i.attr("data-uuid",j),this.cache[j]=g)},trim:function(e){return typeof e=="string"?c.trim(e):e},parse_data_attr:function(k){var h=k.data(this.settings.load_attr).split(/\[(.*?)\]/),l=h.length,j=[];for(var g=l-1;g>=0;g--){h[g].replace(/[\W\d]+/,"").length>4&&j.push(h[g])}return j},reflow:function(){this.images(!0)}}}(Foundation.zj,this,this.document),function(d){function b(i,h,j){if(i.addEventListener){return i.addEventListener(h,j,!1)}if(i.attachEvent){return i.attachEvent("on"+h,j)}}function g(j,h){var k,i;for(k=0,i=j.length;k<i;k++){if(j[k]===h){return !0}}return !1}function c(i,h){var j;i.createTextRange?(j=i.createTextRange(),j.move("character",h),j.select()):i.selectionStart&&(i.focus(),i.setSelectionRange(h,h))}function a(i,h){try{return i.type=h,!0}catch(j){return !1}}d.Placeholders={Utils:{addEventListener:b,inArray:g,moveCaret:c,changeType:a}}}(this),function(aE){function Y(){}function aJ(b){var a;return b.value===b.getAttribute(aI)&&b.getAttribute(aD)==="true"?(b.setAttribute(aD,"false"),b.value="",b.className=b.className.replace(ap,""),a=b.getAttribute(ax),a&&(b.type=a),!0):!1}function ae(b){var a,c=b.getAttribute(aI);return b.value===""&&c?(b.setAttribute(aD,"true"),b.value=c,b.className+=" "+aA,a=b.getAttribute(ax),a?b.type="text":b.type==="password"&&aH.changeType(b,"text")&&b.setAttribute(ax,"password"),!0):!1}function V(h,b){var j,d,a,c,g;if(h&&h.getAttribute(aI)){b(h)}else{j=h?h.getElementsByTagName("input"):au,d=h?h.getElementsByTagName("textarea"):an;for(g=0,c=j.length+d.length;g<c;g++){a=g<j.length?j[g]:d[g-j.length],b(a)}}}function ab(a){V(a,aJ)}function ag(a){V(a,ae)}function az(a){return function(){al&&a.value===a.getAttribute(aI)&&a.getAttribute(aD)==="true"?aH.moveCaret(a,0):aJ(a)}}function ac(a){return function(){ae(a)}}function aa(a){return function(b){K=a.value;if(a.getAttribute(aD)==="true"&&K===a.getAttribute(aI)&&aH.inArray(av,b.keyCode)){return b.preventDefault&&b.preventDefault(),!1}}}function ar(a){return function(){var b;a.getAttribute(aD)==="true"&&a.value!==K&&(a.className=a.className.replace(ap,""),a.value=a.value.replace(a.getAttribute(aI),""),a.setAttribute(aD,!1),b=a.getAttribute(ax),b&&(a.type=b)),a.value===""&&(a.blur(),aH.moveCaret(a,0))}}function Q(a){return function(){a===document.activeElement&&a.value===a.getAttribute(aI)&&a.getAttribute(aD)==="true"&&aH.moveCaret(a,0)}}function G(a){return function(){ab(a)}}function ai(a){a.form&&(ay=a.form,ay.getAttribute(aG)||(aH.addEventListener(ay,"submit",G(ay)),ay.setAttribute(aG,"true"))),aH.addEventListener(a,"focus",az(a)),aH.addEventListener(a,"blur",ac(a)),al&&(aH.addEventListener(a,"keydown",aa(a)),aH.addEventListener(a,"keyup",ar(a)),aH.addEventListener(a,"click",Q(a))),a.setAttribute(aB,"true"),a.setAttribute(aI,X),ae(a)}var ao=["text","search","url","tel","email","password","number","textarea"],av=[27,33,34,35,36,37,38,39,40,8,46],aq="#ccc",aA="placeholdersjs",ap=new RegExp("(?:^|\\s)"+aA+"(?!\\S)"),au,an,aI="data-placeholder-value",aD="data-placeholder-active",ax="data-placeholder-type",aG="data-placeholder-submit",aB="data-placeholder-bound",at="data-placeholder-focus",aF="data-placeholder-live",am=document.createElement("input"),aw=document.getElementsByTagName("head")[0],aC=document.documentElement,aj=aE.Placeholders,aH=aj.Utils,al,ad,K,ak,J,X,af,ay,Z,ah,W;aj.nativeSupport=am.placeholder!==void 0;if(!aj.nativeSupport){au=document.getElementsByTagName("input"),an=document.getElementsByTagName("textarea"),al=aC.getAttribute(at)==="false",ad=aC.getAttribute(aF)!=="false",ak=document.createElement("style"),ak.type="text/css",J=document.createTextNode("."+aA+" { color:"+aq+"; }"),ak.styleSheet?ak.styleSheet.cssText=J.nodeValue:ak.appendChild(J),aw.insertBefore(ak,aw.firstChild);for(W=0,ah=au.length+an.length;W<ah;W++){Z=W<au.length?au[W]:an[W-au.length],X=Z.attributes.placeholder,X&&(X=X.nodeValue,X&&aH.inArray(ao,Z.type)&&ai(Z))}af=setInterval(function(){for(W=0,ah=au.length+an.length;W<ah;W++){Z=W<au.length?au[W]:an[W-au.length],X=Z.attributes.placeholder;if(X){X=X.nodeValue;if(X&&aH.inArray(ao,Z.type)){Z.getAttribute(aB)||ai(Z);if(X!==Z.getAttribute(aI)||Z.type==="password"&&!Z.getAttribute(ax)){Z.type==="password"&&!Z.getAttribute(ax)&&aH.changeType(Z,"text")&&Z.setAttribute(ax,"password"),Z.value===Z.getAttribute(aI)&&(Z.value=X),Z.setAttribute(aI,X)}}}}ad||clearInterval(af)},100)}aj.disable=aj.nativeSupport?Y:ab,aj.enable=aj.nativeSupport?Y:ag}(this),function(c,a,d,b){Foundation.libs.abide={name:"abide",version:"4.3.2",settings:{live_validate:!0,focus_on_invalid:!0,timeout:1000,patterns:{alpha:/[a-zA-Z]+/,alpha_numeric:/[a-zA-Z0-9]+/,integer:/-?\d+/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,password:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,url:/(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,datetime:/([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/,time:/(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,month_day_year:/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/}},timer:null,init:function(e,h,g){typeof h=="object"&&c.extend(!0,this.settings,h);if(typeof h=="string"){return this[h].call(this,g)}this.settings.init||this.events()},events:function(){var e=this,g=c("form[data-abide]",this.scope).attr("novalidate","novalidate");g.on("submit validate",function(h){return e.validate(c(this).find("input, textarea, select").get(),h)}),this.settings.init=!0;if(!this.settings.live_validate){return}g.find("input, textarea, select").on("blur change",function(h){e.validate([this],h)}).on("keydown",function(h){clearTimeout(e.timer),e.timer=setTimeout(function(){e.validate([this],h)}.bind(this),e.settings.timeout)})},validate:function(g,l){var j=this.parse_patterns(g),e=j.length,h=c(g[0]).closest("form");for(var k=0;k<e;k++){if(!j[k]&&/submit/.test(l.type)){return this.settings.focus_on_invalid&&g[k].focus(),h.trigger("invalid"),c(g[k]).closest("form").attr("data-invalid",""),!1}}return/submit/.test(l.type)&&h.trigger("valid"),h.removeAttr("data-invalid"),!0},parse_patterns:function(i){var g=i.length,j=[];for(var h=g-1;h>=0;h--){j.push(this.pattern(i[h]))}return this.check_validation_and_apply_styles(j)},pattern:function(i){var g=i.getAttribute("type"),j=typeof i.getAttribute("required")=="string";if(this.settings.patterns.hasOwnProperty(g)){return[i,this.settings.patterns[g],j]}var h=i.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(h)&&h.length>0?[i,this.settings.patterns[h],j]:h.length>0?[i,new RegExp(h),j]:(h=/.*/,[i,h,j])},check_validation_and_apply_styles:function(q){var h=q.length,e=[];for(var j=h-1;j>=0;j--){var v=q[j][0],g=q[j][2],p=v.value,l=v.type==="radio",k=g?v.value.length>0:!0;l&&g?e.push(this.valid_radio(v,g)):q[j][1].test(p)&&k||!g&&v.value.length<1?(c(v).removeAttr("data-invalid").parent().removeClass("error"),e.push(!0)):(c(v).attr("data-invalid","").parent().addClass("error"),e.push(!1))}return e},valid_radio:function(j,l){var h=j.getAttribute("name"),k=d.getElementsByName(h),n=k.length,g=!1;for(var e=0;e<n;e++){k[e].checked&&(g=!0)}for(var e=0;e<n;e++){g?c(k[e]).removeAttr("data-invalid").parent().removeClass("error"):c(k[e]).attr("data-invalid","").parent().addClass("error")}return g}}}(Foundation.zj,this,this.document);(function(c,g,h,b){var j=function(){};var a=function(q,r){if(q.hasClass(r.slides_container_class)){return this}var w=this,l,k=q,x,v,p,u=0,o,n,s=false,t=false;k.children().first().addClass(r.active_slide_class);w.update_slide_number=function(y){if(r.slide_number){x.find("span:first").text(parseInt(y)+1);x.find("span:last").text(k.children().length)}if(r.bullets){v.children().removeClass(r.bullets_active_class);c(v.children().get(y)).addClass(r.bullets_active_class)}};w.update_active_link=function(y){var z=c('a[data-orbit-link="'+k.children().eq(y).attr("data-orbit-slide")+'"]');z.parents("ul").find("[data-orbit-link]").removeClass(r.bullets_active_class);z.addClass(r.bullets_active_class)};w.build_markup=function(){k.wrap('<div class="'+r.container_class+'"></div>');l=k.parent();k.addClass(r.slides_container_class);if(r.navigation_arrows){l.append(c('<a href="#"><span></span></a>').addClass(r.prev_class));l.append(c('<a href="#"><span></span></a>').addClass(r.next_class))}if(r.timer){p=c("<div>").addClass(r.timer_container_class);p.append("<span>");p.append(c("<div>").addClass(r.timer_progress_class));p.addClass(r.timer_paused_class);l.append(p)}if(r.slide_number){x=c("<div>").addClass(r.slide_number_class);x.append("<span></span> "+r.slide_number_text+" <span></span>");l.append(x)}if(r.bullets){v=c("<ol>").addClass(r.bullets_container_class);l.append(v);k.children().each(function(y,A){var z=c("<li>").attr("data-orbit-slide",y);v.append(z)})}if(r.stack_on_small){l.addClass(r.stack_on_small_class)}w.update_slide_number(0);w.update_active_link(0)};w._goto=function(E,D){if(E===u){return false}if(typeof n==="object"){n.restart()}var B=k.children();var z="next";s=true;if(E<u){z="prev"}if(E>=B.length){E=0}else{if(E<0){E=B.length-1}}var C=c(B.get(u));var A=c(B.get(E));C.css("zIndex",2);C.removeClass(r.active_slide_class);A.css("zIndex",4).addClass(r.active_slide_class);k.trigger("orbit:before-slide-change");r.before_slide_change();w.update_active_link(E);var F=function(){var G=function(){u=E;s=false;if(D===true){n=w.create_timer();n.start()}w.update_slide_number(u);k.trigger("orbit:after-slide-change",[{slide_number:u,total_slides:B.length}]);r.after_slide_change(u,B.length)};if(k.height()!=A.height()&&r.variable_height){k.animate({height:A.height()},250,"linear",G)}else{G()}};if(B.length===1){F();return false}var y=function(){if(z==="next"){o.next(C,A,F)}if(z==="prev"){o.prev(C,A,F)}};if(A.height()>k.height()&&r.variable_height){k.animate({height:A.height()},250,"linear",y)}else{y()}};w.next=function(y){y.stopImmediatePropagation();y.preventDefault();w._goto(u+1)};w.prev=function(y){y.stopImmediatePropagation();y.preventDefault();w._goto(u-1)};w.link_custom=function(A){A.preventDefault();var z=c(this).attr("data-orbit-link");if((typeof z==="string")&&(z=c.trim(z))!=""){var y=l.find("[data-orbit-slide="+z+"]");if(y.index()!=-1){w._goto(y.index())}}};w.link_bullet=function(z){var y=c(this).attr("data-orbit-slide");if((typeof y==="string")&&(y=c.trim(y))!=""){w._goto(parseInt(y))}};w.timer_callback=function(){w._goto(u+1,true)};w.compute_dimensions=function(){var z=c(k.children().get(u));var y=z.height();if(!r.variable_height){k.children().each(function(){if(c(this).height()>y){y=c(this).height()}})}k.height(y)};w.create_timer=function(){var y=new i(l.find("."+r.timer_container_class),r,w.timer_callback);return y};w.stop_timer=function(){if(typeof n==="object"){n.stop()}};w.toggle_timer=function(){var y=l.find("."+r.timer_container_class);if(y.hasClass(r.timer_paused_class)){if(typeof n==="undefined"){n=w.create_timer()}n.start()}else{if(typeof n==="object"){n.stop()}}};w.init=function(){w.build_markup();if(r.timer){n=w.create_timer();n.start()}o=new e(r,k);if(r.animation==="slide"){o=new d(r,k)}l.on("click","."+r.next_class,w.next);l.on("click","."+r.prev_class,w.prev);l.on("click","[data-orbit-slide]",w.link_bullet);l.on("click",w.toggle_timer);if(r.swipe){l.on("touchstart.fndtn.orbit",function(z){if(!z.touches){z=z.originalEvent}var y={start_page_x:z.touches[0].pageX,start_page_y:z.touches[0].pageY,start_time:(new Date()).getTime(),delta_x:0,is_scrolling:b};l.data("swipe-transition",y);z.stopPropagation()}).on("touchmove.fndtn.orbit",function(A){if(!A.touches){A=A.originalEvent}if(A.touches.length>1||A.scale&&A.scale!==1){return}var y=l.data("swipe-transition");if(typeof y==="undefined"){y={}}y.delta_x=A.touches[0].pageX-y.start_page_x;if(typeof y.is_scrolling==="undefined"){y.is_scrolling=!!(y.is_scrolling||Math.abs(y.delta_x)<Math.abs(A.touches[0].pageY-y.start_page_y))}if(!y.is_scrolling&&!y.active){A.preventDefault();var z=(y.delta_x<0)?(u+1):(u-1);y.active=true;w._goto(z)}}).on("touchend.fndtn.orbit",function(y){l.data("swipe-transition",{});y.stopPropagation()})}l.on("mouseenter.fndtn.orbit",function(y){if(r.timer&&r.pause_on_hover){w.stop_timer()}}).on("mouseleave.fndtn.orbit",function(y){if(r.timer&&r.resume_on_mouseout){n.start()}});c(h).on("click","[data-orbit-link]",w.link_custom);c(g).on("resize",w.compute_dimensions);c(g).on("load",w.compute_dimensions);c(g).on("load",function(){l.prev(".preloader").css("display","none")});k.trigger("orbit:ready")};w.init()};var i=function(n,p,s){var t=this,q=p.timer_speed,k=n.find("."+p.timer_progress_class),l,r,o=-1;this.update_progress=function(u){var v=k.clone();v.attr("style","");v.css("width",u+"%");k.replaceWith(v);k=v};this.restart=function(){clearTimeout(r);n.addClass(p.timer_paused_class);o=-1;t.update_progress(0)};this.start=function(){if(!n.hasClass(p.timer_paused_class)){return true}o=(o===-1)?q:o;n.removeClass(p.timer_paused_class);l=new Date().getTime();k.animate({width:"100%"},o,"linear");r=setTimeout(function(){t.restart();s()},o);n.trigger("orbit:timer-started")};this.stop=function(){if(n.hasClass(p.timer_paused_class)){return true}clearTimeout(r);n.addClass(p.timer_paused_class);var v=new Date().getTime();o=o-(v-l);var u=100-((o/q)*100);t.update_progress(u);n.trigger("orbit:timer-stopped")}};var d=function(o,k){var q=o.animation_speed;var n=(c("html[dir=rtl]").length===1);var p=n?"marginRight":"marginLeft";var l={};l[p]="0%";var r=(typeof jQuery==="undefined")?"ease-in-out":b;this.next=function(t,s,u){s.animate(l,q,r,function(){t.css(p,"100%");u()});t.animate({marginLeft:"-100%"},q,r)};this.prev=function(t,s,u){s.css(p,"-100%");s.animate(l,q,r,function(){t.css(p,"100%");u()});t.animate({marginLeft:"100%"},q,r)}};var e=function(n,k){var p=n.animation_speed;var l=(c("html[dir=rtl]").length===1);var o=l?"marginRight":"marginLeft";this.next=function(r,q,s){q.css({margin:"0%",opacity:"0.01"});q.animate({opacity:"1"},p,"linear",function(){r.css("margin","100%");s()})};this.prev=function(r,q,s){q.css({margin:"0%",opacity:"0.01"});q.animate({opacity:"1"},p,"linear",function(){r.css("margin","100%");s()})}};Foundation.libs=Foundation.libs||{};Foundation.libs.orbit={name:"orbit",version:"4.3.2",settings:{animation:"slide",timer_speed:10000,pause_on_hover:true,resume_on_mouseout:false,animation_speed:500,stack_on_small:false,navigation_arrows:true,slide_number:true,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:true,timer:true,variable_height:false,swipe:true,before_slide_change:j,after_slide_change:j},init:function(o,q,l){var k=this;Foundation.inherit(k,"data_options");if(typeof q==="object"){c.extend(true,k.settings,q)}if(c(o).is("[data-orbit]")){var n=c(o);var p=k.data_options(n);new a(n,c.extend({},k.settings,p))}c("[data-orbit]",o).each(function(r,t){var s=c(t);var u=k.data_options(s);new a(s,c.extend({},k.settings,u))})}}}(Foundation.zj,this,this.document));(function(d){function e(i,h,g){if(i.addEventListener){return i.addEventListener(h,g,false)}if(i.attachEvent){return i.attachEvent("on"+h,g)}}function c(h,k){var j,g;for(j=0,g=h.length;j<g;j++){if(h[j]===k){return true}}return false}function b(i,h){var g;if(i.createTextRange){g=i.createTextRange();g.move("character",h);g.select()}else{if(i.selectionStart){i.focus();i.setSelectionRange(h,h)}}}function a(h,g){try{h.type=g;return true}catch(i){return false}}d.Placeholders={Utils:{addEventListener:e,inArray:c,moveCaret:b,changeType:a}}}(this));(function(c){var N=["text","search","url","tel","email","password","number","textarea"],v=[27,33,34,35,36,37,38,39,40,8,46],u="#ccc",K="placeholdersjs",A=new RegExp("(?:^|\\s)"+K+"(?!\\S)"),B,p,E="data-placeholder-value",P="data-placeholder-active",l="data-placeholder-type",C="data-placeholder-submit",q="data-placeholder-bound",j="data-placeholder-focus",R="data-placeholder-live",n=document.createElement("input"),t=document.getElementsByTagName("head")[0],F=document.documentElement,z=c.Placeholders,Q=z.Utils,G,a,k,o,h,H,I,L,S,w,T;function U(){}function s(V){var i;if(V.value===V.getAttribute(E)&&V.getAttribute(P)==="true"){V.setAttribute(P,"false");V.value="";V.className=V.className.replace(A,"");i=V.getAttribute(l);if(i){V.type=i}return true}return false}function O(V){var i,W=V.getAttribute(E);if(V.value===""&&W){V.setAttribute(P,"true");V.value=W;V.className+=" "+K;i=V.getAttribute(l);if(i){V.type="text"}else{if(V.type==="password"){if(Q.changeType(V,"text")){V.setAttribute(l,"password")}}}return true}return false}function J(Z,ab){var X,aa,Y,V,W;if(Z&&Z.getAttribute(E)){ab(Z)}else{X=Z?Z.getElementsByTagName("input"):B;aa=Z?Z.getElementsByTagName("textarea"):p;for(W=0,V=X.length+aa.length;W<V;W++){Y=W<X.length?X[W]:aa[W-X.length];ab(Y)}}}function D(i){J(i,s)}function g(i){J(i,O)}function b(i){return function(){if(G&&i.value===i.getAttribute(E)&&i.getAttribute(P)==="true"){Q.moveCaret(i,0)}else{s(i)}}}function y(i){return function(){O(i)}}function e(i){return function(V){k=i.value;if(i.getAttribute(P)==="true"){if(k===i.getAttribute(E)&&Q.inArray(v,V.keyCode)){if(V.preventDefault){V.preventDefault()}return false}}}}function M(i){return function(){var V;if(i.getAttribute(P)==="true"&&i.value!==k){i.className=i.className.replace(A,"");i.value=i.value.replace(i.getAttribute(E),"");i.setAttribute(P,false);V=i.getAttribute(l);if(V){i.type=V}}if(i.value===""){i.blur();Q.moveCaret(i,0)}}}function d(i){return function(){if(i===document.activeElement&&i.value===i.getAttribute(E)&&i.getAttribute(P)==="true"){Q.moveCaret(i,0)}}}function r(i){return function(){D(i)}}function x(i){if(i.form){L=i.form;if(!L.getAttribute(C)){Q.addEventListener(L,"submit",r(L));L.setAttribute(C,"true")}}Q.addEventListener(i,"focus",b(i));Q.addEventListener(i,"blur",y(i));if(G){Q.addEventListener(i,"keydown",e(i));Q.addEventListener(i,"keyup",M(i));Q.addEventListener(i,"click",d(i))}i.setAttribute(q,"true");i.setAttribute(E,H);O(i)}z.nativeSupport=n.placeholder!==void 0;if(!z.nativeSupport){B=document.getElementsByTagName("input");p=document.getElementsByTagName("textarea");G=F.getAttribute(j)==="false";a=F.getAttribute(R)!=="false";o=document.createElement("style");o.type="text/css";h=document.createTextNode("."+K+" { color:"+u+"; }");if(o.styleSheet){o.styleSheet.cssText=h.nodeValue}else{o.appendChild(h)}t.insertBefore(o,t.firstChild);for(T=0,w=B.length+p.length;T<w;T++){S=T<B.length?B[T]:p[T-B.length];H=S.attributes.placeholder;if(H){H=H.nodeValue;if(H&&Q.inArray(N,S.type)){x(S)}}}I=setInterval(function(){for(T=0,w=B.length+p.length;T<w;T++){S=T<B.length?B[T]:p[T-B.length];H=S.attributes.placeholder;if(H){H=H.nodeValue;if(H&&Q.inArray(N,S.type)){if(!S.getAttribute(q)){x(S)}if(H!==S.getAttribute(E)||(S.type==="password"&&!S.getAttribute(l))){if(S.type==="password"&&!S.getAttribute(l)&&Q.changeType(S,"text")){S.setAttribute(l,"password")}if(S.value===S.getAttribute(E)){S.value=H}S.setAttribute(E,H)}}}}if(!a){clearInterval(I)}},100)}z.disable=z.nativeSupport?U:D;z.enable=z.nativeSupport?U:g}(this));(function(c,b,a,d){Foundation.libs.reveal={name:"reveal",version:"4.3.2",locked:false,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:true,closeOnEsc:true,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:c(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(g,h,e){Foundation.inherit(this,"data_options delay");if(typeof h==="object"){c.extend(true,this.settings,h)}else{if(typeof e!=="undefined"){c.extend(true,this.settings,e)}}if(typeof h!=="string"){this.events();return this.settings.init}else{return this[h].call(this,e)}},events:function(){var e=this;c(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(j){j.preventDefault();if(!e.locked){var h=c(this),i=h.data("reveal-ajax");e.locked=true;if(typeof i==="undefined"){e.open.call(e,h)}else{var g=i===true?h.attr("href"):i;e.open.call(e,h,{url:g})}}}).on("click.fndtn.reveal touchend",this.close_targets(),function(i){i.preventDefault();if(!e.locked){var g=c.extend({},e.settings,e.data_options(c(".reveal-modal.open"))),h=c(i.target)[0]===c("."+g.bgClass)[0];if(h&&!g.closeOnBackgroundClick){return}e.locked=true;e.close.call(e,h?c(".reveal-modal.open"):c(this).closest(".reveal-modal"))}});if(c(this.scope).hasClass("reveal-modal")){c(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video)}else{c(this.scope).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video)}c("body").bind("keyup.reveal",function(i){var g=c(".reveal-modal.open"),h=c.extend({},e.settings,e.data_options(g));if(i.which===27&&h.closeOnEsc){g.foundation("reveal","close")}});return true},open:function(i,j){if(i){if(typeof i.selector!=="undefined"){var h=c("#"+i.data("reveal-id"))}else{var h=c(this.scope);j=i}}else{var h=c(this.scope)}if(!h.hasClass("open")){var g=c(".reveal-modal.open");h.data("css-top",10);if(typeof h.data("css-top")==="undefined"){h.data("css-top",parseInt(h.css("top"),10)).data("offset",this.cache_offset(h))}h.trigger("open");if(g.length<1){this.toggle_bg()}if(typeof j==="undefined"||!j.url){this.hide(g,this.settings.css.close);this.show(h,this.settings.css.open)}else{var e=this,k=typeof j.success!=="undefined"?j.success:null;c.extend(j,{success:function(n,o,l){if(c.isFunction(k)){k(n,o,l)}h.html(n);c(h).foundation("section","reflow");e.hide(g,e.settings.css.close);e.show(h,e.settings.css.open)}});c.ajax(j)}}},close:function(g){var g=g&&g.length?g:c(this.scope),e=c(".reveal-modal.open");if(e.length>0){this.locked=true;g.trigger("close");this.toggle_bg();this.hide(e,this.settings.css.close)}},close_targets:function(){var e="."+this.settings.dismissModalClass;if(this.settings.closeOnBackgroundClick){return e+", ."+this.settings.bgClass}return e},toggle_bg:function(){if(c("."+this.settings.bgClass).length===0){this.settings.bg=c("<div />",{"class":this.settings.bgClass}).appendTo("#interface")}if(this.settings.bg.filter(":visible").length>0){this.hide(this.settings.bg)}else{this.show(this.settings.bg)}},show:function(l,k){if(k){var i=c(b).width();var h=c("#appbuilder").width();var e=Math.round(i*0.8);var j=i-h;k.width=e+"px";k.left=(((i-e)/2)-j)+"px";k.margin=0;if(l.parent("body").length===0){var n=l.wrap('<div style="display: none;" />').parent();l.on("closed.fndtn.reveal.wrapped",function(){l.detach().appendTo(n);l.unwrap().unbind("closed.fndtn.reveal.wrapped")});l.detach().appendTo("#interface")}if(/pop/i.test(this.settings.animation)){k.top=c(b).scrollTop()-l.data("offset")+"px";var g={top:c(b).scrollTop()+l.data("css-top")+"px",opacity:1};return this.delay(function(){return l.css(k).animate(g,this.settings.animationSpeed,"linear",function(){this.locked=false;l.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var g={opacity:1};return this.delay(function(){return l.css(k).animate(g,this.settings.animationSpeed,"linear",function(){this.locked=false;l.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return l.css(k).show().css({opacity:1}).addClass("open").trigger("opened")}if(/fade/i.test(this.settings.animation)){return l.fadeIn(this.settings.animationSpeed/2)}return l.show()},hide:function(h,g){if(g){if(/pop/i.test(this.settings.animation)){var e={top:-c(b).scrollTop()-h.data("offset")+"px",opacity:0};return this.delay(function(){return h.animate(e,this.settings.animationSpeed,"linear",function(){this.locked=false;h.css(g).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var e={opacity:0};return this.delay(function(){return h.animate(e,this.settings.animationSpeed,"linear",function(){this.locked=false;h.css(g).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return h.hide().css(g).removeClass("open").trigger("closed")}if(/fade/i.test(this.settings.animation)){return h.fadeOut(this.settings.animationSpeed/2)}return h.hide()},close_video:function(i){var h=c(this).find(".flex-video"),g=h.find("iframe");if(g.length>0){g.attr("data-src",g[0].src);g.attr("src","about:blank");h.hide()}},open_video:function(i){var h=c(this).find(".flex-video"),g=h.find("iframe");if(g.length>0){var k=g.attr("data-src");if(typeof k==="string"){g[0].src=g.attr("data-src")}else{var j=g[0].src;g[0].src=d;g[0].src=j}h.show()}},cache_offset:function(e){var g=e.show().height()+parseInt(e.css("top"),10);e.hide();return g},off:function(){c(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,b,a){Foundation.libs.section={name:"section",version:"4.3.2",settings:{deep_linking:false,one_up:true,multi_expand:false,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",resized_data_attr:"data-section-resized",small_style_data_attr:"data-section-small-style",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',active_class:"active",small_breakpoint:768,callback:function(){}},init:function(g,h,e){var d=this;Foundation.inherit(this,"throttle data_options position_right offset_right");if(typeof h==="object"){c.extend(true,d.settings,h)}if(typeof h!=="string"){this.events();return true}else{return this[h].call(this,e)}},events:function(){var r=this;var h=[],d=r.settings.section_selector,q=r.settings.region_selector.split(","),n=r.settings.title_selector.split(",");for(var k=0,o=q.length;k<o;k++){var p=q[k];for(var g=0,e=n.length;g<e;g++){var l=d+">"+p+">"+n[g];h.push(l+" a");h.push(l)}}c(r.scope).on("click.fndtn.section",h.join(","),function(i){var j=c(this).closest(r.settings.title_selector);r.close_navs(j);if(j.siblings(r.settings.content_selector).length>0){r.toggle_active.call(j[0],i)}});c(b).on("resize.fndtn.section",r.throttle(function(){r.resize()},30)).on("hashchange.fndtn.section",r.set_active_from_hash);c(a).on("click.fndtn.section",function(i){if(i.isPropagationStopped&&i.isPropagationStopped()){return}if(i.target===a){return}r.close_navs(c(i.target).closest(r.settings.title_selector))});c(b).triggerHandler("resize.fndtn.section");c(b).triggerHandler("hashchange.fndtn.section")},close_navs:function(g){var d=Foundation.libs.section,e=c(d.settings.nav_selector).filter(function(){return !c.extend({},d.settings,d.data_options(c(this))).one_up});if(g.length>0){var h=g.parent().parent();if(d.is_horizontal_nav(h)||d.is_vertical_nav(h)){e=e.filter(function(){return this!==h[0]})}}e.children(d.settings.region_selector).removeClass(d.settings.active_class)},toggle_active:function(n){var l=c(this),d=Foundation.libs.section,k=l.parent(),i=l.siblings(d.settings.content_selector),j=k.parent(),h=c.extend({},d.settings,d.data_options(j)),g=j.children(d.settings.region_selector).filter("."+d.settings.active_class);if(!h.deep_linking&&i.length>0){n.preventDefault()}n.stopPropagation();if(!k.hasClass(d.settings.active_class)){if(!d.is_accordion(j)||(d.is_accordion(j)&&!d.settings.multi_expand)){g.removeClass(d.settings.active_class);g.trigger("closed.fndtn.section")}k.addClass(d.settings.active_class);d.resize(k.find(d.settings.section_selector).not("["+d.settings.resized_data_attr+"]"),true);k.trigger("opened.fndtn.section")}else{if(k.hasClass(d.settings.active_class)&&d.is_accordion(j)||!h.one_up&&(d.small(j)||d.is_vertical_nav(j)||d.is_horizontal_nav(j)||d.is_accordion(j))){k.removeClass(d.settings.active_class);k.trigger("closed.fndtn.section")}}h.callback(j)},check_resize_timer:null,resize:function(j,g){var d=Foundation.libs.section,e=c(d.settings.section_selector),i=d.small(e),h=function(l,k){return !d.is_accordion(l)&&!l.is("["+d.settings.resized_data_attr+"]")&&(!i||d.is_horizontal_tabs(l))&&k===(l.css("display")==="none"||!l.parent().is(":visible"))};j=j||c(d.settings.section_selector);clearTimeout(d.check_resize_timer);if(!i){j.removeAttr(d.settings.small_style_data_attr)}j.filter(function(){return h(c(this),false)}).each(function(){var t=c(this),n=t.children(d.settings.region_selector),q=n.children(d.settings.title_selector),r=n.children(d.settings.content_selector),u=0;if(g&&t.children(d.settings.region_selector).filter("."+d.settings.active_class).length==0){var l=c.extend({},d.settings,d.data_options(t));if(!l.deep_linking&&(l.one_up||!d.is_horizontal_nav(t)&&!d.is_vertical_nav(t)&&!d.is_accordion(t))){n.filter(":visible").first().addClass(d.settings.active_class)}}if(d.is_horizontal_tabs(t)||d.is_auto(t)){var k=0;q.each(function(){var x=c(this);if(x.is(":visible")){x.css(!d.rtl?"left":"right",k);var w=parseInt(x.css("border-"+(d.rtl?"left":"right")+"-width"),10);if(w.toString()==="Nan"){w=0}k+=d.outerWidth(x)-w;u=Math.max(u,d.outerHeight(x))}});q.css("height",u);n.each(function(){var x=c(this),y=x.children(d.settings.content_selector),w=parseInt(y.css("border-top-width"),10);if(w.toString()==="Nan"){w=0}x.css("padding-top",u-w)});t.css("min-height",u)}else{if(d.is_horizontal_nav(t)){var p=true;q.each(function(){u=Math.max(u,d.outerHeight(c(this)))});n.each(function(){var w=c(this);w.css("margin-left","-"+(p?t:w.children(d.settings.title_selector)).css("border-left-width"));p=false});n.css("margin-top","-"+t.css("border-top-width"));q.css("height",u);r.css("top",u);t.css("min-height",u)}else{if(d.is_vertical_tabs(t)){var s=0;q.each(function(){var w=c(this);if(w.is(":visible")){w.css("top",s);var x=parseInt(w.css("border-top-width"),10);if(x.toString()==="Nan"){x=0}s+=d.outerHeight(w)-x}});r.css("min-height",s+1)}else{if(d.is_vertical_nav(t)){var o=0,v=true;q.each(function(){o=Math.max(o,d.outerWidth(c(this)))});n.each(function(){var w=c(this);w.css("margin-top","-"+(v?t:w.children(d.settings.title_selector)).css("border-top-width"));v=false});q.css("width",o);r.css(!d.rtl?"left":"right",o);t.css("width",o)}}}}t.attr(d.settings.resized_data_attr,true)});if(c(d.settings.section_selector).filter(function(){return h(c(this),true)}).length>0){d.check_resize_timer=setTimeout(function(){d.resize(j.filter(function(){return h(c(this),false)}),true)},700)}if(i){j.attr(d.settings.small_style_data_attr,true)}},is_vertical_nav:function(d){return/vertical-nav/i.test(d.data("section"))},is_horizontal_nav:function(d){return/horizontal-nav/i.test(d.data("section"))},is_accordion:function(d){return/accordion/i.test(d.data("section"))},is_horizontal_tabs:function(d){return/^tabs$/i.test(d.data("section"))},is_vertical_tabs:function(d){return/vertical-tabs/i.test(d.data("section"))},is_auto:function(d){var e=d.data("section");return e===""||/auto/i.test(e)},set_active_from_hash:function(){var d=Foundation.libs.section,g=b.location.hash.substring(1),h=c(d.settings.section_selector);var e;h.each(function(){var i=c(this),j=i.children(d.settings.region_selector);j.each(function(){var l=c(this),k=l.children(d.settings.content_selector).data("slug");if(new RegExp(k,"i").test(g)){e=i;return false}});if(e!=null){return false}});if(e!=null){h.each(function(){if(e==c(this)){var l=c(this),k=c.extend({},d.settings,d.data_options(l)),n=l.children(d.settings.region_selector),i=k.deep_linking&&g.length>0,j=false;n.each(function(){var p=c(this);if(j){p.removeClass(d.settings.active_class)}else{if(i){var o=p.children(d.settings.content_selector).data("slug");if(o&&new RegExp(o,"i").test(g)){if(!p.hasClass(d.settings.active_class)){p.addClass(d.settings.active_class)}j=true}else{p.removeClass(d.settings.active_class)}}else{if(p.hasClass(d.settings.active_class)){j=true}}}});if(!j&&(k.one_up||!d.is_horizontal_nav(l)&&!d.is_vertical_nav(l)&&!d.is_accordion(l))){n.filter(":visible").first().addClass(d.settings.active_class)}}})}},reflow:function(){var d=Foundation.libs.section;c(d.settings.section_selector).removeAttr(d.settings.resized_data_attr);d.throttle(function(){d.resize()},30)()},small:function(e){var d=c.extend({},this.settings,this.data_options(e));if(this.is_horizontal_tabs(e)){return false}if(e&&this.is_accordion(e)){return true}if(c("html").hasClass("lt-ie9")){return true}if(c("html").hasClass("ie8compat")){return true}return c(b).width()<d.small_breakpoint},off:function(){c(this.scope).off(".fndtn.section");c(b).off(".fndtn.section");c(a).off(".fndtn.section")}};c.fn.reflow_section=function(e){var g=this,d=Foundation.libs.section;g.removeAttr(d.settings.resized_data_attr);d.throttle(function(){d.resize(g,e)},30)();return this}}(Foundation.zj,window,document));(function(c,b,a,d){Foundation.libs.tooltips={name:"tooltips",version:"4.3.2",settings:{selector:".has-tip",additionalInheritableClasses:[],tooltipClass:".tooltip",touchCloseText:"tap to close",appendTo:"#interface","disable-for-touch":false,tipTemplate:function(e,g){return'<span data-selector="'+e+'" class="'+Foundation.libs.tooltips.settings.tooltipClass.substring(1)+'">'+g+'<span class="nub"></span></span>'}},cache:{},init:function(h,i,g){Foundation.inherit(this,"data_options");var e=this;if(typeof i==="object"){c.extend(true,this.settings,i)}else{if(typeof g!=="undefined"){c.extend(true,this.settings,g)}}if(typeof i!=="string"){if(Modernizr.touch){c(this.scope).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip","[data-tooltip]",function(k){var j=c.extend({},e.settings,e.data_options(c(this)));if(!j["disable-for-touch"]){k.preventDefault();c(j.tooltipClass).hide();e.showOrCreateTip(c(this))}}).on("click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip",this.settings.tooltipClass,function(j){j.preventDefault();c(this).fadeOut(150)})}else{c(this.scope).on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip","[data-tooltip]",function(k){var j=c(this);if(/enter|over/i.test(k.type)){e.showOrCreateTip(j)}else{if(k.type==="mouseout"||k.type==="mouseleave"){e.hide(j)}}})}}else{return this[i].call(this,g)}},showOrCreateTip:function(e){var g=this.getTip(e);if(g&&g.length>0){return this.show(e)}return this.create(e)},getTip:function(g){var e=this.selector(g),h=null;if(e){h=c('span[data-selector="'+e+'"]'+this.settings.tooltipClass)}return(typeof h==="object")?h:false},selector:function(e){var h=e.attr("id"),g=e.attr("data-tooltip")||e.attr("data-selector");if((h&&h.length<1||!h)&&typeof g!="string"){g="tooltip"+Math.random().toString(36).substring(7);e.attr("data-selector",g)}return(h&&h.length>0)?h:g},create:function(e){var h=c(this.settings.tipTemplate(this.selector(e),c("<div></div>").html(e.attr("title")).html())),g=this.inheritable_classes(e);h.addClass(g).appendTo(this.settings.appendTo);if(Modernizr.touch){h.append('<span class="tap-to-close">'+this.settings.touchCloseText+"</span>")}e.removeAttr("title").attr("title","");this.show(e)},reposition:function(k,p,i){var e,q,n,j,h,l;p.css("visibility","hidden").show();e=k.data("width");q=p.children(".nub");n=this.outerHeight(q);j=this.outerHeight(q);l=function(w,v,s,r,u,t){return w.css({top:(v)?v:"auto",bottom:(r)?r:"auto",left:(u)?u:"auto",right:(s)?s:"auto",width:(t)?t:"auto",position:"fixed"}).end()};l(p,(k.offset().top+this.outerHeight(k)+10),"auto","auto",k.offset().left,e);if(c(b).width()<767){l(p,(k.offset().top+this.outerHeight(k)+10),"auto","auto",12.5,c(this.scope).width());p.addClass("tip-override");l(q,-n,"auto","auto",k.offset().left)}else{var g=k.offset().left;if(Foundation.rtl){g=k.offset().left+k.offset().width-this.outerWidth(p)}var o=(k.offset().top+this.outerHeight(k)+10)-c(a).scrollTop();l(p,o,"auto","auto",g,e);p.removeClass("tip-override");if(i&&i.indexOf("tip-top")>-1){l(p,(k.offset().top-this.outerHeight(p)),"auto","auto",g,e).removeClass("tip-override")}else{if(i&&i.indexOf("tip-left")>-1){l(p,(k.offset().top+(this.outerHeight(k)/2)-n*2.5),"auto","auto",(k.offset().left-this.outerWidth(p)-n),e).removeClass("tip-override")}else{if(i&&i.indexOf("tip-right")>-1){l(p,(k.offset().top+(this.outerHeight(k)/2)-n*2.5),"auto","auto",(k.offset().left+this.outerWidth(k)+n),e).removeClass("tip-override")}}}}p.css("visibility","visible").hide()},inheritable_classes:function(i){var h=["tip-top","tip-left","tip-bottom","tip-right","noradius"].concat(this.settings.additionalInheritableClasses),g=i.attr("class"),e=g?c.map(g.split(" "),function(k,j){if(c.inArray(k,h)!==-1){return k}}).join(" "):"";return c.trim(e)},show:function(e){var g=this.getTip(e);this.reposition(e,g,e.attr("class"));g.fadeIn(150)},hide:function(e){var g=this.getTip(e);g.fadeOut(150)},reload:function(){var e=c(this);return(e.data("fndtn-tooltips"))?e.foundationTooltips("destroy").foundationTooltips("init"):e.foundationTooltips("init")},off:function(){c(this.scope).off(".fndtn.tooltip");c(this.settings.tooltipClass).each(function(e){c("[data-tooltip]").get(e).attr("title",c(this).text())}).remove()},reflow:function(){}}}(Foundation.zj,this,this.document));(function(c,b,a,d){Foundation.libs.topbar={name:"topbar",version:"4.3.2",settings:{index:0,stickyClass:"sticky",custom_back_text:true,back_text:"Back",is_hover:true,mobile_show_parent_link:false,scrolltop:true,init:false},init:function(h,i,g){Foundation.inherit(this,"data_options addCustomRule");var e=this;if(typeof i==="object"){c.extend(true,this.settings,i)}else{if(typeof g!=="undefined"){c.extend(true,this.settings,g)}}if(typeof i!=="string"){c(".top-bar, [data-topbar]").each(function(){c.extend(true,e.settings,e.data_options(c(this)));e.settings.$w=c(b);e.settings.$topbar=c(this);e.settings.$section=e.settings.$topbar.find("section");e.settings.$titlebar=e.settings.$topbar.children("ul").first();e.settings.$topbar.data("index",0);var k=e.settings.$topbar.parent();if(k.hasClass("fixed")||k.hasClass(e.settings.stickyClass)){e.settings.$topbar.data("height",e.outerHeight(k));e.settings.$topbar.data("stickyoffset",k.offset().top)}else{e.settings.$topbar.data("height",e.outerHeight(e.settings.$topbar))}var j=c("<div class='top-bar-js-breakpoint'/>").insertAfter(e.settings.$topbar);e.settings.breakPoint=j.width();j.remove();e.assemble();if(e.settings.is_hover){e.settings.$topbar.find(".has-dropdown").addClass("not-click")}e.addCustomRule(".f-topbar-fixed { padding-top: "+e.settings.$topbar.data("height")+"px }");if(e.settings.$topbar.parent().hasClass("fixed")){c("body").addClass("f-topbar-fixed")}});if(!e.settings.init){this.events()}return this.settings.init}else{return this[i].call(this,g)}},toggle:function(){var g=this;var e=c(".top-bar, [data-topbar]"),h=e.find("section, .section");if(g.breakpoint()){if(!g.rtl){h.css({left:"0%"});h.find(">.name").css({left:"100%"})}else{h.css({right:"0%"});h.find(">.name").css({right:"100%"})}h.find("li.moved").removeClass("moved");e.data("index",0);e.toggleClass("expanded").css("height","")}if(g.settings.scrolltop){if(!e.hasClass("expanded")){if(e.hasClass("fixed")){e.parent().addClass("fixed");e.removeClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(e.parent().hasClass("fixed")){if(g.settings.scrolltop){e.parent().removeClass("fixed");e.addClass("fixed");c("body").removeClass("f-topbar-fixed");b.scrollTo(0,0)}else{e.parent().removeClass("expanded")}}}}else{if(e.parent().hasClass(g.settings.stickyClass)){e.parent().addClass("fixed")}if(e.parent().hasClass("fixed")){if(!e.hasClass("expanded")){e.removeClass("fixed");e.parent().removeClass("expanded");g.updateStickyPositioning()}else{e.addClass("fixed");e.parent().addClass("expanded")}}}},timer:null,events:function(){var e=this;c(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(g){g.preventDefault();e.toggle()}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(k){var h=c(this),j=c(k.target),i=h.closest("[data-topbar], .top-bar"),g=i.data("topbar");if(j.data("revealId")){e.toggle();return}if(e.breakpoint()){return}if(e.settings.is_hover&&!Modernizr.touch){return}k.stopImmediatePropagation();if(j[0].nodeName==="A"&&j.parent().hasClass("has-dropdown")){k.preventDefault()}if(h.hasClass("hover")){h.removeClass("hover").find("li").removeClass("hover");h.parents("li.hover").removeClass("hover")}else{h.addClass("hover")}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(l){if(e.breakpoint()&&c(b).width()!=e.settings.breakPoint){l.preventDefault();var k=c(this),h=k.closest(".top-bar, [data-topbar]"),j=h.find("section, .section"),i=k.next(".dropdown").outerHeight(),g=k.closest("li");h.data("index",h.data("index")+1);g.addClass("moved");if(!e.rtl){j.css({left:-(100*h.data("index"))+"%"});j.find(">.name").css({left:100*h.data("index")+"%"})}else{j.css({right:-(100*h.data("index"))+"%"});j.find(">.name").css({right:100*h.data("index")+"%"})}h.css("height",e.outerHeight(k.siblings("ul"),true)+e.settings.$topbar.data("height"))}});c(b).on("resize.fndtn.topbar",function(){if(typeof e.settings.$topbar==="undefined"){return}var h=e.settings.$topbar.parent("."+this.settings.stickyClass);var i;if(!e.breakpoint()){var g=e.settings.$topbar.hasClass("expanded");c(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover");if(g){e.toggle()}}if(h.length>0){if(h.hasClass("fixed")){h.removeClass("fixed");i=h.offset().top;if(c(a.body).hasClass("f-topbar-fixed")){i-=e.settings.$topbar.data("height")}e.settings.$topbar.data("stickyoffset",i);h.addClass("fixed")}else{i=h.offset().top;e.settings.$topbar.data("stickyoffset",i)}}}.bind(this));c("body").on("click.fndtn.topbar",function(h){var g=c(h.target).closest("li").closest("li.hover");if(g.length>0){return}c(".top-bar li, [data-topbar] li").removeClass("hover")});c(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(l){l.preventDefault();var k=c(this),h=k.closest(".top-bar, [data-topbar]"),j=h.find("section, .section"),i=k.closest("li.moved"),g=i.parent();h.data("index",h.data("index")-1);if(!e.rtl){j.css({left:-(100*h.data("index"))+"%"});j.find(">.name").css({left:100*h.data("index")+"%"})}else{j.css({right:-(100*h.data("index"))+"%"});j.find(">.name").css({right:100*h.data("index")+"%"})}if(h.data("index")===0){h.css("height","")}else{h.css("height",e.outerHeight(g,true)+e.settings.$topbar.data("height"))}setTimeout(function(){i.removeClass("moved")},300)})},breakpoint:function(){return c(a).width()<=this.settings.breakPoint||c("html").hasClass("lt-ie9")},assemble:function(){var e=this;this.settings.$section.detach();this.settings.$section.find(".has-dropdown>a").each(function(){var g=c(this),j=g.siblings(".dropdown"),h=g.attr("href");if(e.settings.mobile_show_parent_link&&h&&h.length>1){var i=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+h+'">'+g.text()+"</a></li>")}else{var i=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li>')}if(e.settings.custom_back_text==true){i.find("h5>a").html(e.settings.back_text)}else{i.find("h5>a").html("&laquo; "+g.html())}j.prepend(i)});this.settings.$section.appendTo(this.settings.$topbar);this.sticky()},height:function(g){var h=0,e=this;g.find("> li").each(function(){h+=e.outerHeight(c(this),true)});return h},sticky:function(){var g=c(b),e=this;g.scroll(function(){e.updateStickyPositioning()})},updateStickyPositioning:function(){var e="."+this.settings.stickyClass;var g=c(b);if(c(e).length>0){var h=this.settings.$topbar.data("stickyoffset");if(!c(e).hasClass("expanded")){if(g.scrollTop()>(h)){if(!c(e).hasClass("fixed")){c(e).addClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(g.scrollTop()<=h){if(c(e).hasClass("fixed")){c(e).removeClass("fixed");c("body").removeClass("f-topbar-fixed")}}}}}},off:function(){c(this.scope).off(".fndtn.topbar");c(b).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document));jQuery(document).ready(function(){jQuery("#wx-modal-loading").hide().ajaxStart(function(){jQuery("#wx-modal-error-text").html("");jQuery(this).fadeIn(200);jQuery("#wx-modal-loading-text").html(WPText.WEEVER_JS_SAVING_CHANGES);jQuery("#wx-modal-secondary-text").html(WPText.WEEVER_JS_PLEASE_WAIT)}).ajaxStop(function(){var a=jQuery(this);setTimeout(function(){a.fadeOut(750)},600)});wx.makeApiCall("account/get_expiry",{},function(c){if(c.expiry=="0000-00-00 00:00:00"){return}var e=new Date(c.expiry);var a=86400000;var b=e.getTime()-(new Date()).getTime();var g=b/a;g=Math.floor(g);if(g<0){return}if(g<5){jQuery("#account-expiration-warning .secondary").addClass("alert").removeClass("secondary")}if(g==0){jQuery("#expiry-days").html("today!")}else{if(g==1){jQuery("#expiry-days").html("in one day.")}else{jQuery("#expiry-days").html("in "+g.toString()+" days.")}}jQuery("#account-expiration-warning").show()})});var wx=wx||{};wx.activeTypeDialog=null;wx.tinymce_options={script_url:"../jscripts/tiny_mce/tiny_mce.js",theme:"advanced",plugins:"table",relative_urls:false,remove_script_host:false,theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontsizeselect",theme_advanced_buttons2:"bullist,numlist,|,undo,redo,|,link,unlink,code,|,forecolor",theme_advanced_buttons3:"tablecontrols",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:true};if(typeof console=="undefined"){this.console={log:function(){}}}wx.ajaxAddTabItem=function(d,h,b){var c=[],g=0,j=function(l,n){var i;if(typeof n.component==="object"){i=n.component[l]}else{i=n.component}var a=new wx.ajaxUrl({type:l,component:i,published:1});a.id=n.id;if(undefined!=n.defaultTitle&&!(jQuery("#wx-add-title-tab-item").val())){a.title="&name="+encodeURIComponent(n.defaultTitle)}for(var k in n.fields){a[k]=jQuery(n.fields[k]).val()}if(undefined!=jQuery("#wx-add-title-tab-dialog select.wx-icon-picker")){a.extra+="&icon_id="+jQuery("#wx-add-title-tab-dialog select.wx-icon-picker").val()}if("component_behaviour"==n.defaultTitle&&!n.title){a.title="&name="+encodeURIComponent(a.component_behaviour)}if(n.options){for(var k in n.options){a.extra+="&"+k+"=";if(jQuery("#wx-add-source-option-"+k).is(":checked")){a.extra+="1"}else{a.extra+="0"}}}c.push(a.getParams())};if(d.featureData.types instanceof Array){for(var e=0;e<d.featureData.types.length;e++){if(jQuery("#wx-add-source-check-"+d.featureData.types[e]+":checked").length>0){j(d.featureData.types[e],d.featureData)}}}else{j(d.featureData.types,d.featureData)}for(var e=0;e<c.length;e++){c[e]+="&nonce="+jQuery("input#nonce").val();if(undefined!=h&&true===h){c[e]+="&confirm_feed=1&api_check=1"}if(wx.current_parent_id){c[e]+="&parent_id="+parseInt(wx.current_parent_id)}if(wx.edit_id){c[e]+="&edit_id="+parseInt(wx.edit_id)}jQuery.ajax({type:"POST",url:ajaxurl,data:c[e],success:function(o){g++;if(g==c.length){if(true===h){try{var a=JSON.parse(o);if(!a.success){jQuery(b).dialog("close");jQuery(d.previousDialog).dialog("open");alert("Error retrieving sample data!  Check the details and try again")}else{var n=0;for(var k=0;k<a.feed.length;k++){if(a.feed[k].content||a.feed[k].image||a.feed[k].title){jQuery("<tr><td>"+(a.feed[k].image?'<img src="http://src.sencha.io/96/96/'+a.feed[k].image+'" />':"&nbsp;")+"</td><td>"+(a.feed[k].title?a.feed[k].title:"&nbsp;")+"</td><td>"+(a.feed[k].content?(a.feed[k].content.slice(0,200)+(a.feed[k].content.length>200?"...":"")):"&nbsp;")+"</td>"+(a.feed[k].url?'<td><a target="_blank" href="'+a.feed[k].url+'">View</a></td>':"<td>&nbsp;</td>")+"</tr>").appendTo("#wx-add-confirm-feed-data tbody");n++}}if(!n){jQuery('<tr><td><span class="error">Details verified but no data found, new account?</span></td></tr>').appendTo("#wx-add-confirm-feed-data tbody")}}}catch(l){jQuery('<tr><td><span class="error">Error retrieving sample data!</span></td></tr>').appendTo("#wx-add-confirm-feed-data tbody")}jQuery("#wx-add-confirm-feed-loading").hide();return}jQuery("#wx-modal-loading-text").html(o);if(o==""){var i;if(wx.activeTypeDialog!=null){i="&refresh="+Math.random()+"#"+wx.activeTypeDialog+"Tab"}else{i="&refresh="+Math.random()}jQuery("#wx-modal-secondary-text").html("Reloading page..");document.location.href=wx.baseExtensionUrl+i}else{jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html("Error adding item")}}},error:function(a,i){jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html("Error adding item")}})}};wx.confirmAddTabItem=function(c){alert("wx.confirmAddTabItem");var b="#wx-add-title-tab-dialog",d="Confirm";if(true===c.featureData.confirm_feed){jQuery("#wx-add-confirm-feed").show();jQuery("#wx-add-confirm-feed-loading").show();jQuery("#wx-add-confirm-feed-data tbody").html("");wx.ajaxAddTabItem(c,true,b)}else{jQuery("#wx-add-confirm-feed").hide()}jQuery("#wx-add-title-tab-dialog select.wx-icon-picker").val(wx.default_icon_id.toString());if("component_behaviour"==c.featureData.defaultTitle){jQuery("input#wx-add-title-tab-item").val(jQuery(c.featureData.fields.component_behaviour).val())}else{if(undefined!=c.featureData.defaultTitle){jQuery("input#wx-add-title-tab-item").val(c.featureData.defaultTitle)}else{if(undefined!=jQuery(c.featureData.fields.cms_feed+" option:selected").text()){jQuery("input#wx-add-title-tab-item").val(jQuery(c.featureData.fields.cms_feed+" option:selected").text())}else{jQuery("input#wx-add-title-tab-item").val("")}}}if(undefined!=c.featureData.titleUse){jQuery("p#wx-add-title-use").html(c.featureData.titleUse)}else{jQuery("p#wx-add-title-use").html("This title will be just above your content, keep it short so it will fit easily on a small screen.")}jQuery(b).dialog({modal:true,resizable:false,width:"auto",height:"auto",title:d,show:"fade",hide:"drop",buttons:wx.setButtonActions({buttonName:["Finish","Cancel"],dialogId:b,backAction:function(){jQuery(c.previousDialog).dialog("open")},action:wx.ajaxAddTabItem,actionArg:{previousDialog:c.dialogId,featureData:c.featureData}}),open:function(g,a){jQuery(".ui-widget-overlay").bind("click",function(){jQuery(b).dialog("close")})}})};wx.setButtonActions=function(b){var c={};if(undefined!=b.buttonName[1]){c[b.buttonName[0]]={id:"wxui-action","class":"wxui-btn medium radius3 wxalign-left blue",text:b.buttonName[0],click:function(){jQuery(b.dialogId).dialog("close");b.action(b.actionArg)}};c[b.buttonName[1]]=function(){jQuery(b.dialogId).dialog("close");if(isFunction(b.backAction)){b.backAction()}}}else{c[b.buttonName[0]]=function(){jQuery(b.dialogId).dialog("close");if(isFunction(b.backAction)){b.backAction()}}}return c};wx.parentFeatureData;wx.edit_id;wx.edit_data;wx.getFeatureData=function(d,a){var e;wx.parentFeatureData=undefined;for(var b=0;b<wx.features.length;b++){if(wx.features[b].id==d&&wx.features[b].items&&a){wx.parentFeatureData=wx.features[b];for(var c=0;c<wx.features[b].items.length;c++){if(wx.features[b].items[c].id==a){e=wx.features[b].items[c]}}}else{if(wx.features[b].id==d){e=wx.features[b]}}}return e};wx.localizedConditionalDialog=function(p,o,k,g,j){var h=o.replace("#wx-add-","").replace("-dialog","").replace(/\-/,"."),n=h.split("."),c="",b,l,a,d;if(n[1]!="type"&&(n[1]==undefined||n[1].search("upgrade-notice")==-1)){if(n[0]=="facebook"&&n[1]!="social"){n[1]=h}b=wx.getFeatureData(n[0],n[1]);l=wx.parentFeatureData;if(undefined==b){return}if(undefined!=wx.parentFeatureData){c+="<img class='wx-jquery-dialog-titlebar-icon' src='"+wx.navIconDir+l.id+".png' /> "+l.name+": "+b.name}else{c+="<img class='wx-jquery-dialog-titlebar-icon' src='"+wx.navIconDir+b.id+".png' /> "+b.name}if(true==g&&true==j){wx.activeTypeDialog=null}if(wx.activeTypeDialog!=null){jQuery(".wx-sub-item-option").hide();jQuery(".wx-type-"+wx.activeTypeDialog+"-option").show()}if(b!=undefined){if(true===b.title||true===b.confirm_feed){d=wx.confirmAddTabItem}else{d=wx.ajaxAddTabItem}if(undefined!=b.defaultValue&&!wx.edit_id){for(var e in b.defaultValue){jQuery(b.fields[e]).val(b.defaultValue[e])}}}}else{if(n[1]!=undefined&&n[1].search("upgrade-notice")>=0){d=function(i){null}}else{console.log(n);wx.activeTypeDialog=n[0];c+="<img class='wx-jquery-dialog-titlebar-icon' src='"+wx.navIconDir+n[0]+".png' /> "+wx.types[n[0]].name;d=function(i){null}}}jQuery(o).dialog({modal:true,resizable:false,width:"auto",height:"auto",title:c,show:"fade",hide:"drop",buttons:wx.setButtonActions({buttonName:p,dialogId:o,backAction:k,action:d,actionArg:{previousDialog:o,featureData:b}}),open:function(s,r){var q="div.ui-dialog-buttonset button#wxui-action",i="div.ui-dialog-buttonset button";jQuery(i).removeClass("blue");jQuery(i).addClass("wxui-btn medium radius3 wxalign-left white");jQuery(".ui-widget-overlay").bind("click",function(){jQuery(o).dialog("close")});jQuery("input:first-child",jQuery(this)).blur()}})};function isFunction(a){var b={};return a&&b.toString.call(a)=="[object Function]"}wx.features=[{id:"wordpress",name:"Content",description:"Add content to your app.",splitTypes:true,items:[{id:"blog",component:"blog",name:"Posts",title:true,confirm_feed:false,types:"blog",fields:{cms_feed:"#wx-add-wordpress-blog-select"}},{id:"category",component:"blog",name:"Category",title:true,confirm_feed:false,types:"blog",fields:{cms_feed:"#wx-add-wordpress-blog-category_name-select"}},{id:"page",name:"Page",component:"page",confirm_feed:false,title:true,titleUse:"Change only if you think a shorter title is more appropriate for a mobile app.",types:"page",fields:{cms_feed:"#wx-add-wordpress-page-menu-item-select"}},{id:"tag",component:"blog",name:"Tag",confirm_feed:false,title:true,types:"blog",fields:{cms_feed:"#wx-add-wordpress-tag-select"}},{id:"searchterm",component:"blog",name:"Search Term",confirm_feed:false,title:true,types:"blog",fields:{s:"#wx-add-wordpress-searchterm"}},{id:"map",component:"map",name:"Map Feed",confirm_feed:false,title:true,types:"map",fields:{cms_feed:"#wx-add-wordpress-map-select"}},{id:"proximity",component:"proximity",name:"Nearest to Me Feed",confirm_feed:false,title:true,types:"proximity",fields:{cms_feed:"#wx-add-wordpress-proximity-select"}},{id:"directory",component:"directory",name:"Directory",confirm_feed:false,title:true,types:"directory",fields:{cms_feed:"#wx-add-wordpress-directory-select"}}]},{id:"wordpress_contact",name:"Contact",component:"contact",confirm_feed:false,defaultTitle:"component_behaviour",fields:{component_behaviour:"#wx-contact-dialog-title",name:"#wx-contact-dialog-title",phone:"#wx-contact-dialog-phone",email:"#wx-contact-dialog-email",address:"#wx-contact-dialog-address",town:"#wx-contact-dialog-town",state:"#wx-contact-dialog-state",country:"#wx-contact-dialog-country",image:"#wx-contact-dialog-image",misc:"#wx-contact-dialog-misc"},options:{emailform:"Display a form instead of my email address",googlemaps:"Show my location on a Google Map"},types:"contact"},{vertical:"all",id:"twitter",name:"Twitter",url:"http://twitter.com/",description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>Planning an event?  Adding a twitter #hashtag stream for a specific event encourages people to tweet and share photos.</p>',items:[{id:"user",name:"Twitter User",defaultTitle:"component_behaviour",title:true,confirm_feed:true,component:"twitteruser",types:"social",fields:{component_behaviour:"#wx-twitter-user-value"},defaultValue:{component_behaviour:"@"}},{id:"hashtag",name:"Hash Tag",component:"twitter",defaultTitle:"component_behaviour",title:true,confirm_feed:true,types:"social",fields:{component_behaviour:"#wx-twitter-hashtag-value"},defaultValue:{component_behaviour:"#"}},{id:"search",name:"Search Term",component:"twitter",types:"social",defaultTitle:"component_behaviour",confirm_feed:true,title:true,fields:{component_behaviour:"#wx-twitter-search-value"}}]},{id:"facebook",defaultTitle:"Facebook",vertical:"all",component:"facebook",title:true,confirm_feed:true,name:"Facebook",description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>Due to privacy settings, only <strong>Facebook Page</strong> content can be shared in a mobile app.  Make sure you\'re adding a public-facing page and not a <em>personal</em> profile.</p>',url:"http://facebook.com/",items:[{id:"social",name:"Wall/Posts",defaultTitle:"Facebook",title:true,confirm_feed:true,component:"facebook",types:"social",fields:{component_behaviour:"#wx-facebook-user-value"},defaultValue:{component_behaviour:"http://facebook.com/"}},{id:"facebook.photos",name:"Photos",component:"facebook.photos",defaultTitle:"Facebook Photos",title:true,confirm_feed:true,types:"photo",fields:{component_behaviour:"#wx-facebook-photo-value"},defaultValue:{component_behaviour:"http://facebook.com/"}},{id:"facebook.events",name:"Events",component:"facebook.events",types:"calendar",defaultTitle:"Facebook Events",confirm_feed:true,title:true,fields:{component_behaviour:"#wx-facebook-calendar-value"},defaultValue:{component_behaviour:"http://facebook.com/"}}]},{id:"tumblr",vertical:"all",name:"Tumblr",types:"blog",unavailable:"Tumblr Support is coming soon!"},{vertical:"all",id:"google_plus",name:"Google +",types:"social",unavailable:"Google Plus Support is coming soon!"},{vertical:"all",id:"youtube",name:"Youtube",url:"http://youtube.com/",description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>A YouTube <strong>Channel</strong> displays all videos associated with one <a href="http://youtube.com" target="_blank">YouTube</a> user account.  If you would like to show a collection of videos from around YouTube, add a YouTube <i>Playlist</i>.',items:[{id:"channel",name:"User / Channel",types:"video",title:true,confirm_feed:true,defaultTitle:"Videos",component:"youtube",fields:{component_behaviour:"#wx-youtube-channel-url"},defaultValue:{component_behaviour:"http://youtube.com/"}},{id:"playlist",name:"Playlist",types:"video",component:"youtube.playlists",title:true,confirm_feed:true,defaultTitle:"Videos",fields:{component_behaviour:"#wx-youtube-playlist-url"},defaultValue:{component_behaviour:"http://youtube.com/playlist?list="}}]},{vertical:"all",id:"vimeo",name:"Vimeo",component:"vimeo",url:"http://vimeo.com/",description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>Adding a Vimeo User shares all videos associated with one <a href="http://vimeo.com" target="_blank">Vimeo</a> user account.  To share a collections of videos add <i>channels</i>.  One Vimeo user can have multiple channels.',types:"video",title:true,confirm_feed:true,defaultTitle:"Videos",fields:{component_behaviour:"#wx-vimeo-channel-url"},defaultValue:{component_behaviour:"http://vimeo.com/"}},{vertical:"all",id:"wufoo",name:"Wufoo Forms",component:"wufoo",url:"http://wufoo.com/",title:true,confirm_feed:true,description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>Wufoo\'s free online form creator can power your app\'s contact forms, surveys, and event registrations. <b>To find your Wufoo API Key:</b></p><ol><li>Login to <a href="http://wufoo.com/" target="_blank">Wufoo.com</a> and navigate to a specific form.</li><li>Choose the "Code" link, then click the "API Information" button.</li></ol><h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/network_48.png" class="wxui-helptip-icon">Connect a Form to Your Favourite Web Service!</h3><p>Wufoo Forms connects to many free and paid services on the web including MailChimp email newsletters, Campaign Monitor, PayPal Donations and Payments, SalesForce CRM, Freshbooks Accounting &amp; Billing, Highrise Contact Management and Twitter.</li></ul><p>For more information check out: <a href="http://wufoo.com/integrations" target="_blank">http://wufoo.com/integrations</a></p>',types:"form",defaultTitle:"Forms",tier:2,fields:{component_behaviour:"#wx-wufoo-form-url",var_value:"#wx-wufoo-form-api-key"}},{vertical:"all",id:"flickr",name:"Flickr",url:"http://flickr.com/",description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>Add a Flickr Photostream (stream all photos) for one <a href="http://flickr.com" target="_blank">Flickr</a> user account, or list all your Flickr Photo Sets (galleries).</p><h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/gear_48.png" class="wxui-helptip-icon">Flickr Compatibility</h3><p>Only <em>publicly available</em> photos on Flickr will display. Photos uploaded prior to April 2011 may not display as gallery thumbnails – simply rotate and resave these photos to fix.</p><h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/present_48.png" class="wxui-helptip-icon">Coming Soon</h3><p>Support for Flickr Group Pools (community galeries) and adding just one photo set at a time.</p>',items:[{id:"photostream",name:"Latest Photos",title:true,confirm_feed:true,defaultTitle:"Latest Photos",component:"flickr",types:"photo",fields:{component_behaviour:"#wx-flickr-photostream-photo-url"},defaultValue:{component_behaviour:"http://flickr.com/photos/"}},{id:"photosets",name:"All Photosets",defaultTitle:"Photos",component:"flickr.photosets",types:"photo",title:true,confirm_feed:true,defaultValue:{component_behaviour:"http://flickr.com/photos/"},fields:{component_behaviour:"#wx-flickr-photosets-photo-url"}}]},{id:"picasa",vertical:"all",name:"Picasa",component:"google.picasa",url:"http://picasa.google.com/",title:true,confirm_feed:true,defaultTitle:"Photos",description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>Showcase all your <a href="http://picasa.google.com" target="_blank">Picasa</a> photo albums!</p><h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/present_48.png" class="wxui-helptip-icon">Coming Soon</h3><p>Support for Flickr Group Pools (community galleries) and adding specific photo sets.</p>',types:"photo",fields:{component_behaviour:"#wx-picasa-photo-url"}},{vertical:"all",id:"foursquare",name:"Foursquare",component:"foursquare",defaultTitle:"Foursquare Photos",url:"http://foursquare.com/",title:true,confirm_feed:true,description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>Sharing a Live Stream of <strong><a href="http://foursquare.com" target="_blank">Foursquare</a> Venue Photos</strong> for a particular location is a great way to engage event attendees or share info about a specific place!</p><p>To find the URL (web address) for a Foursquare Venue:</p><ol><li>Search the web for "Foursquare" and the name of the location (venue)</li><li>Open the Foursquare Venue Page</li><li>Copy the URL of the page from your browser address bar</li></ol>',types:"photo",fields:{component_behaviour:"#wx-foursquare-photo-url"},defaultValue:{component_behaviour:"https://foursquare.com/v/"}},{vertical:"all",id:"soundcloud",name:"SoundCloud",unavailable:"Sound Cloud support is coming soon!",items:[{id:"user",name:"User",types:"audio"},{id:"set",name:"Set",types:"audio"}]},{id:"bandcamp",vertical:["music","event"],name:"BandCamp",unavailable:"BandCamp support is coming soon!",items:[{id:"band",name:"Band",types:"audio"},{id:"album",name:"Album",types:"audio"}]},{id:"google_calendar",name:"Google Calendar",types:"calendar",component:"google.calendar",defaultTitle:"Calendar",title:true,confirm_feed:true,description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>To add the <strong>Primary Calendar</strong> associated with a Google account, simply enter the email address associated with that account (example@mail.com)</p><h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/gear_48.png" class="wxui-helptip-icon">How to Find the ID of a Group / Secondary Calendar</h3><ol><li>Login to <a href="www.google.com/calendar" target="_blank">www.google.com/calendar</a> if you are not logged in already</li><li>Highlight a specific calendar name and choose \'calendar settings\'</li><li>Copy and paste the calendar ID from this page.  It will be in a format like "abc123@group.calendar.google.com"</li></ol><h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/gear_48.png" class="wxui-helptip-icon">Privacy Settings</h3><p>Only <em>publicly available</em> Google Calendars will display.  Choose \'share this calendar\' to confirm your calendars are public and allow for a one day delay on any changes.</p>',fields:{component_behaviour:"#wx-google-calendar-email"}},{id:"blogger",name:"Blogger",component:"blogger",title:true,confirm_feed:true,defaultTitle:"Our Blog",types:"blog",fields:{component_behaviour:"#wx-add-blog-blogger-url-input"}},{id:"identica",name:"Identi.ca",component:"identi.ca",title:true,confirm_feed:true,description:'<h3 class="wxui-helptip-h3"><img src="'+wx.pluginUrl+'/static/images/icons/icons_library/help_48.png" class="wxui-helptip-icon">Help Tips:</h3><p>Identi.ca is a social microblogging service similar to Twitter, but built on open source tools and open standards.<p>In Weever, you can display a search term or hashtag stream.</p>',types:"social",defaultTitle:"Identi.ca Status",fields:{component_behaviour:"#wx-identica-social-value"}},{id:"r3s",name:"R3S Object",component:"r3s",title:true,types:["blog","page","map","panel","directory","aboutapp","proximity"],component:{blog:"blog",directory:"dir	ectory",map:"map",proximity:"proximity",aboutapp:"aboutapp",page:"page",panel:"panel"},fields:{cms_feed:"#wx-add-page-r3s-url-input"}},{id:"suggestion",name:"What's Missing?"}];wx.ajaxUrl=function(b){this.title="&name="+encodeURIComponent(jQuery("#wx-add-title-tab-item").val());this.type="&type="+b.type;this.component="&component="+b.component;this.appKey="&site_key="+jQuery("input#wx-site-key").val();this.var_value="";this.component_behaviour="";this.published="&published="+b.published;this.component_id="";this.extra="";this.cms_feed="";this.getParams=function(){if(this.component_behaviour){this.component_behaviour="&component_behaviour="+encodeURIComponent(this.component_behaviour)}if(b.type=="contact"){this.var_value="&name="+encodeURIComponent(this.name)+"&phone="+encodeURIComponent(this.phone)+"&email="+encodeURIComponent(this.email)+"&address="+encodeURIComponent(this.address)+"&town="+encodeURIComponent(this.town)+"&state="+encodeURIComponent(this.state)+"&country="+encodeURIComponent(this.country)+"&image="+encodeURIComponent(this.image)+"&misc="+encodeURIComponent(this.misc)}else{if(this.id=="searchterm"){this.cms_feed="index.php?feed=r3s&s="+this.s}else{if(this.var_value){this.var_value="&var="+encodeURIComponent(this.var_value)}}}if(this.component_id){this.component_id="&component_id="+this.component_id}if(this.cms_feed){this.cms_feed="&cms_feed="+encodeURIComponent(this.cms_feed)}return"option=com_weever&action=ajaxSaveNewTab"+this.title+this.type+this.component+this.component_behaviour+this.var_value+"&weever_action=add"+this.appKey+this.published+this.component_id+this.cms_feed+this.extra}};window.Swipe=function(b,a){var c=this;if(!b){return}this.container=b;this.element=this.container.children[0];this.browser={touch:(function(){return("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch})(),transitions:(function(){var d=document.createElement("swipe"),g=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var e in g){if(d.style[g[e]]!==undefined){return true}}return false})()};a=a||{};this.index=a.startSlide||0;this.speed=a.speed||300;this.callback=a.callback||function(){};this.transitionEnd=a.transitionEnd||function(){};this.delay=a.auto||0;this.cont=(a.continuous!=undefined)?!!a.continuous:true;this.disableScroll=!!a.disableScroll;this.index=parseInt(this.index,10);this.setup();this.begin();if(this.element.addEventListener){if(!!this.browser.touch){this.element.addEventListener("touchstart",this,false);this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false)}if(!!this.browser.transitions){this.element.addEventListener("webkitTransitionEnd",this,false);this.element.addEventListener("msTransitionEnd",this,false);this.element.addEventListener("oTransitionEnd",this,false);this.element.addEventListener("transitionend",this,false)}window.addEventListener("resize",this,false)}else{window.onresize=function(){c.setup()}}};Swipe.prototype={setup:function(){this.slides=this.element.children;this.length=this.slides.length;this.cache=new Array(this.length);if(this.length<2){return}this.width=this.container.getBoundingClientRect().width||this.container.offsetWidth;if(!this.width){return}var b=[[],[],[]];this.element.style.width=(this.slides.length*this.width)+"px";for(var a=this.length-1;a>-1;a--){var c=this.slides[a];c.style.width=this.width+"px";c.setAttribute("data-index",a);if(this.browser.transitions){c.style.left=(a*-this.width)+"px"}b[this.index>a?0:(this.index<a?2:1)].push(a)}if(this.browser.transitions){this._slide(b[0],-this.width,0,1);this._slide(b[1],0,0,1);this._slide(b[2],this.width,0,1)}this.container.style.visibility="visible"},kill:function(){this.delay=0;clearTimeout(this.interval);var b=[];for(var a=this.slides.length-1;a>=0;a--){this.slides[a].style.width="";b.push(a)}this._slide(b,0,0,1);var c=this.element;c.className=c.className.replace("swipe-active","");if(this.element.removeEventListener){if(!!this.browser.touch){this.element.removeEventListener("touchstart",this,false);this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false)}if(!!this.browser.transitions){this.element.removeEventListener("webkitTransitionEnd",this,false);this.element.removeEventListener("msTransitionEnd",this,false);this.element.removeEventListener("oTransitionEnd",this,false);this.element.removeEventListener("transitionend",this,false)}window.removeEventListener("resize",this.resize,false)}else{window.onresize=null}},getPos:function(){return this.index},prev:function(a){this.delay=a||0;clearTimeout(this.interval);if(this.index){this.slide(this.index-1,this.speed)}else{if(this.cont){this.slide(this.length-1,this.speed)}}},next:function(a){this.delay=a||0;clearTimeout(this.interval);if(this.index<this.length-1){this.slide(this.index+1,this.speed)}else{if(this.cont){this.slide(0,this.speed)}}},begin:function(){var a=this;this.interval=(this.delay)?setTimeout(function(){a.next(a.delay)},this.delay):0},handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"transitionend":this.onTransitionEnd(a);break;case"resize":this.setup();break}},onTouchStart:function(a){var b=this;b.start={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:Number(new Date())};b.isScrolling=undefined;b.deltaX=0},onTouchMove:function(a){var b=this;if(a.touches.length>1||a.scale&&a.scale!==1){return}b.deltaX=a.touches[0].pageX-b.start.pageX;if(typeof b.isScrolling=="undefined"){b.isScrolling=!!(b.isScrolling||Math.abs(b.deltaX)<Math.abs(a.touches[0].pageY-b.start.pageY))}if(!b.isScrolling){a.preventDefault();b.delay=0;clearTimeout(b.interval);b.deltaX=b.deltaX/((!b.index&&b.deltaX>0||b.index==b.length-1&&b.deltaX<0)?(Math.abs(b.deltaX)/b.width+1):1);b._slide([b.index-1,b.index,b.index+1],b.deltaX,0,-1)}else{if(b.disableScroll){a.preventDefault()}}},onTouchEnd:function(d){var g=this;var b=Number(new Date())-g.start.time<250&&Math.abs(g.deltaX)>20||Math.abs(g.deltaX)>g.width/2,a=!g.index&&g.deltaX>0||g.index==g.length-1&&g.deltaX<0,c=g.deltaX<0;if(!g.isScrolling){if(b&&!a){if(c){g._slide([g.index-1],-g.width,0,1);g._slide([g.index,g.index+1],-g.width,g.speed,0);g.index+=1}else{g._slide([g.index+1],g.width,0,1);g._slide([g.index-1,g.index],g.width,g.speed,0);g.index+=-1}g.callback(g.index,g.slides[g.index])}else{g._slide([g.index-1,g.index,g.index+1],0,g.speed,0)}}},onTransitionEnd:function(a){if(this._getElemIndex(a.target)==this.index){if(this.delay){this.begin()}this.transitionEnd(this.index,this.slides[this.index])}},slide:function(g,c){var e=this.index;if(e==g){return}if(this.browser.transitions){var b=Math.abs(e-g)-1,d=Math.abs(e-g)/(e-g),a=[];while(b--){a.push((g>e?g:e)-b-1)}this._slide(a,this.width*d,0,1);this._slide([e,g],this.width*d,this.speed,0)}else{this._animate(e*-this.width,g*-this.width,this.speed)}this.index=g;this.callback(this.index,this.slides[this.index])},_slide:function(i,h,c,b){var g=this.slides,e=i.length;while(e--){var d=g[i[e]];if(d){var a=d.style,j=(h+(b!=1?this.cache[i[e]]:0));a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=(c?c:0)+"ms";a.webkitTransform="translate3d("+j+"px,0,0)";a.msTransform=a.MozTransform=a.OTransform="translateX("+j+"px)";if(b==1){this.cache[i[e]]=h}else{if(b==0){this.cache[i[e]]+=h}}}}},_animate:function(h,g,b){var a=this.element;if(!b){a.style.left=g+"px";return}var e=this,d=new Date(),c=setInterval(function(){var i=new Date()-d;if(i>b){a.style.left=g+"px";if(e._getElemIndex(a)==e.index){if(e.delay){e.begin()}e.transitionEnd(e.index,e.slides[e.index])}clearInterval(c);return}a.style.left=(((g-h)*(Math.floor((i/b)*100)/100))+h)+"px"},4)},_getElemIndex:function(a){return parseInt(a.getAttribute("data-index"),10)}};if(window.jQuery||window.Zepto){(function(a){a.fn.Swipe=function(b){return this.each(function(){var c=a(this);c.data("Swipe",new Swipe(c[0],b))})}})(window.jQuery||window.Zepto)}var qq=qq||{};qq.extend=function(b,a){for(var c in a){b[c]=a[c]}};qq.indexOf=function(b,c,d){if(b.indexOf){return b.indexOf(c,d)}d=d||0;var a=b.length;if(d<0){d+=a}for(;d<a;d++){if(d in b&&b[d]===c){return d}}return -1};qq.getUniqueId=(function(){var a=0;return function(){return a++}})();qq.attach=function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}};qq.detach=function(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{if(a.attachEvent){a.detachEvent("on"+c,b)}}};qq.preventDefault=function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};qq.insertBefore=function(d,c){c.parentNode.insertBefore(d,c)};qq.remove=function(a){a.parentNode.removeChild(a)};qq.contains=function(b,a){if(b==a){return true}if(b.contains){return b.contains(a)}else{return !!(a.compareDocumentPosition(b)&8)}};qq.toElement=(function(){var a=document.createElement("div");return function(c){a.innerHTML=c;var b=a.firstChild;a.removeChild(b);return b}})();qq.css=function(a,b){if(b.opacity!=null){if(typeof a.style.opacity!="string"&&typeof(a.filters)!="undefined"){b.filter="alpha(opacity="+Math.round(100*b.opacity)+")"}}qq.extend(a.style,b)};qq.hasClass=function(b,a){var c=new RegExp("(^| )"+a+"( |$)");return c.test(b.className)};qq.addClass=function(b,a){if(!qq.hasClass(b,a)){b.className+=" "+a}};qq.removeClass=function(b,a){var c=new RegExp("(^| )"+a+"( |$)");b.className=b.className.replace(c," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(a,b){a.innerText=b;a.textContent=b};qq.children=function(b){var a=[],c=b.firstChild;while(c){if(c.nodeType==1){a.push(c)}c=c.nextSibling}return a};qq.getByClass=function(d,e){if(d.querySelectorAll){return d.querySelectorAll("."+e)}var b=[];var g=d.getElementsByTagName("*");var a=g.length;for(var c=0;c<a;c++){if(qq.hasClass(g[c],e)){b.push(g[c])}}return b};qq.obj2url=function(g,b,j){var h=[],d="&",e=function(l,k){var n=b?(/\[\]$/.test(b))?b:b+"["+k+"]":k;if((n!="undefined")&&(k!="undefined")){h.push((typeof l==="object")?qq.obj2url(l,n,true):(Object.prototype.toString.call(l)==="[object Function]")?encodeURIComponent(n)+"="+encodeURIComponent(l()):encodeURIComponent(n)+"="+encodeURIComponent(l))}};if(!j&&b){d=(/\?/.test(b))?(/\?$/.test(b))?"":"&":"?";h.push(b);h.push(qq.obj2url(g))}else{if((Object.prototype.toString.call(g)==="[object Array]")&&(typeof g!="undefined")){for(var c=0,a=g.length;c<a;++c){e(g[c],c)}}else{if((typeof g!="undefined")&&(g!==null)&&(typeof g==="object")){for(var c in g){e(g[c],c)}}else{h.push(encodeURIComponent(b)+"="+encodeURIComponent(g))}}}return h.join(d).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(a){this._options={debug:false,action:"/server/upload",params:{},button:null,multiple:true,maxConnections:3,allowedExtensions:[],sizeLimit:5500000,minSizeLimit:0,onSubmit:function(c,b){},onProgress:function(e,d,b,c){},onComplete:function(d,c,b){},onCancel:function(c,b){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(b){alert(b)}};qq.extend(this._options,a);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button){this._button=this._createUploadButton(this._options.button)}this._preventLeaveInProgress()};qq.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(b){var a=this;return new qq.UploadButton({element:b,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(c){a._onInputChange(c)}})},_createUploadHandler:function(){var a=this,c;if(qq.UploadHandlerXhr.isSupported()){c="UploadHandlerXhr"}else{c="UploadHandlerForm"}var b=new qq[c]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(h,g,d,e){a._onProgress(h,g,d,e);a._options.onProgress(h,g,d,e)},onComplete:function(g,e,d){a._onComplete(g,e,d);a._options.onComplete(g,e,d)},onCancel:function(e,d){a._onCancel(e,d);a._options.onCancel(e,d)}});return b},_preventLeaveInProgress:function(){var a=this;qq.attach(window,"beforeunload",function(b){if(!a._filesInProgress){return}var b=b||window.event;b.returnValue=a._options.messages.onLeave;return a._options.messages.onLeave})},_onSubmit:function(b,a){this._filesInProgress++},_onProgress:function(d,c,a,b){},_onComplete:function(c,b,a){this._filesInProgress--;if(a.error){this._options.showMessage(a.error)}},_onCancel:function(b,a){this._filesInProgress--},_onInputChange:function(a){if(this._handler instanceof qq.UploadHandlerXhr){this._uploadFileList(a.files)}else{if(this._validateFile(a)){this._uploadFile(a)}}this._button.reset()},_uploadFileList:function(b){for(var a=0;a<b.length;a++){if(!this._validateFile(b[a])){return}}for(var a=0;a<b.length;a++){this._uploadFile(b[a])}},_uploadFile:function(a){var c=this._handler.add(a);var b=this._handler.getName(c);if(this._options.onSubmit(c,b)!==false){this._onSubmit(c,b);this._handler.upload(c,this._options.params)}},_validateFile:function(c){var a,b;if(c.value){a=c.value.replace(/.*(\/|\\)/,"")}else{a=c.fileName!=null?c.fileName:c.name;b=c.fileSize!=null?c.fileSize:c.size}if(!this._isAllowedExtension(a)){this._error("typeError",a);return false}else{if(b===0){this._error("emptyError",a);return false}else{if(b&&this._options.sizeLimit&&b>this._options.sizeLimit){this._error("sizeError",a);return false}else{if(b&&b<this._options.minSizeLimit){this._error("minSizeError",a);return false}}}}return true},_error:function(c,d){var b=this._options.messages[c];function a(e,g){b=b.replace(e,g)}a("{file}",this._formatFileName(d));a("{extensions}",this._options.allowedExtensions.join(", "));a("{sizeLimit}",this._formatSize(this._options.sizeLimit));a("{minSizeLimit}",this._formatSize(this._options.minSizeLimit));this._options.showMessage(b)},_formatFileName:function(a){if(a.length>33){a=a.slice(0,19)+"..."+a.slice(-13)}return a},_isAllowedExtension:function(d){var b=(-1!==d.indexOf("."))?d.replace(/.*[.]/,"").toLowerCase():"";var c=this._options.allowedExtensions;if(!c.length){return true}for(var a=0;a<c.length;a++){if(c[a].toLowerCase()==b){return true}}return false},_formatSize:function(a){var b=-1;do{a=a/1024;b++}while(a>99);return Math.max(a,0.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][b]}};qq.FileUploader=function(a){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><button class="qq-upload-button secondary expand">Upload image</button><div class="qq-upload-drop-area" style="display:none; width:0; height:0;"></div><ul class="qq-upload-list" style="display: none; width: 0; height: 0;"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"},callback:null});qq.extend(this._options,a);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._callback=this._options.callback;this._button=this._createUploadButton(this._find(this._element,"button"));this._bindCancelEvent();this._setupDragDrop()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);qq.extend(qq.FileUploader.prototype,{_find:function(c,b){var a=qq.getByClass(c,this._options.classes[b])[0];if(!a){throw new Error("element not found "+b)}return a},_setupDragDrop:function(){var b=this,c=this._find(this._element,"drop");var a=new qq.UploadDropZone({element:c,onEnter:function(d){qq.addClass(c,b._classes.dropActive);d.stopPropagation()},onLeave:function(d){d.stopPropagation()},onLeaveNotDescendants:function(d){qq.removeClass(c,b._classes.dropActive)},onDrop:function(d){c.style.display="none";qq.removeClass(c,b._classes.dropActive);b._uploadFileList(d.dataTransfer.files)}});c.style.display="none";qq.attach(document,"dragenter",function(d){if(!a._isValidFileDrag(d)){return}c.style.display="block"});qq.attach(document,"dragleave",function(g){if(!a._isValidFileDrag(g)){return}var d=document.elementFromPoint(g.clientX,g.clientY);if(!d||d.nodeName=="HTML"){c.style.display="none"}})},_onSubmit:function(b,a){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(b,a)},_onProgress:function(h,g,a,d){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var c=this._getItemByFileId(h);var b=this._find(c,"size");b.style.display="inline";var e;if(a!=d){e=Math.round(a/d*100)+"% from "+this._formatSize(d)}else{e=this._formatSize(d)}qq.setText(b,e)},_onComplete:function(d,c,a){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var b=this._getItemByFileId(d);qq.remove(this._find(b,"cancel"));qq.remove(this._find(b,"spinner"));if(a.success){qq.addClass(b,this._classes.success);this._callback(a.url)}else{qq.addClass(b,this._classes.fail)}},_addToList:function(d,c){var a=qq.toElement(this._options.fileTemplate);a.qqFileId=d;var b=this._find(a,"file");qq.setText(b,this._formatFileName(c));this._find(a,"size").style.display="none";this._listElement.appendChild(a)},_getItemByFileId:function(b){var a=this._listElement.firstChild;while(a){if(a.qqFileId==b){return a}a=a.nextSibling}},_bindCancelEvent:function(){var a=this,b=this._listElement;qq.attach(b,"click",function(g){g=g||window.event;var d=g.target||g.srcElement;if(qq.hasClass(d,a._classes.cancel)){qq.preventDefault(g);var c=d.parentNode;a._handler.cancel(c.qqFileId);qq.remove(c)}})}});qq.UploadDropZone=function(a){this._options={element:null,onEnter:function(b){},onLeave:function(b){},onLeaveNotDescendants:function(b){},onDrop:function(b){}};qq.extend(this._options,a);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};qq.UploadDropZone.prototype={_disableDropOutside:function(a){if(!qq.UploadDropZone.dropOutsideDisabled){qq.attach(document,"dragover",function(b){if(b.dataTransfer){b.dataTransfer.dropEffect="none";b.preventDefault()}});qq.UploadDropZone.dropOutsideDisabled=true}},_attachEvents:function(){var a=this;qq.attach(a._element,"dragover",function(c){if(!a._isValidFileDrag(c)){return}var b=c.dataTransfer.effectAllowed;if(b=="move"||b=="linkMove"){c.dataTransfer.dropEffect="move"}else{c.dataTransfer.dropEffect="copy"}c.stopPropagation();c.preventDefault()});qq.attach(a._element,"dragenter",function(b){if(!a._isValidFileDrag(b)){return}a._options.onEnter(b)});qq.attach(a._element,"dragleave",function(c){if(!a._isValidFileDrag(c)){return}a._options.onLeave(c);var b=document.elementFromPoint(c.clientX,c.clientY);if(qq.contains(this,b)){return}a._options.onLeaveNotDescendants(c)});qq.attach(a._element,"drop",function(b){if(!a._isValidFileDrag(b)){return}b.preventDefault();a._options.onDrop(b)})},_isValidFileDrag:function(c){var b=c.dataTransfer,a=navigator.userAgent.indexOf("AppleWebKit")>-1;return b&&b.effectAllowed!="none"&&(b.files||(!a&&b.types.contains&&b.types.contains("Files")))}};qq.UploadButton=function(a){this._options={element:null,multiple:false,name:"file",onChange:function(b){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,a);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){if(this._input.parentNode){qq.remove(this._input)}qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var b=document.createElement("input");if(this._options.multiple){b.setAttribute("multiple","multiple")}b.setAttribute("type","file");b.setAttribute("name",this._options.name);qq.css(b,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});this._element.appendChild(b);var a=this;qq.attach(b,"change",function(){a._options.onChange(b)});qq.attach(b,"mouseover",function(){qq.addClass(a._element,a._options.hoverClass)});qq.attach(b,"mouseout",function(){qq.removeClass(a._element,a._options.hoverClass)});qq.attach(b,"focus",function(){qq.addClass(a._element,a._options.focusClass)});qq.attach(b,"blur",function(){qq.removeClass(a._element,a._options.focusClass)});if(window.attachEvent){b.setAttribute("tabIndex","-1")}return b}};qq.UploadHandlerAbstract=function(a){this._options={debug:false,action:"/upload.php",maxConnections:999,onProgress:function(e,d,b,c){},onComplete:function(d,c,b){},onCancel:function(c,b){}};qq.extend(this._options,a);this._queue=[];this._params=[]};qq.UploadHandlerAbstract.prototype={log:function(a){},add:function(a){},upload:function(d,b){var a=this._queue.push(d);var c={};qq.extend(c,b);this._params[d]=c;if(a<=this._options.maxConnections){this._upload(d,this._params[d])}},cancel:function(a){this._cancel(a);this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++){this._cancel(this._queue[a])}this._queue=[]},getName:function(a){},getSize:function(a){},getQueue:function(){return this._queue},_upload:function(a){},_cancel:function(a){},_dequeue:function(d){var b=qq.indexOf(this._queue,d);this._queue.splice(b,1);var a=this._options.maxConnections;if(this._queue.length>=a&&b<a){var c=this._queue[a-1];this._upload(c,this._params[c])}}};qq.UploadHandlerForm=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[b]=a;if(a.parentNode){qq.remove(a)}return b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(b){this._options.onCancel(b,this.getName(b));delete this._inputs[b];var a=document.getElementById(b);if(a){a.setAttribute("src","javascript:false;");qq.remove(a)}},_upload:function(h,e){var b=this._inputs[h];if(!b){throw new Error("file with passed id was not added, or already uploaded or cancelled")}var g=this.getName(h);var c=this._createIframe(h);var d=this._createForm(c,e);d.appendChild(b);var a=this;this._attachLoadEvent(c,function(){a.log("iframe loaded");var i=a._getIframeContentJSON(c);a._options.onComplete(h,g,i);a._dequeue(h);delete a._inputs[h];setTimeout(function(){qq.remove(c)},1)});d.submit();qq.remove(d);return h},_attachLoadEvent:function(a,b){qq.attach(a,"load",function(){if(!a.parentNode){return}if(a.contentDocument&&a.contentDocument.body&&a.contentDocument.body.innerHTML=="false"){return}b()})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")")}catch(err){response={}}return response},_createIframe:function(b){var a=qq.toElement('<iframe src="javascript:false;" name="'+b+'" />');a.setAttribute("id",b);a.style.display="none";document.body.appendChild(a);return a},_createForm:function(a,c){var b=qq.toElement('<form method="post" enctype="multipart/form-data"></form>');var d=qq.obj2url(c,this._options.action);b.setAttribute("action",d);b.setAttribute("target",a.name);b.style.display="none";document.body.appendChild(b);return b}});qq.UploadHandlerXhr=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");a.type="file";return("multiple" in a&&typeof File!="undefined"&&typeof(new XMLHttpRequest()).upload!="undefined")};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);qq.extend(qq.UploadHandlerXhr.prototype,{add:function(a){if(!(a instanceof File)){throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)")}return this._files.push(a)-1},getName:function(b){var a=this._files[b];return a.fileName!=null?a.fileName:a.name},getSize:function(b){var a=this._files[b];return a.fileSize!=null?a.fileSize:a.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(i,g){var d=this._files[i],b=this.getName(i),c=this.getSize(i);this._loaded[i]=0;var e=this._xhrs[i]=new XMLHttpRequest();var a=this;e.upload.onprogress=function(j){if(j.lengthComputable){a._loaded[i]=j.loaded;a._options.onProgress(i,b,j.loaded,j.total)}};e.onreadystatechange=function(){if(e.readyState==4){a._onComplete(i,e)}};g=g||{};g.qqfile=b;var h=qq.obj2url(g,this._options.action);e.open("POST",h,true);e.setRequestHeader("X-Requested-With","XMLHttpRequest");e.setRequestHeader("X-File-Name",encodeURIComponent(b));e.setRequestHeader("Content-Type","application/octet-stream");e.send(d)},_onComplete:function(id,xhr){if(!this._files[id]){return}var name=this.getName(id);var size=this.getSize(id);this._options.onProgress(id,name,size,size);if(xhr.status==200){this.log("xhr - server response received");this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")")}catch(err){response={}}this._options.onComplete(id,name,response)}else{this._options.onComplete(id,name,{})}this._files[id]=null;this._xhrs[id]=null;this._dequeue(id)},_cancel:function(a){this._options.onCancel(a,this.getName(a));this._files[a]=null;if(this._xhrs[a]){this._xhrs[a].abort();this._xhrs[a]=null}}});var coords=false;var imgselect=false;function cropper_show(b,a){jQuery(".qq-upload-drop-area").hide();if(jQuery("#wx-jcrop-dialog-img").is(":visible")){if(imgselect===false){imgselect=jQuery("#wx-jcrop-dialog-img").imgAreaSelect({handles:true,instance:true,parent:"#wx-jcrop-dialog",onSelectChange:function(c,d){coords=d;console.debug(coords)}})}else{imgselect.cancelSelection();imgselect.update()}}else{setTimeout(function(){cropper_show(b,a)},50)}}jQuery(document).ready(function(){jQuery("#wx-jcrop-dialog-loading").ajaxStart(function(){jQuery(this).show()});jQuery("#wx-jcrop-dialog-loading").ajaxStop(function(){jQuery(this).hide()});jQuery("#wx-modal-loading").hide().ajaxStart(function(){jQuery("#wx-modal-error-text").html("");jQuery(this).fadeIn(200);jQuery("#wx-modal-loading-text").html(WPText.WEEVER_JS_SAVING_CHANGES);jQuery("#wx-modal-secondary-text").html(WPText.WEEVER_JS_PLEASE_WAIT)}).ajaxStop(function(){var a=jQuery(this);setTimeout(function(){a.fadeOut(750)},600)});Modernizr.load([{test:Modernizr.inputtypes.color,nope:"../wp-content/plugins/wp_weeverapps/static/js/jscolor/jscolor.js",callback:function(b,a){jscolor.init()}}]);jQuery(".wx-theme-file-uploader").each(function(){var d=jQuery(this).attr("ref");var e=jQuery(this).attr("rel");var b=jQuery(this).attr("img_width");var a=jQuery(this).attr("img_height");var c=new qq.FileUploader({element:jQuery(this)[0],action:ajaxurl+"?action=ajaxHandleUpload",debug:true,onComplete:function(i,h,g){},callback:function(g){jQuery("#wx-upload-info").remove();jQuery(".qq-upload-success").hide();jQuery("#wx-jcrop-dialog-img").attr("src",g);coords=false;jQuery("#wx-jcrop-dialog").foundation("reveal","open");setTimeout(function(){cropper_show(b,a)},500);jQuery("#finish-crop").one("click",function(){console.log("Saving cropped image...");jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ajaxCropImage",selection:coords,image_width:b,image_height:a},success:function(i){jQuery("#"+d).attr("src",i);var h=jQuery("input[name="+e+"]");h.attr("value",i);Backbone.Events.trigger("image:change",h)},error:function(h,i){alert("There was an error saving the image, please try again")}});jQuery("#wx-jcrop-dialog").foundation("reveal","close")});return false}})})});var wx=wx||{};var wxApp=wxApp||{};(function(a){wx.makeApiCall=function(k,i,d,h){var b="POST",g="";var j=wx.apiUrl+k+"?app_key="+wx.siteKey;var e=[];h=h||"json";console.log(h);for(var c in i){e.push(encodeURIComponent(c)+"="+encodeURIComponent(i[c]))}if(e.length){g=e.join("&")}a.ajax({url:j,type:b,data:g,datatype:h,success:function(l){wx.apiSuccess(l,d)},error:function(n,p){if(n.responseText[0]!=="{"){var o=n.responseText.indexOf("{");if(o>-1){var l=n.responseText.substring(o);l=JSON.parse(l);wx.apiSuccess(l,d);return}}jQuery("#wx-modal-loading-text").html(p);jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html(WPText.WEEVER_JS_SERVER_ERROR)}})};wx.apiSuccess=function(c,b){if(!c.error&&c.success){b(c)}else{jQuery("#wx-modal-loading-text").html(c.message?c.message:"Error");jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html(WPText.WEEVER_JS_SERVER_ERROR)}Backbone.Events.trigger("api:success")};wx.getText=function(d,b){var e="GET";var c=wx.apiUrl+d+"?app_key="+wx.siteKey;a.ajax({url:c,type:e,datatype:"text",success:function(g){if(b){b(g)}},error:function(g,h){console.log(h)}})};wx.refreshAppPreview=function(){console.log("Refreshing Preview");if(true){a("#preview-app-dialog-no-webkit").hide();a("#preview-app-dialog-frame").attr("src",a("#preview-app-dialog-frame").attr("rel"));a("#preview-app-dialog-webkit").show()}else{a("#preview-app-dialog-no-webkit").show()}};wx.rebuildApp=function(){jQuery("#preview-app-dialog-frame").hide();jQuery("#iframe-loading").show()};wx.cleanUrl=function(b){var c=b.indexOf("?");if(c>-1){b=b.substring(0,c)}return b}})(jQuery);wx.log=function(a){if(!!console.log){console.log(a)}};jQuery(document).ready(function(){if(window.location.hash.indexOf("wxnavtip-")>-1){a(window.location.hash.replace("#wxnavtip-",""))}else{a("content")}function a(c){if(c==undefined){c=""}jQuery(".wx_box").each(function(d){var e=jQuery(this).attr("id").replace("wxnavtip-","");if(e!="empty"&&jQuery(this).attr("rel")!="empty"&&e!=c){jQuery("#wxui-addbuttons-"+e).hide();jQuery(this).addClass("wx_box_hidden")}})}jQuery(".wx_box").click(function(d){var e=jQuery(this).attr("id").replace("wxnavtip-","");if(e!="empty"){var c=jQuery("#wxui-addbuttons-"+e);a(e);if(c.is(":visible")){jQuery(this).addClass("wx_box_hidden")}else{jQuery(this).removeClass("wx_box_hidden")}jQuery("#wxui-addbuttons-"+e).slideToggle()}});jQuery('[name="wx-add-source-radio"]').click(function(){if("map"==jQuery(this).val()){showMap()}else{hideMap()}jQuery(".wx-add-source-image").hide();jQuery("#"+jQuery(this).attr("id")+"-image").show()});jQuery(".wx-add-new-content-button").click(function(c){c.preventDefault();wx.add_new_content_dialog_start(jQuery(this))});wx.add_new_content_tab=function(){var g=jQuery("input#wx-add-content-title").val();var c=jQuery("select#wx-select-form").val();var e=jQuery("input#nonce").val();var d=jQuery('[name="wx-add-content-type"]').val();if("map"==d){geolat=jQuery("#geolocation-latitude").val();geolon=jQuery("#geolocation-longitude").val()}else{geolat=geolon=false}jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"ajaxAddNewContent",content:tinyMCE.activeEditor.getContent(),name:g,published:1,component:c,nonce:e,content_type:d,geolat:geolat,geolon:geolon,parent_id:wx.current_parent_id},success:function(h){jQuery("#wx-modal-loading-text").html(h);jQuery("#wx-modal-secondary-text").html(WPText.WEEVER_JS_APP_UPDATED);document.location.href=WPText.WEEVER_JS_ADMIN_LIST_URL+"#wxnavtip-content";document.location.reload(true)},error:function(h,i){jQuery("#wx-modal-loading-text").html(i);jQuery("#wx-modal-secondary-text").html("");jQuery("#wx-modal-error-text").html(WPText.WEEVER_JS_SERVER_ERROR)}})};wx.add_new_content_dialog_start=function(c,d){dialogId="#wx-add-new-content-dialog";wx.current_parent_id=d;wx.default_icon_id=28;jQuery("#wx-add-new-content-dialog .wx-add-source-check-container").show();jQuery(".wxui-howtoadd").hide();if("map"==c.attr("rel")){setTimeout(function(){showMap()},1500)}else{hideMap()}jQuery('input[name="wx-add-content-type"]').attr("value",c.attr("rel"));if(c.hasClass("wx-add-new-coupon")){jQuery("#wx-mobile-coupon-generator").show();jQuery("#wx-add-content-action-buttons").hide();jQuery("#wx-add-content-editor-container").hide();jQuery("#wx-add-content-title-container").hide();jQuery("#wx-inject-mobile-coupon").hide()}else{jQuery("#wx-mobile-coupon-generator").hide();jQuery("#wx-add-content-action-buttons").show();jQuery("#wx-add-content-editor-container").show();jQuery("#wx-add-content-title-container").show();jQuery("#wx-inject-mobile-coupon").show()}jQuery("#wx-add-content-editor").val("");if(c.is(".wx-upgrade-prompt-premium")){dialogId="#wx-upgrade-notice-premium";wx.localizedConditionalDialog(["Cancel"],dialogId);return}jQuery(dialogId).dialog({modal:true,resizable:false,width:"auto",height:"auto",title:"Add New "+(c.hasClass("wx-add-new-coupon")?"Mobile Coupon":"Content"),show:"fade",hide:"drop",buttons:{Finish:function(){if(c.hasClass("wx-add-new-coupon")){wx.generate_mobile_coupon(wx.add_new_content_tab,{copy_title:true})}else{wx.add_new_content_tab()}},Cancel:function(){b();jQuery(this).dialog("destroy")}},beforeclose:function(e,g){b()},open:function(h,g){setTimeout(function(){box_id=jQuery("#wx-add-content-editor").attr("id");var e=new tinyMCE.Editor(box_id,wx.tinymce_options);e.render()},400)},close:function(){b();jQuery(this).dialog("destroy")}})};function b(){tinyMCE.execCommand("mceRemoveControl",false,"wx-add-content-editor")}jQuery("#wx-modal-loading").hide().ajaxStart(function(){jQuery("#wx-modal-error-text").html("");jQuery(this).fadeIn(200);jQuery("#wx-modal-loading-text").html(WPText.WEEVER_JS_SAVING_CHANGES);jQuery("#wx-modal-secondary-text").html(WPText.WEEVER_JS_PLEASE_WAIT);setTimeout(function(){jQuery(".ui-dialog-buttonpane").find("button:contains('Finish')").button("disable")},300)}).ajaxStop(function(){var c=jQuery(this);setTimeout(function(){c.fadeOut(750);jQuery(".ui-dialog-buttonpane").find("button:contains('Finish')").button("enable")},600)})});var wxApp=wxApp||{};(function(a){wxApp.Tab=Backbone.Model.extend({defaults:{id:"",title:"",icon_id:1,subTabs:false},validate:function(b){},initialize:function(){var b=this;console.log("This function has been initialized");var c=new wxApp.SubTabCollection();this.set({subTabs:c});this.on("invalid",function(e,d){console.log(d)});this.get("subTabs").on("remove",function(d){console.log("detected subTabs remove event");if(!b.getSubTabs().length){b.trigger("destroy")}})},setTitle:function(b){this.set({title:b})},addSubTab:function(c){var b=this;c.set("parent_id",this.get("id"));this.get("subTabs").add(c);c.on("tab:move",function(){console.log("detected tab:move for subtab in Tab model");b.getSubTabs().remove(this)})},deleteSubTab:function(b){wx.log("removing sub tab from collection");wx.log(b.get("id"));this.get("subTabs").remove(b)},getSubTabs:function(){return this.get("subTabs")},destroy:function(){var b=this;wx.makeApiCall("tabs/delete",{tab_id:this.get("id")},function(){b.trigger("destroy")})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTab=wxApp.Tab.extend({defaults:{id:null,parent_id:null,title:"",tabTitle:"",icon_id:1,type:null,layout:null,tabLayout:null,typeDescription:"",published:1,config:{},featureName:"",helpTitle:"Help tips ",helpBody:""},typeDescription:"",validateFeed:true,allowTitleEdit:true,initialize:function(){},setConfig:function(c,g){var b=this.getConfig();b[c]=g;try{this.set("config",b)}catch(d){}},deleteConfig:function(c){var b=this.getConfig();delete b[c];this.set("config",b)},getConfig:function(){return this.get("config")},getModelName:function(){var c=false;for(var b in wxApp){if(wxApp[b]==this.constructor){c=b;break}}return c},getAPIData:function(){console.log("getAPIData");console.log(this);var b=this.toJSON();b.config=JSON.stringify(b.config);if(b.id==b.parent_id){delete b.parent_id}if(b.id){b.tab_id=b.id}return this.filterAPIData(b)},filterAPIData:function(b){return b},toJSON:function(){var b=JSON.parse(JSON.stringify(this.attributes));b.validateFeed=this.validateFeed;b.typeDescription=this.typeDescription;return b},getValidateFeed:function(){return true},save:function(){var b=this;wx.makeApiCall("tabs/add_tab",b.getAPIData(),function(c){if(!b.get("id")){b.set("id",c.tab_id);Backbone.Events.trigger("tab:new",b)}else{b.trigger("save",b)}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlAttributes=Backbone.Model.extend({defaults:{}});wxApp.FormBuilderControl=Backbone.Model.extend({defaults:function(){return{control:"",type:"",label:"",hidePlaceholderClass:"",showPlaceholder:false,innerText:"",allowAdditional:"",allowAdditionalClass:"",valueType:"number",valueClass:"hide",minClass:"hide",maxClass:"hide",stepClass:"hide",multiClass:"hide",requiredClass:"",autocompleteClass:"hide"}},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.togglePlaceholder();this.on("change:showPlaceholder",this.togglePlaceholder);console.log(this)},togglePlaceholder:function(){if(this.get("showPlaceholder")===false){this.set("hidePlaceholderClass","hide")}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"input",label:"Label"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Account=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("account/get_account",{},function(d){b.set(d.account);if(typeof c!=="undefined"){c()}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Config=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("config/get_config",{},function(d){b.set(d.config);if(typeof c!=="undefined"){c()}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Design=Backbone.Model.extend({defaults:{},fetch:function(c){var b=this;wx.makeApiCall("design/get_design",{},function(d){b.set(d.design);if(typeof c!=="undefined"){c()}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.Feature=Backbone.Model.extend({defaults:{featureName:"",imgUri:"",name:"",filterBy:"",rel:"",includeClass:"",visible:true,iconId:0}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderAction=Backbone.Model.extend({defaults:function(){return{control:"action",method:"post",value:"",username:"",password:"",returnUrl:"",pdfHeader:{title:"",line1:"",line2:"",line3:""}}},initialize:function(){console.log("FormBuilderAction init");console.log(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxFieldset=Backbone.Model.extend({defaults:{control:"checkboxfieldset",title:"Checkbox Fieldset",allowAdditional:"",allowAdditionalClass:"",name:""},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("checkboxGroup",new wxApp.FormBuilderControlCheckboxGroup());this.get("checkboxGroup").on("add",this.onCheckboxGroupAdd,this);console.log(this);return this},onCheckboxGroupAdd:function(b){console.log("onCheckboxGroupAdd");b.get("attributes").set("name",this.get("name"))}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckbox=wxApp.FormBuilderControlInput.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{label:"Checkbox",autocompleteClass:"hide"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this);this.get("attributes").set("type","checkbox")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInfo=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"div",label:"",innerHTML:""});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"input",label:"Label"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlAttributes=Backbone.Model.extend({defaults:{}});wxApp.FormBuilderControl=Backbone.Model.extend({defaults:function(){return{control:"",type:"",label:"",hidePlaceholderClass:"",showPlaceholder:false,innerText:"",allowAdditional:"",allowAdditionalClass:"",valueType:"number",valueClass:"hide",minClass:"hide",maxClass:"hide",stepClass:"hide",multiClass:"hide",requiredClass:"",autocompleteClass:"hide"}},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.togglePlaceholder();this.on("change:showPlaceholder",this.togglePlaceholder);console.log(this)},togglePlaceholder:function(){if(this.get("showPlaceholder")===false){this.set("hidePlaceholderClass","hide")}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderLabel=wxApp.FormBuilderControl.extend({defaults:{label:"Label"}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOption=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"option",label:"Option"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this);return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioFieldset=Backbone.Model.extend({defaults:{control:"radiofieldset",title:"Radio Fieldset",allowAdditional:"",allowAdditionalClass:"",name:""},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("radioGroup",new wxApp.FormBuilderControlRadioGroup());this.get("radioGroup").on("add",this.onRadioGroupAdd,this);return this},onRadioGroupAdd:function(b){console.log("onRadioGroupAdd");b.get("attributes").set("name",this.get("name"))}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadio=wxApp.FormBuilderControlInput.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{label:"Radio Button",autocompleteClass:"hide"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this);this.get("attributes").set("type","radio");console.log(this);console.log(this.cid);console.log(this.collection)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRangeInput=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{input:"range",label:"Label"});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSelect=Backbone.Model.extend({defaults:{control:"select",title:"Dropdown",allowAdditional:"",allowAdditionalClass:"",requiredClass:"",name:""},initialize:function(){this.set("attributes",new wxApp.FormBuilderControlAttributes());this.set("optionGroup",new wxApp.FormBuilderControlOptionGroup());console.log(this);return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSignature=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"signature",label:"Signature",username:"",password:"",returnUrl:""});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextarea=wxApp.FormBuilderControl.extend({defaults:function(){var b=_.extend(this.constructor.__super__.defaults(),{control:"textarea",label:"Text Area",showPlaceholder:true});return b},initialize:function(){wxApp.FormBuilderControl.prototype.initialize.apply(this)}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.IconFont=Backbone.Model.extend({defaults:{},fetch:function(d,c){var b=this;wx.makeApiCall("icons/get_font",{font_id:d},function(e){b.set(e.font);m=b;if(typeof c!=="undefined"){c()}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.BloggerSubTab=wxApp.SubTab.extend({default_icon_id:7,allowedLayouts:["list"],typeDescription:"Blogger",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Blog",icon_id:6,type:"blogger",content:"blogger",layout:"list",config:{blog_url:"http://blogname.blogspot.com"}})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookAlbumsSubTab=wxApp.SubTab.extend({default_icon_id:15,allowedLayouts:["list"],defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Photos",icon_id:15,type:"facebookAlbums",content:"facebookAlbums",layout:"list",config:{url:"http://facebook.com/",user_id:"http://facebook.com/MyPage"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add photos from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Photos must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"}),typeDescription:"Facebook Photos"})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookEventsSubTab=wxApp.SubTab.extend({default_icon_id:16,allowedLayouts:["list"],typeDescription:"Facebook Events",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Events",icon_id:16,type:"facebookEvents",content:"facebookEvents",layout:"list",config:{url:"http://facebook.com/"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add events from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Events must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FacebookWallSubTab=wxApp.SubTab.extend({default_icon_id:13,typeDescription:"Facebook Wall",allowedLayouts:["list"],defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Facebook",icon_id:13,type:"facebookWall",content:"facebookStatuses",layout:"list",config:{url:"http://facebook.com/"},helpBody:"<p><b>Facebook pages vs. profiles</b></p><p>Due to privacy restrictions, only <b>Facebook Page</b> content can be added to your app.  Make sure you are trying to add wall updates from a public-facing &ldquo;page&rdquo; and not a personal profile.</p><p>Wall updates must be public.  You can check your Facebook sharing settings by logging out of Facebook completely and refreshing the Facebook page in question.</p>"})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FlickrSubTab=wxApp.SubTab.extend({default_icon_id:19,allowedLayouts:["list"],typeDescription:"Flickr",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Flickr",icon_id:19,type:"flickr",content:"flickrPhotostream",layout:"carousel",config:{url:"http://flickr.com/"},helpBody:"<p><b>Flickr compatibility</b></p><p>Only publicly available photos on Flickr will display. Photos uploaded prior to April 2011 may not display as gallery thumbnails – simply rotate and resave these photos to fix.</p><p><b>Coming soon</b></p><p>Support for Flickr &ldquo;group pools&rdquo; (community galleries) and the ability to add just one photo set at a time to your app.</p>"})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderSubTab=wxApp.SubTab.extend({default_icon_id:30,validateFeed:false,typeDescription:"Form Builder",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Formbuilder Title",tabTitle:"Form",icon_id:30,type:"formbuilder",content:"formbuilder",layout:"panel",config:{uploadUrl:window.location.origin+"/wp-admin/admin-ajax.php",onUpload:{message:"Your upload has completed."}}})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FoursquarePhotosSubTab=wxApp.SubTab.extend({default_icon_id:25,allowedLayouts:["list"],typeDescription:"Foursquare",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Photos",icon_id:25,type:"foursquarePhotos",content:"foursquarePhotos",layout:"list",config:{venue_id:"http://foursquare.com/v/"},helpBody:'<p><b>To find the web address of a Foursquare Venue:</b></p><p>1. Search the web for "Foursquare" and the name of the location.</p><p>2. Open the matching Foursquare venue page.</p><p>3. Copy the web address (url) of the venue page from your browser address bar.</p><p>Sharing live photos is a great way to engage event attendees or share info about a specific location.</p>'})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.GoogleCalendarSubTab=wxApp.SubTab.extend({default_icon_id:7,allowedLayouts:["list"],typeDescription:"Google Calendar",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Calendar",icon_id:7,type:"googleCalendar",content:"googleCalendar",layout:"list",config:{calendar_id:"abc123@group.calendar.google.com"},helpTitle:"Finding a calendar ID",helpBody:'<p><b>Primary Google calendars:</b></p><p>A primary calendar is associated with your Google / Gmail account, for example:</p><p>emailaddress@gmail.com</p><p><b>Group Google Calendars:</b></p><p>Group calendars (aka &lsquo;secondary calendars&rsquo; should be added to your app in a format like abc123@group.calendar.google.com.</p><p><b>Finding a Group Calendar ID</b></p><p>1. Login to <a target="_blank" href="http://google.com/calendar">Google.com/calendar</a></p><p>2. Choose a calendar and select &ldquo;settings&rdquo;</p><p>3. Copy and paste the calendar ID from this page.</p><p>The web address for the group calendar will be in a format like &ldquo;abc123@group.calendar.google.com&rdquo;.</p>'})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTab=wxApp.Tab.extend({defaults:{id:null,parent_id:null,title:"",tabTitle:"",icon_id:1,type:null,layout:null,tabLayout:null,typeDescription:"",published:1,config:{},featureName:"",helpTitle:"Help tips ",helpBody:""},typeDescription:"",validateFeed:true,allowTitleEdit:true,initialize:function(){},setConfig:function(c,g){var b=this.getConfig();b[c]=g;try{this.set("config",b)}catch(d){}},deleteConfig:function(c){var b=this.getConfig();delete b[c];this.set("config",b)},getConfig:function(){return this.get("config")},getModelName:function(){var c=false;for(var b in wxApp){if(wxApp[b]==this.constructor){c=b;break}}return c},getAPIData:function(){console.log("getAPIData");console.log(this);var b=this.toJSON();b.config=JSON.stringify(b.config);if(b.id==b.parent_id){delete b.parent_id}if(b.id){b.tab_id=b.id}return this.filterAPIData(b)},filterAPIData:function(b){return b},toJSON:function(){var b=JSON.parse(JSON.stringify(this.attributes));b.validateFeed=this.validateFeed;b.typeDescription=this.typeDescription;return b},getValidateFeed:function(){return true},save:function(){var b=this;wx.makeApiCall("tabs/add_tab",b.getAPIData(),function(c){if(!b.get("id")){b.set("id",c.tab_id);Backbone.Events.trigger("tab:new",b)}else{b.trigger("save",b)}})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.PicasaAlbumsSubTab=wxApp.SubTab.extend({default_icon_id:15,allowedLayouts:["list"],typeDescription:"Picasa Photos",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Photos",icon_id:15,type:"picasaAlbums",content:"picasaAlbums",layout:"list",config:{user_id:"your.email@gmail.com"}})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.r3sSubTab=wxApp.SubTab.extend({default_icon_id:6,typeDescription:"R3S Object",validateFeed:false,allowedLayouts:["list"],defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"R3S Object",icon_id:6,type:"r3s",content:"htmlR3s",layout:"list",config:{url:"http://yourwebsite.com/?feed=r3s"},helpTitle:"What is an R3S Object?",helpBody:'<p><b>What is an R3S Object?</b></p><p>R3S is an open source specification for streaming content from web sites, social feeds, and other sources into apps.</p><p>R3S is a flexible format but is generally used in one or two different ways:</p><p>1.  To stream content into an app from another web site or service (most likely with a Weever Apps plugin installed).</p><p>2.  To stream content into an app from a custom application that is generating an R3S stream object.</p><p>If you are a developer and are interested in utilizing R3S, please check out the <a target="_blank" href="https://github.com/WeeverApps/r3s-spec">R3S repo on GitHub</a> and <a target="_blank" href="http://support.weeverapps.com">contact us</a> for more information.</p>'})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.RSSSubTab=wxApp.SubTab.extend({default_icon_id:6,typeDescription:"RSS Feed",validateFeed:false,allowedLayouts:["list"],defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"RSS Feed",icon_id:6,type:"rss",content:"html",layout:"list",config:{url:"http://yourwebsite.com/"}})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.TwitterSubTab=wxApp.SubTab.extend({default_icon_id:21,allowedLayouts:["list"],typeDescription:"Twitter",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Social",icon_id:21,type:"twitterUser",content:"twitterUser",layout:"list",config:{}})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.VimeoSubTab=wxApp.SubTab.extend({default_icon_id:35,allowedLayouts:["list"],typeDescription:"Vimeo Videos",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Vimeo",icon_id:35,type:"vimeo",content:"vimeo",layout:"list",config:{url:"http://vimeo.com/user1234"},helpTitle:"Vimeo users and channels",helpBody:'<p><b>Vimeo users and channels</b></p><p>Adding a Vimeo user shares all videos associated with one <a target="_blank" href="http://vimeo.com">Vimeo.com</a> user account.</p><p><b>Sharing specific sets of videos</b></p><p>One vimeo &lsquo;user&rsquo; can have multiple &lsquo;channels&rsquo;.  Each channel includes specific collection of videos.</p>'})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressBlogSubTab=wxApp.SubTab.extend({default_icon_id:5,allowedLayouts:["list"],typeDescription:"Content: Posts",validateFeed:false,defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Blog",icon_id:5,type:"WordpressBlog",content:"html",layout:"list",config:{subtab_name:"WordpressBlogSubTab"}})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressCategorySubTab=wxApp.SubTab.extend({default_icon_id:5,allowedLayouts:["list"],typeDescription:"Wordpress Posts",validateFeed:false,defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Blog",icon_id:5,type:"WordpressCategory",content:"html",layout:"list",config:{subtab_name:"WordpressCategorySubTab"},helpTitle:"Adding Wordpress content",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.WordpressContactsSubTab=wxApp.SubTab.extend({default_icon_id:34,allowedLayouts:["list"],typeDescription:"Contact",validateFeed:false,allowTitleEdit:false,defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Contact",icon_id:34,type:"wordpress-contact",content:"contact",layout:"panel",config_cache:{}}),filterAPIData:function(b){b.config_cache=JSON.stringify(this.get("config_cache"));delete b.config;return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressDirectorySubTab=wxApp.SubTab.extend({default_icon_id:11,allowedLayouts:["list"],typeDescription:"Content: Directory",validateFeed:false,defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Directory",icon_id:11,type:"WordpressDirectory",content:"html",layout:"list",config:{subtab_name:"WordpressDirectorySubTab"}})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressMapSubTab=wxApp.SubTab.extend({default_icon_id:20,allowedLayouts:["list"],typeDescription:"Add map locations",validateFeed:false,defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Map",icon_id:20,type:"WordpressMap",content:"html",layout:"list",tabLayout:"map",config:{url:"",gps:"1",subtab_name:"WordpressMapSubTab"},helpTitle:"Creating a map",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressPageSubTab=wxApp.SubTab.extend({default_icon_id:28,allowedLayouts:["list"],typeDescription:"Wordpress Page",validateFeed:false,defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Pages",icon_id:28,type:"WordpressPage",content:"htmlPage",layout:"panel",config:{url:""},helpTitle:"Adding Wordpress content",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressProximitySubTab=wxApp.SubTab.extend({default_icon_id:27,allowedLayouts:["list"],typeDescription:"Near to me",validateFeed:false,defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Nearby",icon_id:27,type:"WordpressProximity",content:"html",layout:"list",config:{url:"",gps:"1",geotag:"1",subtab_name:"WordpressProximitySubTab"},helpTitle:"About Near to me",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressSearchtermSubTab=wxApp.SubTab.extend({default_icon_id:8,allowedLayouts:["list"],typeDescription:"Wordpress Search",validateFeed:false,defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Search",icon_id:8,type:"WordpressSearchterm",content:"html",layout:"list",config:{url:"",subtab_name:"WordpressSearchtermSubTab"},helpTitle:"Adding Wordpress content",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p>'})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressTagSubTab=wxApp.SubTab.extend({default_icon_id:13,allowedLayouts:["list"],validateFeed:false,typeDescription:"Wordpress Tag",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Blog",icon_id:13,type:"WordpressTag",content:"html",layout:"list",config:{url:"",subtab_name:"WordpressTagSubTab"},helpTitle:"Adding Wordpress content",helpBody:'<p><b>Adding Wordpress content to your app</b></p><p>Any Wordpress content you add to your app updates in real-time as you make changes.</p><p><b>Wordpress Tags</b></p><p>Wordpress &lsquo;tags&rsquo; are a powerful feature for adding content to your app.</p><p>Tag items with specific values like &lsquo;mobile&rsquo;, &lsquo;map&rsquo; or cross-category tags.</p><p>Select a tag in appBuilder and stream those specific posts into your app in real-time.</p><p><b>Wordpress Posts</b></p><p>Add categories of Wordpress &lsquo;posts&rsquo; to share a blog or specific content in real-time with app visitors.</p><p><b>Wordpress Pages</b></p><p>Add specific individual Wordpress &lsquo;pages&rsquo; to your app and arrange them in the layout of your preference.</p><p><b>Wordpress Maps</b></p><p>&rdquo;GeoTag&ldquo; individual Wordpress posts with a location/address and create a mobile, GPS-enabled map of those locations with appBuilder.</p><p>We recommend using the Wordpress <a target="_blank" href="http://wordpress.org/plugins/geolocation/">Geolocation plugin</a> to add location information to posts.</p><p>Once you have added locations to posts, use the appBuilder map making features to create a map using Wordpress post categories.</p><p>Note: posts which are not Geotagged with location info will not display on your map.</p><p><b>Wordpress Near to me</b></p><p>&ldquo;Near to me&rdquo; shows app users location listings nearest to them and distances.</p><p>Create a &ldquo;Near to me &rdquo; feature with Wordpress content in exactly the same way you would create a Wordpress-based map.</p><p>The difference is how the posts display.  &ldquo;Near to me&rdquo; lists posts in order of nearest-distance instead of creating a custom Google map.</p><p><b>Wordpress Search</b></p><p>Display Wordpress posts matching a predefined search term.</p>'})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.WufooSubTab=wxApp.SubTab.extend({default_icon_id:30,allowedLayouts:["list"],typeDescription:"Wufoo Forms",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"Forms",icon_id:30,type:"wufoo",content:"wufoo",layout:"list",config:{url:"https://USERNAME.wufoo.com",apikey:"XXXX-XXXX-XXXX-XXXX"},helpTitle:"Adding a Wufoo Form",helpBody:'<p><b>Adding a Wufoo Form</b></p><p><b>Finding your Wufoo API Key</b></p><p>1. Login to <a target="_blank" href="http://wufoo.com/">Wufoo.com</a> and navigate to a specific form.</p><p>2. Choose the "Code" link, then click the "API Information" button.</p><p><b>Wufoo Integrations</b></p><p>Wufoo Forms connects to many free and paid services on the web.</p><p>Connections / integrations include MailChimp, Campaign Monitor, PayPal Donations and Payments, SalesForce CRM, Freshbooks Accounting &amp; Billing, Highrise CRM and Twitter.</p><p>For more information check out: <a target="_blank" href="http://wufoo.com/integrations">wufoo.com/integrations</a></p>'})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.YoutubeSubTab=wxApp.SubTab.extend({default_icon_id:18,allowedLayouts:["list"],typeDescription:"Youtube Videos",defaults:_.extend({},wxApp.SubTab.prototype.defaults,{title:"YouTube",icon_id:18,type:"youtube",content:"youtube",layout:"list",config:{url:"http://youtube.com/"},helpTitle:"About Youtube videos",helpBody:"<p><b>Youtube Channels</b></p><p>A YouTube Channel displays all videos associated with one YouTube user account.</p><p><b>Youtube Playlists</b></p><p>A Youtube playlist allows you to display a specific collection of videos from your account or from any public, sharing-enabled videos found on Youtube.</p>"})})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.Tab=Backbone.Model.extend({defaults:{id:"",title:"",icon_id:1,subTabs:false},validate:function(b){},initialize:function(){var b=this;console.log("This function has been initialized");var c=new wxApp.SubTabCollection();this.set({subTabs:c});this.on("invalid",function(e,d){console.log(d)});this.get("subTabs").on("remove",function(d){console.log("detected subTabs remove event");if(!b.getSubTabs().length){b.trigger("destroy")}})},setTitle:function(b){this.set({title:b})},addSubTab:function(c){var b=this;c.set("parent_id",this.get("id"));this.get("subTabs").add(c);c.on("tab:move",function(){console.log("detected tab:move for subtab in Tab model");b.getSubTabs().remove(this)})},deleteSubTab:function(b){wx.log("removing sub tab from collection");wx.log(b.get("id"));this.get("subTabs").remove(b)},getSubTabs:function(){return this.get("subTabs")},destroy:function(){var b=this;wx.makeApiCall("tabs/delete",{tab_id:this.get("id")},function(){b.trigger("destroy")})}})})(jQuery);var wxApp=wxApp||{};(function(){wxApp.FeatureCollection=Backbone.Collection.extend({model:wxApp.Feature,initialize:function(){console.log("loading feature collection.")}})})();wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlCheckbox,initialize:function(){console.log("checkbox group collection init");this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.FormBuilderCollection=Backbone.Collection.extend({model:wxApp.FormBuilderControl,initialize:function(){console.log(this.toJSONrecursive());this.on("add",this.onAdd)},onAdd:function(b){a(".wx-form-builder-preview").sortable({stop:function(c,d){d.item.trigger("sortable-drop",d.item.index())}})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlOption,initialize:function(){console.log("option group collection init");this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioGroup=Backbone.Collection.extend({model:wxApp.FormBuilderControlRadio,initialize:function(){console.log("radio group collection init");this.on("add",this.onAdd)},onAdd:function(b){if(this.length==1){this.firstElementId=b.cid}b.set({collectionId:this.firstElementId})}})})(jQuery);var wxApp=wxApp||{};(function(a){wxApp.IconFontsCollection=Backbone.Collection.extend({model:wxApp.IconFont,fetch:function(){console.log("Get icon fonts.");var b=this;wx.makeApiCall("icons/get_public_font_names",{},function(e){if(typeof e.fonts!="undefined"){console.log(e.fonts.length+" fonts got.");for(var d=0;d<e.fonts.length;d++){var g=e.fonts[d];var c=new wxApp.IconFont(g);b.add(c)}}})}});wxApp.IconFonts=new wxApp.IconFontsCollection()})(jQuery);var wxApp=wxApp||{};(function(){wxApp.SubTabCollection=Backbone.Collection.extend({model:wxApp.SubTab})})();var wxApp=wxApp||{};(function(a){wxApp.TabsCollection=Backbone.Collection.extend({model:wxApp.Tab,url:wx.apiUrl+"tabs/get_tabs?site_key="+wx.siteKey,getModelNameByTabData:function(b){var d="SubTab";switch(b.content){case"twitter":d="TwitterSubTab";break;case"youtubePlaylist":d="YoutubeSubTab";break;case"flickrPhotosets":d="FlickrSubTab";break;default:if(b.config!=undefined&&b.config.subtab_name!=undefined){if(b.config.subtab_name in wxApp){d=b.config.subtab_name}}if("SubTab"==d){for(var c in wxApp){if(c.indexOf("SubTab")!=-1&&undefined!=wxApp[c].prototype.defaults&&undefined!=wxApp[c].prototype.defaults.type){if(wxApp[c].prototype.defaults.type==b.type){d=c;break}}}}if("SubTab"==d){for(var c in wxApp){if(c.indexOf("SubTab")!=-1&&undefined!=wxApp[c].prototype.defaults&&undefined!=wxApp[c].prototype.defaults.content){if(wxApp[c].prototype.defaults.content==b.content){d=c;break}}}}}return d},fetch:function(){console.log("Get tabs.");var b=this;wx.makeApiCall("tabs/get_tabs",{},function(k){console.log(k.tabs.length+" tabs got.");if(typeof k.tabs!="undefined"){var h=[];for(var d=0;d<k.tabs.length;d++){var c=k.tabs[d];if(!c.parent_id){var j=new wxApp.Tab(c);var e=b.getModelNameByTabData(c);j.addSubTab(new wxApp[e](c));for(var g=0;g<k.tabs.length;g++){if(j.get("id")==k.tabs[g].parent_id){e=b.getModelNameByTabData(k.tabs[g]);j.addSubTab(new wxApp[e](k.tabs[g]))}}h.push(j)}}b.reset();for(g=0;g<h.length;g++){b.add(h[g])}}})}});wxApp.Tabs=new wxApp.TabsCollection()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlView=Backbone.View.extend({className:"wx-form-builder-row",events:{"click .wx-form-builder-edit-label":"editLabel","blur .wx-form-builder-label-input":"updateLabel","blur .wx-form-builder-placeholder-input":"updatePlaceholder","blur .wx-form-builder-min-input":"setMin","blur .wx-form-builder-max-input":"setMax","blur .wx-form-builder-value-input":"setValue","blur .wx-form-builder-step-input":"setStep","blur .wx-form-builder-name-input":"setName","click .wx-form-builder-autocomplete":"setAutocomplete","click .wx-form-builder-control-checked":"setChecked","click .wx-form-builder-control-selected":"setSelected","click .wx-form-builder-allow-multiple":"setMultiple","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-required":"setRequired","click .wx-form-builder-delete":"deleteControl","sortable-drop":"sortableDrop"},sortableDrop:function(c,b){console.log("sortableDrop");this.$el.trigger("sortable-update",[this.model,b])},deleteControl:function(){console.log("deleteControl");this.remove();this.model.destroy()},editLabel:function(b){console.log("editLabel");b.preventDefault();this.$label=a(b.currentTarget);this.$(".wx-form-builder-label-input").val(this.$label.text()).show().select();this.$label.hide()},updateLabel:function(c){console.log("updateLabel");var b=a(c.currentTarget);this.$label.text(b.val()).show();b.hide();this.model.set("label",b.val())},updatePlaceholder:function(c){console.log("updatePlaceholder");var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("placeholder",b.val())}this.getInput().attr("placeholder",b.val())},setMin:function(b){this.model.get("attributes").set("min",a(b.currentTarget).val());this.getInput().attr("min",a(b.currentTarget).val())},setMax:function(b){this.model.get("attributes").set("max",a(b.currentTarget).val());this.getInput().attr("max",a(b.currentTarget).val())},setValue:function(b){this.model.get("attributes").set("value",a(b.currentTarget).val());this.getInput().val(a(b.currentTarget).val())},setStep:function(b){this.model.get("attributes").set("step",a(b.currentTarget).val());this.getInput().attr("step",a(b.currentTarget).val())},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("name",b.val())}this.getInput().attr("name",b.val())},setAutocomplete:function(b){this.model.get("attributes").set("autocomplete",a(b.currentTarget).val())},setChecked:function(b){console.log("setChecked");this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked")},setSelected:function(b){console.log("setSelected");this.model.collection.models.forEach(function(c){c.get("attributes").unset("selected")});this.model.get("attributes").set("selected","checked")},setMultiple:function(c){console.log("setMultiple");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("multiple","checked")}else{this.model.get("attributes").unset("multiple")}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},setRequired:function(c){console.log("setRequired");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked");a("span.required").show()}else{this.model.get("attributes").unset("required");a("span.required").hide()}},getInput:function(){var b=this.$(".wx-form-builder-"+this.model.get("attributes").get("type")+"-input");if(b.length==0){b=this.$(".wx-form-builder-textarea")}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabView=Backbone.View.extend({tagName:"div",className:"wx-tab",subTabsContainerView:false,initialize:function(){this.tabTpl=_.template(a("#tab-template").html());this.model.bind("change",this.render,this);this.model.bind("destroy",this.destroyView,this);Backbone.Events.on("tab:id-update",this.updateTabId,this)},events:{click:"editAll"},render:function(){this.$el.html(this.tabTpl(this.model.toJSON()));this.loadIcon();if(undefined!==this.$el.droppable){this.$el.droppable({accept:".list-sub-items li, .list-add-content-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer",greedy:true})}this.$el.data("backbone-view",this);this.$el.addClass(this.model.get("id"));this.$el.attr("id",this.model.get("id")+"TabID");return this},onDrop:function(h,i){console.log("onDrop");var g=a(this).data("backbone-view");var e=a(i.draggable).data("backbone-view");console.log(e.model.get("parent_id"));if(i.draggable.hasClass("wx-add-feature")){var c=i.draggable.attr("id").replace("add-","");var b=g.model.get("id");wxApp.appView.createFeatureView(c,b)}else{Backbone.Events.trigger("tab:dropped",e.model.get("parent_id"));if(e.model.get("parent_id")!=g.model.get("id")){wx.makeApiCall("tabs/set_parent_id",{tab_id:e.model.get("id"),parent_id:g.model.get("id")},function(){e.model.trigger("tab:move");g.model.addSubTab(e.model);a("#"+g.model.get("id")+"TabID").click()})}}Backbone.Events.trigger("subtab:dragstop");var d=a("style")[a("style").length-1];if(d.innerHTML.indexOf("*{ cursor")==0){d.remove()}},editAll:function(){a('a[href="#panel2"]').click();a(".wx-tab button").addClass("secondary");a("div."+this.model.get("id")+" button").removeClass("secondary");this.subTabsContainerView=new wxApp.SubTabsContainerView({model:this.model});this.subTabsContainerView.tabView=this;a("#editSpace").html(this.subTabsContainerView.render().el)},updateTabId:function(b,c){if(b==this.model.get("id")){this.model.getSubTabs().forEach(function(d){d.set("parent_id",c)});this.model.set("id",c)}},loadIcon:function(){},destroyView:function(){wx.log("destroying tab view");if(this.subTabsContainerView){this.subTabsContainerView.remove()}this.remove()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabEditView=Backbone.View.extend({className:"wx-subtab-edit",subTabEditTplSelector:"",baseEditTplSelector:"#subtab-edit-template",feedSampleTplSelector:"#feedsample-template",parentContainerId:false,initialize:function(b){this.initializeEvents();this.subTabEditTpl=_.template(a(this.subTabEditTplSelector).html());this.baseEditTpl=_.template(a(this.baseEditTplSelector).html());this.feedSampleTpl=_.template(a(this.feedSampleTplSelector).html());this.render();Backbone.Events.on("tab:new",this.destroyView,this);this.model.on("save",this.destroyView,this)},initializeEvents:function(){this.events=this.genericEvents;this.delegateEvents()},genericEvents:{"change .wx-dialog-input":"next","change .wx-social-input":"next","keydown .wx-dialog-input":"hideValidateFeed","click .wx-finish-button":"finish","click .wx-next-button":"next","change .wx-content-radio":"contentChange"},render:function(){console.log("render");this.$el.html(this.baseEditTpl(this.model.toJSON()));this.$(".subtab").html(this.subTabEditTpl(this.model.toJSON()));this.$el.prepend("<form>");this.$el.append("</form>");this.startValidation();if(this.model.validateFeed){this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide();if(this.model.get("id")!==null){this.next()}}else{this.$(".wx-next-button").hide();if(!this.model.allowTitleEdit){this.$(".wx-edit-title-div").hide()}}var b=this.$el;meeeee=b;this.$el.on("opened",function(){b.foundation("section","reflow");var c=b.height();c-=115;if(c<315){c=315}b.find("div.content").height(c);b.find("input[type=text]:first").focus()});return this},startValidation:function(){if(undefined!==this.$("form").validate){this.$("form").validate()}},contentChange:function(b){this.hideValidateFeed()},setParentViewContainerId:function(b){this.parentContainerId=b},finish:function(){console.log("Finish clicked.");this.setModelFromView(this.model);this.setTitleFromView(this.model);this.setIconFromView(this.model);this.saveModel();this.$el.foundation("reveal","close");wx.rebuildApp()},next:function(){if(!this.model.validateFeed){return}console.log("next");this.$("#dialog-loader").show();if(undefined!==this.$("form")&&undefined!=this.$("form").validate){var b=this.$("form").validate();if(this.$("form").valid()){this.validateFeed()}else{alert("Error count: "+b.errorList.length)}}else{this.validateFeed()}},saveModel:function(){this.model.save()},setTitleFromView:function(b){if(b.allowTitleEdit&&this.$(".wx-edit-title")){b.set("title",this.$(".wx-edit-title").val())}return b},setIconFromView:function(b){b.set("icon_id",this.$('input:radio[name="wx-icon"]:checked').val());return b},setModelFromView:function(b){},validateFeed:function(){console.log("validate feed");var b=this;var c=this.getModelCopy();this.setModelFromView(c);this.getFeedSample(c,function(d){b.checkFeedSample(d)})},getModelCopy:function(){console.log("get model copy");var b=a.extend(true,{},this.model);return b},checkFeedSample:function(b){if(typeof b!="undefined"&&b.success&&typeof b.feed!="undefined"){this.$("#dialog-loader").hide();this.$(".wx-feed-error").hide();this.displayFeedSample(b);this.$(".wx-next-button").hide();this.$(".wx-finish-button").show();if(this.model.allowTitleEdit){this.$(".wx-edit-title-div").show()}}else{this.$(".wx-feed-error").show()}},displayFeedSample:function(b){var d=this;this.$(".wx-validate-feed").show();wx.log("displayFeedSample ***");wx.log(b);if(!b.feed.length){this.$(".wx-validate-feed").html("No content added yet?")}else{this.$(".wx-validate-feed").html("<ul></ul>");for(var c=0;c<b.feed.length;c++){this.$(".wx-validate-feed ul").append(d.feedSampleTpl(b.feed[c]))}}},hideValidateFeed:function(){this.$(".wx-feed-error").hide();this.$(".wx-validate-feed").html('<div class="panel wx-preview"><h3 class="wx-preview-msg">preview</h3></div>');this.$(".wx-next-button").show();this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide()},getFeedSample:function(b,d){console.log("get feed sample");var c=b.getAPIData();c.api_check=1;c.confirm_feed=1;a.ajax({url:wx.apiUrl+"validator/validate_feed?site_key="+wx.siteKey,datatype:"JSON",data:c,success:function(e){d(e)}})},destroyView:function(){this.undelegateEvents();this.$el.removeData().unbind()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.StyleBase=Backbone.View.extend({showLoadingGif:function(c){var b="#"+c+"_loading";console.log(b);a(b).show();return b},hideLoadingGif:function(c,b){this.hideLoadGif(c,b)},hideLoadGif:function(e,c){var d=e+"_done";var b='<label id="'+d+'" class="left inline">Saved.</label>';console.log(b);a(c).before(b);a("#"+d).delay(2000).fadeOut(1000).queue(function(){a(this).remove()});a(c).hide()}})})(jQuery);wxApp=wxApp||{};(function(c){var d=function(e,h){if(typeof h!=="string"){return h}var g=encodeURIComponent(h);return g};var b=function(){return JSON.parse(JSON.stringify(this.attributes,d))};var a=function(){var e=[];this.models.forEach(function(g){e.push(g.toJSONrecursive())});return JSON.parse(JSON.stringify(e))};Backbone.Model.prototype.toJSONrecursive=b;Backbone.Collection.prototype.toJSONrecursive=a;wxApp.App=Backbone.View.extend({el:"#toptabs",initialize:function(){this.allowAddContentButtonsToBeDragged();this.allowDroppingOnAddArea();Backbone.Events.on("subtab:dragstart",this.showDropTab,this);Backbone.Events.on("subtab:dragstop",this.hideDropTab,this);Backbone.Events.on("tab:dropped",this.clearBodyStyles,this);Backbone.Events.on("tab:dropped",this.hideDropTab,this)},events:{"click #preview-refresh":"refreshAppPreview"},allowAddContentButtonsToBeDragged:function(){if(undefined!=this.$("list-add-content-items li").draggable){this.$(".list-add-content-items li").draggable({cursor:"move",cursorAt:{top:10,left:10},helper:function(e){return c("<div class='ui-widget-draggable'>"+c(e.delegateTarget).find("span")[0].innerHTML+"</div>")},revert:true})}},allowDroppingOnAddArea:function(){if(undefined!==this.$("#addFeatureID").droppable){this.$("#addFeatureID").droppable({accept:".list-add-content-items li",hoverClass:"ui-state-hover",drop:this.onDropOnAddArea})}},onDropOnAddArea:function(e,g){wxApp.appView.createFeatureView(c(g.draggable).attr("id").replace("add-",""))},createFeatureView:function(i,h){if(undefined!==wxApp[i+"SubTab"]&&undefined!==wxApp[i+"SubTabEditView"]){var g=new wxApp[i+"SubTab"]();if(undefined!=h&&h){g.set("parent_id",parseInt(h))}var e=new wxApp[i+"SubTabEditView"]({model:g,el:"#wx-edit-area-"+i})}else{throw new Error("Invalid type "+i)}},refreshAppPreview:function(){console.log("Refreshing...");wx.refreshAppPreview()},showDropTab:function(){c("#dropTab").show();c(".wx-layout-tablist .wx-tab").addClass("dragging")},hideDropTab:function(){c("#dropTab").hide();c(".wx-layout-tablist .wx-tab.dragging").removeClass("dragging")},clearBodyStyles:function(){c("body").attr("style","")},changeFont:function(e){f=e;wxApp.currentFont=e;var g="@font-face {     font-family: 'wxFont-1';     src:         url('data:image/svg+xml;base64,"+e.get("svg")+"') format('svg'),         url('data:application/font-woff;charset=utf-8;base64,"+e.get("woff")+"') format('woff'),         url('data:application/x-font-ttf;charset=utf-8;base64,"+e.get("ttf")+"') format('truetype'); } .wxFont-1:before { font-family: 'wxFont-1'; } ";c("#fontstyle").html(g)}});wxApp.appView=new wxApp.App();wx.makeApiCall("design/get_font_id",{},function(g){if(typeof g.font_id!=="undefined"){var e=new wxApp.IconFont();e.fetch(g.font_id,function(){c('<style id="fontstyle" type="text/css"></style>').appendTo("head");wxApp.appView.changeFont(e)})}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.ContainerEditView=Backbone.View.extend({initialize:function(){this.tpl=_.template(a("#ContainerEditContent").html())},events:{"click .wx-save-button":"save"},render:function(){this.$el.html(this.tpl(this.model.toJSON()));return this},cancel:function(){try{this.remove()}catch(b){}},save:function(){console.log("Save.");var e=this;var c=this.model.get("id");var g=a("#container-title").val();var d=a('input:radio[name="wx-icon"]:checked').val();var b=0;wx.makeApiCall("tabs/set_tabTitle",{tab_id:c,tabTitle:g},function(){console.log("Title Saved");e.model.set("tabTitle",g);if(++b==2){wx.rebuildApp()}});wx.makeApiCall("tabs/set_tabIcon_id",{tab_id:c,tabIcon_id:d},function(){console.log("Tab Icon Saved");e.model.set("tabIcon_id",d);if(++b==2){wx.rebuildApp()}});console.log("Closing...");a("#ContainerEditModal").foundation("reveal","close")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FeatureView=Backbone.View.extend({tagName:"li",className:"",initialize:function(){this.featureTpl=_.template(a("#feature-template").html());this.model.bind("change",this.render,this)},events:{"click .wx-add-feature":"addFeature"},render:function(){if(typeof this.model.get("tierRequired")==="undefined"){this.model.set("tierRequired",1)}this.$el.html(this.featureTpl(this.model.toJSON()));if(this.model.get("rel")!==""){this.$("button").attr("rel",this.model.get("rel"))}return this},addFeature:function(c){var b=c.currentTarget.id.replace("add-","");if(this.$("button").hasClass("wx-unavailable")){a("#wx-edit-area-"+b).html(a("#please-subscribe").html())}else{if(this.model.get("tierRequired")>parseFloat(wxApp.account.get("tier_raw"))){a("#wx-edit-area-"+b).html(a("#please-upgrade").html())}else{wxApp.appView.createFeatureView(b)}}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FeatureList=Backbone.View.extend({el:"#toptabs",initialize:function(){console.log("initialize feature list view");this.collection=new wxApp.FeatureCollection();this.collection.bind("add",this.addOne,this)},addOne:function(c){if(c.get("rel")===""){var d=this;var b=new wxApp.FeatureView({model:c});this.$el.append(b.render().el)}}});wxApp.account=new wxApp.Account();wxApp.account.fetch(function(){console.log("Account info fetched.");wxApp.featureList=new wxApp.FeatureList();wxApp.featureList.collection.fetch({url:"../wp-content/plugins/wp_weeverapps/static/js/config/wx.featurelist.js",success:function(b){console.log("features fetched")},error:function(){console.log("Could not load feature list.")}})})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderActionView=Backbone.View.extend({className:"wx-form-builder-row",tplPostSelector:"#form-builder-action-post",tplEmailSelector:"#form-builder-action-email",tplDocusignSelector:"#form-builder-action-docusign",events:{"blur .wx-form-builder-action":"updateAction","click .wx-form-builder-delete":"deleteControl","blur .wx-form-builder-docusign-username":"updateUsername","blur .wx-form-builder-docusign-password":"updatePassword","blur .wx-form-builder-docusign-returnUrl":"updateReturnUrl","blur .wx-form-builder-pdfheader-title":"updatePdfHeader","blur .wx-form-builder-pdfheader-line1":"updatePdfHeader","blur .wx-form-builder-pdfheader-line2":"updatePdfHeader","blur .wx-form-builder-pdfheader-line3":"updatePdfHeader"},initialize:function(){var c="";switch(this.model.get("method")){case"post":c=this.tplPostSelector;break;case"email":c=this.tplEmailSelector;break;case"docusign":c=this.tplDocusignSelector;break}var b=a(c);this.tpl=_.template(b.html())},render:function(){this.$el.html(this.tpl(this.model.toJSON()));return this},updateUsername:function(b){this.model.set("username",a(b.currentTarget).val())},updatePassword:function(b){this.model.set("password",a(b.currentTarget).val())},updateReturnUrl:function(b){this.model.set("returnUrl",a(b.currentTarget).val())},updatePdfHeader:function(c){console.log("updatePdfHeader");var b=a(c.currentTarget);if(b.hasClass("wx-form-builder-pdfheader-title")){this.model.get("pdfHeader").title=b.val()}if(b.hasClass("wx-form-builder-pdfheader-line1")){this.model.get("pdfHeader").line1=b.val()}if(b.hasClass("wx-form-builder-pdfheader-line2")){this.model.get("pdfHeader").line2=b.val()}if(b.hasClass("wx-form-builder-pdfheader-line3")){this.model.get("pdfHeader").line3=b.val()}console.log(this.model)},updateAction:function(c){console.log("updateAction");c.preventDefault();var b=a(c.currentTarget);this.model.set("value",b.val());console.log(this.model)},deleteControl:function(){console.log("deleteControl");this.remove();this.model.destroy()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxFieldsetView=Backbone.View.extend({tplSelector:"#form-builder-checkbox-fieldset",events:{"click .wx-form-builder-edit-title":"editTitle","blur .wx-form-builder-title-input":"updateTitle","blur .wx-form-builder-name-input":"setName","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-delete":"deleteControl"},initialize:function(){console.log("checkbox fieldset view init");var b=a(this.tplSelector);this.tpl=_.template(b.html())},render:function(){console.log("checkbox fieldset view render");this.$el.html(this.tpl(this.model.toJSON()));return this},deleteControl:function(){console.log("deleteControl");this.remove();this.model.destroy()},setName:function(c){console.log("setName");var b=a(c.currentTarget);console.log(this);if(b.val()!==""){this.model.set("name",b.val());this.model.get("checkboxGroup").each(function(d){d.get("attributes").set("name",b.val());console.log(d)})}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},editTitle:function(b){console.log("editTitle");b.preventDefault();this.$title=a(b.currentTarget);this.$(".wx-form-builder-title-input").val(this.$title.text()).show().select();this.$title.hide()},updateTitle:function(c){console.log("updateTitle");var b=a(c.currentTarget);this.$title.text(b.val()).show();b.hide();this.model.set("title",b.val())}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlCheckboxGroupView=Backbone.View.extend({initialize:function(){console.log("checkbox group view init");this.template=_.template(a("#form-builder-checkbox-group").html());this.collection.bind("add",this.addOne,this)},render:function(){console.log("checkbox group view render");this.$el.html(this.template());return this},addOne:function(c){console.log("checkbox group view add");var b=new wxApp.FormBuilderControlInputView({model:c,type:"checkbox"});this.$(".wx-form-builder-checkbox-group").append(b.render().el)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInfoView=wxApp.FormBuilderControlView.extend({tplSelector:"#form-builder-info",events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"blur .wx-form-builder-info":"setInfo"})},initialize:function(){console.log("formbuildercontrolinfoview init");var b=a(this.tplSelector);this.inputTpl=_.template(b.html())},render:function(){console.log("formbuildercontrolinfoview render");var c=this.model.toJSON();var b=this.inputTpl(c);this.$el.html(b);return this},setInfo:function(c){var b=a(c.currentTarget);this.model.set("innerHTML",b.val())}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlInputView=wxApp.FormBuilderControlView.extend({inputTplSelector:"#form-builder-input",radioTplSelector:"#form-builder-radio",checkboxTplSelector:"#form-builder-checkbox",events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"click .wx-form-builder-add-radio":"addRadio","click .wx-form-builder-add-checkbox":"addCheckbox"})},initialize:function(c){console.log(c);c.type=(typeof c.type=="undefined"?"input":c.type);var b=a(this[c.type+"TplSelector"]);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));return this;console.log("input render")},addRadio:function(){console.log("radio view add");console.log(this.model);this.model.collection.add(new wxApp.FormBuilderControlRadio());console.log(this.model.collection)},addCheckbox:function(){console.log("checkbox view add");console.log(this.model);this.model.collection.add(new wxApp.FormBuilderControlCheckbox());console.log(this.model.collection)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlView=Backbone.View.extend({className:"wx-form-builder-row",events:{"click .wx-form-builder-edit-label":"editLabel","blur .wx-form-builder-label-input":"updateLabel","blur .wx-form-builder-placeholder-input":"updatePlaceholder","blur .wx-form-builder-min-input":"setMin","blur .wx-form-builder-max-input":"setMax","blur .wx-form-builder-value-input":"setValue","blur .wx-form-builder-step-input":"setStep","blur .wx-form-builder-name-input":"setName","click .wx-form-builder-autocomplete":"setAutocomplete","click .wx-form-builder-control-checked":"setChecked","click .wx-form-builder-control-selected":"setSelected","click .wx-form-builder-allow-multiple":"setMultiple","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-required":"setRequired","click .wx-form-builder-delete":"deleteControl","sortable-drop":"sortableDrop"},sortableDrop:function(c,b){console.log("sortableDrop");this.$el.trigger("sortable-update",[this.model,b])},deleteControl:function(){console.log("deleteControl");this.remove();this.model.destroy()},editLabel:function(b){console.log("editLabel");b.preventDefault();this.$label=a(b.currentTarget);this.$(".wx-form-builder-label-input").val(this.$label.text()).show().select();this.$label.hide()},updateLabel:function(c){console.log("updateLabel");var b=a(c.currentTarget);this.$label.text(b.val()).show();b.hide();this.model.set("label",b.val())},updatePlaceholder:function(c){console.log("updatePlaceholder");var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("placeholder",b.val())}this.getInput().attr("placeholder",b.val())},setMin:function(b){this.model.get("attributes").set("min",a(b.currentTarget).val());this.getInput().attr("min",a(b.currentTarget).val())},setMax:function(b){this.model.get("attributes").set("max",a(b.currentTarget).val());this.getInput().attr("max",a(b.currentTarget).val())},setValue:function(b){this.model.get("attributes").set("value",a(b.currentTarget).val());this.getInput().val(a(b.currentTarget).val())},setStep:function(b){this.model.get("attributes").set("step",a(b.currentTarget).val());this.getInput().attr("step",a(b.currentTarget).val())},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("name",b.val())}this.getInput().attr("name",b.val())},setAutocomplete:function(b){this.model.get("attributes").set("autocomplete",a(b.currentTarget).val())},setChecked:function(b){console.log("setChecked");this.model.collection.models.forEach(function(c){c.get("attributes").unset("checked")});this.model.get("attributes").set("checked","checked")},setSelected:function(b){console.log("setSelected");this.model.collection.models.forEach(function(c){c.get("attributes").unset("selected")});this.model.get("attributes").set("selected","checked")},setMultiple:function(c){console.log("setMultiple");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("multiple","checked")}else{this.model.get("attributes").unset("multiple")}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},setRequired:function(c){console.log("setRequired");var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("required","checked");a("span.required").show()}else{this.model.get("attributes").unset("required");a("span.required").hide()}},getInput:function(){var b=this.$(".wx-form-builder-"+this.model.get("attributes").get("type")+"-input");if(b.length==0){b=this.$(".wx-form-builder-textarea")}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionGroupView=Backbone.View.extend({initialize:function(){console.log("option group view init");this.template=_.template(a("#form-builder-option-group").html());console.log(this);this.collection.bind("add",this.addOne,this)},render:function(){console.log("option group view render");this.$el.html(this.template());return this},addOne:function(c){console.log("option group view add");var b=new wxApp.FormBuilderControlOptionView({model:c});this.$(".wx-form-builder-option-group").append(b.render().el)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlOptionView=wxApp.FormBuilderControlView.extend({events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"click .wx-form-builder-add-select-option":"addOption","blur .wx-form-builder-select-option-text":"updateOptionText","blur .wx-form-builder-select-option-value":"updateOptionValue"})},initialize:function(){this.selectTpl=_.template(a("#form-builder-select-option").html())},render:function(){console.log("select view render");this.$el.html(this.selectTpl(this.model.toJSON()));return this},addOption:function(){console.log("select view add");this.model.collection.add(new wxApp.FormBuilderControlOption());console.log(this.model.collection)},updateOptionText:function(c){var b=a(c.currentTarget);this.model.set({innerText:b.val()});console.log(this.model.toJSONrecursive())},updateOptionValue:function(c){var b=a(c.currentTarget);if(b.val()!=""){this.model.get("attributes").set("value",b.val())}}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioFieldsetView=Backbone.View.extend({tplSelector:"#form-builder-radio-fieldset",events:{"click .wx-form-builder-edit-title":"editTitle","blur .wx-form-builder-title-input":"updateTitle","blur .wx-form-builder-name-input":"setName","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-delete":"deleteControl"},initialize:function(){console.log("Radio fieldset view init");var b=a(this.tplSelector);this.tpl=_.template(b.html())},render:function(){console.log("Radio fieldset view render");this.$el.html(this.tpl(this.model.toJSON()));return this},deleteControl:function(){console.log("deleteControl");this.remove();this.model.destroy()},setName:function(c){console.log("setName");var b=a(c.currentTarget);console.log(this);if(b.val()!==""){this.model.set("name",b.val());this.model.get("radioGroup").each(function(d){d.get("attributes").set("name",b.val());console.log(d)})}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},editTitle:function(b){console.log("editTitle");b.preventDefault();this.$title=a(b.currentTarget);this.$(".wx-form-builder-title-input").val(this.$title.text()).show().select();this.$title.hide()},updateTitle:function(c){console.log("updateTitle");var b=a(c.currentTarget);this.$title.text(b.val()).show();b.hide();this.model.set("title",b.val())}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlRadioGroupView=Backbone.View.extend({initialize:function(){console.log("radio group view init");this.template=_.template(a("#form-builder-radio-group").html());this.collection.bind("add",this.addOne,this)},render:function(){this.$el.html(this.template());return this},addOne:function(c){var b=new wxApp.FormBuilderControlInputView({model:c,type:"radio"});this.$(".wx-form-builder-radio-group").append(b.render().el)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSelectView=Backbone.View.extend({tplSelector:"#form-builder-select",events:{"click .wx-form-builder-edit-title":"editTitle","blur .wx-form-builder-title-input":"updateTitle","blur .wx-form-builder-name-input":"setName","click .wx-form-builder-select-allow-multiple":"toggleMultipleSelections","click .wx-form-builder-allow-additional":"setAllowAdditional","click .wx-form-builder-delete":"deleteControl"},initialize:function(){console.log("select group view init");var b=a(this.tplSelector);this.tpl=_.template(b.html())},render:function(){console.log("select group view render");this.$el.html(this.tpl(this.model.toJSON()));return this},deleteControl:function(){console.log("deleteControl");this.remove();this.model.destroy()},setName:function(c){var b=a(c.currentTarget);if(b.val()!==""){this.model.get("attributes").set("name",b.val())}},setAllowAdditional:function(c){console.log("setAllowAdditional");var b=a(c.currentTarget);if(b.is(":checked")){console.log("checked");this.model.set("allowAdditional","checked")}else{this.model.set("allowAdditional","")}},toggleMultipleSelections:function(c){var b=a(c.currentTarget);if(b.is(":checked")){this.model.get("attributes").set("multiple","checked")}else{this.model.get("attributes").unset("multiple")}},editTitle:function(b){console.log("editTitle");b.preventDefault();this.$title=a(b.currentTarget);this.$(".wx-form-builder-title-input").val(this.$title.text()).show().select();this.$title.hide()},updateTitle:function(c){console.log("updateTitle");var b=a(c.currentTarget);this.$title.text(b.val()).show();b.hide();this.model.set("title",b.val())}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlSignatureView=wxApp.FormBuilderControlView.extend({tplSelector:"#form-builder-signature",events:function(){return _.extend({},wxApp.FormBuilderControlView.prototype.events,{"blur .wx-form-builder-docusign-username":"updateUsername","blur .wx-form-builder-docusign-password":"updatePassword","blur .wx-form-builder-docusign-returnUrl":"updateReturnUrl"})},updateUsername:function(b){this.model.set("username",a(b.currentTarget).val())},updatePassword:function(b){this.model.set("password",a(b.currentTarget).val())},updateReturnUrl:function(b){this.model.set("returnUrl",a(b.currentTarget).val())},initialize:function(){var b=a(this.tplSelector);this.inputTpl=_.template(b.html());this.model.bind("change",this.render,this)},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));return this;console.log("input render")}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderControlTextareaView=wxApp.FormBuilderControlView.extend({initialize:function(){this.inputTpl=_.template(a("#form-builder-textarea").html());this.model.bind("change",this.render,this)},render:function(){this.$el.html(this.inputTpl(this.model.toJSON()));return this}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderFinishElementView=Backbone.View.extend({className:"wx-form-builder-finish-row",initialize:function(){console.log("finish element view init");var b=a("#form-builder-finish-element");this.template=_.template(b.html());return this},render:function(){console.log("finish element render");console.log(this.model);this.$el.html(this.template(this.model.toJSON()));console.log("finish element render end");return this}});wxApp.FormBuilderFinishView=Backbone.View.extend({events:{"click input[type=radio]":"setIdFieldIndex","blur .wx-form-builder-upload-message":"setUploadMessage"},initialize:function(){console.log("finish view init");this.template=_.template(a("#form-builder-finish").html());console.log(this.model)},render:function(){console.log("finish view render");this.$el.html(this.template({collection:this.model.get("config").formElements}));return this},setUploadMessage:function(b){this.model.get("config").onUpload.message=a(b.currentTarget).val()},setIdFieldIndex:function(b){console.log("setIdFieldIndex");console.log(a(b.currentTarget));this.model.get("config").idFieldIndex=parseInt(a(b.currentTarget).attr("value"));console.log(this.model)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.Advanced=wxApp.StyleBase.extend({el:"#advanced",events:{"click #save_advanced":"saveCss","change #localizations":"saveLanguage","change #font-list":"changeFont"},initialize:function(){this.collection.bind("add",this.addFont,this);this.tpl=_.template(a("#advanced-options").html());this.render()},render:function(){var b=wxApp.config.get("localization");b=b.replace(/"/g,"");wxApp.config.set("localization",b);this.$(".content").html(this.tpl({config:wxApp.config.toJSON(),design:wxApp.design.toJSON()}));if(this.collection.length){for(var d=0;d<this.collection.length;d++){var c=this.collection.models[d];this.addFont(c)}}},saveCss:function(){var d=this;var c=this.$("#css_styles").val();wxApp.design.get("css").styles=c;var b=JSON.stringify(wxApp.design.get("css"));var e={css:b};wx.makeApiCall("design/set_css",e,function(g){wx.rebuildApp()})},saveLanguage:function(){var c=this;var g="localizations";var b=this.showLoadingGif(g);var e=this.$("#"+g).val();wxApp.config.set("localization",e);var d={localization:e};wx.makeApiCall("config/set_localization",d,function(h){c.hideLoadingGif(g,b)})},addFont:function(b){console.log("Add Font Called.");b=b.toJSON();console.log(b);a("#font-list").append(a("<option>",{value:b.id,text:b.name}))},changeFont:function(){var c=a("#font-list").val();a("#icon-font-preview").slideUp();if(c==="-1"){return}console.log("Changing to font "+c);var g=null;for(var b=0;b<wxApp.IconFonts.length;b++){g=wxApp.IconFonts.models[b];console.log(g.id);if(g.id==c){break}}wxApp.appView.changeFont(g);a("#icon-font-preview").slideDown();var e=this;var d=this.showLoadingGif("font");wx.makeApiCall("design/set_font_id",{font_id:g.get("id")},function(h){e.hideLoadingGif("font",d)})}});wxApp.IconFonts.fetch()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.CustomBranding=wxApp.StyleBase.extend({el:"#custom_branding",events:{"click #save_load_spinner":"saveLoadSpinner","click #save_domain":"saveDomain","click a.domain":"deleteDomain"},initialize:function(){this.tpl=_.template(a("#custom-branding").html());this.render()},render:function(){this.$(".content").html(this.tpl(this.model.toJSON()))},saveLoadSpinner:function(){if(this.$("#wx-load-spinner").length){var d=this;var g="save_load_spinner";var b=d.showLoadingGif(g);wxApp.design.get("loadspinner").text=this.$("#wx-load-spinner").val();var c=JSON.stringify(wxApp.design.get("loadspinner"));var e={loadspinner:c};wx.makeApiCall("design/set_loadspinner",e,function(h){d.hideLoadGif(g,b)})}},saveDomain:function(){if(!this.$("#wx-domain-map-input").length){return}if(wxApp.design.get("domain")===null){wxApp.design.set("domain",[])}var d=this;var g="wx-domain-map-input";var b=a("#"+g);var c=this.showLoadingGif(g);var e=b.val();wxApp.design.get("domain").push({domain:e});this.updateDomains(wxApp.design.get("domain"),function(h){wxApp.customBranding.render();d.hideLoadGif(g,c)})},deleteDomain:function(d){d.preventDefault();var c=a(d.currentTarget).data("id");var b=this.inArray(c,wxApp.design.get("domain"));if(b>-1){wxApp.design.get("domain").splice(b,1);this.updateDomains(wxApp.design.get("domain"),function(e){wxApp.customBranding.render()})}},inArray:function(d,e){var b=-1;for(var c=e.length-1;c>=0;c--){if(e[c].domain===d){b=c;break}}return b},updateDomains:function(b,e){var c=JSON.stringify(b);var d={domain:c};wx.makeApiCall("design/set_domain",d,e)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.InstallIcon=wxApp.StyleBase.extend({el:"#install_icon",events:{"click #save_install_icon":"clickSave","change input[name=switch-install]":"changeSave"},initialize:function(){this.tpl=_.template(a("#install-icon").html());this.$(".content").html(this.tpl(this.model.toJSON()))},clickSave:function(){a("#save_install_icon").html("Saving...");this.performSave(function(b){a("#save_install_icon").html("Saved!").delay(2000).queue(function(){a(this).html("Save")})})},changeSave:function(b){this.performSave(function(c){})},performSave:function(g){var b=a("input[name=switch-install]:checked").attr("id");if(b==="install-on"){b="1"}else{b="0"}wxApp.design.get("install").prompt=b;wxApp.design.get("install").name=a("#title").val();wxApp.design.get("install").icon=wx.cleanUrl(a("#wx-icon_live").attr("src"));var d=JSON.stringify(wxApp.design.get("install"));var e={install:d};wx.makeApiCall("design/set_install",e,g)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.StyleBase=Backbone.View.extend({showLoadingGif:function(c){var b="#"+c+"_loading";console.log(b);a(b).show();return b},hideLoadingGif:function(c,b){this.hideLoadGif(c,b)},hideLoadGif:function(e,c){var d=e+"_done";var b='<label id="'+d+'" class="left inline">Saved.</label>';console.log(b);a(c).before(b);a("#"+d).delay(2000).fadeOut(1000).queue(function(){a(this).remove()});a(c).hide()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.LaunchScreen=Backbone.View.extend({el:"#launch_screen",events:{"change .wx-theme-input":"saveImage"},initialize:function(){Backbone.Events.on("image:change",this.saveImage,this);this.tpl=_.template(a("#launch-screen").html());this.$(".content").html(this.tpl(this.model.toJSON()))},saveImage:function(b){eenpoot=b;var g=b.attr("id");if(!g){g=b.attr("name")}var e=b.val();if(g==="titlebar_logo_live"){wxApp.design.get("titlebar").image=e;var c=JSON.stringify(wxApp.design.get("titlebar"));var d={titlebar:c};wx.makeApiCall("design/set_titlebar",d,function(h){wx.rebuildApp()})}else{if(g==="icon_live"){wxApp.design.get("install").icon=e;var c=JSON.stringify(wxApp.design.get("install"));var d={install:c};wx.makeApiCall("design/set_install",d,function(h){wx.rebuildApp()})}else{g=g.replace("_load_live","");wxApp.design.get("launchscreen")[g]=e;var c=JSON.stringify(wxApp.design.get("launchscreen"));var d={launchscreen:c};wx.makeApiCall("design/set_launchscreen",d,function(h){wx.rebuildApp()})}}}})})(jQuery);wxApp=wxApp||{};(function(c){wxApp.LogoDesign=wxApp.StyleBase.extend({el:"#logo_design",events:{"change input[name=titlebarSource]":"radioChange","change .logo-design":"logoChange"},initialize:function(){console.log("Design view init");this.tpl=_.template(c("#logo-design").html());this.$(".content").html(this.tpl(this.model.toJSON()));Backbone.Events.on("color:change",this.colorChange,this)},radioChange:function(){switch(c("input:radio[name=titlebarSource]:checked").val()){case"text":c("#logoText").show();c("#logoImage").hide();break;case"image":c("#logoText").hide();c("#logoImage").show();break}this.logoChange(this)},colorChange:function(j){var h=this;var d=c(j.valueElement);var l=d.attr("id");var k=d.val();if(k.indexOf("#")!==0){k="#"+k}var g=this.showLoadingGif(l);var i={action:"ajaxSaveTheme",nonce:c("input#nonce").val()};i[l]=k;c.ajax({type:"POST",url:ajaxurl,data:i,success:function(e){h.hideLoadGif(l,g);wx.rebuildApp()},error:function(e,n){alert(n)}})},logoChange:function(j){var i=this;var d=c(j.currentTarget);var l=d.attr("id");var g=this.showLoadingGif(l);wxApp.design.get("titlebar").html=c("#titlebar_html").val();wxApp.design.get("titlebar").text=c("#titlebar_title").val();wxApp.design.get("titlebar").type=c("input:radio[name=titlebarSource]:checked").val();wxApp.design.get("titlebar").image=c("#titlebar_logo_live").attr("src");var h=JSON.stringify(wxApp.design.get("titlebar"));var k={titlebar:h};wx.makeApiCall("design/set_titlebar",k,function(e){i.hideLoadGif(l,g);wx.rebuildApp()})}});var a=false,b=false;wxApp.design=new wxApp.Design();wxApp.design.fetch(function(){console.log("Design Fetched.");wxApp.logoDesign=new wxApp.LogoDesign({model:wxApp.design});wxApp.launchSreen=new wxApp.LaunchScreen({model:wxApp.design});wxApp.installIcon=new wxApp.InstallIcon({model:wxApp.design});wxApp.customBranding=new wxApp.CustomBranding({model:wxApp.design});a=true;if(b){console.log("advanced init");wxApp.advanced=new wxApp.Advanced({collection:wxApp.IconFonts})}});wxApp.config=new wxApp.Config();wxApp.config.fetch(function(){b=true;if(a){console.log("advanced init");wxApp.advanced=new wxApp.Advanced({collection:wxApp.IconFonts})}});wxApp.IconFonts.fetch()})(jQuery);wxApp=wxApp||{};(function(a){wxApp.BloggerSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#blogger-subtab-edit-template",setModelFromView:function(b){console.log("Set Model From View");console.log(this.$(".wx-edit-input"));if(this.$(".wx-edit-input")){b.setConfig("blog_url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabEditView=Backbone.View.extend({className:"wx-subtab-edit",subTabEditTplSelector:"",baseEditTplSelector:"#subtab-edit-template",feedSampleTplSelector:"#feedsample-template",parentContainerId:false,initialize:function(b){this.initializeEvents();this.subTabEditTpl=_.template(a(this.subTabEditTplSelector).html());this.baseEditTpl=_.template(a(this.baseEditTplSelector).html());this.feedSampleTpl=_.template(a(this.feedSampleTplSelector).html());this.render();Backbone.Events.on("tab:new",this.destroyView,this);this.model.on("save",this.destroyView,this)},initializeEvents:function(){this.events=this.genericEvents;this.delegateEvents()},genericEvents:{"change .wx-dialog-input":"next","change .wx-social-input":"next","keydown .wx-dialog-input":"hideValidateFeed","click .wx-finish-button":"finish","click .wx-next-button":"next","change .wx-content-radio":"contentChange"},render:function(){console.log("render");this.$el.html(this.baseEditTpl(this.model.toJSON()));this.$(".subtab").html(this.subTabEditTpl(this.model.toJSON()));this.$el.prepend("<form>");this.$el.append("</form>");this.startValidation();if(this.model.validateFeed){this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide();if(this.model.get("id")!==null){this.next()}}else{this.$(".wx-next-button").hide();if(!this.model.allowTitleEdit){this.$(".wx-edit-title-div").hide()}}var b=this.$el;meeeee=b;this.$el.on("opened",function(){b.foundation("section","reflow");var c=b.height();c-=115;if(c<315){c=315}b.find("div.content").height(c);b.find("input[type=text]:first").focus()});return this},startValidation:function(){if(undefined!==this.$("form").validate){this.$("form").validate()}},contentChange:function(b){this.hideValidateFeed()},setParentViewContainerId:function(b){this.parentContainerId=b},finish:function(){console.log("Finish clicked.");this.setModelFromView(this.model);this.setTitleFromView(this.model);this.setIconFromView(this.model);this.saveModel();this.$el.foundation("reveal","close");wx.rebuildApp()},next:function(){if(!this.model.validateFeed){return}console.log("next");this.$("#dialog-loader").show();if(undefined!==this.$("form")&&undefined!=this.$("form").validate){var b=this.$("form").validate();if(this.$("form").valid()){this.validateFeed()}else{alert("Error count: "+b.errorList.length)}}else{this.validateFeed()}},saveModel:function(){this.model.save()},setTitleFromView:function(b){if(b.allowTitleEdit&&this.$(".wx-edit-title")){b.set("title",this.$(".wx-edit-title").val())}return b},setIconFromView:function(b){b.set("icon_id",this.$('input:radio[name="wx-icon"]:checked').val());return b},setModelFromView:function(b){},validateFeed:function(){console.log("validate feed");var b=this;var c=this.getModelCopy();this.setModelFromView(c);this.getFeedSample(c,function(d){b.checkFeedSample(d)})},getModelCopy:function(){console.log("get model copy");var b=a.extend(true,{},this.model);return b},checkFeedSample:function(b){if(typeof b!="undefined"&&b.success&&typeof b.feed!="undefined"){this.$("#dialog-loader").hide();this.$(".wx-feed-error").hide();this.displayFeedSample(b);this.$(".wx-next-button").hide();this.$(".wx-finish-button").show();if(this.model.allowTitleEdit){this.$(".wx-edit-title-div").show()}}else{this.$(".wx-feed-error").show()}},displayFeedSample:function(b){var d=this;this.$(".wx-validate-feed").show();wx.log("displayFeedSample ***");wx.log(b);if(!b.feed.length){this.$(".wx-validate-feed").html("No content added yet?")}else{this.$(".wx-validate-feed").html("<ul></ul>");for(var c=0;c<b.feed.length;c++){this.$(".wx-validate-feed ul").append(d.feedSampleTpl(b.feed[c]))}}},hideValidateFeed:function(){this.$(".wx-feed-error").hide();this.$(".wx-validate-feed").html('<div class="panel wx-preview"><h3 class="wx-preview-msg">preview</h3></div>');this.$(".wx-next-button").show();this.$(".wx-finish-button").hide();this.$(".wx-edit-title-div").hide()},getFeedSample:function(b,d){console.log("get feed sample");var c=b.getAPIData();c.api_check=1;c.confirm_feed=1;a.ajax({url:wx.apiUrl+"validator/validate_feed?site_key="+wx.siteKey,datatype:"JSON",data:c,success:function(e){d(e)}})},destroyView:function(){this.undelegateEvents();this.$el.removeData().unbind()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookAlbumsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookalbums-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookEventsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookevents-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FacebookWallSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#facebookwall-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-social-input")){b.setConfig("user_id",this.$(".wx-social-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FlickrSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#flickr-subtab-edit-template",setModelFromView:function(c){c.set("content",this.$(".wx-content-radio:checked").val());var b=this.$(".wx-edit-input").val();b=b.replace(/\/$/,"");c.setConfig("url",b);c.setConfig("user_id",b);return c},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FormBuilderSubTabEditView=wxApp.SubTabEditView.extend({previewPaneSelector:".wx-form-builder-preview",subTabEditTplSelector:"#form-builder-subtab-edit-template",hasCalledFinish:false,finishView:null,initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)},initialize:function(){this.constructor.__super__.initialize.apply(this,arguments);console.log("FormBuilderSubTabEditView initialize");if(typeof this.model.get("config").formElements=="undefined"){this.model.get("config").formElements=new wxApp.FormBuilderCollection()}else{console.log(this.model.get("config").formElements);var d=JSON.parse(this.model.get("config").formElements);this.model.get("config").formElements=new wxApp.FormBuilderCollection();for(var c=0;c<d.length;c++){if(d[c].control==="div"){this.addInfoWithProperties(d[c])}else{if(d[c].control==="textarea"){this.addTextareaWithProperties(d[c])}else{if(d[c].control==="radiofieldset"){this.addRadioGroupWithProperties(d[c])}else{if(d[c].control==="checkboxfieldset"){this.addCheckboxGroupWithProperties(d[c])}else{if(d[c].control==="select"){this.addSelectWithProperties(d[c])}else{this.addInput(d[c])}}}}}}}if(typeof this.model.get("config").formActions=="undefined"){this.model.get("config").formActions=new Backbone.Collection()}else{console.log(this.model.get("config").formActions);var b=JSON.parse(this.model.get("config").formActions);this.model.get("config").formActions=new Backbone.Collection();for(var c=0;c<b.length;c++){if(b[c].method=="docusign"){this.addDocusignAction(null,b[c])}else{if(b[c].method=="post"){this.addPostAction(null,b[c])}else{if(b[c].method=="email"){this.addEmailAction(null,b[c])}}}}}if(typeof this.model.get("config").onUpload=="string"){this.model.get("config").onUpload=JSON.parse(this.model.get("config").onUpload)}},setModelFromView:function(b){return b},events:{"click .wx-form-builder-add-text-input":"addTextInput","click .wx-form-builder-add-password-input":"addPasswordInput","click .wx-form-builder-add-date-input":"addDateInput","click .wx-form-builder-add-datetime-local-input":"addDateTimeLocalInput","click .wx-form-builder-add-email-input":"addEmailInput","click .wx-form-builder-add-file-input":"addFileInput","click .wx-form-builder-add-month-input":"addMonthInput","click .wx-form-builder-add-number-input":"addNumberInput","click .wx-form-builder-add-tel-input":"addTelInput","click .wx-form-builder-add-time-input":"addTimeInput","click .wx-form-builder-add-url-input":"addUrlInput","click .wx-form-builder-add-radio-group":"addRadioGroup","click .wx-form-builder-add-checkbox-group":"addCheckboxGroup","click .wx-form-builder-add-textarea":"addTextarea","click .wx-form-builder-add-range-input":"addRangeInput","click .wx-form-builder-add-select":"addSelect","click .wx-form-builder-add-info":"addInfo","click .wx-form-builder-add-docusign-action":"addDocusignAction","click .wx-form-builder-add-post-action":"addPostAction","click .wx-form-builder-add-email-action":"addEmailAction","sortable-update":"sortableUpdate"},sortableUpdate:function(e,c,b){console.log("sortableUpdate");var d=this.model.get("config").formElements;d.remove(c);d.each(function(i,h){var g=h;if(h>=b){g+=1}i.set("ordinal",g)});c.set("ordinal",b);d.add(c,{at:b})},finish:function(){console.log("subtab.formbuilder.edit.finish()");console.log(this);var g=false,e=this.model.get("config").formElements,h=this.model.get("config").formActions,b=function(){this.finishView=new wxApp.FormBuilderFinishView({model:this.model});this.$(this.previewPaneSelector).append(this.finishView.render().el)};console.log(e);console.log(h);var c={};for(var d=0;d<e.length;d++){c=e.at(d);if("input"==c.get("control")&&"file"==c.get("attributes").get("type")){g=true;break}}if(!g||typeof this.model.get("config").idFieldIndex=="number"){this.constructor.__super__.finish.apply(this);return}if(typeof this.model.get("config").idFieldIndex!="number"&&!this.hasCalledFinish){b.apply(this);this.hasCalledFinish=true;return}if(this.hasCalledFinish){this.finishView.remove();b.apply(this)}},addDocusignAction:function(c,b){console.log("addDocusignAction");var d;if(typeof b!="undefined"){d=this.addCustomAction(b)}else{d=this.addCustomAction({method:"docusign"})}return d},addEmailAction:function(c,b){console.log("addEmailAction");var d;if(typeof b!="undefined"){d=this.addCustomAction(b)}else{d=this.addCustomAction({method:"email"})}return d},addPostAction:function(c,b){console.log("addPostAction");var d;if(typeof b!="undefined"){d=this.addCustomAction(b)}else{d=this.addCustomAction({method:"post"})}return d},addCustomAction:function(b){console.log("addCustomAction");var c=new wxApp.FormBuilderAction();if(typeof b=="object"){c.set(b)}var d=new wxApp.FormBuilderActionView({model:c});this.$(this.previewPaneSelector).append(d.render().el);this.model.get("config").formActions.push(c);return c},addInput:function(g){var e={};var d={};for(var h in g){if(h!="attributes"){e[h]=g[h]}else{for(var i in g[h]){d[i]=g[h][i]}}}var c=new wxApp.FormBuilderControlInput(e);c.get("attributes").set(d);var b=new wxApp.FormBuilderControlInputView({model:c});this.$(this.previewPaneSelector).append(b.render().el);this.model.get("config").formElements.push(c);return c},addDateInput:function(){this.addInput({label:"Date",attributes:{type:"date"}})},addDateTimeLocalInput:function(){this.addInput({label:"Date/Time",attributes:{type:"datetime-local"}})},addEmailInput:function(){this.addInput({label:"Email",showPlaceholder:true,multiClass:"",attributes:{type:"email"}})},addFileInput:function(){this.addInput({label:"File",multiClass:"",autocompleteClass:"hide",attributes:{type:"file",accept:"image/*"}})},addMonthInput:function(){this.addInput({label:"Month",attributes:{type:"month"}})},addNumberInput:function(){this.addInput({label:"Number",minClass:"",maxClass:"",stepClass:"",valueClass:"",attributes:{type:"number"}})},addPasswordInput:function(){this.addInput({label:"Password",attributes:{type:"password"}})},addRangeInput:function(){this.addInput({label:"Range",minClass:"",maxClass:"",stepClass:"",valueClass:"",attributes:{type:"range"}})},addTelInput:function(){this.addInput({label:"Telephone",showPlaceholder:true,attributes:{type:"tel"}})},addTextInput:function(){this.addInput({label:"Text",type:"text",showPlaceholder:true,valueType:"text",valueClass:"",attributes:{type:"text"}})},addTimeInput:function(){this.addInput({label:"Time",attributes:{type:"time"}})},addUrlInput:function(){this.addInput({label:"URL",showPlaceholder:true,attributes:{type:"url"}})},addInfo:function(b){this.addInfoWithProperties({})},addInfoWithProperties:function(c){var d=new wxApp.FormBuilderControlInfo(c);var b=new wxApp.FormBuilderControlInfoView({model:d});this.$(this.previewPaneSelector).append(b.render().el);this.model.get("config").formElements.push(d)},addTextarea:function(){this.addTextareaWithProperties({})},addTextareaWithProperties:function(b){var d=new wxApp.FormBuilderControlTextarea(b);var c=new wxApp.FormBuilderControlTextareaView({model:d});this.$(this.previewPaneSelector).append(c.render().el);this.model.get("config").formElements.push(d)},addRadioGroup:function(){this.addRadioGroupWithProperties({})},addRadioGroupWithProperties:function(d){var c=new wxApp.FormBuilderControlRadioFieldset(d);var h=new wxApp.FormBuilderControlRadioFieldsetView({model:c});this.$(this.previewPaneSelector).append(h.render().el);var g=new wxApp.FormBuilderControlRadioGroupView({collection:c.get("radioGroup")});h.$(".wx-form-builder-radio-fieldset").append(g.render().el);if(d.radioGroup==undefined||d.radioGroup.length==0){c.get("radioGroup").add(new wxApp.FormBuilderControlRadio())}else{for(var b=0;b<d.radioGroup.length;b++){var e=new wxApp.FormBuilderControlRadio(d.radioGroup[b]);c.get("radioGroup").add(e)}}this.model.get("config").formElements.push(c)},addCheckboxGroup:function(){this.addCheckboxGroupWithProperties({})},addCheckboxGroupWithProperties:function(d){var g=new wxApp.FormBuilderControlCheckboxFieldset(d);var h=new wxApp.FormBuilderControlCheckboxFieldsetView({model:g});this.$(this.previewPaneSelector).append(h.render().el);var c=new wxApp.FormBuilderControlCheckboxGroupView({collection:g.get("checkboxGroup")});h.$(".wx-form-builder-checkbox-fieldset").append(c.render().el);if(d.checkboxGroup==undefined||d.checkboxGroup.length==0){g.get("checkboxGroup").add(new wxApp.FormBuilderControlCheckbox())}else{for(var b=0;b<d.checkboxGroup.length;b++){var e=new wxApp.FormBuilderControlCheckbox(d.checkboxGroup[b]);g.get("checkboxGroup").add(e)}}this.model.get("config").formElements.push(g)},addSelect:function(){this.addSelectWithProperties({})},addSelectWithProperties:function(d){var b=new wxApp.FormBuilderControlSelect(d);var h=new wxApp.FormBuilderControlSelectView({model:b});this.$(this.previewPaneSelector).append(h.render().el);var g=new wxApp.FormBuilderControlOptionGroupView({collection:b.get("optionGroup")});h.$(".wx-form-builder-select").append(g.render().el);console.log(d);if(d.optionGroup==undefined||d.optionGroup.length==0){b.get("optionGroup").add(new wxApp.FormBuilderControlOption())}else{for(var c=0;c<d.optionGroup.length;c++){var e=new wxApp.FormBuilderControlOption(d.optionGroup[c]);b.get("optionGroup").add(e)}}this.model.get("config").formElements.push(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.FoursquarePhotosSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#foursquarephotos-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("venue_id",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.GoogleCalendarSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#googlecalendar-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("calendar_id",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabView=wxApp.TabView.extend({tagName:"li",className:"wx-ui-row",attributes:function(){return{id:this.model.get("id")+"SubtabID"}},initialize:function(){this.subTabTpl=_.template(a("#subtab-template").html());var b=this;this.model.on("save",function(){b.render()});this.model.on("destroy",function(){b.remove()});this.model.on("tab:move",function(){b.remove()})},events:{"click .wx-edit-link":"editSubTab","click .wx-subtab-delete":"confirmDeleteSubTab"},render:function(){this.$el.html(this.subTabTpl(this.model.toJSON()));this.$el.data("backbone-view",this);return this},editSubTab:function(d){d.preventDefault();var c=this.model.getModelName()+"EditView";if("SubTabEditView"!=c&&undefined!==wxApp[c]){var b=new wxApp[c]({model:this.model,el:"#wx-edit-area-"+this.model.get("id")})}else{throw new Error("Invalid edit type "+this.model.get("content")+"--"+c)}},confirmDeleteSubTab:function(b){b.preventDefault();if(confirm("Are you sure you want to delete this item?")){this.deleteSubTab()}},deleteSubTab:function(){this.model.destroy();wx.rebuildApp()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.PicasaAlbumsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#picasaalbums-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("user_id",this.$(".wx-edit-input").val());b.setConfig("email",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.r3sSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#r3s-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.RSSSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#rss-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TwitterSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#twitter-subtab-edit-template",contentChange:function(c){wxApp.SubTabEditView.prototype.contentChange.call(this,c);var d="Search Term";var b=this.$(".wx-content-radio:checked").val();if("twitterUser"===b){d="@MyTwitterHandle"}else{if("twitterHashTag"===b){d="#hashtag"}}a("#wx-twitter-input").attr("placeholder",d)},setModelFromView:function(b){var c=this.$(".wx-content-radio:checked").val();if("twitterUser"==c){b.setConfig("screen_name",this.$(".wx-edit-input").val());b.deleteConfig("q")}else{c="twitter";b.setConfig("q",this.$(".wx-edit-input").val());b.deleteConfig("screen_name")}try{b.set("content",c)}catch(d){}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.VimeoSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#vimeo-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressBlogSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressblog-subtab-edit-template",render:function(){wxApp.WordpressBlogSubTabEditView.__super__.render.call(this);var b=this.model.get("config").url;a(".wx-add-wordpress-blog-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-blog-select")){b.setConfig("url",this.$(".wx-add-wordpress-blog-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressCategorySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresscategory-subtab-edit-template",render:function(){wxApp.WordpressCategorySubTabEditView.__super__.render.call(this);var b=this.model.get("config").url;a(".wx-add-wordpress-category-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-category-select")){b.setConfig("url",this.$(".wx-add-wordpress-category-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressContactsSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresscontacts-subtab-edit-template",setModelFromView:function(d){var b={};if(this.$(".wx-contact-input-title")){d.set("title",this.$(".wx-contact-input-title").val())}if(this.$(".wx-contact-input-phone")){b.telephone=this.$(".wx-contact-input-phone").val()}if(this.$(".wx-contact-input-email")){b.email_to=this.$(".wx-contact-input-email").val()}if(this.$(".wx-contact-input-address")){b.address=this.$(".wx-contact-input-address").val()}if(this.$(".wx-contact-input-town")){b.town=this.$(".wx-contact-input-town").val()}if(this.$(".wx-contact-input-state")){b.state=this.$(".wx-contact-input-state").val()}if(this.$(".wx-contact-input-country")){b.country=this.$(".wx-contact-input-country").val()}b.googlemaps=(this.$(".wx-contact-input-googlemaps")&&this.$(".wx-contact-input-googlemaps").val()?1:0);b.emailform=(this.$(".wx-contact-input-emailform")&&this.$(".wx-contact-input-emailform").val()?1:0);if(this.$(".wx-contact-input-misc")){b.misc=this.$(".wx-contact-input-misc").val()}if(this.$(".wx-contact-input-image")){b.image=this.$(".wx-contact-input-image").val();b.showimage=(b.image.trim()?1:0)}var c={};var g=[];g.push(b);c.contacts=g;try{d.set("config_cache",c)}catch(h){}return d}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressDirectorySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressdirectory-subtab-edit-template",render:function(){wxApp.WordpressDirectorySubTabEditView.__super__.render.call(this);var b=this.model.get("config").url;a(".wx-add-wordpress-directory-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-directory-select")){b.setConfig("url",this.$(".wx-add-wordpress-directory-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressMapSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressmap-subtab-edit-template",render:function(){wxApp.WordpressMapSubTabEditView.__super__.render.call(this);var b=this.model.get("config").url;a(".wx-add-wordpress-map-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-map-select")){b.setConfig("url",this.$(".wx-add-wordpress-map-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressPageSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresspage-subtab-edit-template",render:function(){wxApp.WordpressPageSubTabEditView.__super__.render.call(this);var b=this.model.get("config").url;a(".wx-add-wordpress-page-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-page-select")){b.setConfig("url",this.$(".wx-add-wordpress-page-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressProximitySubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpressproximity-subtab-edit-template",render:function(){wxApp.WordpressProximitySubTabEditView.__super__.render.call(this);var b=this.model.get("config").url;a(".wx-add-wordpress-proximity-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-proximity-select")){b.setConfig("url",this.$(".wx-add-wordpress-proximity-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressSearchtermSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresssearchterm-subtab-edit-template",render:function(){var c=this.model.get("config").url;var d=c.indexOf("s=");var b=c.substr(d+2);this.model.get("config").search_value=_.unescape(b).replace("%20"," ");wxApp.WordpressSearchtermSubTabEditView.__super__.render.call(this)},setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-wordpress-siteurl").val()+"&s="+encodeURIComponent(this.$(".wx-edit-input").val()))}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WordpressTagSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wordpresstag-subtab-edit-template",render:function(){wxApp.WordpressTagSubTabEditView.__super__.render.call(this);var b=this.model.get("config").url;a(".wx-add-wordpress-tag-select").val(b)},setModelFromView:function(b){if(this.$(".wx-add-wordpress-tag-select")){b.setConfig("url",this.$(".wx-add-wordpress-tag-select").find(":selected").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.WufooSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#wufoo-subtab-edit-template",setModelFromView:function(b){if(this.$(".wx-edit-input")){b.setConfig("url",this.$(".wx-edit-input").val())}if(this.$(".wx-wufoo-api-key-input")){b.setConfig("apikey",this.$(".wx-wufoo-api-key-input").val())}return b}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.YoutubeSubTabEditView=wxApp.SubTabEditView.extend({subTabEditTplSelector:"#youtube-subtab-edit-template",setModelFromView:function(b){b.set("content",this.$(".wx-content-radio:checked").val());b.setConfig("url",this.$(".wx-edit-input").val());return b},initializeEvents:function(){this.events=_.extend({},this.genericEvents,this.events)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabsView=Backbone.View.extend({tagName:"ul",className:"list-items-sortable list-items list-sub-items",attributes:function(){return{id:"listItemsSortable"+this.model.get("id")}},initialize:function(){var b=this;this.model.get("subTabs").bind("add",b.addSubTab,b);Backbone.Events.on("tab:dropped",this.cancelSort,this)},events:{},render:function(){this.$el.html("");this.startSortable();if(this.model.getSubTabs().length){var b=this;this.model.getSubTabs().forEach(function(c){b.addSubTab(c)})}return this},addSubTab:function(d){var c=this;var b=new wxApp.SubTabView({model:d});this.$el.append(b.render().el);d.on("destroy",function(){c.deleteSubTab(this)});this.refreshSortable()},startSortable:function(){var b=this;if(undefined!=this.$el.sortable){this.$el.sortable({start:function(c,d){console.log("trigger dragstart");Backbone.Events.trigger("subtab:dragstart")},stop:function(c,d){console.log("trigger dragstop");Backbone.Events.trigger("subtab:dragstop")},update:function(d,e){console.log("update");var c=String(a(this).sortable("toArray").map(function(g){return g.replace("SubtabID","")}));wx.makeApiCall("tabs/sort_tabs",{order:c},function(){b.setSubTabCollectionOrder(c.split(","));var g=c.split(",")[0];var h=a(e.item).data("backbone-view").model.get("parent_id");if(h!=g){Backbone.Events.trigger("tab:id-update",h,g)}})},helper:"clone",cursor:"move",handle:".wx-subtab-movehandle",cursorAt:{top:0,left:0}})}},setSubTabCollectionOrder:function(b){this.model.get("subTabs").comparator=function(c){return b.indexOf(String(c.get("id")))};this.model.get("subTabs").sort()},refreshSortable:function(){if(undefined!=this.$el.sortable){this.$el.sortable("refresh")}},cancelSort:function(b){var c=this;if(undefined!=this.$el.sortable&&b==this.model.get("id")){c.$el.sortable("cancel")}},deleteSubTab:function(b){this.model.deleteSubTab(b)}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.SubTabsContainerView=Backbone.View.extend({tagName:"div",tabView:false,initialize:function(){var b=this;this.subTabContainerTpl=_.template(a("#subtab-container-template").html());this.subTabsView=new wxApp.SubTabsView({model:this.model});this.subTabsView.on("delete",function(){b.model.destroy();b.remove()});this.containerEditContentTpl=_.template(a("#ContainerEditContent").html());this.containerEditView=new wxApp.ContainerEditView({model:this.model});this.model.on("change",this.render,this)},events:{"click #ContainerEditLink":"openEditModal","click .wx-delete-container":"confirmDelete","click .wx-layout-selector":"selectLayout"},render:function(){this.$el.html(this.subTabContainerTpl(this.model.toJSON()));this.$("#ContainerEditModal").html(this.containerEditContentTpl(this.model.toJSON()));this.$(".adminlist").append(this.subTabsView.render().el);this.$el.attr("id",this.model.get("id")+"Tab");return this},openEditModal:function(){console.log("editing container...");this.containerEditView=new wxApp.ContainerEditView({model:this.model});this.$("#ContainerEditModal").html(this.containerEditView.render().el);this.$(".section-container").foundation("section","reflow")},selectLayout:function(g){var c=a(g.currentTarget);a(".wx-layout-selector").addClass("secondary");c.removeClass("secondary");var b=c.attr("id");b=b.replace("layout-","");if(b==="classic"){b=null}var d=this;wx.makeApiCall("tabs/set_tabLayout",{tab_id:this.model.get("id"),tabLayout:b},function(){console.log("Layout Saved");d.model.set("tabLayout",b);wx.rebuildApp()})},confirmDelete:function(b){b.preventDefault();if(confirm("Are you sure you want to delete this item, including all of the sub-tabs?")){this.deleteContainer()}},deleteContainer:function(){this.model.destroy();wx.rebuildApp()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabView=Backbone.View.extend({tagName:"div",className:"wx-tab",subTabsContainerView:false,initialize:function(){this.tabTpl=_.template(a("#tab-template").html());this.model.bind("change",this.render,this);this.model.bind("destroy",this.destroyView,this);Backbone.Events.on("tab:id-update",this.updateTabId,this)},events:{click:"editAll"},render:function(){this.$el.html(this.tabTpl(this.model.toJSON()));this.loadIcon();if(undefined!==this.$el.droppable){this.$el.droppable({accept:".list-sub-items li, .list-add-content-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer",greedy:true})}this.$el.data("backbone-view",this);this.$el.addClass(this.model.get("id"));this.$el.attr("id",this.model.get("id")+"TabID");return this},onDrop:function(h,i){console.log("onDrop");var g=a(this).data("backbone-view");var e=a(i.draggable).data("backbone-view");console.log(e.model.get("parent_id"));if(i.draggable.hasClass("wx-add-feature")){var c=i.draggable.attr("id").replace("add-","");var b=g.model.get("id");wxApp.appView.createFeatureView(c,b)}else{Backbone.Events.trigger("tab:dropped",e.model.get("parent_id"));if(e.model.get("parent_id")!=g.model.get("id")){wx.makeApiCall("tabs/set_parent_id",{tab_id:e.model.get("id"),parent_id:g.model.get("id")},function(){e.model.trigger("tab:move");g.model.addSubTab(e.model);a("#"+g.model.get("id")+"TabID").click()})}}Backbone.Events.trigger("subtab:dragstop");var d=a("style")[a("style").length-1];if(d.innerHTML.indexOf("*{ cursor")==0){d.remove()}},editAll:function(){a('a[href="#panel2"]').click();a(".wx-tab button").addClass("secondary");a("div."+this.model.get("id")+" button").removeClass("secondary");this.subTabsContainerView=new wxApp.SubTabsContainerView({model:this.model});this.subTabsContainerView.tabView=this;a("#editSpace").html(this.subTabsContainerView.render().el)},updateTabId:function(b,c){if(b==this.model.get("id")){this.model.getSubTabs().forEach(function(d){d.set("parent_id",c)});this.model.set("id",c)}},loadIcon:function(){},destroyView:function(){wx.log("destroying tab view");if(this.subTabsContainerView){this.subTabsContainerView.remove()}this.remove()}})})(jQuery);wxApp=wxApp||{};(function(a){wxApp.TabsView=Backbone.View.extend({initialize:function(){this.collection.bind("add",this.addOne,this);this.collection.bind("remove",this.removeOne,this);Backbone.Events.on("tab:new",this.addNewlyCreatedTab,this);this.startTabs();this.startSortable();this.startDroppable();this.refreshUiTabs()},addOne:function(c){wx.log("addOne called");var d=this;var b=new wxApp.TabView({model:c});this.$el.append(b.render().el);b.subTabsContainerView=new wxApp.SubTabsContainerView({model:c});b.subTabsContainerView.tabView=b;c.on("destroy",function(e){wx.log("removing tab from collection");d.removeTabFromCollection(e)});c.on("change",this.refreshUiTabs,this);a("#listTabs").append(b.subTabsContainerView.render().el);this.refreshUiTabs()},startTabs:function(){if(undefined!=a("#listTabs").tabs){a("#listTabs").tabs({select:function(c,b){jQuery("#wxuia-header-parentMenu li").removeClass("wxuia-selected");if(b.tab.href.indexOf("addTab")!=-1){jQuery("#addtabspan").show();jQuery("#addtabspan").css("display","block");jQuery("#edittabspan").hide();jQuery("#wxuia-header-parentMenu li:first").addClass("wxuia-selected")}else{jQuery("#addtabspan").hide();jQuery("#edittabspan").show();jQuery("#edittabspan").css("display","block");jQuery("#wxuia-header-parentMenu li:nth-child(2)").addClass("wxuia-selected")}}})}},startSortable:function(){var b=this;if(undefined!=this.$el.sortable){this.$el.sortable({axis:"x",cancel:".wx-nosort",placeholder:"wx-tab",update:function(d,e){var c=a(this).sortable("toArray");c=a.map(c,function(h){var g=h.toLowerCase().replace("tabid","");if(a.isNumeric(g)){return g}else{return null}});wx.makeApiCall("tabs/sort_tabs",{order:String(c)},function(){});if(a(e.item).attr("rel")!="unpublished"){a(e.item).removeAttr("style")}else{a(e.item).attr("style","float:right;")}}})}},refreshUiTabs:function(){if(undefined!=a("#listTabs").tabs){a("#listTabs").tabs("refresh")}},removeOne:function(b){wx.log("removeOne called (tabs view)");a("#listTabs").tabs("refresh")},addNewlyCreatedTab:function(b){console.log("addNewlyCreatedTab");console.log(b.get("parent_id"));if(b.get("parent_id")){this.addNewSubTab(b)}else{this.addNewMainTab(b)}},addNewMainTab:function(b){console.log("addNewMainTab");var c=new wxApp.Tab(b.getAPIData());c.addSubTab(b);wxApp.Tabs.add(c)},addNewSubTab:function(b){console.log("addNewSubTab");var c=wxApp.Tabs.get(b.get("parent_id"));if(c){c.addSubTab(b)}else{throw new Error("No main tab with id"+b.get("parent_id"))}},addTabToCollection:function(b){wxApp.Tabs.add(b)},removeTabFromCollection:function(b){wxApp.Tabs.remove(b)}});wxApp.BuildTabsView=wxApp.TabsView.extend({el:"#buildListTabsSortable",startDroppable:function(){}});wxApp.EditTabsView=wxApp.TabsView.extend({el:"#editListTabsSortable",startDroppable:function(){console.log("Drop it like it's hot.");this.$el.droppable({accept:".list-sub-items li, .list-add-content-items li",hoverClass:"hover",drop:this.onDrop,tolerance:"pointer"})},onDrop:function(e,g){console.log("onDrop");var d=a(this).data("backbone-view");var c=a(g.draggable).data("backbone-view");console.log(c.model.get("parent_id"));console.log(c.model.get("id"));Backbone.Events.trigger("tab:dropped",c.model.get("parent_id"));wx.makeApiCall("tabs/set_parent_id",{tab_id:c.model.get("id"),parent_id:0},function(){c.model.trigger("tab:move");wxApp.EditTabsView.__super__.addNewMainTab.call(this,c.model);a("#"+c.model.get("id")+"TabID").click()});Backbone.Events.trigger("subtab:dragstop");var b=a("style")[a("style").length-1];if(b.innerHTML.indexOf("*{ cursor")==0){b.remove()}}});wxApp.buildTabsView=new wxApp.BuildTabsView({collection:wxApp.Tabs});wxApp.editTabsView=new wxApp.EditTabsView({collection:wxApp.Tabs});wxApp.Tabs.fetch()})(jQuery);